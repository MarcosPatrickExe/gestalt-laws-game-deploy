/*! For license information please see 2.2600eea9.chunk.js.LICENSE.txt */
(this["webpackJsonpgestalt-laws-game"]=this["webpackJsonpgestalt-laws-game"]||[]).push([[2],[function(t,e,n){"use strict";t.exports=n(44)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";t.exports=n(39)},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return s}));var o=n(10);function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?Object(o.a)(t):e}function s(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return u}));var r=n(3),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};function o(t){return a(void 0,t)}function a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=a(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function u(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function c(){return"object"===typeof self&&self.self===self}var l=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,h.prototype.create),o}return Object(r.c)(e,t),e}(Error),h=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?f(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new l(i,s,r);return u},t}();function f(t,e){return t.replace(d,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var d=/\{\$([^}]+)}/g;function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function g(t,e){var n=new y(t,e);return n.subscribe.bind(n)}var y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=v),void 0===r.error&&(r.error=v),void 0===r.complete&&(r.complete=v);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function v(){}}).call(this,n(12))},,function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){t.exports=n(52)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},,,,function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){(function(e,n){t.exports=function(){"use strict";!function(t){var e,n,r,i,o,a,s,u,c,l;function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t?String(t):t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function g(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function v(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(r&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(i&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(o&&r&&s(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t,e,n=g(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,n=y(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n,r=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(t=(n=e.method||this.method||"GET").toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){var n;t&&(t=(n=t.split("=")).shift().replace(/\+/g," "),n=n.join("=").replace(/\+/g," "),e.append(decodeURIComponent(t),decodeURIComponent(n)))})),e}function E(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,(o="ArrayBuffer"in t)&&(a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<a.indexOf(Object.prototype.toString.call(t))}),p.prototype.append=function(t,e){t=h(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},p.prototype.delete=function(t){delete this.map[h(t)]},p.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},p.prototype.set=function(t,e){this.map[h(t)]=f(e)},p.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),d(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),d(t)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t},l=[301,302,303,307,308],E.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=p,t.Request=w,t.Response=E,t.fetch=function(t,e){return new Promise((function(n,i){var o=new w(t,e),a=new XMLHttpRequest;a.onload=function(){var t,e={status:a.status,statusText:a.statusText,headers:(r=a.getAllResponseHeaders()||"",t=new p,r.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":");(e=n.shift().trim())&&(n=n.join(":").trim(),t.append(e,n))})),t)};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new E(r,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function r(t){var e={exports:{}};return t(e,e.exports),e.exports}function i(t){try{return!!t()}catch(t){return!0}}function o(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function a(t){return w.call(t).slice(8,-1)}function s(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return E(s(t))}function c(t){return"object"==typeof t?null!==t:"function"==typeof t}function l(t,e){if(!c(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!c(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function h(t){return Object(s(t))}function f(t){return k?S.createElement(t):{}}function d(t){if(!c(t))throw TypeError(String(t)+" is not an object");return t}function p(e,n){try{D(g,e,n)}catch(t){g[e]=n}return n}var g=(X=function(t){return t&&t.Math==Math&&t})("object"==typeof globalThis&&globalThis)||X("object"==typeof window&&window)||X("object"==typeof self&&self)||X("object"==typeof t&&t)||function(){return this}()||Function("return this")(),y=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),v={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,b={f:m&&!v.call({1:2},1)?function(t){return!!(t=m(this,t))&&t.enumerable}:v},w={}.toString,_="".split,E=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?_.call(t,""):Object(t)}:Object,T={}.hasOwnProperty,I=Object.hasOwn||function(t,e){return T.call(h(t),e)},S=g.document,k=c(S)&&c(S.createElement),C=!y&&!i((function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a})),N=Object.getOwnPropertyDescriptor,A={f:y?N:function(t,e){if(t=u(t),e=l(e,!0),C)try{return N(t,e)}catch(t){}if(I(t,e))return o(!b.f.call(t,e),t[e])}},R=Object.defineProperty,x={f:y?R:function(t,e,n){if(d(t),e=l(e,!0),d(n),C)try{return R(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},D=y?function(t,e,n){return x.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t},O=g[Ne="__core-js_shared__"]||p(Ne,{}),P=Function.toString;function L(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+Y).toString(36)}"function"!=typeof O.inspectSource&&(O.inspectSource=function(t){return P.call(t)});var M,F,j,U,V,q,B,z,K=O.inspectSource,H="function"==typeof(xt=g.WeakMap)&&/native code/.test(K(xt)),W=!1,G=r((function(t){(t.exports=function(t,e){return O[t]||(O[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),Q=0,Y=Math.random(),$=G("keys"),X=function(t){return $[t]||($[t]=L(t))},J={},Z="Object already initialized";function tt(t){return"function"==typeof t?t:void 0}function et(t,e){return arguments.length<2?tt(ft[t])||tt(g[t]):ft[t]&&ft[t][e]||g[t]&&g[t][e]}function nt(t){return isNaN(t=+t)?0:(0<t?pt:dt)(t)}function rt(t){return 0<t?gt(nt(t),9007199254740991):0}function it(t,e){var n,r=u(t),i=0,o=[];for(n in r)!I(J,n)&&I(r,n)&&o.push(n);for(;e.length>i;)I(r,n=e[i++])&&(~mt(o,n)||o.push(n));return o}function ot(t,e){for(var n=Tt(e),r=x.f,i=A.f,o=0;o<n.length;o++){var a=n[o];I(t,a)||r(t,a,i(e,a))}}function at(t,e){var n,r,i,o=t.target,a=t.global,s=t.stat,u=a?g:s?g[o]||p(o,{}):(g[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Rt(u,n))&&i.value:u[n],!At(a?n:o+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;ot(r,i)}(t.sham||i&&i.sham)&&D(r,"sham",!0),ht(u,n,r,t)}}function st(){}function ut(t){return"<script>"+t+"</"+Vt+">"}t=g.WeakMap,B=H||O.state?(M=O.state||(O.state=new t),F=M.get,j=M.has,U=M.set,V=function(t,e){if(j.call(M,t))throw new TypeError(Z);return e.facade=t,U.call(M,t,e),e},q=function(t){return F.call(M,t)||{}},function(t){return j.call(M,t)}):(z=X("state"),J[z]=!0,V=function(t,e){if(I(t,z))throw new TypeError(Z);return e.facade=t,D(t,z,e),e},q=function(t){return I(t,z)?t[z]:{}},function(t){return I(t,z)});var ct,lt={set:V,get:q,has:B,enforce:function(t){return B(t)?q(t):V(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=q(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},ht=r((function(t){var e=lt.get,n=lt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||I(i,"name")||D(i,"name",e),(o=n(i)).source||(o.source=r.join("string"==typeof e?e:""))),t!==g?(a?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=i:D(t,e,i)):s?t[e]=i:p(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||K(this)}))})),ft=g,dt=Math.ceil,pt=Math.floor,gt=Math.min,yt=Math.max,vt=Math.min,mt=((v=function(t){return function(e,n,r){var i,o=u(e),a=rt(o.length),s=function(t,e){return(t=nt(t))<0?yt(t+e,0):vt(t,e)}(r,a);if(t&&n!=n){for(;s<a;)if((i=o[s++])!=i)return!0}else for(;s<a;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}})(!0),v(!1)),bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wt=bt.concat("length","prototype"),_t={f:Object.getOwnPropertyNames||function(t){return it(t,wt)}},Et={f:Object.getOwnPropertySymbols},Tt=et("Reflect","ownKeys")||function(t){var e=_t.f(d(t)),n=Et.f;return n?e.concat(n(t)):e},It=/#|\.prototype\./,St=(Ne=function(t,e){return(t=kt[St(t)])==Nt||t!=Ct&&("function"==typeof e?i(e):!!e)}).normalize=function(t){return String(t).replace(It,".").toLowerCase()},kt=Ne.data={},Ct=Ne.NATIVE="N",Nt=Ne.POLYFILL="P",At=Ne,Rt=A.f,xt=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Dt=X("IE_PROTO"),Ot=Object.prototype,Pt=xt?Object.getPrototypeOf:function(t){return t=h(t),I(t,Dt)?t[Dt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ot:null},Lt=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,r){return d(n),function(t){if(!c(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Mt=Object.keys||function(t){return it(t,bt)},Ft=y?Object.defineProperties:function(t,e){d(t);for(var n,r=Mt(e),i=r.length,o=0;o<i;)x.f(t,n=r[o++],e[n]);return t},jt=et("document","documentElement"),Ut="prototype",Vt="script",qt=X("IE_PROTO"),Bt=function(){try{ct=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;Bt=ct?function(t){t.write(ut("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ct):((t=f("iframe")).style.display="none",jt.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ut("document.F=Object")),t.close(),t.F);for(var e=bt.length;e--;)delete Bt[Ut][bt[e]];return Bt()};J[qt]=!0;var zt=Object.create||function(t,e){var n;return null!==t?(st[Ut]=d(t),n=new st,st[Ut]=null,n[qt]=t):n=Bt(),void 0===e?n:Ft(n,e)};function Kt(t){return I($t,t)&&(Yt||"string"==typeof $t[t])||(Yt&&I(Xt,t)?$t[t]=Xt[t]:$t[t]=Jt("Symbol."+t)),$t[t]}function Ht(t){return void 0!==t&&(Zt.Array===t||ee[te]===t)}function Wt(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Gt(t,e,n){if(Wt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}H=et("navigator","userAgent")||"",v=(t=g.process)&&t.versions,(Ne=v&&v.v8)?De=(xe=Ne.split("."))[0]<4?1:xe[0]+xe[1]:H&&(!(xe=H.match(/Edge\/(\d+)/))||74<=xe[1])&&(xe=H.match(/Chrome\/(\d+)/))&&(De=xe[1]);var Qt=De&&+De,Yt=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Qt&&Qt<41})),$t=(xt=Yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,G("wks")),Xt=g.Symbol,Jt=xt?Xt:Xt&&Xt.withoutSetter||L,Zt={},te=Kt("iterator"),ee=Array.prototype;function ne(t){if(null!=t)return t[ce]||t["@@iterator"]||Zt[ue(t)]}function re(t){var e=t.return;return void 0!==e&&d(e.call(t)).value}function ie(t,e){this.stopped=t,this.result=e}function oe(t,e,n){function r(t){return o&&re(o),new ie(!0,t)}function i(t){return f?(d(t),g?y(t[0],t[1],r):y(t[0],t[1])):g?y(t,r):y(t)}var o,a,s,u,c,l,h=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),g=!(!n||!n.INTERRUPTED),y=Gt(e,h,1+f+g);if(p)o=t;else{if("function"!=typeof(p=ne(t)))throw TypeError("Target is not iterable");if(Ht(p)){for(a=0,s=rt(t.length);a<s;a++)if((u=i(t[a]))&&u instanceof ie)return u;return new ie(!1)}o=p.call(t)}for(c=o.next;!(l=c.call(o)).done;){try{u=i(l.value)}catch(t){throw re(o),t}if("object"==typeof u&&u&&u instanceof ie)return u}return new ie(!1)}(t={})[Kt("toStringTag")]="z",v="[object z]"===String(t);var ae=Kt("toStringTag"),se="Arguments"==a(function(){return arguments}()),ue=v?a:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ae))?t:se?a(e):"Object"==(t=a(e))&&"function"==typeof e.callee?"Arguments":t},ce=Kt("iterator"),le=function t(e,n){var r=this;return r instanceof t?(Lt&&(r=Lt(new Error(void 0),Pt(r))),void 0!==n&&D(r,"message",String(n)),oe(e,(n=[]).push,{that:n}),D(r,"errors",n),r):new t(e,n)};function he(t,e,n){for(var r in e)ht(t,r,e[r],n);return t}function fe(t,e,n){t&&!I(t=n?t:t.prototype,ve)&&ye(t,ve,{configurable:!0,value:e})}function de(t){var e=et(t);t=x.f,y&&e&&!e[me]&&t(e,me,{configurable:!0,get:function(){return this}})}function pe(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}le.prototype=zt(Error.prototype,{constructor:o(5,le),message:o(5,""),name:o(5,"AggregateError")}),at({global:!0},{AggregateError:le}),v||ht(Object.prototype,"toString",v?{}.toString:function(){return"[object "+ue(this)+"]"},{unsafe:!0});var ge=g.Promise,ye=x.f,ve=Kt("toStringTag"),me=Kt("species"),be=Kt("iterator"),we=!1;try{var _e=0;(je={next:function(){return{done:!!_e++}},return:function(){we=!0}})[be]=function(){return this},Array.from(je,(function(){throw 2}))}catch(Ba){}function Ee(t,e){if(!e&&!we)return!1;var n=!1;try{var r={};r[be]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Te(t,e){var n;return void 0===(t=d(t).constructor)||null==(n=d(t)[Ce])?e:Wt(n)}function Ie(t){var e;Me.hasOwnProperty(t)&&(e=Me[t],delete Me[t],e())}function Se(t){return function(){Ie(t)}}var ke,Ce=Kt("species"),Ne=/(?:iphone|ipod|ipad).*applewebkit/i.test(H),Ae="process"==a(g.process),Re=g.location,xe=g.setImmediate,De=g.clearImmediate,Oe=g.process,Pe=(t=g.MessageChannel,g.Dispatch),Le=0,Me={},Fe="onreadystatechange",je=(v=function(t){Ie(t.data)},function(t){g.postMessage(t+"",Re.protocol+"//"+Re.host)});xe&&De||(xe=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return Me[++Le]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},ke(Le),Le},De=function(t){delete Me[t]},Ae?ke=function(t){Oe.nextTick(Se(t))}:Pe&&Pe.now?ke=function(t){Pe.now(Se(t))}:t&&!Ne?(Ge=(t=new t).port2,t.port1.onmessage=v,ke=Gt(Ge.postMessage,Ge,1)):g.addEventListener&&"function"==typeof postMessage&&!g.importScripts&&Re&&"file:"!==Re.protocol&&!i(je)?(ke=je,g.addEventListener("message",v,!1)):ke=Fe in f("script")?function(t){jt.appendChild(f("script"))[Fe]=function(){jt.removeChild(this),Ie(t)}}:function(t){setTimeout(Se(t),0)});var Ue,Ve,qe,Be,ze,Ke,He,We,Ge={set:xe,clear:De},Qe=(je=/web0s(?!.*chrome)/i.test(H),v=A.f,Ge.set),Ye=(xe=g.MutationObserver||g.WebKitMutationObserver,De=g.document,g.process);function $e(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Wt(e),this.reject=Wt(n)}function Xe(t,e){return d(t),c(e)&&e.constructor===t?e:((0,(t=ln.f(t)).resolve)(e),t.promise)}function Je(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function Ze(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e}function tn(t,e){var n;t.notified||(t.notified=!0,n=t.reactions,cn((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(i||(2===t.rejection&&Rn(t),t.rejection=1),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),u=!0)),a===c.promise?f(bn("Promise-chain cycle")):(s=Ze(a))?s.call(a,h,f):h(a)):f(r)}catch(r){d&&!u&&d.exit(),f(r)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Nn(t)})))}function en(t,e,n){var r,i;In?((r=wn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),g.dispatchEvent(r)):r={promise:e,reason:n},!Sn&&(i=g["on"+t])?i(r):t===kn&&function(t,e){var n=g.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function nn(t,e,n){return function(r){t(e,r,n)}}function rn(t,e,n){t.done||(t.done=!0,(t=n||t).value=e,t.state=2,tn(t,!0))}H=g.Promise,(v=(v=v(g,"queueMicrotask"))&&v.value)||(Ue=function(){var t,e;for(Ae&&(t=Ye.domain)&&t.exit();Ve;){e=Ve.fn,Ve=Ve.next;try{e()}catch(t){throw Ve?Be():qe=void 0,t}}qe=void 0,t&&t.enter()},Be=Ne||Ae||je||!xe||!De?H&&H.resolve?((He=H.resolve(void 0)).constructor=H,We=He.then,function(){We.call(He,Ue)}):Ae?function(){Ye.nextTick(Ue)}:function(){Qe.call(g,Ue)}:(ze=!0,Ke=De.createTextNode(""),new xe(Ue).observe(Ke,{characterData:!0}),function(){Ke.data=ze=!ze}));var on,an,sn,un,cn=v||function(t){t={fn:t,next:void 0},qe&&(qe.next=t),Ve||(Ve=t,Be()),qe=t},ln={f:function(t){return new $e(t)}},hn="object"==typeof window,fn=Ge.set,dn=Kt("species"),pn="Promise",gn=lt.get,yn=lt.set,vn=lt.getterFor(pn),mn=(De=ge&&ge.prototype,ge),bn=(xe=De,g.TypeError),wn=g.document,_n=g.process,En=ln.f,Tn=En,In=!!(wn&&wn.createEvent&&g.dispatchEvent),Sn="function"==typeof PromiseRejectionEvent,kn="unhandledrejection",Cn=!1,Nn=(Ge=(v=At(pn,(function(){var t=K(mn)!==String(mn);if(!t&&66===Qt)return!0;if(51<=Qt&&/native code/.test(mn))return!1;function e(t){t((function(){}),(function(){}))}var n=new mn((function(t){t(1)}));return(n.constructor={})[dn]=e,!(Cn=n.then((function(){}))instanceof e)||!t&&hn&&!Sn})))||!Ee((function(t){mn.all(t).catch((function(){}))})),function(t){fn.call(g,(function(){var e,n=t.facade,r=t.value;if(An(t)&&(e=Je((function(){Ae?_n.emit("unhandledRejection",r,n):en(kn,n,r)})),t.rejection=Ae||An(t)?2:1,e.error))throw e.value}))}),An=function(t){return 1!==t.rejection&&!t.parent},Rn=function(t){fn.call(g,(function(){var e=t.facade;Ae?_n.emit("rejectionHandled",e):en("rejectionhandled",e,t.value)}))},xn=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw bn("Promise can't be resolved itself");var i=Ze(n);i?cn((function(){var r={done:!1};try{i.call(n,nn(t,r,e),nn(rn,r,e))}catch(n){rn(r,n,e)}})):(e.value=n,e.state=1,tn(e,!1))}catch(n){rn({done:!1},n,e)}}};if(v&&(xe=(mn=function(t){pe(this,mn,pn),Wt(t),on.call(this);var e=gn(this);try{t(nn(xn,e),nn(rn,e))}catch(t){rn(e,t)}}).prototype,(on=function(t){yn(this,{type:pn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=he(xe,{then:function(t,e){var n=vn(this),r=En(Te(this,mn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ae?_n.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&tn(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),an=function(){var t=new on,e=gn(t);this.promise=t,this.resolve=nn(xn,e),this.reject=nn(rn,e)},ln.f=En=function(t){return t===mn||t===sn?new an:Tn(t)},"function"==typeof ge&&De!==Object.prototype)){un=De.then,Cn||(ht(De,"then",(function(t,e){var n=this;return new mn((function(t,e){un.call(n,t,e)})).then(t,e)}),{unsafe:!0}),ht(De,"catch",xe.catch,{unsafe:!0}));try{delete De.constructor}catch(Ba){}Lt&&Lt(De,xe)}at({global:!0,wrap:!0,forced:v},{Promise:mn}),fe(mn,pn,!1),de(pn),sn=et(pn),at({target:pn,stat:!0,forced:v},{reject:function(t){var e=En(this);return e.reject.call(void 0,t),e.promise}}),at({target:pn,stat:!0,forced:v},{resolve:function(t){return Xe(this,t)}}),at({target:pn,stat:!0,forced:Ge},{all:function(t){var e=this,n=En(e),r=n.resolve,i=n.reject,o=Je((function(){var n=Wt(e.resolve),o=[],a=0,s=1;oe(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=En(e),r=n.reject,i=Je((function(){var i=Wt(e.resolve);oe(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),at({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=ln.f(e),r=n.resolve,i=n.reject,o=Je((function(){var n=Wt(e.resolve),i=[],o=0,a=1;oe(t,(function(t){var s=o++,u=!1;i.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){u||(u=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var Dn="No one promise resolved";at({target:"Promise",stat:!0},{any:function(t){var e=this,n=ln.f(e),r=n.resolve,i=n.reject,o=Je((function(){var n=Wt(e.resolve),o=[],a=0,s=1,u=!1;oe(t,(function(t){var c=a++,l=!1;o.push(void 0),s++,n.call(e,t).then((function(t){l||u||(u=!0,r(t))}),(function(t){l||u||(l=!0,o[c]=t,--s||i(new(et("AggregateError"))(o,Dn)))}))})),--s||i(new(et("AggregateError"))(o,Dn))}));return o.error&&i(o.value),n.promise}}),at({target:"Promise",proto:!0,real:!0,forced:De=!!ge&&i((function(){ge.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Te(this,et("Promise")),n="function"==typeof t;return this.then(n?function(n){return Xe(e,t()).then((function(){return n}))}:t,n?function(n){return Xe(e,t()).then((function(){throw n}))}:t)}}),"function"==typeof ge&&(Cr=et("Promise").prototype.finally,ge.prototype.finally!==Cr&&ht(ge.prototype,"finally",Cr,{unsafe:!0})),v={codeAt:(xe=function(t){return function(e,n){var r,i=String(s(e)),o=nt(n);return e=i.length,o<0||e<=o?t?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===e||(r=i.charCodeAt(o+1))<56320||57343<r?t?i.charAt(o):n:t?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}})(!1),charAt:xe(!0)};var On,Pn=Kt("iterator");function Ln(){return this}function Mn(){return this}function Fn(t,e,n,r,i,a,s){function u(t){if(t===i&&g)return g;if(!Vn&&t in d)return d[t];switch(t){case"keys":case Bn:case zn:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator",t.prototype=zt(jn,{next:o(1,n)}),fe(t,e,!1),Zt[e]=Ln}(n,e,r);var c,l,h=e+" Iterator",f=!1,d=t.prototype,p=d[qn]||d["@@iterator"]||i&&d[i],g=!Vn&&p||u(i);if((r="Array"==e&&d.entries||p)&&(t=Pt(r.call(new t)),Un!==Object.prototype&&t.next&&(Pt(t)!==Un&&(Lt?Lt(t,Un):"function"!=typeof t[qn]&&D(t,qn,Mn)),fe(t,h,!0))),i==Bn&&p&&p.name!==Bn&&(f=!0,g=function(){return p.call(this)}),d[qn]!==g&&D(d,qn,g),Zt[e]=g,i)if(c={values:u(Bn),keys:a?g:u("keys"),entries:u(zn)},s)for(l in c)!Vn&&!f&&l in d||ht(d,l,c[l]);else at({target:e,proto:!0,forced:Vn||f},c);return c}Ge=!1,[].keys&&("next"in(Ir=[].keys())?(li=Pt(Pt(Ir)))!==Object.prototype&&(On=li):Ge=!0),De=null==On||i((function(){var t={};return On[Pn].call(t)!==t})),I(On=De?{}:On,Pn)||D(On,Pn,(function(){return this}));var jn=(Cr={IteratorPrototype:On,BUGGY_SAFARI_ITERATORS:Ge}).IteratorPrototype,Un=Cr.IteratorPrototype,Vn=Cr.BUGGY_SAFARI_ITERATORS,qn=Kt("iterator"),Bn="values",zn="entries",Kn=v.charAt,Hn="String Iterator",Wn=lt.set,Gn=lt.getterFor(Hn);Fn(String,"String",(function(t){Wn(this,{type:Hn,string:String(t),index:0})}),(function(){var t=Gn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Kn(e,n),t.index+=n.length,{value:n,done:!1})}));var Qn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Yn=Kt("unscopables"),$n=Array.prototype;null==$n[Yn]&&x.f($n,Yn,{configurable:!0,value:zt(null)}),xe=function(t){$n[Yn][t]=!0};var Xn="Array Iterator",Jn=lt.set,Zn=lt.getterFor(Xn),tr=Fn(Array,"Array",(function(t,e){Jn(this,{type:Xn,target:u(t),index:0,kind:e})}),(function(){var t=Zn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Zt.Arguments=Zt.Array,xe("keys"),xe("values"),xe("entries");var er,nr=Kt("iterator"),rr=Kt("toStringTag"),ir=tr.values;for(er in Qn){var or=g[er],ar=or&&or.prototype;if(ar){if(ar[nr]!==ir)try{D(ar,nr,ir)}catch(Ba){ar[nr]=ir}if(ar[rr]||D(ar,rr,er),Qn[er])for(var sr in tr)if(ar[sr]!==tr[sr])try{D(ar,sr,tr[sr])}catch(Ba){ar[sr]=tr[sr]}}}function ur(t,e){var n;return new(void 0===(n=cr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||cr(n.prototype))||c(n)&&null===(n=n[lr]))?void 0:n)?Array:n)(0===e?0:e)}ft.Promise,at({target:"Promise",stat:!0},{try:function(t){var e=ln.f(this);return((t=Je(t)).error?e.reject:e.resolve)(t.value),e.promise}});var cr=Array.isArray||function(t){return"Array"==a(t)},lr=Kt("species"),hr=[].push,fr=(li={forEach:(Ir=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(u,c,l,f){for(var d,p,g=h(u),y=E(g),v=Gt(c,l,3),m=rt(y.length),b=0,w=(f=f||ur,e?f(u,m):n||a?f(u,0):void 0);b<m;b++)if((s||b in y)&&(p=v(d=y[b],b,g),t))if(e)w[b]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return b;case 2:hr.call(w,d)}else switch(t){case 4:return!1;case 7:hr.call(w,d)}return o?-1:r||i?i:w}})(0),map:Ir(1),filter:Ir(2),some:Ir(3),every:Ir(4),find:Ir(5),findIndex:Ir(6),filterOut:Ir(7)}).find,dr=!0;(De="find")in[]&&Array(1)[De]((function(){dr=!1})),at({target:"Array",proto:!0,forced:dr},{find:function(t){return fr(this,t,1<arguments.length?arguments[1]:void 0)}}),xe(De);var pr=Function.call;(Ge=function(t,e,n){return Gt(pr,g[t].prototype[e],n)})("Array","find");var gr=li.findIndex,yr=!0;function vr(t,e,n){(e=l(e))in t?x.f(t,e,o(0,n)):t[e]=n}(Cr="findIndex")in[]&&Array(1)[Cr]((function(){yr=!1})),at({target:"Array",proto:!0,forced:yr},{findIndex:function(t){return gr(this,t,1<arguments.length?arguments[1]:void 0)}}),xe(Cr),Ge("Array","findIndex"),at({target:"Array",stat:!0,forced:v=!Ee((function(t){Array.from(t)}))},{from:function(t){var e,n,r,i,o,a=h(t),s="function"==typeof this?this:Array,u=arguments.length,c=1<u?arguments[1]:void 0,l=void 0!==c,f=(t=ne(a),0);if(l&&(c=Gt(c,2<u?arguments[2]:void 0,2)),null==t||s==Array&&Ht(t))for(n=new s(e=rt(a.length));f<e;f++)vr(n,f,l?c(a[f],f):a[f]);else for(o=(i=t.call(a)).next,n=new s;!(r=o.call(i)).done;f++)vr(n,f,l?function(t,e,n,r){try{return r?e(d(n)[0],n[1]):e(n)}catch(e){throw re(t),e}}(i,c,[r.value,f],!0):r.value);return n.length=f,n}}),ft.Array.from;var mr,br,wr=li.some;function _r(t){return!!c(t)&&(t=ue(t),I(Rr,t)||I(xr,t))}at({target:"Array",proto:!0,forced:!(Ir=!!(br=[].some)&&i((function(){br.call(null,mr||function(){throw 1},1)})))},{some:function(t){return wr(this,t,1<arguments.length?arguments[1]:void 0)}}),Ge("Array","some"),De="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,xe=x.f;var Er,Tr=(Cr=g.Int8Array)&&Cr.prototype,Ir=(v=g.Uint8ClampedArray)&&v.prototype,Sr=Cr&&Pt(Cr),kr=Tr&&Pt(Tr),Cr=((v=Object.prototype).isPrototypeOf,Kt("toStringTag")),Nr=L("TYPED_ARRAY_TAG"),Ar=De&&!!Lt&&"Opera"!==ue(g.opera),Rr=(De=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8}),xr={BigInt64Array:8,BigUint64Array:8};for(Er in Rr)g[Er]||(Ar=!1);if((!Ar||"function"!=typeof Sr||Sr===Function.prototype)&&(Sr=function(){throw TypeError("Incorrect invocation")},Ar))for(Er in Rr)g[Er]&&Lt(g[Er],Sr);if((!Ar||!kr||kr===v)&&(kr=Sr.prototype,Ar))for(Er in Rr)g[Er]&&Lt(g[Er].prototype,kr);if(Ar&&Pt(Ir)!==kr&&Lt(Ir,kr),y&&!I(kr,Cr))for(Er in De=!0,xe(kr,Cr,{get:function(){return c(this)?this[Nr]:void 0}}),Rr)g[Er]&&D(g[Er],Nr,Er);Ir=function(t){if(_r(t))return t;throw TypeError("Target is not a typed array")},xe=function(t,e,n){if(y){if(n)for(var r in Rr)if((r=g[r])&&I(r.prototype,t))try{delete r.prototype[t]}catch(t){}kr[t]&&!n||ht(kr,t,!n&&Ar&&Tr[t]||e)}},Cr=Kt("iterator"),De=g.Uint8Array;var Dr=tr.values,Or=tr.keys,Pr=tr.entries,Lr=Ir;Ir=xe,De=!!(xe=De&&De.prototype[Cr])&&("values"==xe.name||null==xe.name),xe=function(){return Dr.call(Lr(this))},Ir("entries",(function(){return Pr.call(Lr(this))})),Ir("keys",(function(){return Or.call(Lr(this))})),Ir("values",xe,!De),Ir(Cr,xe,!De);var Mr=Object.assign,Fr=Object.defineProperty;xe=!Mr||i((function(){if(y&&1!==Mr({b:1},Mr(Fr({},"a",{enumerable:!0,get:function(){Fr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Mr({},t)[n]||Mt(Mr({},e)).join("")!=r}))?function(t,e){for(var n=h(t),r=arguments.length,i=1,o=Et.f,a=b.f;i<r;)for(var s,u=E(arguments[i++]),c=o?Mt(u).concat(o(u)):Mt(u),l=c.length,f=0;f<l;)s=c[f++],y&&!a.call(u,s)||(n[s]=u[s]);return n}:Mr,at({target:"Object",stat:!0,forced:Object.assign!==xe},{assign:xe}),ft.Object.assign;var jr=b.f,Ur=(xe={entries:(De=function(t){return function(e){for(var n,r=u(e),i=Mt(r),o=i.length,a=0,s=[];a<o;)n=i[a++],y&&!jr.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}})(!0),values:De(!1)}).entries;at({target:"Object",stat:!0},{entries:function(t){return Ur(t)}}),ft.Object.entries;var Vr=xe.values;function qr(t){if(c(e=t)&&(void 0!==(n=e[Br])?n:"RegExp"==a(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}at({target:"Object",stat:!0},{values:function(t){return Vr(t)}}),ft.Object.values;var Br=Kt("match"),zr=Kt("match");at({target:"String",proto:!0,forced:!(De=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[zr]=!1,"/./"[e](n)}catch(t){}}return!1})("includes")},{includes:function(t){return!!~String(s(this)).indexOf(qr(t),1<arguments.length?arguments[1]:void 0)}}),Ge("String","includes"),xe=A.f;var Kr,Hr="".startsWith,Wr=Math.min;De=De("startsWith"),at({target:"String",proto:!0,forced:!(Kr=!(De||!(Kr=xe(String.prototype,"startsWith"))||Kr.writable))&&!De},{startsWith:function(t){var e=String(s(this));qr(t);var n=rt(Wr(1<arguments.length?arguments[1]:void 0,e.length));return t=String(t),Hr?Hr.call(e,t,n):e.slice(n,n+t.length)===t}}),Ge("String","startsWith"),at({target:"String",proto:!0},{repeat:function(t){var e=String(s(this)),n="",r=nt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),Ge("String","repeat");var Gr,Qr=Kt("species"),Yr=Kt("isConcatSpreadable"),$r=9007199254740991,Xr="Maximum allowed index exceeded";function Jr(t){var e=ft.Symbol||(ft.Symbol={});I(e,t)||oi(e,t,{value:ii.f(t)})}function Zr(t,e){var n=wi[t]=zt(pi[ci]);return hi(n,{type:ui,tag:t,description:e}),y||(n.description=e),n}function ti(t,e){d(t);var n=u(e);return e=Mt(n).concat(Ai(n)),ai(e,(function(e){y&&!Ni.call(n,e)||Ci(t,e,n[e])})),t}De=51<=Qt||!i((function(){var t=[];return t[Yr]=!1,t.concat()[0]!==t})),Gr="concat",Ge=51<=Qt||!i((function(){var t=[];return(t.constructor={})[Qr]=function(){return{foo:1}},1!==t[Gr](Boolean).foo})),at({target:"Array",proto:!0,forced:!De||!Ge},{concat:function(t){for(var e,n,r,i=h(this),o=ur(i,0),a=0,s=-1,u=arguments.length;s<u;s++)if(function(t){if(!c(t))return!1;var e=t[Yr];return void 0!==e?!!e:cr(t)}(r=-1===s?i:arguments[s])){if(n=rt(r.length),$r<a+n)throw TypeError(Xr);for(e=0;e<n;e++,a++)e in r&&vr(o,a,r[e])}else{if($r<=a)throw TypeError(Xr);vr(o,a++,r)}return o.length=a,o}});var ei=_t.f,ni={}.toString,ri="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ii=(Ge={f:function(t){return ri&&"[object Window]"==ni.call(t)?function(t){try{return ei(t)}catch(t){return ri.slice()}}(t):ei(u(t))}},{f:Kt}),oi=x.f,ai=li.forEach,si=X("hidden"),ui="Symbol",ci="prototype",li=Kt("toPrimitive"),hi=lt.set,fi=lt.getterFor(ui),di=Object[ci],pi=g.Symbol,gi=et("JSON","stringify"),yi=A.f,vi=x.f,mi=Ge.f,bi=b.f,wi=G("symbols"),_i=G("op-symbols"),Ei=G("string-to-symbol-registry"),Ti=G("symbol-to-string-registry"),Ii=(X=G("wks"),!(G=g.QObject)||!G[ci]||!G[ci].findChild),Si=y&&i((function(){return 7!=zt(vi({},"a",{get:function(){return vi(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=yi(di,e);r&&delete di[e],vi(t,e,n),r&&t!==di&&vi(di,e,r)}:vi,ki=xt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof pi},Ci=function t(e,n,r){return e===di&&t(_i,n,r),d(e),n=l(n,!0),d(r),I(wi,n)?(r.enumerable?(I(e,si)&&e[si][n]&&(e[si][n]=!1),r=zt(r,{enumerable:o(0,!1)})):(I(e,si)||vi(e,si,o(1,{})),e[si][n]=!0),Si(e,n,r)):vi(e,n,r)},Ni=function(t){var e=l(t,!0);return t=bi.call(this,e),!(this===di&&I(wi,e)&&!I(_i,e))&&(!(t||!I(this,e)||!I(wi,e)||I(this,si)&&this[si][e])||t)},Ai=(G=function(t,e){var n=u(t);if(t=l(e,!0),n!==di||!I(wi,t)||I(_i,t))return!(e=yi(n,t))||!I(wi,t)||I(n,si)&&n[si][t]||(e.enumerable=!0),e},xt=function(t){t=mi(u(t));var e=[];return ai(t,(function(t){I(wi,t)||I(J,t)||e.push(t)})),e},function(t){var e=t===di,n=(t=mi(e?_i:u(t)),[]);return ai(t,(function(t){!I(wi,t)||e&&!I(di,t)||n.push(wi[t])})),n});Yt||(ht((pi=function(){if(this instanceof pi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=L(t),n=function t(n){this===di&&t.call(_i,n),I(this,si)&&I(this[si],e)&&(this[si][e]=!1),Si(this,e,o(1,n))};return y&&Ii&&Si(di,e,{configurable:!0,set:n}),Zr(e,t)})[ci],"toString",(function(){return fi(this).tag})),ht(pi,"withoutSetter",(function(t){return Zr(L(t),t)})),b.f=Ni,x.f=Ci,A.f=G,_t.f=Ge.f=xt,Et.f=Ai,ii.f=function(t){return Zr(Kt(t),t)},y&&(vi(pi[ci],"description",{configurable:!0,get:function(){return fi(this).description}}),ht(di,"propertyIsEnumerable",Ni,{unsafe:!0}))),at({global:!0,wrap:!0,forced:!Yt,sham:!Yt},{Symbol:pi}),ai(Mt(X),(function(t){Jr(t)})),at({target:ui,stat:!0,forced:!Yt},{for:function(t){var e=String(t);return I(Ei,e)?Ei[e]:(t=pi(e),Ei[e]=t,Ti[t]=e,t)},keyFor:function(t){if(!ki(t))throw TypeError(t+" is not a symbol");if(I(Ti,t))return Ti[t]},useSetter:function(){Ii=!0},useSimple:function(){Ii=!1}}),at({target:"Object",stat:!0,forced:!Yt,sham:!y},{create:function(t,e){return void 0===e?zt(t):ti(zt(t),e)},defineProperty:Ci,defineProperties:ti,getOwnPropertyDescriptor:G}),at({target:"Object",stat:!0,forced:!Yt},{getOwnPropertyNames:xt,getOwnPropertySymbols:Ai}),at({target:"Object",stat:!0,forced:i((function(){Et.f(1)}))},{getOwnPropertySymbols:function(t){return Et.f(h(t))}}),gi&&at({target:"JSON",stat:!0,forced:Bi=!Yt||i((function(){var t=pi();return"[null]"!=gi([t])||"{}"!=gi({a:t})||"{}"!=gi(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((c(r=e)||void 0!==t)&&!ki(t))return cr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ki(e))return e}),i[1]=e,gi.apply(null,i)}}),pi[ci][li]||D(pi[ci],li,pi[ci].valueOf),fe(pi,ui),J[si]=!0,Jr("asyncIterator"),G=x.f;var Ri,xi,Di,Oi,Pi,Li=g.Symbol;!y||"function"!=typeof Li||"description"in Li.prototype&&void 0===Li().description||(Ri={},ot(xi=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof xi?new Li(t):void 0===t?Li():Li(t);return""===t&&(Ri[e]=!0),e},Li),(Hi=xi.prototype=Li.prototype).constructor=xi,Di=Hi.toString,Oi="Symbol(test)"==String(Li("test")),Pi=/^Symbol\((.*)\)[^)]+$/,G(Hi,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=Di.call(t);return I(Ri,t)?"":""===(e=Oi?e.slice(7,-1):e.replace(Pi,"$1"))?void 0:e}}),at({global:!0,forced:!0},{Symbol:xi})),Jr("hasInstance"),Jr("isConcatSpreadable"),Jr("iterator"),Jr("match"),Jr("matchAll"),Jr("replace"),Jr("search"),Jr("species"),Jr("split"),Jr("toPrimitive"),Jr("toStringTag"),Jr("unscopables"),fe(g.JSON,"JSON",!0),fe(Math,"Math",!0),at({global:!0},{Reflect:{}}),fe(g.Reflect,"Reflect",!0),ft.Symbol,Jr("asyncDispose"),Jr("dispose"),Jr("matcher"),Jr("metadata"),Jr("observable"),Jr("patternMatch"),Jr("replaceAll"),ii.f("iterator");var Mi=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),Fi=r((function(t){function e(t){n(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var n=x.f,r=L("meta"),i=0,o=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!I(t,r)){if(!o(t))return"F";if(!n)return"E";e(t)}return t[r].objectID},getWeakData:function(t,n){if(!I(t,r)){if(!o(t))return!0;if(!n)return!1;e(t)}return t[r].weakData},onFreeze:function(t){return Mi&&a.REQUIRED&&o(t)&&!I(t,r)&&e(t),t}};J[r]=!0})),ji=(xt=function(t,e,n){function r(t){var e=y[t];ht(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(f&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return f&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(f&&!c(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})}var o,a,s,u,l,h=-1!==t.indexOf("Map"),f=-1!==t.indexOf("Weak"),d=h?"set":"add",p=g[t],y=p&&p.prototype,v=p,m={};return At(t,"function"!=typeof p||!(f||y.forEach&&!i((function(){(new p).entries().next()}))))?(v=n.getConstructor(e,t,h,d),Fi.REQUIRED=!0):At(t,!0)&&(a=(o=new v)[d](f?{}:-0,1)!=o,s=i((function(){o.has(1)})),u=Ee((function(t){new p(t)})),l=!f&&i((function(){for(var t=new p,e=5;e--;)t[d](e,e);return!t.has(-0)})),u||(((v=e((function(e,n){pe(e,v,t);var r,i,o,a=(a=new p,r=e,e=v,Lt&&"function"==typeof(i=r.constructor)&&i!==e&&c(o=i.prototype)&&o!==e.prototype&&Lt(a,o),a);return null!=n&&oe(n,a[d],{that:a,AS_ENTRIES:h}),a}))).prototype=y).constructor=v),(s||l)&&(r("delete"),r("has"),h&&r("get")),(l||a)&&r(d),f&&y.clear&&delete y.clear),m[t]=v,at({global:!0,forced:v!=p},m),fe(v,t),f||n.setStrong(v,t,h),v},x.f),Ui=Fi.fastKey,Vi=lt.set,qi=lt.getterFor,Bi={getConstructor:function(t,e,n,r){function i(t,e,n){var r,i=a(t),o=s(t,e);return o?o.value=n:(i.last=o={index:r=Ui(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),y?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var o=t((function(t,i){pe(t,o,e),Vi(t,{type:e,index:zt(null),first:void 0,last:void 0,size:0}),y||(t.size=0),null!=i&&oe(i,t[r],{that:t,AS_ENTRIES:n})})),a=qi(e),s=function(t,e){var n,r=a(t);if("F"!==(t=Ui(e)))return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return he(o.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,y?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=s(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),y?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=a(this),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),he(o.prototype,n?{get:function(t){return(t=s(this,t))&&t.value},set:function(t,e){return i(this,0===t?0:t,e)}}:{add:function(t){return i(this,t=0===t?0:t,t)}}),y&&ji(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=qi(e),o=qi(r);Fn(t,e,(function(t,e){Vi(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}}),n?"entries":"values",!n,!0),de(e)}};function zi(){for(var t,e=d(this),n=Wt(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function Ki(t){return Map.prototype.entries.call(t)}xt("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Bi),ft.Map,at({target:"Map",stat:!0},{from:li=function(t){var e,n,r,i,o=arguments.length,a=1<o?arguments[1]:void 0;return Wt(this),(e=void 0!==a)&&Wt(a),null==t?new this:(n=[],e?(r=0,i=Gt(a,2<o?arguments[2]:void 0,2),oe(t,(function(t){n.push(i(t,r++))}))):oe(t,n.push,{that:n}),new this(n))}}),at({target:"Map",stat:!0},{of:G=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}}),at({target:"Map",proto:!0,real:!0,forced:W},{deleteAll:function(){return zi.apply(this,arguments)}}),at({target:"Map",proto:!0,real:!0,forced:W},{emplace:function(t,e){var n=d(this);return e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n),n.set(t,e),e}}),at({target:"Map",proto:!0,real:!0,forced:W},{every:function(t){var e=d(this),n=Ki(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(n,(function(t,n,i){if(!r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Map",proto:!0,real:!0,forced:W},{filter:function(t){var e=d(this),n=Ki(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Map"))),o=Wt(i.set);return oe(n,(function(t,n){r(n,t,e)&&o.call(i,t,n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),at({target:"Map",proto:!0,real:!0,forced:W},{find:function(t){var e=d(this),n=Ki(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);return oe(n,(function(t,n,i){if(r(n,t,e))return i(n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Map",proto:!0,real:!0,forced:W},{findKey:function(t){var e=d(this),n=Ki(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);return oe(n,(function(t,n,i){if(r(n,t,e))return i(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;Wt(e);var r=Wt(n.has),i=Wt(n.get),o=Wt(n.set);return oe(t,(function(t){var a=e(t);r.call(n,a)?i.call(n,a).push(t):o.call(n,a,[t])})),n}}),at({target:"Map",proto:!0,real:!0,forced:W},{includes:function(t){return oe(Ki(d(this)),(function(e,n,r){if((i=n)===(n=t)||i!=i&&n!=n)return r();var i}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Wt(e);var r=Wt(n.set);return oe(t,(function(t){r.call(n,e(t),t)})),n}}),at({target:"Map",proto:!0,real:!0,forced:W},{keyOf:function(t){return oe(Ki(d(this)),(function(e,n,r){if(n===t)return r(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Map",proto:!0,real:!0,forced:W},{mapKeys:function(t){var e=d(this),n=Ki(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Map"))),o=Wt(i.set);return oe(n,(function(t,n){o.call(i,r(n,t,e),n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),at({target:"Map",proto:!0,real:!0,forced:W},{mapValues:function(t){var e=d(this),n=Ki(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Map"))),o=Wt(i.set);return oe(n,(function(t,n){o.call(i,t,r(n,t,e))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),at({target:"Map",proto:!0,real:!0,forced:W},{merge:function(t){for(var e=d(this),n=Wt(e.set),r=0;r<arguments.length;)oe(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),at({target:"Map",proto:!0,real:!0,forced:W},{reduce:function(t){var e=d(this),n=Ki(e),r=arguments.length<2,i=r?void 0:arguments[1];if(Wt(t),oe(n,(function(n,o){i=r?(r=!1,o):t(i,o,n,e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty map with no initial value");return i}}),at({target:"Map",proto:!0,real:!0,forced:W},{some:function(t){var e=d(this),n=Ki(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);return oe(n,(function(t,n,i){if(r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Map",proto:!0,real:!0,forced:W},{update:function(t,e){var n=d(this),r=arguments.length;Wt(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");return r=i?n.get(t):Wt(2<r?arguments[2]:void 0)(t,n),n.set(t,e(r,t,n)),n}});var Hi=function(t,e){var n,r=d(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};function Wi(t){return Set.prototype.values.call(t)}at({target:"Map",proto:!0,real:!0,forced:W},{upsert:Hi}),at({target:"Map",proto:!0,real:!0,forced:W},{updateOrInsert:Hi}),xt("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Bi),ft.Set,at({target:"Set",stat:!0},{from:li}),at({target:"Set",stat:!0},{of:G}),at({target:"Set",proto:!0,real:!0,forced:W},{addAll:function(){return function(){for(var t=d(this),e=Wt(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),at({target:"Set",proto:!0,real:!0,forced:W},{deleteAll:function(){return zi.apply(this,arguments)}}),at({target:"Set",proto:!0,real:!0,forced:W},{every:function(t){var e=d(this),n=Wi(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(n,(function(t,n){if(!r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:W},{difference:function(t){var e=d(this),n=new(Te(e,et("Set")))(e),r=Wt(n.delete);return oe(t,(function(t){r.call(n,t)})),n}}),at({target:"Set",proto:!0,real:!0,forced:W},{filter:function(t){var e=d(this),n=Wi(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Wt(i.add);return oe(n,(function(t){r(t,t,e)&&o.call(i,t)}),{IS_ITERATOR:!0}),i}}),at({target:"Set",proto:!0,real:!0,forced:W},{find:function(t){var e=d(this),n=Wi(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);return oe(n,(function(t,n){if(r(t,t,e))return n(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),at({target:"Set",proto:!0,real:!0,forced:W},{intersection:function(t){var e=d(this),n=new(Te(e,et("Set"))),r=Wt(e.has),i=Wt(n.add);return oe(t,(function(t){r.call(e,t)&&i.call(n,t)})),n}}),at({target:"Set",proto:!0,real:!0,forced:W},{isDisjointFrom:function(t){var e=d(this),n=Wt(e.has);return!oe(t,(function(t,r){if(!0===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:W},{isSubsetOf:function(t){var e=function(t){var e=ne(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return d(e.call(t))}(this),n=d(t),r=n.has;return"function"!=typeof r&&(n=new(et("Set"))(t),r=Wt(n.has)),!oe(e,(function(t,e){if(!1===r.call(n,t))return e()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:W},{isSupersetOf:function(t){var e=d(this),n=Wt(e.has);return!oe(t,(function(t,r){if(!1===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:W},{join:function(t){var e=Wi(n=d(this)),n=void 0===t?",":String(t);return oe(e,(t=[]).push,{that:t,IS_ITERATOR:!0}),t.join(n)}}),at({target:"Set",proto:!0,real:!0,forced:W},{map:function(t){var e=d(this),n=Wi(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Wt(i.add);return oe(n,(function(t){o.call(i,r(t,t,e))}),{IS_ITERATOR:!0}),i}}),at({target:"Set",proto:!0,real:!0,forced:W},{reduce:function(t){var e=d(this),n=Wi(e),r=arguments.length<2,i=r?void 0:arguments[1];if(Wt(t),oe(n,(function(n){i=r?(r=!1,n):t(i,n,n,e)}),{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),at({target:"Set",proto:!0,real:!0,forced:W},{some:function(t){var e=d(this),n=Wi(e),r=Gt(t,1<arguments.length?arguments[1]:void 0,3);return oe(n,(function(t,n){if(r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),at({target:"Set",proto:!0,real:!0,forced:W},{symmetricDifference:function(t){var e=d(this),n=new(Te(e,et("Set")))(e),r=Wt(n.delete),i=Wt(n.add);return oe(t,(function(t){r.call(n,t)||i.call(n,t)})),n}}),at({target:"Set",proto:!0,real:!0,forced:W},{union:function(t){var e;return oe(t,Wt((e=new(Te(e=d(this),et("Set")))(e)).add),{that:e}),e}});var Gi=Math.floor;at({target:"Number",stat:!0},{isInteger:function(t){return!c(t)&&isFinite(t)&&Gi(t)===t}}),ft.Number.isInteger,at({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),ft.Number.isNaN;var Qi=function(t,e){return(Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Yi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Qi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var $i=function(){return($i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Xi(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Ji(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Zi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function to(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function eo(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function no(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function ro(t){try{return so.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var io={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},oo=function(t,e){if(!t)throw ao(e)},ao=function(t){return new Error("Firebase Database ("+io.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},so={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=(15&s)<<2|(l=u?t[i+2]:0)>>6,l=63&l;u||(l=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[l])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(no(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,a,s=t[n++];s<128?e[r++]=String.fromCharCode(s):191<s&&s<224?(o=t[n++],e[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],a=t[n++],e[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function uo(t){return co(void 0,t)}function co(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=co(t[n],e[n]));return t}var lo=(ho.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},ho);function ho(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function fo(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0;if(!(e=t.sub||t.user_id))throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");return t=$i({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:e,user_id:e,firebase:{sign_in_provider:"custom",identities:{}}},t),[so.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),so.encodeString(JSON.stringify(t),!1),""].join(".")}function po(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function go(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(po())}function yo(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return}}function vo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function mo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bo(){return!0===io.NODE_ADMIN}function wo(){return"indexedDB"in self&&null!=indexedDB}function _o(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function Eo(){return!(!navigator||!navigator.cookieEnabled)}var To,Io="FirebaseError",So=(Yi(ko,To=Error),ko);function ko(t,e,n){return(e=To.call(this,e)||this).code=t,e.customData=n,e.name=Io,Object.setPrototypeOf(e,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Co.prototype.create),e}var Co=(No.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t;return t=(t=this.errors[t])?(r=i,t.replace(Ao,(function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}))):"Error",t=this.serviceName+": "+t+" ("+o+").",new So(o,t,i)},No);function No(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ao=/\{\$([^}]+)}/g;function Ro(t){return JSON.parse(t)}function xo(t){return JSON.stringify(t)}function Do(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Ro(ro(o[0])||""),n=Ro(ro(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}var Oo=function(t){return"object"==typeof(t=Do(t).claims)&&t.hasOwnProperty("iat")?t.iat:null};function Po(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Lo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Mo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fo(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function jo(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];!function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}(i[0],i[1])}return e.length?"&"+e.join("&"):""}var Uo=(Vo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Vo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){var h=r<40?r<20?(o=c^s&(u^c),1518500249):(o=s^u^c,1859775393):r<60?(o=s&u|c&(s|u),2400959708):(o=s^u^c,3395469782);i=(a<<5|a>>>27)+o+l+h+n[r]&4294967295,l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Vo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Vo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Vo);function Vo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function qo(t,e){return(e=new Bo(t,e)).subscribe.bind(e)}var Bo=(zo.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},zo.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},zo.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},zo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");return void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=Ko),void 0===r.error&&(r.error=Ko),void 0===r.complete&&(r.complete=Ko),n=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),n},zo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},zo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},zo.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},zo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},zo);function zo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}function Ko(){}function Ho(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Wo(t,e){return t+" failed: "+e+" argument "}function Go(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Wo(t,e)+"must be a valid function.")}function Qo(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Wo(t,e)+"must be a valid context object.")}function Yo(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var $o=1e3,Xo=2,Jo=144e5,Zo=.5;function ta(t,e,n){return void 0===n&&(n=Xo),n=(e=void 0===e?$o:e)*Math.pow(n,t),t=Math.round(Zo*n*(Math.random()-.5)*2),Math.min(Jo,n+t)}function ea(t){return t&&t._delegate?t._delegate:t}var na=(ra.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},ra.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},ra.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ra.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},ra);function ra(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var ia="[DEFAULT]",oa=(aa.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)&&(t=new lo,this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize()))try{var n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}return this.instancesDeferred.get(e).promise},aa.prototype.getImmediate=function(t){var e=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier);if(t=null!==(t=null==t?void 0:t.optional)&&void 0!==t&&t,!this.isInitialized(e)&&!this.shouldAutoInitialize()){if(t)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:e})}catch(e){if(t)return null;throw e}},aa.prototype.getComponent=function(){return this.component},aa.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ia})}catch(t){}try{for(var r=Zi(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=to(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},aa.prototype.clearInstance=function(t){this.instancesDeferred.delete(t=void 0===t?ia:t),this.instances.delete(t)},aa.prototype.delete=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(eo(eo([],to(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),to(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},aa.prototype.isComponentSet=function(){return null!=this.component},aa.prototype.isInitialized=function(t){return this.instances.has(t=void 0===t?ia:t)},aa.prototype.initialize=function(t){var e,n,r=void 0===(r=(t=void 0===t?{}:t).options)?{}:r,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var a=Zi(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var u=to(s.value,2),c=u[0],l=u[1];i===this.normalizeInstanceIdentifier(c)&&l.resolve(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o},aa.prototype.onInit=function(t,e){var n=this.normalizeInstanceIdentifier(e),r=null!==(e=this.onInitCallbacks.get(n))&&void 0!==e?e:new Set;return r.add(t),this.onInitCallbacks.set(n,r),(e=this.instances.get(n))&&t(e,n),function(){r.delete(t)}},aa.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Zi(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},aa.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n;if(!(t=this.instances.get(e))&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===ia?void 0:n,options:r}),this.instances.set(e,t),this.invokeOnInitCallbacks(t,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,t)}catch(t){}return t||null},aa.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=ia),!this.component||this.component.multipleInstances?t:ia},aa.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},aa);function aa(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}var sa=(ua.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},ua.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},ua.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new oa(t,this);return this.providers.set(t,e),e},ua.prototype.getProviders=function(){return Array.from(this.providers.values())},ua);function ua(t){this.name=t,this.providers=new Map}var ca,la=[];function ha(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=pa[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,eo(["["+i+"]  "+t.name+":"],n))}}(li=ca=ca||{})[li.DEBUG=0]="DEBUG",li[li.VERBOSE=1]="VERBOSE",li[li.INFO=2]="INFO",li[li.WARN=3]="WARN",li[li.ERROR=4]="ERROR",li[li.SILENT=5]="SILENT";var fa={debug:ca.DEBUG,verbose:ca.VERBOSE,info:ca.INFO,warn:ca.WARN,error:ca.ERROR,silent:ca.SILENT},da=ca.INFO,pa=((G={})[ca.DEBUG]="log",G[ca.VERBOSE]="log",G[ca.INFO]="info",G[ca.WARN]="warn",G[ca.ERROR]="error",G),ga=(Object.defineProperty(ya.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ca))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),ya.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?fa[t]:t},Object.defineProperty(ya.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(ya.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),ya.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.DEBUG],t)),this._logHandler.apply(this,eo([this,ca.DEBUG],t))},ya.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.VERBOSE],t)),this._logHandler.apply(this,eo([this,ca.VERBOSE],t))},ya.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.INFO],t)),this._logHandler.apply(this,eo([this,ca.INFO],t))},ya.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.WARN],t)),this._logHandler.apply(this,eo([this,ca.WARN],t))},ya.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ca.ERROR],t)),this._logHandler.apply(this,eo([this,ca.ERROR],t))},ya);function ya(t){this.name=t,this._logLevel=da,this._logHandler=ha,this._userLogHandler=null,la.push(this)}function va(t){la.forEach((function(e){e.setLogLevel(t)}))}function ma(t,e){for(var n=0,r=la;n<r.length;n++)!function(n){var r=null;e&&e.level&&(r=fa[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ca[n].toLowerCase(),message:a,args:i,type:e.name})}}(r[n])}(W={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",W["bad-app-name"]="Illegal App name: '{$appName}",W["duplicate-app"]="Firebase App named '{$appName}' already exists",W["app-deleted"]="Firebase App named '{$appName}' already deleted",W["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",W["invalid-log-argument"]="First argument to `onLog` must be null or a function.";var ba=new Co("app","Firebase",li=W),wa="@firebase/app",_a="[DEFAULT]",Ea=((G={})[wa]="fire-core",G["@firebase/analytics"]="fire-analytics",G["@firebase/app-check"]="fire-app-check",G["@firebase/auth"]="fire-auth",G["@firebase/database"]="fire-rtdb",G["@firebase/functions"]="fire-fn",G["@firebase/installations"]="fire-iid",G["@firebase/messaging"]="fire-fcm",G["@firebase/performance"]="fire-perf",G["@firebase/remote-config"]="fire-rc",G["@firebase/storage"]="fire-gcs",G["@firebase/firestore"]="fire-fst",G["fire-js"]="fire-js",G["firebase-wrapper"]="fire-js-all",G),Ta=new ga("@firebase/app"),Ia=(Object.defineProperty(Sa.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Sa.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Sa.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Sa.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},Sa.prototype._getService=function(t,e){void 0===e&&(e=_a),this.checkDestroyed_();var n=this.container.getProvider(t);return n.isInitialized()||"EXPLICIT"!==(null===(t=n.getComponent())||void 0===t?void 0:t.instantiationMode)||n.initialize(),n.getImmediate({identifier:e})},Sa.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=_a),this.container.getProvider(t).clearInstance(e)},Sa.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Ta.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Sa.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Sa.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Sa.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ba.create("app-deleted",{appName:this.name_})},Sa);function Sa(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=uo(t),this.container=new sa(e.name),this._addComponent(new na("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}Ia.prototype.name&&Ia.prototype.options||Ia.prototype.delete||console.log("dc");var ka="8.8.1";function Ca(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;if(void 0===o.name&&(o.name=_a),"string"!=typeof(i=o.name)||!i)throw ba.create("bad-app-name",{appName:String(i)});if(Po(e,i))throw ba.create("duplicate-app",{appName:i});return o=new t(n,o,r),e[i]=o},app:i,registerVersion:function(t,e,n){var r=null!==(i=Ea[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//);t=e.match(/\s|\//),i||t?(n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),Ta.warn(n.join(" "))):o(new na(r+"-version",(function(){return{library:r,version:e}}),"VERSION"))},setLogLevel:va,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ba.create("invalid-log-argument");ma(t,e)},apps:null,SDK_VERSION:ka,INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function i(t){if(!Po(e,t=t||_a))throw ba.create("no-app",{appName:t});return e[t]}function o(o){var a,s=o.name;if(n.has(s))return Ta.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;n.set(s,o),"PUBLIC"===o.type&&(a=function(t){if("function"!=typeof(t=void 0===t?i():t)[s])throw ba.create("invalid-app-argument",{appName:s});return t[s]()},void 0!==o.serviceProps&&co(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])});for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}W=function t(){var e=Ca(Ia);return e.INTERNAL=$i($i({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){co(e,t)},createSubscribe:qo,ErrorFactory:Co,deepExtend:co}),e}();var Na=(Aa.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){return function(t){return"VERSION"===(null==(t=t.getComponent())?void 0:t.type)}(t)?(t=t.getImmediate()).library+"/"+t.version:null})).filter((function(t){return t})).join(" ")},Aa);function Aa(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Ta.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),($s=self.firebase.SDK_VERSION)&&0<=$s.indexOf("LITE")&&Ta.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Ra=W.initializeApp;W.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return yo()&&Ta.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ra.apply(void 0,t)};var xa,Da,Oa=W;(xa=Oa).INTERNAL.registerComponent(new na("platform-logger",(function(t){return new Na(t)}),"PRIVATE")),xa.registerVersion(wa,"0.6.29",Da),xa.registerVersion("fire-js",""),Oa.registerVersion("firebase","8.8.1","app"),Oa.SDK_VERSION="8.8.1",function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c((function(){e.g()}))),this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){o(e)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){for(var i=[],a=0;i.push(void 0),a++,o(r.value).Ra(function(e){return function(n){i[e]=n,0==--a&&t(i)}}(i.length-1),e),!(r=n.next()).done;);}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:m).apply(null,arguments)}function w(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function _(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function T(t,e,n){this.code=k+t,this.message=e||C[t]||"",this.a=n||null}function I(t){var e=t&&t.code;return e?new T(e.substring(k.length),t.message,t.serverResponse):null}_(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,k="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function R(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function x(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,x):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");x.call(this,n+t[r])}function O(t){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=A("__EID__")?"__EID__":void 0,_(x,Error),x.prototype.name="CustomError",_(D,x),D.prototype.name="AssertionError",P.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var F=new P((function(){return new j}),(function(t){t.reset()}));function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,a="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in a&&(n=a[s],e.call(void 0,n,s,t)&&(i[o++]=n));return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=U(t,e)}function H(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function G(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,$=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,J=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}var at=a.navigator;function st(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function lt(t){var e,n={};for(e in t)n[e]=t[e];return n}Y=at&&(at=at.userAgent)?at:"";var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ht.length;i++)e=ht[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function dt(t,e){t:{try{var n,r=t&&t.ownerDocument;if((n=(n=r&&(r.defaultView||r.parentWindow))||a).Element&&n.Location){var i=n;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===mt&&e||"",this.b=vt}function gt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ta=!0,pt.prototype.sa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,vt={},mt={};function bt(){if(void 0===yt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(t){a.console&&a.console.error(t.message)}yt=t}else yt=t}return yt}function wt(t,e){this.a=e===St?t:""}function _t(t){return t instanceof wt&&t.constructor===wt?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n,r=gt(t);if(!It.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return n=t=r.replace(Tt,(function(t,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[n])instanceof pt?gt(t):encodeURIComponent(String(t))})),new wt(n=(t=bt())?t.createScriptURL(n):n,St)}wt.prototype.ta=!0,wt.prototype.sa=function(){return this.a.toString()},wt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Tt=/%{(\w+)}/g,It=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function kt(t,e){this.a=e===Ot?t:""}function Ct(t){return t instanceof kt&&t.constructor===kt?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,At=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){return t instanceof kt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),t=Rt.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(At))&&Nt.test(e[1])?new kt(t,Ot):null);var e}function Dt(t){return t instanceof kt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),new kt(t=Rt.test(t)?t:"about:invalid#zClosurez",Ot))}var Ot={},Pt=new kt("about:invalid#zClosurez",Ot);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.ta=!0,Lt.prototype.sa=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t,e,n,r){return t=t instanceof kt?t:Dt(t),e=e||a,n=n instanceof pt?gt(n):n||"",e.open(Ct(t),n,r,void 0)}function jt(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return rt.test(t)&&-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(X,"&amp;"):t).indexOf("<")?t.replace(J,"&lt;"):t).indexOf(">")?t.replace(Z,"&gt;"):t).indexOf('"')?t.replace(tt,"&quot;"):t).indexOf("'")?t.replace(et,"&#39;"):t).indexOf("\0")&&(t=t.replace(nt,"&#0;")),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=l;var qt,Bt=st("Opera"),zt=st("Trident")||st("MSIE"),Kt=st("Edge"),Ht=Kt||zt,Wt=st("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Gt=it(Y.toLowerCase(),"webkit")&&!st("Edge");function Qt(){var t=a.document;return t?t.documentMode:void 0}var Yt="",$t=($t=Y,Wt?/rv:([^\);]+)(\)|;)/.exec($t):Kt?/Edge\/([\d\.]+)/.exec($t):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($t):Gt?/WebKit\/(\S+)/.exec($t):Bt?/(?:Version)[ \/]?(\S+)/.exec($t):void 0);$t&&(Yt=$t?$t[1]:""),qt=zt&&null!=($t=Qt())&&$t>parseFloat(Yt)?String($t):Yt;var Xt={};function Jt(t){return e=t,n=function(){for(var e=0,n=$(String(qt)).split("."),r=$(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++)for(var a=n[o]||"",s=r[o]||"";a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=a[0].length||0!=s[0].length)&&(e=ot(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==a[2].length,0==s[2].length)||ot(a[2],s[2]),a=a[3],s=s[3],0==e););return 0<=e},r=Xt,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n(e);var e,n,r}var Zt=a.document&&zt&&(Qt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!zt||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(t,e){ut(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:oe.hasOwnProperty(n)?t.setAttribute(oe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ae(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=se(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}V(a?Q(o):o,r)}}}(n,r,e),r}function se(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){a.setTimeout((function(){throw t}),0)}function ce(t,e){ie||function(){var t;ie=a.Promise&&a.Promise.resolve?(t=a.Promise.resolve(void 0),function(){t.then(fe)}):function(){var t=fe;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!st("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(re=re||function(){var t=a.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")?function(){var t=se(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||st("Trident")||st("MSIE"))return function(t){a.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Hb,n.Hb=null,t())},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}())(t):a.setImmediate(t)}}(),le||(ie(),le=!0),he.add(t,e)}var le=!1,he=new M;function fe(){for(var t,e;e=t=void 0,e=null,(t=he).a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e=e;){try{e.a.call(e.b)}catch(t){ue(t)}L(F,e)}le=!1}function de(t,e){if(this.a=pe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){ke(n,ge,t)}),(function(t){if(!(t instanceof Oe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ke(n,ye,t)}))}catch(t){ke(this,ye,t)}}var pe=0,ge=2,ye=3;function ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new P((function(){return new ve}),(function(t){t.reset()}));function be(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function we(t){if(t instanceof de)return t;var e=new de(l);return ke(e,ge,t),e}function _e(t){return new de((function(e,n){n(t)}))}function Ee(t,e,n){Ce(t,e,n,null)||ce(w(e,t))}function Te(t){return new de((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ee(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Ie(t,e){t.b||t.a!=ge&&t.a!=ye||Ne(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,e,n,r){var i=be(null,null,null);return i.a=new de((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(n){o(n)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Oe?o(e):t(i)}catch(e){o(e)}}:o})),Ie(i.a.c=t,i),i.a}function ke(t,e,n){var r,i;t.a==pe&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ce(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ne(t),e!=ye||n instanceof Oe||(i=n,(r=t).g=!0,ce((function(){r.g&&De.call(null,i)})))))}function Ce(t,e,n,r){if(t instanceof de)return Ie(t,be(e||l,n||null,r)),1;if(R(t))return t.then(e,n,r),1;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ne(t){t.h||(t.h=!0,ce(t.gc,t))}function Ae(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Re(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,xe(e,n,r);else try{e.c?e.g.call(e.f):xe(e,n,r)}catch(t){De.call(null,t)}L(me,e)}function xe(t,e,n){e==ge?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}de.prototype.then=function(t,e,n){return Se(this,d(t)?t:null,d(e)?e:null,n)},de.prototype.$goog_Thenable=!0,(t=de.prototype).oa=function(t,e){return(t=be(t,t,e)).c=!0,Ie(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==pe&&(e=new Oe(t),ce((function(){!function t(e,n){if(e.a==pe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,!((o=s.a==e?s:o)&&1<i)));s=s.next)o||(a=s);o&&(r.a==pe&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Ae(r),Re(r,o,ye,n)))}e.c=null}else ke(e,ye,n)}(this,e)}),this))},t.$c=function(t){this.a=pe,ke(this,ge,t)},t.ad=function(t){this.a=pe,ke(this,ye,t)},t.gc=function(){for(var t;t=Ae(this);)Re(this,t,this.a,this.i);this.h=!1};var De=ue;function Oe(t){x.call(this,t)}function Pe(){this.ya=this.ya,this.pa=this.pa}_(Oe,x);var Le=0,Me={};function Fe(t){t.ya||(t.ya=!0,t.Da(),0==Le)||(t=t,t=Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++y),delete Me[t])}Pe.prototype.ya=!(Oe.prototype.name="cancel"),Pe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var je=Object.freeze||function(t){return t},Ue=!zt||9<=Number(Zt),Ve=zt&&!Jt("9"),qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function Be(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function ze(t,e){if(Be.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ke[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Be.prototype.preventDefault=function(){this.defaultPrevented=!0},_(ze,Be);var Ke=je({2:"touch",3:"pen",4:"mouse"});ze.prototype.preventDefault=function(){ze.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ve)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},ze.prototype.g=function(){return this.a};var He="closure_listenable_"+(1e6*Math.random()|0),We=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++We,this.wa=this.Qa=!1}function Qe(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function Ye(t){this.src=t,this.a={},this.b=0}function $e(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(Qe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}Ye.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Xe(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new Ge(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),Ze={};function tn(t,e,n,r,i){if(r&&r.once)nn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else n=fn(n),t&&t[He]?pn(t,e,n,p(r)?!!r.capture:!!r,i):en(t,e,n,!1,r,i)}function en(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=p(i)?!!i.capture:!!i,c=ln(t);if(c||(t[Je]=c=new Ye(t)),!(n=c.add(e,n,r,u,o)).proxy)if(a=cn,s=Ue?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r=s).src=t,r.listener=n,t.addEventListener)void 0===(i=qe?i:u)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(an(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else n=fn(n),t&&t[He]?gn(t,e,n,p(r)?!!r.capture:!!r,i):en(t,e,n,!0,r,i)}function rn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=fn(n),t&&t[He]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=Xe(o=t.a[e],n,r,i))&&(Qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&ln(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Xe(e,n,r,i):t)?e[t]:null)&&on(n))}function on(t){var e,n,r;"number"!=typeof t&&t&&!t.wa&&((e=t.src)&&e[He]?$e(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(an(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ln(e))?($e(n,t),0==n.b&&(n.src=null,e[Je]=null)):Qe(t)))}function an(t){return t in Ze?Ze[t]:Ze[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=ln(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=un(o,r),i=i&&!1!==o)}return i}function un(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&on(t),n.call(r,e)}function cn(t,e){if(t.wa)return!0;if(Ue)return un(t,new ze(e,this));if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ze(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function ln(t){return(t=t[Je])instanceof Ye?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function fn(t){return d(t)?t:(t[hn]||(t[hn]=function(e){return t.handleEvent(e)}),t[hn])}function dn(){Pe.call(this),this.v=new Ye(this),(this.bc=this).hb=null}function pn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function gn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function yn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.wa&&u.capture==n&&(a=u.listener,s=u.Wa||u.src,u.Qa&&$e(t.v,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}function vn(t,e,n){if(d(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function mn(t){var e=null;return new de((function(n,r){-1==(e=vn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function bn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function wn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function _n(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _n)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function En(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Tn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Tn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Tn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(dn,Pe),dn.prototype[He]=!0,dn.prototype.addEventListener=function(t,e,n,r){tn(this,t,e,n,r)},dn.prototype.removeEventListener=function(t,e,n,r){rn(this,t,e,n,r)},dn.prototype.dispatchEvent=function(t){var e;if(n=this.hb)for(e=[];n;n=n.hb)e.push(n);var n=this.bc,r=t.type||t;if("string"==typeof t?t=new Be(t,n):t instanceof Be?t.target=t.target||n:(a=t,ft(t=new Be(r,n),a)),a=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],a=yn(o,r,!0,t)&&a;if(a=yn(o=t.b=n,r,!0,t)&&a,a=yn(o,r,!1,t)&&a,e)for(i=0;i<e.length;i++)a=yn(o=t.b=e[i],r,!1,t)&&a;return a},dn.prototype.Da=function(){if(dn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Qe(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=_n.prototype).X=function(){En(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return En(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Tn(this.b,t)?this.b[t]:e},t.set=function(t,e){Tn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Sn?(this.i=void 0!==e?e:t.i,kn(this,t.c),this.l=t.l,this.a=t.a,Cn(this,t.g),this.f=t.f,Nn(this,Gn(t.b)),this.h=t.h):t&&(n=String(t).match(In))?(this.i=!!e,kn(this,n[1]||"",!0),this.l=On(n[2]||""),this.a=On(n[3]||"",!0),Cn(this,n[4]),this.f=On(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=On(n[7]||"")):(this.i=!!e,this.b=new qn(null,this.i))}function kn(t,e,n){t.c=n?On(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Nn(t,e,n){var r,i;e instanceof qn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(Bn(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Kn(this,e),Wn(this,n,t))}),r)),r.f=i):(n||(e=Pn(e,Un)),t.b=new qn(e,t.i))}function An(t,e,n){t.b.set(e,n)}function Rn(t,e){return t.b.get(e)}function xn(t){return t instanceof Sn?new Sn(t):new Sn(t,void 0)}function Dn(t,e,n,r){var i=new Sn(null,void 0);return t&&kn(i,t),e&&(i.a=e),n&&Cn(i,n),r&&(i.f=r),i}function On(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ln),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Ln(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Sn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Pn(e,Mn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Pn(e,Mn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Pn(n,"/"==n.charAt(0)?jn:Fn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Pn(n,Vn)),t.join("")},Sn.prototype.resolve=function(t){var e=new Sn(this),n=!!t.c;n?kn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Cn(e,t.g);else if(n=!!t.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=e.f.lastIndexOf("/"))&&(r=e.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(it(i,"./")||it(i,"/.")){r=0==i.lastIndexOf("/",0);for(var i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i;return n?e.f=r:n=""!==t.b.toString(),n?Nn(e,Gn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Mn=/[#\/\?@]/g,Fn=/[#\?:]/g,jn=/[#\?]/g,Un=/[#\?@]/g,Vn=/#/g;function qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Bn(t){t.a||(t.a=new _n,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function zn(t){var e=wn(t);if(void 0===e)throw Error("Keys are undefined");var n=new qn(null,void 0);t=bn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Wn(n,i,o):n.add(i,o)}return n}function Kn(t,e){Bn(t),e=Qn(t,e),Tn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Tn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&En(t)))}function Hn(t,e){return Bn(t),e=Qn(t,e),Tn(t.a.b,e)}function Wn(t,e,n){Kn(t,e),0<n.length&&(t.c=null,t.a.set(Qn(t,e),Q(n)),t.b+=n.length)}function Gn(t){var e=new qn;return e.c=t.c,t.a&&(e.a=new _n(t.a),e.b=t.b),e}function Qn(t,e){return e=String(e),t.f?e.toLowerCase():e}function Yn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Zn(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Zn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new $n,t,e),e.join("")}function $n(){}(t=qn.prototype).add=function(t,e){Bn(this),this.c=null,t=Qn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Bn(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Bn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Bn(this);var e=[];if("string"==typeof t)Hn(this,t)&&(e=G(e,this.a.get(Qn(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Bn(this),this.c=null,Hn(this,t=Qn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.X(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zn(t,e){e.push('"',t.replace(Jn,(function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e})),'"')}function tr(){var t=br();return zt&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function er(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function nr(t,e){e=e||a.window;var n="about:blank";t&&(n=Ct(xt(t)||Pt)),e.location.href=n}function rr(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ir(t){t=t||a.window;try{t.close()}catch(t){}}function or(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),yr(br())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:xt(void 0!==n.href?n.href:String(n))||Pt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(dt(a=se(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:Dt(e),a.href=Ct(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Ft("",r,n,a),t=Ct(e),a&&(Ht&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new Lt(t=(r=bt())?r.createHTML(t):t,0,Mt),r=a.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(O("expected object of type SafeHtml, got '"+o+"' of type "+h(o)),"type_error:SafeHtml")),r.close())):(a=Ft(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ur(){var t=null;return new de((function(e){"complete"==a.document.readyState?e():(t=function(){e()},nn(window,"load",t))})).o((function(e){throw rn(window,"load",t),e}))}function cr(t){return t=t||br(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var t=a.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function fr(){return Oa.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Oa.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function dr(){var t=fr();return"ReactNative"===t||"Node"===t}var pr="Firefox",gr="Chrome";function yr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?pr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":gr:"Safari"}var vr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function mr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=fr())?r=yr(i=br()):"Worker"===r&&(r=yr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return a.navigator&&a.navigator.userAgent||""}function wr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length?void 0:e}function _r(){try{var t=a.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!tr()||!!a.indexedDB}catch(t){return hr()&&!!a.indexedDB}return!1}function Er(){return(Tr()||"chrome-extension:"===Ir()||cr())&&!dr()&&_r()&&!hr()}function Tr(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return a.location&&a.location.protocol||null}function Sr(t){return!rr(t=t||br())&&yr(t)!=pr}function kr(t){return void 0===t?null:Yn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function Rr(t){return"Safari"!=yr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function xr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Dr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=fr(),this.b=rr(t)||"ReactNative"===e}function Or(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Pr(){var t=a.document,e=null;return Or()||!t?we():new de((function(n){e=function(){Or()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function Lr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Mr(){return wr("fireauth.oauthhelper",a)||wr("fireauth.iframe",a)}Dr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Tr()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Fr,jr={};function Ur(t){jr[t]||(jr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Vr={};Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:2}),Fr=2==Vr.abcd}catch(t){Fr=!1}function qr(t,e,n){Fr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Br(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&qr(t,n,e[n])}function zr(t){var e={};return Br(e,t),e}function Kr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)qr(e,n,Kr(t[n]));return e}function Hr(t){var e=t&&(t[$r]?"phone":null);if(!(e&&t&&t[Yr]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");qr(this,"uid",t[Yr]),qr(this,"displayName",t[Gr]||null);var n=null;qr(this,"enrollmentTime",n=t[Qr]?new Date(t[Qr]).toUTCString():n),qr(this,"factorId",e)}function Wr(t){try{var e=new Xr(t)}catch(t){e=null}return e}Hr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Gr="displayName",Qr="enrolledAt",Yr="mfaEnrollmentId",$r="phoneInfo";function Xr(t){Hr.call(this,t),qr(this,"phoneNumber",t[$r])}function Jr(t){var e={},n=t[ni],r=t[ii],i=t[oi];if(t=Wr(t[ri]),!i||i!=ti&&i!=ei&&!n||i==ei&&!r||i==Zr&&!t)throw Error("Invalid checkActionCode response!");i==ei?(e[si]=n||null,e[ci]=n||null,e[ai]=r):(e[si]=r||null,e[ci]=r||null,e[ai]=n||null),e[ui]=t||null,qr(this,hi,i),qr(this,li,Kr(e))}_(Xr,Hr),Xr.prototype.w=function(){var t=Xr.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Zr="REVERT_SECOND_FACTOR_ADDITION",ti="EMAIL_SIGNIN",ei="VERIFY_AND_CHANGE_EMAIL",ni="email",ri="mfaInfo",ii="newEmail",oi="requestType",ai="email",si="fromEmail",ui="multiFactorInfo",ci="previousEmail",li="data",hi="operation";function fi(t){var e=Rn(t=xn(t),di)||null,n=Rn(t,pi)||null,r=(r=Rn(t,vi)||null)&&bi[r]||null;if(!e||!n||!r)throw new T("argument-error",di+", "+pi+"and "+vi+" are required in a valid action code URL.");Br(this,{apiKey:e,operation:r,code:n,continueUrl:Rn(t,gi)||null,languageCode:Rn(t,yi)||null,tenantId:Rn(t,mi)||null})}var di="apiKey",pi="oobCode",gi="continueUrl",yi="languageCode",vi="mode",mi="tenantId",bi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Zr,signIn:ti,verifyAndChangeEmail:ei,verifyEmail:"VERIFY_EMAIL"};function wi(t){try{return new fi(t)}catch(t){return null}}function _i(t){if(void 0===(e=t[ki]))throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[Ei])&&"object"==typeof r){var e=r[Ai],n=r[Ci],r=r[Ni];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new T("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new T("argument-error",Ni+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new T("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new T("missing-android-pkg-name")}}else if(void 0!==r)throw new T("argument-error",Ei+" property must be a non null object when specified.");if(this.f=null,(e=t[Si])&&"object"==typeof e){if("string"==typeof(e=e[Ri])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ri+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Si+" property must be a non null object when specified.");if(void 0!==(e=t[Ii])&&"boolean"!=typeof e)throw new T("argument-error",Ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ti])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Ti+" property must be a non empty string when specified.");this.i=t||null}var Ei="android",Ti="dynamicLinkDomain",Ii="handleCodeInApp",Si="iOS",ki="url",Ci="installApp",Ni="minimumVersion",Ai="packageName",Ri="bundleId";function xi(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Di=null;function Oi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Di[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Di){Di={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Di[o]&&(Di[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Pi(t){var e=Mi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Li(t){try{return new Pi(t)}catch(t){return null}}function Mi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Oi(t);for(t=[],n=e=0;e<r.length;){var i,o,a,s=r[e++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(i=r[e++],t[n++]=String.fromCharCode((31&s)<<6|63&i)):239<s&&s<365?(a=((7&s)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}Pi.prototype.T=function(){return this.f},Pi.prototype.l=function(){return this.c},Pi.prototype.toString=function(){return this.h};var Fi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ji=["client_id","response_type","scope","redirect_uri","state"],Ui={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:ji},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:ji},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:ji},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Fi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Vi(t){for(var e in Ui)if(Ui[e].fa==t)return Ui[e];return null}function qi(t){var e={};e["facebook.com"]=Wi,e["google.com"]=Qi,e["github.com"]=Gi,e["twitter.com"]=Yi;var n=t&&t[zi];try{if(n)return new(e[n]||Hi)(t);if(void 0!==t[Bi])return new Ki(t)}catch(t){}return null}var Bi="idToken",zi="providerId";function Ki(t){var e,n=t[zi];if(n||!t[Bi]||(e=Li(t[Bi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),qr(this,"providerId",n="anonymous"==n||"custom"==n?null:n),qr(this,"isNewUser",e)}function Hi(t){Ki.call(this,t),qr(this,"profile",Kr((t=Nr(t.rawUserInfo||"{}"))||{}))}function Wi(t){if(Hi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(t){if(Hi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",this.profile&&this.profile.login||null)}function Qi(t){if(Hi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(Hi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",t.screenName||null)}function $i(t){var e=Rn(r=xn(t),"link"),n=Rn(xn(e),"link"),r=Rn(r,"deep_link_id");return Rn(xn(r),"link")||r||n||e||t}function Xi(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Ji:Zi}_(Hi,Ki),_(Wi,Hi),_(Gi,Hi),_(Qi,Hi),_(Yi,Hi);var Ji="enroll",Zi="signin";function to(){}function eo(t,e){return t.then((function(t){if(t[Ha]){var n=Li(t[Ha]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==k+"user-not-found"?new T("user-mismatch"):t}))}function no(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,qr(this,"providerId",t),qr(this,"signInMethod",t)}function ro(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function io(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new no(t.providerId,t.pendingToken)}catch(t){}return null}function oo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&qr(this,"idToken",e.idToken),e.accessToken&&qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");qr(this,"accessToken",e.oauthToken),qr(this,"secret",e.oauthTokenSecret)}qr(this,"providerId",t),qr(this,"signInMethod",n)}function ao(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function so(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new oo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function uo(t,e){this.Qc=e||[],Br(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Vi(t)||{}).Ja||null,this.pb=null}function co(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');uo.call(this,t,[])}function lo(t){uo.call(this,t,ji),this.a=[]}function ho(){lo.call(this,"facebook.com")}function fo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function po(){lo.call(this,"github.com")}function go(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new po).credential({accessToken:e})}function yo(){lo.call(this,"google.com"),this.Ca("profile")}function vo(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new yo).credential({idToken:n,accessToken:e})}function mo(){uo.call(this,"twitter.com",Fi)}function bo(t,e){var n=t;if(!(n=p(n)?n:{oauthToken:t,oauthTokenSecret:e}).oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new oo("twitter.com",n,"twitter.com")}function wo(t,e,n){this.a=t,this.f=e,qr(this,"providerId","password"),qr(this,"signInMethod",n===Eo.EMAIL_LINK_SIGN_IN_METHOD?Eo.EMAIL_LINK_SIGN_IN_METHOD:Eo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new wo(t.email,t.password,t.signInMethod):null}function Eo(){Br(this,{providerId:"password",isOAuthProvider:!1})}function To(t,e){if(!(e=Io(e)))throw new T("argument-error","Invalid email link!");return new wo(t,e.code,Eo.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=wi(t=$i(t)))&&t.operation===ti?t:null}function So(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new T("internal-error");this.a=t,qr(this,"providerId","phone"),this.fa="phone",qr(this,"signInMethod","phone")}function ko(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new So(e)}return null}function Co(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function No(t){try{this.a=t||Oa.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Br(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new So({fb:t,eb:e})}function Ro(t){if(t.temporaryProof&&t.phoneNumber)return new So({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return vo(o,n);case"facebook.com":return fo(n);case"github.com":return go(n);case"twitter.com":return bo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new no(e,a):new oo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new lo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function xo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Do(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Oo(t){return(t=t||{}).type?new Do(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&I(t.error),t.postBody,t.tenantId):null}function Po(){this.b=null,this.a=[]}Xi.prototype.Ha=function(){return this.a?we(this.a):we(this.b)},Xi.prototype.w=function(){return this.type==Ji?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},to.prototype.ka=function(){},to.prototype.b=function(){},to.prototype.c=function(){},to.prototype.w=function(){},no.prototype.ka=function(t){return ds(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,ps(t,n)},no.prototype.c=function(t,e){return eo(gs(t,ro(this)),e)},no.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},oo.prototype.ka=function(t){return ds(t,ao(this))},oo.prototype.b=function(t,e){var n=ao(this);return n.idToken=e,ps(t,n)},oo.prototype.c=function(t,e){return eo(gs(t,ao(this)),e)},oo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},uo.prototype.Ka=function(t){return this.Jb=lt(t),this},_(co,uo),_(lo,uo),lo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},lo.prototype.Rb=function(){return Q(this.a)},lo.prototype.credential=function(t,e){if(!(e=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!e.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new oo(this.providerId,e,this.providerId)},_(ho,lo),qr(ho,"PROVIDER_ID","facebook.com"),qr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(po,lo),qr(po,"PROVIDER_ID","github.com"),qr(po,"GITHUB_SIGN_IN_METHOD","github.com"),_(yo,lo),qr(yo,"PROVIDER_ID","google.com"),qr(yo,"GOOGLE_SIGN_IN_METHOD","google.com"),_(mo,uo),qr(mo,"PROVIDER_ID","twitter.com"),qr(mo,"TWITTER_SIGN_IN_METHOD","twitter.com"),wo.prototype.ka=function(t){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?$s(t,Ts,{email:this.a,oobCode:this.f}):$s(t,Hs,{email:this.a,password:this.f})},wo.prototype.b=function(t,e){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?$s(t,Is,{idToken:e,email:this.a,oobCode:this.f}):$s(t,Fs,{idToken:e,email:this.a,password:this.f})},wo.prototype.c=function(t,e){return eo(this.ka(t),e)},wo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Br(Eo,{PROVIDER_ID:"password"}),Br(Eo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Br(Eo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),So.prototype.ka=function(t){return t.gb(Co(this))},So.prototype.b=function(t,e){var n=Co(this);return n.idToken=e,$s(t,Gs,n)},So.prototype.c=function(t,e){var n=Co(this);return n.operation="REAUTH",eo(t=$s(t,Qs,n),e)},So.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},No.prototype.gb=function(t,e){var n=this.a.a;return we(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==e.type)throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i=i&&i.type==Ji?i.Ha().then((function(t){return $s(n,Us,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then((function(t){return t.phoneSessionInfo.sessionInfo}))})):i&&i.type==Zi?i.Ha().then((function(e){return e={mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},$s(n,Vs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))})):$s(n,Ls,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}))},Br(No,{PROVIDER_ID:"phone"}),Br(No,{PHONE_SIGN_IN_METHOD:"phone"}),Do.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Do.prototype.T=function(){return this.h},Do.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Lo,Mo=null;function Fo(t){var e="unauthorized-domain",n=void 0,r=xn(t);t=r.a,"chrome-extension"==(r=r.c)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function jo(t,e,n){T.call(this,t,n),(t=e||{}).Kb&&qr(this,"email",t.Kb),t.ea&&qr(this,"phoneNumber",t.ea),t.credential&&qr(this,"credential",t.credential),t.$b&&qr(this,"tenantId",t.$b)}function Uo(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Ro(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new jo(e,n,t.message)}return null}function Vo(){}function qo(t){return t.c||(t.c=t.b())}function Bo(){}function zo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Ko(){}function Ho(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Wo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Go(t,e,n){this.reset(t,e,n,void 0,void 0)}function Qo(t){this.f=t,this.b=this.c=this.a=null}function Yo(t,e){this.name=t,this.value=e}_(Fo,T),_(jo,T),jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},jo.prototype.toJSON=function(){return this.w()},Vo.prototype.c=null,_(Bo,Vo),Bo.prototype.a=function(){var t=zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bo.prototype.b=function(){var t={};return zo(this)&&(t[0]=!0,t[1]=!0),t},Lo=new Bo,_(Ko,Vo),Ko.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ho;throw Error("Unsupported browser")},Ko.prototype.b=function(){return{}},(t=Ho.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wo(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Wo(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Wo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Go.prototype.a=null,Go.prototype.reset=function(t,e,n,r,i){delete this.a},Yo.prototype.toString=function(){return this.name};var $o=new Yo("SEVERE",1e3),Xo=new Yo("WARNING",900),Jo=new Yo("CONFIG",700),Zo=new Yo("FINE",500);Qo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(O("Root logger has no level set."),null))}(this).value)for(d(e)&&(e=e()),t=new Go(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ta,ea={},na=null;function ra(t){var e,n,r;return na||(na=new Qo(""),(ea[""]=na).c=Jo),(e=ea[t])||(e=new Qo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ra(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ea[t]=e),e}function ia(t,e){t&&t.log(Zo,e,void 0)}function oa(t){this.f=t}function aa(t){dn.call(this),this.u=t,this.h=void 0,this.readyState=sa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ra("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(oa,Vo),oa.prototype.a=function(){return new aa(this.f)},oa.prototype.b=(ta={},function(){return ta}),_(aa,dn);var sa=0;function ua(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ca(t){t.readyState=4,t.g=null,t.c=null,t.m=null,la(t)}function la(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ha(t){dn.call(this),this.headers=new _n,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=fa,this.u=this.S=!1}(t=aa.prototype).open=function(t,e){if(this.readyState!=sa)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,la(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ca(this)),this.readyState=sa},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,la(this)),this.a&&(this.readyState=3,la(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ua(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?ca:la)(this),3==this.readyState&&ua(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,ca(this))},t.sc=function(t){this.a&&(this.response=t,ca(this))},t.Va=function(t){var e=this.i;e&&e.log(Xo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ca(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b)return(t=this.i)&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(ha,dn);var fa="";ha.prototype.b=ra("goog.net.XhrIo");var da=/^https?$/i,pa=["POST","PUT"];function ga(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=(t.D||Lo).a(),t.C=t.D?qo(t.D):qo(Lo),t.a.onreadystatechange=b(t.Wb,t);try{ia(t.b,Ia(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ia(t.b,Ia(t,"Error opening Xhr: "+e.message)),void va(t,e)}e=r||"";var o,s=new _n(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=wn(t),r=bn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){s.set(e,t)})),i=function(t){t:{for(var e=ya,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=a.FormData&&e instanceof a.FormData,!K(pa,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{_a(t),0<t.g&&(t.u=(o=t.a,zt&&Jt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),ia(t.b,Ia(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=vn(t.Ma,t.g,t)),ia(t.b,Ia(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ia(t.b,Ia(t,"Send error: "+e.message)),va(t,e)}}function ya(t){return"content-type"==t.toLowerCase()}function va(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ma(t),wa(t)}function ma(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ba(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ea(t)&&2==Ta(t))ia(t.b,Ia(t,"Local request error detected and ignored"));else if(t.i&&4==Ea(t))vn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ea(t)){ia(t.b,Ia(t,"Request complete")),t.c=!1;try{var e,n,r,i,s=Ta(t);t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}if((e=u)||((n=0===s)&&(!(i=String(t.l).match(In)[1]||null)&&a.self&&a.self.location&&(i=(r=a.self.location.protocol).substr(0,r.length-1)),n=!da.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ea(t)?t.a.statusText:""}catch(e){ia(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ta(t)+"]",ma(t)}}finally{wa(t)}}}function wa(t,e){if(t.a){_a(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log($o,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function _a(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Ea(t){return t.a?t.a.readyState:0}function Ta(t){try{return 2<Ea(t)?t.a.status:-1}catch(t){return-1}}function Ia(t,e){return e+" ["+t.P+" "+t.l+" "+Ta(t)+"]"}function Sa(t){var e=Fa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ka(t,e,n){t.a=!0,t.c=n,t.f=!e,Ra(t)}function Ca(t){if(t.a){if(!t.v)throw new xa;t.v=!1}}function Na(t,e,n,r){t.g.push([e,n,r]),t.a&&Ra(t)}function Aa(t){return z(t.g,(function(t){return d(t[1])}))}function Ra(t){var e;t.h&&t.a&&Aa(t)&&(n=t.h,(e=La[n])&&(a.clearTimeout(e.a),delete La[n]),t.h=0),t.b&&(t.b.l--,delete t.b);for(var n=t.c,r=e=!1;t.g.length&&!t.i;){var i=(s=t.g.shift())[0],o=s[1],s=s[2];if(i=t.f?o:i)try{var u=i.call(s||t.s,n);void 0!==u&&(t.f=t.f&&(u==n||u instanceof Error),t.c=n=u),(R(n)||"function"==typeof a.Promise&&n instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){n=r,t.f=!0,Aa(t)||(e=!0)}}t.c=n,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),n instanceof Sa?(Na(n,u,r),n.C=!0):n.then(u,r)),e&&(n=new Pa(n),La[n.a]=n,t.h=n.a)}function xa(){x.call(this)}function Da(){x.call(this)}function Pa(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=ha.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ia(this.b,Ia(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ia(this.b,Ia(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),wa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),wa(this,!0)),ha.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ba(this):this.Jc())},t.Jc=function(){ba(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log($o,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ia(this.b,"Can not get response: "+t.message),null}},Sa.prototype.cancel=function(t){var e;this.a?this.c instanceof Sa&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Da,Ca(this),ka(this,!1,t)))},Sa.prototype.m=function(t,e){this.i=!1,ka(this,t,e)},Sa.prototype.then=function(t,e,n){var r,i,o=new de((function(t,e){r=t,i=e}));return Na(this,r,(function(t){t instanceof Da?o.cancel():i(t)})),o.then(t,e,n)},Sa.prototype.$goog_Thenable=!0,_(xa,x),xa.prototype.message="Deferred has already fired",xa.prototype.name="AlreadyCalledError",_(Da,x),Da.prototype.message="Deferred was canceled",Da.prototype.name="CanceledError",Pa.prototype.c=function(){throw delete La[this.a],this.b};var La={};function Ma(t){var e=document,n=_t(t).toString(),r=se(document,"SCRIPT"),i={Xb:r,Ma:void 0},o=new Sa(i),s=window.setTimeout((function(){ja(r,!0);var t=new qa(Va,"Timeout reached for loading script "+n);Ca(o),ka(o,!1,t)}),5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(ja(r,!1,s),Ca(o),ka(o,!0,null))},r.onerror=function(){ja(r,!0,s);var t=new qa(Ua,"Error while loading script "+n);Ca(o),ka(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,dt(t=r,"HTMLScriptElement"),t.src=_t(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=a?c(i.document):u=null===u?c(a.document):u)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Fa(){var t;this&&this.Xb&&(t=this.Xb)&&"SCRIPT"==t.tagName&&ja(t,!0,this.Ma)}function ja(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ua=0,Va=1;function qa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),x.call(this,n),this.code=t}function Ba(t){this.f=t}function za(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Wa,this.g=lt(t.secureTokenHeaders||Ga),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Qa,this.a=lt(t.firebaseHeaders||Ya),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==fr(),!(n=a.XMLHttpRequest||n&&Oa.INTERNAL.node&&Oa.INTERNAL.node.XMLHttpRequest)&&!hr())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new oa(self):dr()?this.f=new Ba(n):this.f=new Ko,this.b=null}_(qa,x),_(Ba,Vo),Ba.prototype.a=function(){return new this.f},Ba.prototype.b=function(){return{}};var Ka,Ha="idToken",Wa=new Dr(3e4,6e4),Ga={"Content-Type":"application/x-www-form-urlencoded"},Qa=new Dr(3e4,6e4),Ya={"Content-Type":"application/json"};function $a(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Xa(t,e){e&&(t.l=Ja("https://securetoken.googleapis.com/v1/token",e),t.h=Ja("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ja("https://identitytoolkit.googleapis.com/v2/",e))}function Ja(t,e){return t=xn(t),e=xn(e.url),t.f=t.a+t.f,kn(t,e.c),t.a=e.a,Cn(t,e.g),t.toString()}function Za(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ts(t,e,n,r,i,o,s){var u;(t=((u=yr(u=br())==gr&&(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||zt&&Zt&&!(9<Zt))&&!hr()?(Ka=Ka||new de((function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(a[ns]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},function(t,e){Na(t,null,e,void 0)}(Ma(Et(es,{onload:ns})),(function(){r(Error("CORS_UNSUPPORTED"))})))})),b(t.s,t)):b(t.u,t))(e,n,r,i,o,s)}za.prototype.T=function(){return this.b},za.prototype.u=function(t,e,n,r,i,o){if(hr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,u=new ha(this.f);o&&(u.g=Math.max(0,o),s=setTimeout((function(){u.dispatchEvent("timeout")}),o)),pn(u,"complete",(function(){s&&clearTimeout(s);var n=null;try{n=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ia(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){n=null}e&&e(n)})),gn(u,"ready",(function(){s&&clearTimeout(s),Fe(this)})),gn(u,"timeout",(function(){s&&clearTimeout(s),Fe(this),e&&e(null)})),ga(u,t,n,r,i)};var es=new pt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),ns="__fcb"+Math.floor(1e6*Math.random()).toString();function rs(t,e,n,r,i,o,a){var s=xn(e+n);An(s,"key",t.c),a&&An(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(s,c,i[c]);return new de((function(e,n){ts(t,s.toString(),(function(t){t?t.error?n(Js(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:Yn(Cr(i)),t.a,t.v.get())}))}function is(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new T("invalid-email")}function os(t){"email"in t&&is(t)}function as(t){if(!t[Ha]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,lt(t));throw new T("internal-error")}}function ss(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}za.prototype.s=function(t,e,n,r,i){var o=this;Ka.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},za.prototype.Ab=function(){return $s(this,js,{})},za.prototype.Cb=function(t,e){return $s(this,Ms,{idToken:t,email:e})},za.prototype.Db=function(t,e){return $s(this,Fs,{idToken:t,password:e})};var us={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function cs(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ls(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function hs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Hn(t=new qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function fs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Uo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Uo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Uo(t)):t.errorMessage&&(e=Xs(t.errorMessage)),e)throw e;as(t)}function ds(t,e){return e.returnIdpCredential=!0,$s(t,qs,e)}function ps(t,e){return e.returnIdpCredential=!0,$s(t,zs,e)}function gs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,$s(t,Bs,e)}function ys(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=za.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ut(us,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),$s(this,Ms,n)},t.wb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),$s(this,xs,t)},t.xb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),$s(this,Ns,t)},t.vb=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),$s(this,As,t)},t.Fb=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),$s(this,Rs,t)},t.gb=function(t){return $s(this,Ws,t)},t.ob=function(t,e){return $s(this,Ps,{oobCode:t,newPassword:e})},t.Sa=function(t){return $s(this,ms,{oobCode:t})},t.kb=function(t){return $s(this,vs,{oobCode:t})};var vs={endpoint:"setAccountInfo",A:ys,Z:"email",B:!0},ms={endpoint:"resetPassword",A:ys,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},bs={endpoint:"signupNewUser",A:function(t){if(is(t),!t.password)throw new T("weak-password")},G:as,V:!0,B:!0},ws={endpoint:"createAuthUri",B:!0},_s={endpoint:"deleteAccount",O:["idToken"]},Es={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Ts={endpoint:"emailLinkSignin",O:["email","oobCode"],A:is,G:as,V:!0,B:!0},Is={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:is,G:as,V:!0},Ss={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:cs,G:as,B:!0,Na:!0},ks={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:cs,G:as,B:!0,Na:!0},Cs={endpoint:"getAccountInfo"},Ns={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");is(t)},Z:"email",B:!0},As={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Rs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},xs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");is(t)},Z:"email",B:!0},Ds={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Os={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},Ps={endpoint:"resetPassword",A:ys,Z:"email",B:!0},Ls={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ms={endpoint:"setAccountInfo",O:["idToken"],A:os,V:!0},Fs={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(os(t),!t.password)throw new T("weak-password")},G:as,V:!0},js={endpoint:"signupNewUser",G:as,V:!0,B:!0},Us={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Vs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},qs={endpoint:"verifyAssertion",A:ls,Za:hs,G:fs,V:!0,B:!0},Bs={endpoint:"verifyAssertion",A:ls,Za:hs,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw Xs(t.errorMessage);as(t)},V:!0,B:!0},zs={endpoint:"verifyAssertion",A:function(t){if(ls(t),!t.idToken)throw new T("internal-error")},Za:hs,G:fs,V:!0},Ks={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:as,V:!0,B:!0},Hs={endpoint:"verifyPassword",A:function(t){if(is(t),!t.password)throw new T("wrong-password")},G:as,V:!0,B:!0},Ws={endpoint:"verifyPhoneNumber",A:ss,G:as,B:!0},Gs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");ss(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Uo(t);as(t)}},Qs={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ss,G:as,B:!0},Ys={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ha]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function $s(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.O))return _e(new T("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return we(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),rs(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function Xs(t){return Js({error:{errors:[{message:t}],code:400,message:t}})}function Js(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new T(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new T(i[n],e);return new T("internal-error",e=!e&&t?kr(t):e)}function Zs(t){var e;this.b=t,this.a=null,this.sb=(e=this,(ru=ru||new de((function(t,e){function n(){xr(),wr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){xr(),e(Error("Network Error"))},timeout:eu.get()})}var r;wr("gapi.iframes.Iframe")?t():wr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),a[r]=function(){wr("gapi.load")?n():e(Error("Network Error"))},we(Ma(r=Et(tu,{onload:r}))).o((function(){e(Error("Network Error"))})))})).o((function(t){throw ru=null,t}))).then((function(){return new de((function(t,n){wr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),nu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))})))}var tu=new pt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),eu=new Dr(3e4,6e4),nu=new Dr(5e3,15e3),ru=null;function iu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Dn((t=xn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Dn("https",this.l,null,"/__/auth/iframe"),this.a=t,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function ou(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function au(t){try{return Oa.app(t).auth().Ga()}catch(t){return[]}}function su(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function uu(t){var e=er();return $s(t,Ds,{}).then((function(t){return t.authorizedDomains||[]})).then((function(t){t:{for(var n=(r=xn(e)).c,r=r.a,i=0;i<t.length;i++){var o=t[i],a=r,s=n;if(a=0==o.indexOf("chrome-extension://")?xn(o).a==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(ar.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){t=!0;break t}}t=!1}if(!t)throw new Fo(er())}))}function cu(t){return t.m||(t.m=ur().then((function(){var e,n,r,i;t.u||(e=t.c,n=t.i,r=au(t.b),(i=new iu(t.s,t.g,t.b,t.f)).f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()),t.v=new Zs(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Oo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",we(n)}return n.status="ERROR",we(n)}))}(t)})),t.m)}function lu(t){return t.l||(t.C=t.c?mr(t.c,au(t.b)):null,t.l=new za(t.g,A(t.i),t.C),t.f&&Xa(t.l,t.f)),t.l}function hu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new ou(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=lt(u||null),t.f=c,t.zb(l).toString()}function fu(t){if(this.a=t||Oa.INTERNAL.reactNative&&Oa.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function du(t){this.b=t,this.a={},this.f=b(this.c,this)}iu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Kn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):Kn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Kn(this.a.b,"fw"),this.a.toString()},ou.prototype.zb=function(t){return this.h=t,this},ou.prototype.toString=function(){var t;if(An(t=this.v?Dn((t=xn(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Dn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),An(t,"appName",this.c),An(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Oa.app(this.c).auth().la()}catch(t){n=null}for(r in e.pb=n,An(t,"providerId",this.a.providerId),e=Cr((n=this.a).Jb))e[r]=e[r].toString();for(var r=n.Qc,i=(e=lt(e),0);i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),ct(e)||An(t,"customParameters",kr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&An(t,"scopes",n.join(",")),this.l?An(t,"redirectUrl",this.l):Kn(t.b,"redirectUrl"),this.g?An(t,"eventId",this.g):Kn(t.b,"eventId"),this.i?An(t,"v",this.i):Kn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Rn(t,a)&&An(t,a,this.b[a]);return this.h?An(t,"tid",this.h):Kn(t.b,"tid"),this.f?An(t,"eid",this.f):Kn(t.b,"eid"),(a=au(this.c)).length&&An(t,"fw",a.join(",")),t.toString()},(t=su.prototype).Pb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){var n,r;r={type:"webStorageSupport"},cu(n=o).then((function(){return t=n.v,e=r,t.sb.then((function(){return new de((function(n){t.a.send(e.type,e,n,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}));var t,e})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then((function(n){n||(t&&ir(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return e=t,new de((function(t){return function n(){mn(2e3).then((function(){return e&&!e.closed?n():void t()}))}()}));var e})).then((function(){if(!a)return mn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=br();return!Sr(t)&&!Rr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return _e(new T("popup-blocked"));if(a&&!Sr())return this.ma().o((function(e){ir(t),i(e)})),r(),we();this.a||(this.a=uu(lu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw ir(t),i(e),e}));return r(),e})).then((function(){xo(n),a||nr(hu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=uu(lu(this)));var i=this;return this.a.then((function(){xo(e),nr(hu(i.s,i.g,i.b,t,e,er(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return cu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){W(this.h,(function(e){return e==t}))},(t=fu.prototype).get=function(t){return we(this.a.getItem(t)).then((function(t){return t&&Nr(t)}))},t.set=function(t,e){return we(this.a.setItem(t,kr(e)))},t.U=function(t){return we(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var pu,gu=[];function yu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function vu(t){this.a=t}function mu(t){this.c=t,this.b=!1,this.a=[]}function bu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return _e(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new de((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return wu(t,c),e})).o((function(e){throw wu(t,c),e}))}function wu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,(function(t){return t==e})))}function _u(){if(!Su())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.v=(n=hr()?self:null,V(gu,(function(t){t.b==n&&(e=t)})),e||(e=new du(n),gu.push(e)),e),yu(this.v,"keyChanged",(function(t,e){return Ru(r).then((function(t){return 0<t.length&&V(r.a,(function(e){e(t)})),{keyProcessed:K(t,e.key)}}))})),yu(this.v,"ping",(function(){return we(["keyChanged"])}))):((t=a.navigator)&&t.serviceWorker?we().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):we(null)).then((function(t){(r.h=t)&&(r.g=new mu(new vu(t)),bu(r.g,"ping",null,!0).then((function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.s=!0)})).o((function(){})))}))}function Eu(t){return new de((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){var i;(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):(i=t,new de((function(t,e){var n=i.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})).then((function(){return Eu(t)})).then((function(t){e(t)})).o((function(t){n(t)})))}}))}function Tu(t){return t.i||(t.i=Eu(t)),t.i}function Iu(t,e){var n=0;return new de((function r(i,o){Tu(t).then(e).then(i).o((function(e){return 3<++n?void o(e):Tu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}))}))}))}function Su(){try{return a.indexedDB}catch(t){return}}function ku(t){return t.objectStore("firebaseLocalStorage")}function Cu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Nu(t){return new de((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Au(t,e){return t.g&&t.h&&((n=a.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?bu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):we();var n}function Ru(t){return Tu(t).then((function(t){var e=ku(Cu(t,!1));return e.getAll?Nu(e.getAll()):new de((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function xu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Du(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=we().then((function(){if(Su()){var t=Ar(),r="__sak"+t;return pu=pu||new _u,(n=pu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function Ou(){this.a={},this.type="inMemory"}function Pu(){if(!function(){var t="Node"==fr();if(!(t=Lu()||t&&Oa.INTERNAL.node&&Oa.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Lu()||Oa.INTERNAL.node.localStorage,this.type="localStorage"}function Lu(){try{var t=a.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Mu(){this.type="nullStorage"}function Fu(){if(!function(){var t="Node"==fr();if(!(t=ju()||t&&Oa.INTERNAL.node&&Oa.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=ju()||Oa.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ju(){try{var t=a.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Uu(){var t={};t.Browser=Bu,t.Node=zu,t.ReactNative=Ku,t.Worker=Hu,this.a=t[fr()]}du.prototype.c=function(t){var e,n=t.data.eventType,r=t.data.eventId,i=this.a[n];i&&0<i.length&&(t.ports[0].postMessage({status:"ack",eventId:r,eventType:n,response:null}),e=[],V(i,(function(n){e.push(we().then((function(){return n(t.origin,t.data.data)})))})),Te(e).then((function(e){var i=[];V(e,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:i})})))},vu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},mu.prototype.close=function(){for(;0<this.a.length;)wu(this,this.a[0]);this.b=!0},(t=_u.prototype).set=function(t,e){var n=this,r=!1;return Iu(this,(function(e){return Nu((e=ku(Cu(e,!0))).get(t))})).then((function(i){return Iu(n,(function(o){if(o=ku(Cu(o,!0)),i)return i.value=e,Nu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Nu(o.add(a))}))})).then((function(){return n.c[t]=e,Au(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Iu(this,(function(e){return Nu(ku(Cu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Iu(this,(function(r){return n=!0,e.b++,Nu(ku(Cu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Au(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){var e;0==this.a.length&&(xu(e=this),function t(){e.f=setTimeout((function(){e.l=Ru(e).then((function(t){0<t.length&&V(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()),this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t})),0==this.a.length&&xu(this)},(t=Du.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t}))},(t=Ou.prototype).get=function(t){return we(this.a[t])},t.set=function(t,e){return this.a[t]=e,we()},t.U=function(t){return delete this.a[t],we()},t.ca=function(){},t.ia=function(){},(t=Pu.prototype).get=function(t){var e=this;return we().then((function(){return Nr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return we().then((function(){var r=kr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return we().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&tn(a.window,"storage",t)},t.ia=function(t){a.window&&rn(a.window,"storage",t)},(t=Mu.prototype).get=function(){return we(null)},t.set=function(){return we()},t.U=function(){return we()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return we().then((function(){return Nr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return we().then((function(){var r=kr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return we().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Vu,qu,Bu={F:Pu,cb:Fu},zu={F:Pu,cb:Fu},Ku={F:fu,cb:Mu},Hu={F:Pu,cb:Mu},Wu={rd:"local",NONE:"none",td:"session"};function Gu(){var t=!(Rr(br())||!lr()),e=Sr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},t=Vu=Vu||new Uu;try{this.g=!tr()&&Mr()||!a.indexedDB?new t.a.F:new Du(new(hr()?Ou:t.a.F))}catch(t){this.g=new Ou,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Ou}this.v=new Ou,this.f=b(this.Zb,this),this.b={}}function Qu(){return qu=qu||new Gu}function Yu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function $u(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Xu(t,e,n){return n=$u(e,n),"local"==e.F&&(t.b[n]=null),Yu(t,e.F).U(n)}function Ju(t){t.c&&(clearInterval(t.c),t.c=null)}function Zu(t){this.a=t,this.b=Qu()}(t=Gu.prototype).get=function(t,e){return Yu(this,t.F).get($u(t,e))},t.set=function(t,e,n){var r=$u(t,n),i=this,o=Yu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){var r;t=$u(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ct(this.a)&&(Yu(this,"local").ca(this.f),this.h||(tr()||!Mr())&&a.indexedDB||!this.l||(Ju(r=this),r.c=setInterval((function(){for(var t in r.a){var e=a.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new ze({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Zb(e))}}),1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=$u(t,e),this.a[t]&&(W(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Yu(this,"local").ia(this.f),Ju(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Yu(this,"local").ia(this.f):Ju(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},zt&&Zt&&10==Zt&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var tc,ec={name:"authEvent",F:"local"};function nc(){this.a=Qu()}function rc(t,e){this.b=ic,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===tc&&(tc=a.Int32Array?new Int32Array(hc):hc),this.reset()}_(rc,(function(){this.b=-1}));for(var ic=64,oc=ic-1,ac=[],sc=0;sc<oc;sc++)ac[sc]=0;var uc=G(128,ac);function cc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|tc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function lc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(cc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(cc(t),i=0)}}t.c=i,t.g+=n}rc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Q(this.h)};var hc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function fc(){rc.call(this,8,dc)}_(fc,rc);var dc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function pc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new nc,this.g=new Zu(this.h),this.f=null,this.b=[],this.a=this.c=null}function gc(t){return new T("invalid-cordova-configuration",t)}function yc(t){var e=new fc;lc(e,t),t=[];var n=8*e.g;e.c<56?lc(e,uc,56-e.c):lc(e,uc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(cc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}function vc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function mc(t){return t.f||(t.f=t.ma().then((function(){return new de((function(e){function n(t){o=!0,s&&s.cancel(),bc(r).then((function(e){var n,o=i;e&&t&&t.url&&(n=null,o=(n=-1!=(o=$i(t.url)).indexOf("/__/auth/callback")?(n="object"==typeof(n=Nr(Rn(n=xn(o),"firebaseError")||null))?I(n):null)?new Do(e.c,e.b,null,null,n,null,e.T()):new Do(e.c,e.b,o,e.f,null,null,e.T()):n)||i),vc(r,o)}))}var r,i,o,s,u;t.Ea((function n(r){return e(r),t.Ta(n),!1})),r=t,i=new Do("unknown",null,null,null,new T("no-auth-event")),o=!1,s=mn(500).then((function(){return bc(r).then((function(){o||vc(r,i)}))})),u=a.handleOpenURL,a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(wr("BuildInfo.packageName",a).toLowerCase()+"://")&&n({url:t}),"function"==typeof u)try{u(t)}catch(t){console.error(t)}},Mo=Mo||new Po,function(t){var e=Mo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=wr("universalLinks.subscribe",a))&&t(null,e.b))}(n)}))}))),t.f}function bc(t){var e,n=null;return(e=t.g).b.get(ec,e.a).then(Oo).then((function(e){return n=e,Xu((e=t.g).b,ec,e.a)})).then((function(){return n}))}function wc(t){this.a=t,this.b=Qu()}(t=pc.prototype).ma=function(){return this.Ia||(this.Ia=(cr(void 0)?ur().then((function(){return new de((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):_e(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof wr("universalLinks.subscribe",a))throw gc("cordova-universal-links-plugin-fix is not installed");if(void 0===wr("BuildInfo.packageName",a))throw gc("cordova-plugin-buildinfo is not installed");if("function"!=typeof wr("cordova.plugins.browsertab.openUrl",a))throw gc("cordova-plugin-browsertab is not installed");if("function"!=typeof wr("cordova.InAppBrowser.open",a))throw gc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")})))},t.Pb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),we()},t.Nb=function(){return _e(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return _e(new T("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=we().then((function(){return xo(e),mc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Do(e,r,null,o,new T("no-auth-event"),null,i),u=wr("BuildInfo.packageName",a);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=wr("BuildInfo.displayName",a),l={};if(br().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!br().toLowerCase().match(/android/))return _e(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=yc(o),l.sessionId=o;var h=hu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(ec,s.w(),e)})).then((function(){var e=wr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=wr("cordova.plugins.browsertab.openUrl",a)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=wr("cordova.InAppBrowser.open",a)))throw new T("invalid-cordova-configuration");e=br(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new de((function(t,e){u=function(){var e=wr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s=s||mn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))}))},l=function(){Or()&&c()},o.addEventListener("resume",c,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return bc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),mc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Do("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ta=function(t){W(this.b,(function(e){return e==t}))};var _c={name:"pendingRedirect",F:"session"};function Ec(t){return Xu(t.b,_c,t.a)}function Tc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new jc,this.C=new zc,this.g=new wc(Mc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ic(this.D,this.v,this.m,S,this.J)}function Ic(t,e,n,r,i){var o=Oa.SDK_VERSION||null;return new(cr()?pc:su)(t,e,n,o,r,i)}function Sc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function kc(t){t.a.Yb()&&Sc(t).o((function(e){var n=new Do("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)})),t.a.Ub()||Uc(t.b)}function Cc(t,e){K(t.h,e)||t.h.push(e),t.f||(e=t.g).b.get(_c,e.a).then((function(t){return"pending"==t})).then((function(e){e?Ec(t.g).then((function(){Sc(t).o((function(e){var n=new Do("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)}))})):kc(t)})).o((function(){kc(t)}))}function Nc(t,e){W(t.h,(function(t){return t==e}))}Tc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Ic(this.D,this.v,this.m,null,this.J),this.i={}},Tc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Uc(this.b),e};var Ac=new Dr(2e3,1e4),Rc=new Dr(3e4,6e4);function xc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Dc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Oc(t,e,n,r,i){var o,a;return(a=t.g).b.set(_c,"pending",a.a).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Dc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Ec(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new de((function(){})):Ec(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Pc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Ac.get())}Tc.prototype.ra=function(){return this.b.ra()};var Lc={};function Mc(t,e,n){return t=t+":"+e,n?t+":"+n.url:t}function Fc(t,e,n,r){var i=Mc(e,n,r);return Lc[i]||(Lc[i]=new Tc(t,e,n,r)),Lc[i]}function jc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Uc(t){t.g||(t.g=!0,Bc(t,!1,null,null))}function Vc(t){t.g&&!t.i&&Bc(t,!1,null,null)}function qc(t,e){if(t.b=function(){return we(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Bc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):qc(t,n):qc(t,{user:null}),t.f=[],t.c=[]}function zc(){}function Kc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Hc(t,e){this.a=e,qr(this,"verificationId",t)}function Wc(t,e,n,r){return new No(t).gb(e,n).then((function(t){return new Hc(t,r)}))}function Gc(t){var e=Mi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Br(this,{token:t,expirationTime:Lr(1e3*e.exp),authTime:Lr(1e3*e.auth_time),issuedAtTime:Lr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Qc(t,e,n){var r=e&&e[$c];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=lt(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;V(e[Yc]||[],(function(t){(t=Wr(t))&&i.b.push(t)})),qr(this,"auth",this.a),qr(this,"session",this.c),qr(this,"hints",this.b)}jc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},jc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Bc(this,!0,null,t.a),we()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Bc(t,s,e,null)})).o((function(e){Bc(t,s,null,e)}))}(this,t,e):_e(new T("invalid-auth-event")):(Bc(this,!1,null,null),we())):_e(new T("invalid-auth-event"))},jc.prototype.ra=function(){var t=this;return new de((function(e,n){var r,i;t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),r=t,i=new T("timeout"),r.a&&r.a.cancel(),r.a=mn(Rc.get()).then((function(){r.b||(r.g=!0,Bc(r,!0,null,i))})))}))},zc.prototype.h=function(t,e){var n,r,i,o,a;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),we()):e.Fa(n,r)?(i=e,o=(t=t).b,a=t.c,i.Fa(a,o)(t.g,t.f,t.T(),t.i).then((function(t){i.na(a,t,null,o)})).o((function(t){i.na(a,null,t,o)}))):_e(new T("invalid-auth-event"))):_e(new T("invalid-auth-event"))},Hc.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var Yc="mfaInfo",$c="mfaPendingCredential";function Xc(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new Qc(t,e,n),qr(this,"resolver",this.b)}function Jc(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Xc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Zc(){}function tl(t){qr(this,"factorId",t.fa),this.a=t}function el(t){if(tl.call(this,t),this.a.fa!=No.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function nl(t,e){for(var n in Be.call(this,t),e)this[n]=e[n]}function rl(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),tn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Yr]=t.uid),t.displayName&&(r[Gr]=t.displayName),t.enrollmentTime&&(r[Qr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[$r]=t.phoneNumber);try{e=new Xr(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),il(this,n)}function il(t,e){t.b=e,qr(t,"enrolledFactors",e)}function ol(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function al(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function sl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ul(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function cl(t,e){t.b=Li(e[Ha]||""),t.a=e.refreshToken,ul(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ll(t,e){return n=t.f,r=e,new de((function(t,e){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?ts(n,n.l+"?key="+encodeURIComponent(n.c),(function(n){n?n.error?e(Js(n)):n.access_token&&n.refresh_token?t(n):e(new T("internal-error")):e(new T("network-request-failed"))}),"POST",zn(r).toString(),n.g,n.m.get()):e(new T("internal-error"))})).then((function(e){return t.b=Li(e.access_token),t.a=e.refresh_token,ul(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}));var n,r}function hl(t,e){this.a=t||null,this.b=e||null,Br(this,{lastSignInTime:Lr(e||null),creationTime:Lr(t||null)})}function fl(t,e,n,r,i,o){Br(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function dl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Oa.SDK_VERSION?mr(Oa.SDK_VERSION):null;this.a=new za(this.l,A(S),i),(this.u=t.emulatorConfig||null)&&Xa(this.a,this.u),this.h=new sl(this.a),El(this,e[Ha]),cl(this.h,e),qr(this,"refreshToken",this.h.a),Sl(this,n||{}),dn.call(this),this.P=!1,this.s&&Er()&&(this.b=Fc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=(r=this,new ol((function(){return r.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var t=r.h.c-Date.now()-3e5;return 0<t?t:0}))),this.ba=b(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){pl(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){vl(o,t.f)},this.ja=null,this.S=new rl(this,n),qr(this,"multiFactor",this.S)}function pl(t,e){t.u=e,Xa(t.a,e),t.b&&(e=t.b,t.b=Fc(t.s,t.l,t.m,t.u),t.P&&(Nc(e,t),Cc(t.b,t)))}function gl(t,e){t.qa&&rn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&tn(e,"languageCodeChanged",t.Pa)}function yl(t,e){t.$&&rn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&tn(e,"emulatorConfigChanged",t.Ba)}function vl(t,e){t.aa=e,Za(t.a,Oa.SDK_VERSION?mr(Oa.SDK_VERSION,t.aa):null)}function ml(t,e){t.ja&&rn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&tn(e,"frameworkChanged",t.Oa)}function bl(e){try{return Oa.app(e.m).auth()}catch(t){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function wl(t){t.J||t.D.b||(t.D.start(),rn(t,"tokenChanged",t.ba),tn(t,"tokenChanged",t.ba))}function _l(t){rn(t,"tokenChanged",t.ba),t.D.stop()}function El(t,e){t.Aa=e,qr(t,"_lat",e)}function Tl(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Te(e).then((function(){return t}))}function Il(t){t.b&&!t.P&&(t.P=!0,Cc(t.b,t))}function Sl(t,e){Br(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new hl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function kl(){}function Cl(t){return we().then((function(){if(t.J)throw new T("app-deleted")}))}function Nl(t){return B(t.providerData,(function(t){return t.providerId}))}function Al(t,e){e&&(Rl(t,e.providerId),t.providerData.push(e))}function Rl(t,e){W(t.providerData,(function(t){return t.providerId==e}))}function xl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&qr(t,e,n)}function Dl(t,e){var n,r;t!=e&&(Br(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?qr(t,"metadata",new hl((r=e.metadata).a,r.b)):qr(t,"metadata",new hl),V(e.providerData,(function(e){Al(t,e)})),n=t.h,r=e.h,n.b=r.b,n.a=r.a,n.c=r.c,qr(t,"refreshToken",t.h.a),il(t.S,e.S.b))}function Ol(t){return t.I().then((function(e){var n,r=t.isAnonymous;return $s((n=t).a,Cs,{idToken:e}).then(b(n.Kc,n)).then((function(){return r||xl(t,"isAnonymous",!1),e}))}))}function Pl(t,e){e[Ha]&&t.Aa!=e[Ha]&&(cl(t.h,e),t.dispatchEvent(new nl("tokenChanged")),El(t,e[Ha]),xl(t,"refreshToken",t.h.a))}function Ll(t,e){return Ol(t).then((function(){if(K(Nl(t),e))return Tl(t).then((function(){throw new T("provider-already-linked")}))}))}function Ml(t,e,n){return zr({user:t,credential:Ro(e),additionalUserInfo:e=qi(e),operationType:n})}function Fl(t,e){return Pl(t,e),t.reload().then((function(){return t}))}function jl(t,e,n,r,i){if(!Er())return _e(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return _e(t.i);var o=Vi(n.providerId),a=Ar(t.uid+":::"),s=null,u=or(s=(!Sr()||lr())&&t.s&&n.isOAuthProvider?hu(t.s,t.l,t.m,e,n,null,a,Oa.SDK_VERSION||null,null,null,t.tenantId,t.u):s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Vl(t),!i)return t.I().then((function(){}))})).then((function(){return xc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new de((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Pc(t.b,t,e,u,a)}))})).then((function(t){return u&&ir(u),t?zr(t):null})).o((function(t){throw u&&ir(u),t})),ql(t,r,i)}function Ul(t,e,n,r,i){if(!Er())return _e(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return _e(t.i);var o=null,a=Ar(t.uid+":::");return r=r().then((function(){if(Vl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Tl(t)})).then((function(e){return t.ha?(e=t.ha).b.set(Kl,t.w(),e.a):e})).then((function(){return Oc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Hl(t.ha);throw o})).then((function(){if(o)throw o})),ql(t,r,i)}function Vl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function ql(t,e,n){var r,i=(e=e,n=n,(r=t).i&&!n?(e.cancel(),_e(r.i)):e.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.i||r.dispatchEvent(new nl("userInvalidated")),r.i=t),t})));return t.N.push(i),i.oa((function(){H(t.N,i)})),i.o((function(e){var n=null;throw(n=e&&"auth/multi-factor-auth-required"===e.code?Jc(e.w(),bl(t),b(t.jc,t)):n)||e}))}function Bl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ha]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new dl(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&Al(i,zr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function zl(t){this.a=t,this.b=Qu()}Qc.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=lt(e.f);return delete n[Yc],delete n[$c],ft(n,t),e.g(n)}))},_(Xc,T),Zc.prototype.tb=function(t,e,n){return e.type==Ji?(o=this,a=t,s=n,e.Ha().then((function(t){return t={idToken:t},void 0!==s&&(t.displayName=s),ft(t,{phoneVerificationInfo:Co(o.a)}),$s(a,Ss,t)}))):(r=this,i=t,e.Ha().then((function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Co(r.a)}),$s(i,ks,t)})));var r,i,o,a,s},_(tl,Zc),_(el,tl),_(nl,Be),(t=rl.prototype).yc=function(t){var e;il(this,(t=t.hd,e=[],V(t.mfaInfo||[],(function(t){(t=Wr(t))&&e.push(t)})),e))},t.Sb=function(){return this.a.I().then((function(t){return new Xi(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Pl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return $s(r,Ys,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=q(e.b,(function(t){return t.uid!=n}));return il(e,r),Pl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,(function(t){return t.w()}))}}},ol.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=mn(al(e,n)).then(Pr).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},ol.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},sl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},sl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ll(this,{grant_type:"refresh_token",refresh_token:this.a}):we(null):we({accessToken:this.b.toString(),refreshToken:this.a})},hl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(dl,dn),dl.prototype.xa=function(t){this.za=t,$a(this.a,t)},dl.prototype.la=function(){return this.za},dl.prototype.Ga=function(){return Q(this.aa)},dl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},qr(dl.prototype,"providerId","firebase"),(t=dl.prototype).reload=function(){var t=this;return ql(this,Cl(this).then((function(){return Ol(t).then((function(){return Tl(t)})).then(kl)})))},t.oc=function(t){return this.I(t).then((function(t){return new Gc(t)}))},t.I=function(t){var e=this;return ql(this,Cl(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.Aa&&(El(e,t.accessToken),e.dispatchEvent(new nl("tokenChanged"))),xl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Sl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,(function(t){return new fl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[],r=0;r<n.length;r++)Al(this,n[r]);xl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new nl("userReloaded",{hd:t}))},t.Lc=function(t){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return ql(this,t.c(this.a,this.uid).then((function(t){return Pl(e,t),n=Ml(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return ql(this,Ll(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Ml(e,t,"link"),Fl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return ql(this,Ll(this,"phone").then((function(){return Wc(bl(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return ql(this,we().then((function(){return Wc(bl(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return ql(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Pl(e,t),e.reload()})))},t.ed=function(t){var e=this;return ql(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Pl(e,t),e.reload()})))},t.Db=function(t){var e=this;return ql(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Pl(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Cl(this);var e=this;return ql(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Pl(e,t),xl(e,"displayName",t.displayName||null),xl(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&(qr(t,"displayName",e.displayName),qr(t,"photoURL",e.photoURL))})),Tl(e)})).then(kl))},t.cd=function(t){var e=this;return ql(this,Ol(this).then((function(n){return K(Nl(e),t)?$s(e.a,Es,{idToken:n,deleteProvider:[t]}).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(Nl(e),(function(t){n[t]||Rl(e,t)})),n[No.PROVIDER_ID]||qr(e,"phoneNumber",null),Tl(e)})):Tl(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return ql(this,this.I().then((function(e){return $s(t.a,_s,{idToken:e})})).then((function(){t.dispatchEvent(new nl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");gl(t,null),yl(t,null),ml(t,null),t.N=[],t.J=!0,_l(t),qr(t,"refreshToken",null),t.b&&Nc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return jl(this,"linkViaPopup",t,(function(){return Ll(e,t.providerId).then((function(){return Tl(e)}))}),!1)},t.Nc=function(t){return jl(this,"reauthViaPopup",t,(function(){return we()}),!0)},t.Fc=function(t){var e=this;return Ul(this,"linkViaRedirect",t,(function(){return Ll(e,t.providerId)}),!1)},t.Oc=function(t){return Ul(this,"reauthViaRedirect",t,(function(){return we()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,this.I().then((function(n){return ps(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Ml(i,t,"link"),Fl(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,we().then((function(){return eo(gs(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Ml(i,t,"reauthenticate"),Pl(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return ql(this,this.I().then((function(e){return n=e,void 0===t||ct(t)?{}:xi(new _i(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return ql(this,this.I().then((function(t){return r=t,void 0===e||ct(e)?{}:xi(new _i(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return ql(this,t=eo(we(t),n.uid).then((function(t){return e=Ml(n,t,"reauthenticate"),Pl(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&ft(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),ft(t,this.S.w()),t};var Kl={name:"redirectUser",F:"session"};function Hl(t){return Xu(t.b,Kl,t.a)}function Wl(t){var e,n,r,i;this.a=t,this.b=Qu(),this.c=null,this.f=(n=Yl("local"),r=Yl("session"),i=Yl("none"),function(t,e,n){var r=$u(e,n),i=Yu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Nr(a.localStorage.getItem(r))}catch(o){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}((e=this).b,n,e.a).then((function(){return e.b.get(r,e.a)})).then((function(t){return t?r:e.b.get(i,e.a).then((function(t){return t?i:e.b.get(n,e.a).then((function(t){return t?n:e.b.get(Ql,e.a).then((function(t){return t?Yl(t):n}))}))}))})).then((function(t){return e.c=t,Gl(e,t.F)})).o((function(){e.c||(e.c=n)}))),this.b.addListener(Yl("local"),this.a,b(this.g,this))}function Gl(t,e){var n,r,i=[];for(n in Wu)Wu[n]!==e&&i.push(Xu(t.b,Yl(Wu[n]),t.a));return i.push(Xu(t.b,Ql,t.a)),r=i,new de((function(t,e){var n=r.length,i=[];if(n)for(var o=function(e,r){n--,i[e]=r,0==n&&t(i)},a=function(t){e(t)},s=0;s<r.length;s++)Ee(r[s],w(o,s),a);else t(i)}))}Wl.prototype.g=function(){var t=this,e=Yl("local");Zl(this,(function(){return we().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Gl(t,"local").then((function(){t.c=e}))}))}))};var Ql={name:"persistence",F:"session"};function Yl(t){return{name:"authUser",F:t}}function $l(t,e){return Zl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Xl(t){return Zl(t,(function(){return Xu(t.b,t.c,t.a)}))}function Jl(t,e,n){return Zl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Bl(t||{})}))}))}function Zl(t,e){return t.f=t.f.then(e,e),t.f}function th(t){if(this.l=!1,qr(this,"settings",new Kc),qr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new T("invalid-api-key");var e,n,r,i,o,a;t=Oa.SDK_VERSION?mr(Oa.SDK_VERSION):null,this.a=new za(this.app.options&&this.app.options.apiKey,A(S),t),this.P=[],this.s=[],this.N=[],this.Pa=Oa.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=Oa.INTERNAL.createSubscribe(b(this.Ac,this)),sh(this,null),this.i=new Wl(this.app.options.apiKey+":"+this.app.name),this.D=new zl(this.app.options.apiKey+":"+this.app.name),this.$=fh(this,(n=(e=this).app.options.authDomain,t=function(t){var e=function(t,e){return t.b.get(Kl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Bl(t||{})}))}(t.D,t.app.options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Hl(t.D)}));return fh(t,e)}(e).then((function(){return Jl(e.i,n,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return $l(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Xl(e.i)}))):null})).then((function(t){sh(e,t||null)})),fh(e,t))),this.h=fh(this,(r=this).$.then((function(){return oh(r)})).o((function(){})).then((function(){if(!r.l)return r.ja()})).o((function(){})).then((function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Yl("local"),t.a,r.ja))}))),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,a=i.app.options.apiKey,o&&Er()&&(i.Oa=i.$.then((function(){var t;if(!i.l)return i.b=Fc(o,a,i.app.name,i.R),Cc(i.b,i),ch(i)&&Il(ch(i)),i.m&&(Il(i.m),(t=i.m).xa(i.la()),gl(t,i),vl(t=i.m,i.J),ml(t,i),pl(t=i.m,i.R),yl(t,i),i.m=null),i.b}))),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,dn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return this.R?zr({protocol:(t=xn(this.R.url)).c,host:t.a,port:t.g,options:zr({disableWarnings:this.R.ec})}):null},enumerable:!1}),this.J=[],this.R=null}function eh(t){Be.call(this,"languageCodeChanged"),this.h=t}function nh(t){Be.call(this,"emulatorConfigChanged"),this.c=t}function rh(t){Be.call(this,"frameworkChanged"),this.f=t}function ih(t){return t.Oa||_e(new T("auth-domain-config-required"))}function oh(t){if(!Er())return _e(new T("operation-not-supported-in-this-environment"));var e=ih(t).then((function(){return t.b.ra()})).then((function(t){return t?zr(t):null}));return fh(t,e)}function ah(t,e){var n={};return n.apiKey=t.app.options.apiKey,n.authDomain=t.app.options.authDomain,n.appName=t.app.name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return r=n,i=e,o=t.D,a=t.Ga(),s=new dl(r,i),o&&(s.ha=o),a&&vl(s,a),s.reload().then((function(){return s}));var r,i,o,a,s})).then((function(e){return ch(t)&&e.uid==ch(t).uid?Dl(ch(t),e):(sh(t,e),Il(e)),t.da(e)})).then((function(){hh(t)}))}function sh(t,e){var n,r;ch(t)&&(n=ch(t),r=t.Ba,W(n.W,(function(t){return t==r})),rn(ch(t),"tokenChanged",t.qa),rn(ch(t),"userDeleted",t.za),rn(ch(t),"userInvalidated",t.Aa),_l(ch(t))),e&&(e.W.push(t.Ba),tn(e,"tokenChanged",t.qa),tn(e,"userDeleted",t.za),tn(e,"userInvalidated",t.Aa),0<t.u&&wl(e)),qr(t,"currentUser",e),e&&(e.xa(t.la()),gl(e,t),vl(e,t.J),ml(e,t),pl(e,t.R),yl(e,t))}function uh(t,e){var n=null,r=null;return fh(t,e.then((function(e){return n=Ro(e),r=qi(e),ah(t,e)}),(function(e){var n=null;throw(n=e&&"auth/multi-factor-auth-required"===e.code?Jc(e.w(),t,b(t.kc,t)):n)||e})).then((function(){return zr({user:ch(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ch(t){return t.currentUser}function lh(t){return ch(t)&&ch(t)._lat||null}function hh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](lh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](lh(t))}}function fh(t,e){return t.P.push(e),e.oa((function(){H(t.P,e)})),e}function dh(){}function ph(){this.a={},this.b=1e12}Wl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Wu)if(Wu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(fr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Su()&&"none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(t),Zl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Gl(n,t)})).then((function(){if(n.c=Yl(t),e)return n.b.set(n.c,e,n.a)})):we()}))},_(th,dn),_(eh,Be),_(nh,Be),_(rh,Be),(t=th.prototype).yb=function(t){return fh(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,$a(this.a,this.aa),this.dispatchEvent(new eh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=e=!!e&&!!e.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!n&&ur().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})),this.R={url:t,ec:e},this.settings.jb=!0,Xa(this.a,this.R),this.dispatchEvent(new nh(this.R))}var n},t.Gc=function(t){this.J.push(t),Za(this.a,Oa.SDK_VERSION?mr(Oa.SDK_VERSION,this.J):null),this.dispatchEvent(new rh(this.J))},t.Ga=function(){return Q(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:ch(this)&&ch(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return uh(i,ds(i.a,o))}))},t.Xc=function(t){if(!Er())return _e(new T("operation-not-supported-in-this-environment"));var e=this,n=Vi(t.providerId),r=Ar(),i=null,o=or(i=(!Sr()||lr())&&this.app.options.authDomain&&t.isOAuthProvider?hu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",t,null,r,Oa.SDK_VERSION||null,null,null,this.T(),this.R):i,n&&n.va,n&&n.ua);return fh(this,n=ih(this).then((function(n){return xc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new de((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Pc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&ir(o),t?zr(t):null})).o((function(t){throw o&&ir(o),t})))},t.Yc=function(t){if(!Er())return _e(new T("operation-not-supported-in-this-environment"));var e=this;return fh(this,ih(this).then((function(){return Zl(t=e.i,(function(){return t.b.set(Ql,t.c.F,t.a)}));var t})).then((function(){return Oc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return oh(this).then((function(e){return t.b&&Vc(t.b.b),e})).o((function(e){throw t.b&&Vc(t.b.b),e}))},t.dd=function(t){if(!t)return _e(new T("null-user"));if(this.S!=t.tenantId)return _e(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,a,s,u=(r=t,i=n,o=e.D,a=e.Ga(),s=r.h,(n={})[Ha]=s.b&&s.b.toString(),n.refreshToken=s.a,i=new dl(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),a&&vl(i,a),Dl(i,r),i);return fh(this,this.h.then((function(){if(e.app.options.apiKey!=t.l)return u.reload()})).then((function(){return ch(e)&&t.uid==ch(e).uid?(Dl(ch(e),t),e.da(t)):(sh(e,u),Il(u),e.da(u))})).then((function(){hh(e)})))},t.Bb=function(){var t=this;return fh(this,this.h.then((function(){return t.b&&Vc(t.b.b),ch(t)?(sh(t,null),Xl(t.i).then((function(){hh(t)}))):we()})))},t.Zc=function(){var t=this;return Jl(this.i,this.app.options.authDomain).then((function(e){if(!t.l){var n,r;if((n=ch(t)&&e)&&(n=ch(t).uid,r=e.uid,n=null!=n&&""!==n&&null!=r&&""!==r&&n==r),n)return Dl(ch(t),e),ch(t).I();(ch(t)||e)&&(sh(t,e),e&&(Il(e),e.ha=t.D),t.b&&Cc(t.b,t),hh(t))}}))},t.da=function(t){return $l(this.i,t)},t.mc=function(){hh(this),this.da(ch(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return uh(e,we(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ch(e))}))},t.Ac=function(t){var e,n,r=this;n=function(){t.next(ch(r))},(e=this).N.push(n),fh(e,e.h.then((function(){!e.l&&K(e.N,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(lh(e)))})))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return fh(this,this.h.then((function(){return ch(e)?ch(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return uh(e,$s(e.a,Ks,{token:t}))})).then((function(t){var n=t.user;return xl(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return uh(n,$s(n.a,Hs,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return uh(n,$s(n.a,bs,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return uh(e,t.ka(e.a))}))},t.Sc=function(t){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=ch(t);if(e&&e.isAnonymous){var n=zr({providerId:null,isNewUser:!1});return zr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.Ab()).then((function(e){var n=e.user;return xl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ch(this)&&ch(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ch(this)&&wl(ch(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),this.u<0&&(this.u=0),0==this.u&&ch(this)&&_l(ch(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),fh(this,this.h.then((function(){e.l||K(e.s,t)&&t(lh(e))})))},t.removeAuthTokenListener=function(t){W(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Yl("local"),t.a,this.ja),this.b&&(Nc(this.b,this),Vc(this.b.b)),Promise.resolve()},t.hc=function(t){return fh(this,$s(this.a,ws,{identifier:t,continueUri:Tr()?er():"http://localhost"}).then((function(t){return t.signinMethods||[]})))},t.Bc=function(t){return!!Io(t)},t.xb=function(t,e){var n=this;return fh(this,we().then((function(){var t=new _i(e);if(!t.c)throw new T("argument-error",Ii+" must be true when sending sign in link to email");return xi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return fh(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return fh(this,this.a.Sa(t).then((function(t){return new Jr(t)})))},t.kb=function(t){return fh(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return fh(this,we().then((function(){return void 0===e||ct(e)?{}:xi(new _i(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return fh(this,Wc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return fh(this,we().then((function(){var r=e||er(),i=To(t,r);if(!(r=Io(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},dh.prototype.render=function(){},dh.prototype.reset=function(){},dh.prototype.getResponse=function(){},dh.prototype.execute=function(){};var gh=null;function yh(t,e){return(e=vh(e))&&t.a[e]||null}function vh(t){return(t=void 0===t?1e12:t)?t.toString():null}function mh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():tn(this.f,"click",this.i)}function bh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function wh(){}function _h(){}ph.prototype.render=function(t,e){return this.a[this.b.toString()]=new mh(t,e),this.b++},ph.prototype.reset=function(t){var e=yh(this,t);t=vh(t),e&&t&&(e.delete(),delete this.a[t])},ph.prototype.getResponse=function(t){return(t=yh(this,t))?t.getResponse():null},ph.prototype.execute=function(t){(t=yh(this,t))&&t.execute()},mh.prototype.getResponse=function(){return bh(this),this.b},mh.prototype.execute=function(){bh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(e){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(e){}t.h&&t.execute()}),6e4)}),500))},mh.prototype.delete=function(){bh(this),this.g=!0,clearTimeout(this.a),this.a=null,rn(this.f,"click",this.i)},qr(wh,"FACTOR_ID","phone"),_h.prototype.g=function(){return we(gh=gh||new ph)},_h.prototype.c=function(){};var Eh=null;function Th(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ih=new pt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sh=new Dr(3e4,6e4);Th.prototype.g=function(t){var e=this;return new de((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Sh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){var o;a.grecaptcha?(e.f=t,o=a.grecaptcha.render,a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)):(clearTimeout(i),r(new T("internal-error"))),delete a[e.a]},we(Ma(Et(Ih,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Th.prototype.c=function(){this.b--};var kh=null;function Ch(t,e,n,r,i,o,s){if(qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s=s?Eh=Eh||new _h:kh=kh||new Th,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Rh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[xh],!a.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new za(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Nh];this.a[Nh]=function(t){var e;Dh(u,t),"function"==typeof c?c(t):"string"!=typeof c||"function"==typeof(e=wr(c,a))&&e(t)};var l=this.a[Ah];this.a[Ah]=function(){var t;Dh(u,null),"function"==typeof l?l():"string"!=typeof l||"function"==typeof(t=wr(l,a))&&t()}}var Nh="callback",Ah="expired-callback",Rh="sitekey",xh="size";function Dh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Oh(t,e){return t.h.push(e),e.oa((function(){H(t.h,e)})),e}function Ph(t){if(t.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Lh(t,e,n){var r=!1;try{this.b=n||Oa.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Oa.SDK_VERSION?mr(Oa.SDK_VERSION,o):null,Ch.call(this,n,t,e,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,A(S),r)}function Mh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Fh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Fh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Ch.prototype).Ia=function(){var t=this;return this.f||(this.f=Oh(this,we().then((function(){if(Tr()&&!hr())return ur();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,$s(t.s,Os,{})})).then((function(e){t.a[Rh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e}))))},t.render=function(){Ph(this);var t=this;return Oh(this,this.Ia().then((function(){var e,n;return null===t.c&&(n=t.v,t.i||(e=ee(n),n=ae("DIV"),e.appendChild(n)),t.c=t.g.render(n,t.a)),t.c})))},t.verify=function(){Ph(this);var t=this;return Oh(this,this.render().then((function(e){return new de((function(n){var r,i=t.g.getResponse(e);i?n(i):(t.l.push(r=function(e){var i;e&&(i=r,W(t.l,(function(t){return t==i})),n(e))}),t.i&&t.g.execute(t.c))}))})))},t.reset=function(){Ph(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ph(this),this.J=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=ee(this.v);t=e.firstChild;)e.removeChild(t)},_(Lh,Ch);var Fh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function jh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Uh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Vh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function qh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Bh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function zh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Kh(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}}function Hh(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Wh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Gh(t){return p(t)&&"string"==typeof t.uid}function Qh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Yh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $h(t,e){for(var n in e){var r=e[n].name;t[r]=Zh(r,t[n],e[n].j)}}function Xh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Mh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function Jh(t,e,n,r){t[e]=Zh(e,n,r)}function Zh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Mh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$h(th.prototype,{kb:{name:"applyActionCode",j:[jh("code")]},Sa:{name:"checkActionCode",j:[jh("code")]},ob:{name:"confirmPasswordReset",j:[jh("code"),jh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[jh("email"),jh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[jh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[jh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yh(Vh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yh(Vh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[jh("email"),Yh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[jh("email"),Vh("actionCodeSettings")]},yb:{name:"setPersistence",j:[jh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[zh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[zh()]},Tc:{name:"signInWithCustomToken",j:[jh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[jh("email"),jh("password")]},Vc:{name:"signInWithEmailLink",j:[jh("email"),jh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[jh("phoneNumber"),Qh()]},Xc:{name:"signInWithPopup",j:[Hh()]},Yc:{name:"signInWithRedirect",j:[Hh()]},dd:{name:"updateCurrentUser",j:[Yh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof dl)}},Bh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[jh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[jh("url"),Vh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[jh("code")]}}),Xh(th.prototype,{lc:{name:"languageCode",lb:Yh(jh(),Bh(),"languageCode")},ti:{name:"tenantId",lb:Yh(jh(),Bh(),"tenantId")}}),(th.Persistence=Wu).LOCAL="local",th.Persistence.SESSION="session",th.Persistence.NONE="none",$h(dl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Uh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Uh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[zh()]},rb:{name:"linkWithCredential",j:[zh()]},Dc:{name:"linkWithPhoneNumber",j:[jh("phoneNumber"),Qh()]},Ec:{name:"linkWithPopup",j:[Hh()]},Fc:{name:"linkWithRedirect",j:[Hh()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[zh()]},ub:{name:"reauthenticateWithCredential",j:[zh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[jh("phoneNumber"),Qh()]},Nc:{name:"reauthenticateWithPopup",j:[Hh()]},Oc:{name:"reauthenticateWithRedirect",j:[Hh()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[jh(null,!0)]},cd:{name:"unlink",j:[jh("provider")]},Cb:{name:"updateEmail",j:[jh("email")]},Db:{name:"updatePassword",j:[jh("password")]},ed:{name:"updatePhoneNumber",j:[zh("phone")]},Eb:{name:"updateProfile",j:[Vh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[jh("email"),Yh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]}}),$h(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(de.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Xh(Kc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Uh("appVerificationDisabledForTesting")}}),$h(Hc.prototype,{confirm:{name:"confirm",j:[jh("verificationCode")]}}),Jh(to,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[so,_o,ko,io],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yh(jh(),Vh(),"json")]),Jh(Eo,"credential",(function(t,e){return new wo(t,e)}),[jh("email"),jh("password")]),$h(wo.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(ho.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Jh(ho,"credential",fo,[Yh(jh(),Vh(),"token")]),Jh(Eo,"credentialWithLink",To,[jh("email"),jh("emailLink")]),$h(po.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Jh(po,"credential",go,[Yh(jh(),Vh(),"token")]),$h(yo.prototype,{Ca:{name:"addScope",j:[jh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Jh(yo,"credential",vo,[Yh(jh(),Yh(Vh(),Bh()),"idToken"),Yh(jh(),Bh(),"accessToken",!0)]),$h(mo.prototype,{Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Jh(mo,"credential",bo,[Yh(jh(),Vh(),"token"),jh("secret",!0)]),$h(lo.prototype,{Ca:{name:"addScope",j:[jh("scope")]},credential:{name:"credential",j:[Yh(jh(),Yh(Vh(),Bh()),"optionsOrIdToken"),Yh(jh(),Bh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),$h(oo.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(no.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),Jh(No,"credential",Ao,[jh("verificationId"),jh("verificationCode")]),$h(No.prototype,{gb:{name:"verifyPhoneNumber",j:[Yh(jh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Wh(t.session,Ji)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wh(t.session,Zi)&&Gh(t.multiFactorHint):t.session&&t.multiFactorUid?Wh(t.session,Zi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Qh()]}}),$h(So.prototype,{w:{name:"toJSON",j:[jh(null,!0)]}}),$h(T.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(jo.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Fo.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Xc.prototype,{toJSON:{name:"toJSON",j:[jh(null,!0)]}}),$h(Qc.prototype,{Rc:{name:"resolveSignIn",j:[Kh()]}}),$h(rl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Kh(),jh("displayName",!0)]},bd:{name:"unenroll",j:[Yh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Gh},jh(),"multiFactorInfoIdentifier")]}}),$h(Lh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Jh(fi,"parseLink",wi,[jh("link")]),Jh(wh,"assertion",(function(t){return new el(t)}),[zh("phone")]),function(){if(void 0===Oa||!Oa.INTERNAL||!Oa.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ti,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Zr,VERIFY_AND_CHANGE_EMAIL:ei,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:th,AuthCredential:to,Error:T};Jh(t,"EmailAuthProvider",Eo,[]),Jh(t,"FacebookAuthProvider",ho,[]),Jh(t,"GithubAuthProvider",po,[]),Jh(t,"GoogleAuthProvider",yo,[]),Jh(t,"TwitterAuthProvider",mo,[]),Jh(t,"OAuthProvider",lo,[jh("providerId")]),Jh(t,"SAMLAuthProvider",co,[jh("providerId")]),Jh(t,"PhoneAuthProvider",No,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof th)}}]),Jh(t,"RecaptchaVerifier",Lh,[Yh(jh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Vh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Oa.app.App)}}]),Jh(t,"ActionCodeURL",fi,[]),Jh(t,"PhoneMultiFactorGenerator",wh,[]),Oa.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new th(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Oa.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Oa.registerVersion("@firebase/auth","0.16.8"),Oa.INTERNAL.extendNamespace({User:dl})}()}.apply("undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Pa="";function La(t){Pa=t}var Ma=(Fa.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),xo(e))},Fa.prototype.get=function(t){return null==(t=this.domStorage_.getItem(this.prefixedName_(t)))?null:Ro(t)},Fa.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Fa.prototype.prefixedName_=function(t){return this.prefix_+t},Fa.prototype.toString=function(){return this.domStorage_.toString()},Fa);function Fa(t){this.domStorage_=t,this.prefix_="firebase:"}var ja=(Ua.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Ua.prototype.get=function(t){return Po(this.cache_,t)?this.cache_[t]:null},Ua.prototype.remove=function(t){delete this.cache_[t]},Ua);function Ua(){this.cache_={},this.isInMemoryStorage=!0}function Va(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,oo(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Uo).update(e),t=t.digest(),so.encodeByteArray(t)}function qa(t,e){oo(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?($a.logLevel=ca.VERBOSE,Za=$a.log.bind($a),e&&Ya.set("logging_enabled",!0)):"function"==typeof t?Za=t:(Za=null,Ya.remove("logging_enabled"))}function Ba(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Ja.apply(void 0,eo([],to(t)));$a.error(n)}function za(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Ka(t,e){return t===e?0:t<e?-1:1}function Ha(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xo(e))}function Wa(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Ga,Qa=(li=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ma(e)}}catch(t){}return new ja})("localStorage"),Ya=li("sessionStorage"),$a=new ga("@firebase/database"),Xa=(Ga=1,function(){return Ga++}),Ja=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=t.apply(null,o):r+="object"==typeof o?xo(o):o,r+=" "}return r},Za=null,ts=!0,es=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===ts&&(ts=!1,null===Za&&!0===Ya.get("logging_enabled")&&qa(!0)),Za&&(t=Ja.apply(null,e),Za(t))},ns=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];es.apply(void 0,eo([t],to(e)))}},rs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Ja.apply(void 0,eo([],to(t)));throw $a.error(n),new Error(n)},is=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Ja.apply(void 0,eo([],to(t)));$a.warn(n)},os="[MIN_NAME]",as="[MAX_NAME]",ss=function(t,e){if(t===e)return 0;if(t===os||e===as)return-1;if(e===os||t===as)return 1;var n=gs(t),r=gs(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},us=function t(e){if("object"!=typeof e||null===e)return xo(e);var n,r=[];for(n in e)r.push(n);r.sort();for(var i="{",o=0;o<r.length;o++)0!==o&&(i+=","),i+=xo(r[o]),i+=":",i+=t(e[r[o]]);return i+"}"};function cs(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function ls(t){var e,n,r,i;oo(!za(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],a=52;a;--a)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;--a)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var s=o.join(""),u="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function hs(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var fs=new RegExp("^-?(0*)\\d{1,10}$"),ds=-2147483648,ps=2147483647,gs=function(t){return fs.test(t)&&(t=Number(t),ds<=t&&t<=ps)?t:null},ys=function(t){try{t()}catch(r){setTimeout((function(){var e=r.stack||"";throw is("Exception was thrown by user callback.",e),r}),Math.floor(0))}},vs=(ms.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},ms.prototype.addTokenChangeListener=function(t){var e;null!==(e=this.appCheckProvider)&&void 0!==e&&e.get().then((function(e){return e.addTokenListener(t)}))},ms.prototype.notifyForInvalidToken=function(){is('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},ms);function ms(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null!=e&&e.get().then((function(t){return n.appCheck=t}))}var bs=(ws.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(es("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},ws.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},ws.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},ws.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',is(t)},ws);function ws(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}var _s=(Es.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},Es.prototype.addTokenChangeListener=function(t){t(this.accessToken)},Es.prototype.removeTokenChangeListener=function(t){},Es.prototype.notifyForInvalidToken=function(){},Es.OWNER="owner",Es);function Es(t){this.accessToken=t}var Ts=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Is="websocket",Ss="long_polling",ks=(Cs.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Cs.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Cs.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Qa.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Cs.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Cs.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Cs);function Cs(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qa.get("host:"+t)||this._host}function Ns(t,e,n){var r;if(oo("string"==typeof e,"typeof type must == string"),oo("object"==typeof n,"typeof params must == object"),e===Is)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Ss)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return cs(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var As=(Rs.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Po(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Rs.prototype.get=function(){return uo(this.counters_)},Rs);function Rs(){this.counters_={}}var xs={},Ds={};function Os(t){return t=t.toString(),xs[t]||(xs[t]=new As),xs[t]}var Ps=(Ls.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Ls.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&ys((function(){n.onMessage_(t[e])}))}(e);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},Ls);function Ls(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Ms="pLPCommand",Fs="pRTLPCB",js=(Us.prototype.open=function(t,e){var n,r,i,o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ps(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null}),Math.floor(3e4)),n=function(){var t;o.isClosed_||(o.scriptTagHolder=new Vs((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=to(t,5),r=n[0],i=n[1],a=n[2];if(n[3],n[4],o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"===r)o.id=i,o.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(i,(function(){o.onClosed_()}))):o.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(r=to(t,2))[0],r=r[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(n,r)}),(function(){o.onClosed_()}),o.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),o.applicationId&&(t.p=o.applicationId),o.appCheckToken&&(t.ac=o.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ts.test(location.hostname)&&(t.r="f"),t=o.urlFn(t),o.log_("Connecting via long-poll to "+t),o.scriptTagHolder.addTag(t,(function(){})))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&i()})),window.attachEvent("onload",i)))},Us.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Us.forceAllow=function(){Us.forceAllow_=!0},Us.forceDisallow=function(){Us.forceDisallow_=!0},Us.isAvailable=function(){return!!Us.forceAllow_||!(Us.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Us.prototype.markConnectionHealthy=function(){},Us.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Us.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Us.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Us.prototype.send=function(t){t=xo(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e=Wa(t=function(t){return t=no(t),so.encodeByteArray(t,!0)}(t),1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},Us.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Us.prototype.incrementIncomingBytes_=function(t){t=xo(t).length,this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Us);function Us(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ns(t),this.stats_=Os(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),Ns(e,Ss,t)}}var Vs=(qs.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||es("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},qs.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},qs.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},qs.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(t={}).id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+e.length<=1870;){var r=this.pendingSegs.shift();e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d,n++}return this.addLongPollTag_(t+=e,this.currentSerial),!0}return!1},qs.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},qs.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},qs.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){es("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},qs);function qs(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Xa(),window[Ms+this.uniqueCallbackIdentifier]=t,window[Fs+this.uniqueCallbackIdentifier]=e,this.myIFrame=qs.createIFrame_(),e="",e="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(e),this.myIFrame.doc.close()}catch(t){es("frame writing exception"),t.stack&&es(t.stack),es(t)}}var Bs=null;"undefined"!=typeof MozWebSocket?Bs=MozWebSocket:"undefined"!=typeof WebSocket&&(Bs=WebSocket);var zs=(Ks.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&Ts.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Ns(t,Is,i)},Ks.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qa.set("previous_websocket_failure",!0);try{bo()||(r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}},this.mySock=new Bs(this.connURL,[],r))}catch(t){this.log_("Error instantiating WebSocket.");var r=t.message||t.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection."),(t=t.message||t.data)&&n.log_(t),n.onClosed_()}},Ks.prototype.start=function(){},Ks.forceDisallow=function(){Ks.forceDisallow_=!0},Ks.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==Bs&&!Ks.forceDisallow_},Ks.previouslyFailed=function(){return Qa.isInMemoryStorage||!0===Qa.get("previous_websocket_failure")},Ks.prototype.markConnectionHealthy=function(){Qa.remove("previous_websocket_failure")},Ks.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Ro(t),this.onMessage(t))},Ks.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Ks.prototype.extractFrameCount_=function(t){if(oo(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Ks.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),(null!==this.frames||null!==(t=this.extractFrameCount_(t)))&&this.appendFrame_(t))},Ks.prototype.send=function(t){this.resetKeepAlive(),t=xo(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Wa(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Ks.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Ks.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Ks.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Ks.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},Ks.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Ks.responsesRequiredToBeHealthy=2,Ks.healthyTimeout=3e4,Ks);function Ks(t,e,n,r,i,o,a){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ns(this.connId),this.stats_=Os(e),this.connURL=Ks.connectionURL_(e,o,a,r),this.nodeAdmin=e.nodeAdmin}var Hs=(Object.defineProperty(Ws,"ALL_TRANSPORTS",{get:function(){return[js,zs]},enumerable:!1,configurable:!0}),Ws.prototype.initTransports_=function(t){var e,n,r=zs&&zs.isAvailable(),i=r&&!zs.previouslyFailed();if(t.webSocketOnly&&(r||is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zs];else{var o=this.transports_=[];try{for(var a=Zi(Ws.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},Ws.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Ws.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Ws);function Ws(t){this.initTransports_(t)}var Gs=(Qs.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0)),0<(e=e.healthyTimeout||0)&&(this.healthyTimeout_=hs((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(e)))},Qs.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Qs.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},Qs.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},Qs.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},Qs.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Qs.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Qs.prototype.onSecondaryMessageReceived_=function(t){var e=Ha("t",t);if(t=Ha("d",t),"c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},Qs.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Qs.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Qs.prototype.onPrimaryMessageReceived_=function(t){var e=Ha("t",t);t=Ha("d",t),"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},Qs.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Qs.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Qs.prototype.onControl_=function(t){var e=Ha("t",t);if("d"in t)if(t=t.d,"h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?Ba("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ba("Unknown control packet command: "+e)},Qs.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&is("Protocol version mismatch detected"),this.tryStartUpgrade_())},Qs.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Qs.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_);t=this.disconnReceiver_(this.secondaryConn_),this.secondaryConn_.open(n,t),hs((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},Qs.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},Qs.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hs((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},Qs.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Qs.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Qs.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Qs.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Qs.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Qs.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Qs.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Qs);function Qs(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ns("c:"+this.id+":"),this.transportManager_=new Hs(e),this.log_("Connection created"),this.start_()}function Ys(){}Ys.prototype.put=function(t,e,n,r){},Ys.prototype.merge=function(t,e,n,r){},Ys.prototype.refreshAuthToken=function(t){},Ys.prototype.refreshAppCheckToken=function(t){},Ys.prototype.onDisconnectPut=function(t,e,n){},Ys.prototype.onDisconnectMerge=function(t,e,n){},Ys.prototype.onDisconnectCancel=function(t,e){},Ys.prototype.reportStats=function(t){},G=Ys;var $s=(Xs.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=eo([],to(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Xs.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n}),(t=this.getInitialEvent(t))&&e.apply(n,t)},Xs.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Xs.prototype.validateEventType_=function(t){oo(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},Xs);function Xs(t){this.allowedEvents_=t,this.listeners_={},oo(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Js,Zs=(Yi(tu,Js=$s),tu.getInstance=function(){return new tu},tu.prototype.getInitialEvent=function(t){return oo("online"===t,"Unknown event type: "+t),[this.online_]},tu.prototype.currentlyOnline=function(){return this.online_},tu);function tu(){var t=Js.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||go()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}var eu=32,nu=768,ru=(iu.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},iu);function iu(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function ou(){return new ru("")}function au(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function su(t){return t.pieces_.length-t.pieceNum_}function uu(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ru(t.pieces_,e)}function cu(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function lu(t,e){return t.pieces_.slice(t.pieceNum_+(e=void 0===e?0:e))}function hu(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ru(e,0)}function fu(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ru)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)0<i[r].length&&n.push(i[r])}return new ru(n,0)}function du(t){return t.pieceNum_>=t.pieces_.length}function pu(t,e){var n=au(t),r=au(e);if(null===n)return e;if(n===r)return pu(uu(t),uu(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gu(t,e){for(var n=lu(t,0),r=lu(e,0),i=0;i<n.length&&i<r.length;i++){var o=ss(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function yu(t,e){if(su(t)!==su(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function vu(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(su(t)>su(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var mu=function(t,e){this.errorPrefix_=e,this.parts_=lu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Yo(this.parts_[n]);bu(this)};function bu(t){if(t.byteLength_>nu)throw new Error(t.errorPrefix_+"has a key path longer than "+nu+" bytes ("+t.byteLength_+").");if(t.parts_.length>eu)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+eu+") or object contains a cycle "+wu(t))}function wu(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var _u,Eu=(Yi(Tu,_u=$s),Tu.getInstance=function(){return new Tu},Tu.prototype.getInitialEvent=function(t){return oo("visible"===t,"Unknown event type: "+t),[this.visible_]},Tu);function Tu(){var t,e,n=_u.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,(function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))}),!1),n}var Iu,Su=1e3,ku=3e5,Cu=(Yi(Nu,Iu=G),Nu.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_;e={r:r,a:t,b:e},this.log_(xo(e)),oo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},Nu.prototype.get=function(t){var e=this;this.initConnection_();var n=new lo,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},Nu.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),oo(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oo(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:e,query:t,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},Nu.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},Nu.prototype.sendListen_=function(t){var e=this,n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(function(o){var a=o.d,s=o.s;Nu.warnOnListenWarnings_(a,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==s&&e.removeListen_(r,i),t.onComplete&&t.onComplete(s,a))}))},Nu.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Po(t,"w")&&(t=Lo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',e=e._path.toString(),is("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},Nu.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},Nu.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){return"object"==typeof(t=Do(t).claims)&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Nu.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},Nu.prototype.tryAuth=function(){var t,e,n,r=this;this.connected_&&this.authToken_&&(e=function(t){return!!(t=Do(t).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")}(t=this.authToken_)?"auth":"gauth",n={cred:t},null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(function(e){var n=e.s;e=e.d||"error",r.authToken_===t&&("ok"===n?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(n,e))})))},Nu.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s;e=e.d||"error","ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,e)}))},Nu.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),oo(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},Nu.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e),t={p:t},r&&(t.q=n,t.t=r),this.sendRequest("n",t)},Nu.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Nu.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Nu.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Nu.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n},this.log_("onDisconnect "+t,n),this.sendRequest(t,n,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},Nu.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Nu.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Nu.prototype.putInternal=function(t,e,n,r,i){this.initConnection_(),n={p:e,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},Nu.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},Nu.prototype.reportStats=function(t){var e=this;this.connected_&&(this.log_("reportStats",t={c:t}),this.sendRequest("s",t,(function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))})))},Nu.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+xo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Nu.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Ba("Unrecognized action received from server: "+xo(t)+"\nAre you using the latest client?")},Nu.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Nu.prototype.scheduleConnect_=function(t){var e=this;oo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},Nu.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},Nu.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Su,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Nu.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Su,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Nu.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Su),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Nu.prototype.establishConnection_=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Ji(this,(function(h){switch(h.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Nu.nextConnectionId_++,c=this.lastSessionId,i=!1,o=null,a=function(){o?o.close():(i=!0,n())},u=function(t){oo(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(t)},this.realtime_={close:a,sendRequest:u},s=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(s),this.appCheckTokenProvider_.getToken(s)])];case 2:return u=to.apply(void 0,[h.sent(),2]),s=u[0],u=u[1],i?es("getToken() completed but was canceled"):(es("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=u&&u.token,o=new Gs(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,(function(t){is(t+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")}),c)),[3,4];case 3:return c=h.sent(),this.log_("Failed to get token: "+c),i||(this.repoInfo_.nodeAdmin&&is(c),a()),[3,4];case 4:return[2]}}))}))},Nu.prototype.interrupt=function(t){es("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Nu.prototype.resume=function(t){es("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Mo(this.interruptReasons_)&&(this.reconnectDelay_=Su,this.realtime_||this.scheduleConnect_(0))},Nu.prototype.handleTimestamp_=function(t){t-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:t})},Nu.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Nu.prototype.onListenRevoked_=function(t,e){e=e?e.map((function(t){return us(t)})).join("$"):"default",(e=this.removeListen_(t,e))&&e.onComplete&&e.onComplete("permission_denied")},Nu.prototype.removeListen_=function(t,e){var n,r=new ru(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},Nu.prototype.onAuthRevoked_=function(t,e){es("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Nu.prototype.onAppCheckRevoked_=function(t,e){es("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,3<=this.invalidAppCheckTokenCount_&&this.appCheckTokenProvider_.notifyForInvalidToken())},Nu.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Nu.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Zi(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,Zi(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},Nu.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Pa.replace(/\./g,"-")]=1,go()?t["framework.cordova"]=1:mo()&&(t["framework.reactnative"]=1),this.reportStats(t)},Nu.prototype.shouldReconnect_=function(){var t=Zs.getInstance().currentlyOnline();return Mo(this.interruptReasons_)&&t},Nu.nextPersistentConnectionId_=0,Nu.nextConnectionId_=0,Nu);function Nu(t,e,n,r,i,o,a,s){var u=Iu.call(this)||this;if(u.repoInfo_=t,u.applicationId_=e,u.onDataUpdate_=n,u.onConnectStatus_=r,u.onServerInfoUpdate_=i,u.authTokenProvider_=o,u.appCheckTokenProvider_=a,u.authOverride_=s,u.id=Nu.nextPersistentConnectionId_++,u.log_=ns("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingGets_=[],u.outstandingPutCount_=0,u.outstandingGetCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=Su,u.maxReconnectDelay_=ku,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.appCheckToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.invalidAppCheckTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!bo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Eu.getInstance().on("visible",u.onVisible_,u),-1===t.host.indexOf("fblocal")&&Zs.getInstance().on("online",u.onOnline_,u),u}var Au,Ru,xu=(Du.Wrap=function(t,e){return new Du(t,e)},Du);function Du(t,e){this.name=t,this.node=e}function Ou(){}function Pu(){return null!==Ru&&Ru.apply(this,arguments)||this}Ou.prototype.getCompare=function(){return this.compare.bind(this)},Ou.prototype.indexedValueChanged=function(t,e){return t=new xu(os,t),e=new xu(os,e),0!==this.compare(t,e)},Ou.prototype.minPost=function(){return xu.MIN};var Lu=new(Yi(Pu,Ru=W=Ou),Object.defineProperty(Pu,"__EMPTY_NODE",{get:function(){return Au},set:function(t){Au=t},enumerable:!1,configurable:!0}),Pu.prototype.compare=function(t,e){return ss(t.name,e.name)},Pu.prototype.isDefinedOn=function(t){throw ao("KeyIndex.isDefinedOn not expected to be called.")},Pu.prototype.indexedValueChanged=function(t,e){return!1},Pu.prototype.minPost=function(){return xu.MIN},Pu.prototype.maxPost=function(){return new xu(as,Au)},Pu.prototype.makePost=function(t,e){return oo("string"==typeof t,"KeyIndex indexValue must always be a string."),new xu(t,Au)},Pu.prototype.toString=function(){return".key"},li=Pu),Mu=(Fu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Fu.prototype.hasNext=function(){return 0<this.nodeStack_.length},Fu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Fu);function Fu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var ju=(Uu.prototype.copy=function(t,e,n,r,i){return new Uu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Uu.prototype.count=function(){return this.left.count()+1+this.right.count()},Uu.prototype.isEmpty=function(){return!1},Uu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Uu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Uu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Uu.prototype.minKey=function(){return this.min_().key},Uu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Uu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Uu.prototype.removeMin_=function(){if(this.left.isEmpty())return Bu.EMPTY_NODE;var t=this;return(t=(t=t.left.isRed_()||t.left.left.isRed_()?t:t.moveRedLeft_()).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Uu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()?r:r.moveRedLeft_()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()?r:r.moveRedRight_()).key)){if(r.right.isEmpty())return Bu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Uu.prototype.isRed_=function(){return this.color},Uu.prototype.fixUp_=function(){var t=this;return(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},Uu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},Uu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},Uu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Uu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Uu.prototype.rotateRight_=function(){var t=this.copy(null,null,Uu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Uu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Uu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Uu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Uu.RED=!0,Uu.BLACK=!1,Uu);function Uu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Uu.RED,this.left=null!=r?r:Bu.EMPTY_NODE,this.right=null!=i?i:Bu.EMPTY_NODE}function Vu(){}Vu.prototype.copy=function(t,e,n,r,i){return this},Vu.prototype.insert=function(t,e,n){return new ju(t,e,null)},Vu.prototype.remove=function(t,e){return this},Vu.prototype.count=function(){return 0},Vu.prototype.isEmpty=function(){return!0},Vu.prototype.inorderTraversal=function(t){return!1},Vu.prototype.reverseTraversal=function(t){return!1},Vu.prototype.minKey=function(){return null},Vu.prototype.maxKey=function(){return null},Vu.prototype.check_=function(){return 0},Vu.prototype.isRed_=function(){return!1},$s=Vu;var qu,Bu=(zu.prototype.insert=function(t,e){return new zu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ju.BLACK,null,null))},zu.prototype.remove=function(t){return new zu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ju.BLACK,null,null))},zu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},zu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},zu.prototype.isEmpty=function(){return this.root_.isEmpty()},zu.prototype.count=function(){return this.root_.count()},zu.prototype.minKey=function(){return this.root_.minKey()},zu.prototype.maxKey=function(){return this.root_.maxKey()},zu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},zu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},zu.prototype.getIterator=function(t){return new Mu(this.root_,null,this.comparator_,!1,t)},zu.prototype.getIteratorFrom=function(t,e){return new Mu(this.root_,t,this.comparator_,!1,e)},zu.prototype.getReverseIteratorFrom=function(t,e){return new Mu(this.root_,t,this.comparator_,!0,e)},zu.prototype.getReverseIterator=function(t){return new Mu(this.root_,null,this.comparator_,!0,t)},zu.EMPTY_NODE=new $s,zu);function zu(t,e){void 0===e&&(e=zu.EMPTY_NODE),this.comparator_=t,this.root_=e}function Ku(t,e){return ss(t.name,e.name)}function Hu(t,e){return ss(t,e)}function Wu(t){return"number"==typeof t?"number:"+ls(t):"string:"+t}var Gu,Qu,Yu,$u,Xu=function(t){var e;t.isLeafNode()?(e=t.val(),oo("string"==typeof e||"number"==typeof e||"object"==typeof e&&Po(e,".sv"),"Priority must be a string or number.")):oo(t===qu||t.isEmpty(),"priority of unexpected type."),oo(t===qu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ju=(Object.defineProperty(Zu,"__childrenNodeConstructor",{get:function(){return Gu},set:function(t){Gu=t},enumerable:!1,configurable:!0}),Zu.prototype.isLeafNode=function(){return!0},Zu.prototype.getPriority=function(){return this.priorityNode_},Zu.prototype.updatePriority=function(t){return new Zu(this.value_,t)},Zu.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Zu.__childrenNodeConstructor.EMPTY_NODE},Zu.prototype.getChild=function(t){return du(t)?this:".priority"===au(t)?this.priorityNode_:Zu.__childrenNodeConstructor.EMPTY_NODE},Zu.prototype.hasChild=function(){return!1},Zu.prototype.getPredecessorChildName=function(t,e){return null},Zu.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Zu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Zu.prototype.updateChild=function(t,e){var n=au(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(oo(".priority"!==n||1===su(t),".priority must be the last token in a path"),this.updateImmediateChild(n,Zu.__childrenNodeConstructor.EMPTY_NODE.updateChild(uu(t),e)))},Zu.prototype.isEmpty=function(){return!1},Zu.prototype.numChildren=function(){return 0},Zu.prototype.forEachChild=function(t,e){return!1},Zu.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Zu.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Wu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?ls(this.value_):this.value_,this.lazyHash_=Va(t)),this.lazyHash_},Zu.prototype.getValue=function(){return this.value_},Zu.prototype.compareTo=function(t){return t===Zu.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Zu.__childrenNodeConstructor?-1:(oo(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Zu.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Zu.VALUE_TYPE_ORDER.indexOf(e),i=Zu.VALUE_TYPE_ORDER.indexOf(n);return oo(0<=r,"Unknown leaf type: "+e),oo(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Zu.prototype.withIndex=function(){return this},Zu.prototype.isIndexed=function(){return!0},Zu.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},Zu.VALUE_TYPE_ORDER=["object","boolean","number","string"],Zu);function Zu(t,e){void 0===e&&(e=Zu.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,oo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Xu(this.priorityNode_)}function tc(){return null!==$u&&$u.apply(this,arguments)||this}var ec=new(Yi(tc,$u=W),tc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority();return 0===(r=n.compareTo(r))?ss(t.name,e.name):r},tc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},tc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},tc.prototype.minPost=function(){return xu.MIN},tc.prototype.maxPost=function(){return new xu(as,new Ju("[PRIORITY-POST]",Yu))},tc.prototype.makePost=function(t,e){return t=Qu(t),new xu(e,new Ju("[PRIORITY-POST]",t))},tc.prototype.toString=function(){return".priority"},tc),nc=Math.log(2),rc=(ic.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},ic);function ic(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/nc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var oc,ac,sc=function(t,e,n,r){t.sort(e);var i=function e(r,i){if(0==(o=i-r))return null;if(1==o)return a=t[r],s=n?n(a):a,new ju(s,a.node,ju.BLACK,null,null);r=e(r,o=parseInt(o/2,10)+r),i=e(o+1,i);var o,a=t[o],s=n?n(a):a;return new ju(s,a.node,ju.BLACK,r,i)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e,e=i(1+o,s),s=t[o],o=n?n(s):s,u(new ju(o,s.node,r,null,e))},u=function(t){r=r?r.left=t:o=t},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,ju.BLACK):(s(h,ju.BLACK),s(h,ju.RED))}return o}(new rc(t.length));return new Bu(r||e,o)},uc={},cc=(Object.defineProperty(lc,"Default",{get:function(){return oo(ec,"ChildrenNode.ts has not been loaded"),oc=oc||new lc({".priority":uc},{".priority":ec})},enumerable:!1,configurable:!0}),lc.prototype.get=function(t){var e=Lo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Bu?e:null},lc.prototype.hasIndex=function(t){return Po(this.indexSet_,t.toString())},lc.prototype.addIndex=function(t,e){oo(t!==Lu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=e.getIterator(xu.Wrap),o=i.getNext();o;)r=r||t.isDefinedOn(o.node),n.push(o),o=i.getNext();var a=r?sc(n,t.getCompare()):uc,s=t.toString(),u=$i({},this.indexSet_);return u[s]=t,(e=$i({},this.indexes_))[s]=a,new lc(e,u)},lc.prototype.addToIndexes=function(t,e){var n=this;return new lc(Fo(this.indexes_,(function(r,i){var o=Lo(n.indexSet_,i);if(oo(o,"Missing index implementation for "+i),r===uc){if(o.isDefinedOn(t.node)){for(var a=[],s=e.getIterator(xu.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),sc(a,o.getCompare())}return uc}return o=r,(o=(i=e.get(t.name))?r.remove(new xu(t.name,i)):o).insert(t,t.node)})),this.indexSet_)},lc.prototype.removeFromIndexes=function(t,e){return new lc(Fo(this.indexes_,(function(n){if(n===uc)return n;var r=e.get(t.name);return r?n.remove(new xu(t.name,r)):n})),this.indexSet_)},lc);function lc(t,e){this.indexes_=t,this.indexSet_=e}var hc,fc=(Object.defineProperty(dc,"EMPTY_NODE",{get:function(){return ac=ac||new dc(new Bu(Hu),null,cc.Default)},enumerable:!1,configurable:!0}),dc.prototype.isLeafNode=function(){return!1},dc.prototype.getPriority=function(){return this.priorityNode_||ac},dc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new dc(this.children_,t,this.indexMap_)},dc.prototype.getImmediateChild=function(t){return".priority"===t?this.getPriority():null===(t=this.children_.get(t))?ac:t},dc.prototype.getChild=function(t){var e=au(t);return null===e?this:this.getImmediateChild(e).getChild(uu(t))},dc.prototype.hasChild=function(t){return null!==this.children_.get(t)},dc.prototype.updateImmediateChild=function(t,e){if(oo(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new xu(t,e),r=void 0,i=void 0;return i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ac:this.priorityNode_,new dc(r,n,i)},dc.prototype.updateChild=function(t,e){var n=au(t);return null===n?e:(oo(".priority"!==au(t)||1===su(t),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(uu(t),e),this.updateImmediateChild(n,e))},dc.prototype.isEmpty=function(){return this.children_.isEmpty()},dc.prototype.numChildren=function(){return this.children_.count()},dc.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(ec,(function(o,a){e[o]=a.val(t),n++,i&&dc.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){var o,a=[];for(o in e)a[o]=e[o];return a}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},dc.prototype.hash=function(){var t;return null===this.lazyHash_&&(t="",this.getPriority().isEmpty()||(t+="priority:"+Wu(this.getPriority().val())+":"),this.forEachChild(ec,(function(e,n){""!==(n=n.hash())&&(t+=":"+e+":"+n)})),this.lazyHash_=""===t?"":Va(t)),this.lazyHash_},dc.prototype.getPredecessorChildName=function(t,e,n){return(n=this.resolveIndex_(n))?(e=n.getPredecessorKey(new xu(t,e)))?e.name:null:this.children_.getPredecessorKey(t)},dc.prototype.getFirstChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.minKey())&&t.name:this.children_.minKey()},dc.prototype.getFirstChild=function(t){return(t=this.getFirstChildName(t))?new xu(t,this.children_.get(t)):null},dc.prototype.getLastChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.maxKey())&&t.name:this.children_.maxKey()},dc.prototype.getLastChild=function(t){return(t=this.getLastChildName(t))?new xu(t,this.children_.get(t)):null},dc.prototype.forEachChild=function(t,e){return(t=this.resolveIndex_(t))?t.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},dc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},dc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,xu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},dc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},dc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,xu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},dc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gc?-1:0},dc.prototype.withIndex=function(t){return t===Lu||this.indexMap_.hasIndex(t)?this:(t=this.indexMap_.addIndex(t,this.children_),new dc(this.children_,this.priorityNode_,t))},dc.prototype.isIndexed=function(t){return t===Lu||this.indexMap_.hasIndex(t)},dc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(ec),n=t.getIterator(ec),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},dc.prototype.resolveIndex_=function(t){return t===Lu?null:this.indexMap_.get(t.toString())},dc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,dc);function dc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Xu(this.priorityNode_),this.children_.isEmpty()&&oo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function pc(){return hc.call(this,new Bu(Hu),fc.EMPTY_NODE,cc.Default)||this}var gc=new(Yi(pc,hc=fc),pc.prototype.compareTo=function(t){return t===this?0:1},pc.prototype.equals=function(t){return t===this},pc.prototype.getPriority=function(){return this},pc.prototype.getImmediateChild=function(t){return fc.EMPTY_NODE},pc.prototype.isEmpty=function(){return!1},pc);Object.defineProperties(xu,{MIN:{value:new xu(os,fc.EMPTY_NODE)},MAX:{value:new xu(as,gc)}}),li.__EMPTY_NODE=fc.EMPTY_NODE,Ju.__childrenNodeConstructor=fc,Yu=qu=gc;var yc=!0;function vc(t,e){if(void 0===e&&(e=null),null===t)return fc.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),oo(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"!=typeof(t="object"==typeof t&&".value"in t&&null!==t[".value"]?t[".value"]:t)||".sv"in t)return new Ju(t,vc(e));if(t instanceof Array||!yc){var n=fc.EMPTY_NODE;return cs(t,(function(e,r){Po(t,e)&&"."!==e.substring(0,1)&&(!(r=vc(r)).isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r)))})),n.updatePriority(vc(e))}var r=[],i=!1;if(cs(t,(function(t,e){"."!==t.substring(0,1)&&((e=vc(e)).isEmpty()||(i=i||!e.getPriority().isEmpty(),r.push(new xu(t,e))))})),0===r.length)return fc.EMPTY_NODE;var o=sc(r,Ku,(function(t){return t.name}),Hu);if(i){var a=sc(r,ec.getCompare());return new fc(o,vc(e),new cc({".priority":a},{".priority":ec}))}return new fc(o,vc(e),cc.Default)}Qu=vc;var mc,bc,wc=(Yi(_c,mc=W),_c.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},_c.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},_c.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node);return 0===(r=n.compareTo(r))?ss(t.name,e.name):r},_c.prototype.makePost=function(t,e){return t=vc(t),t=fc.EMPTY_NODE.updateChild(this.indexPath_,t),new xu(e,t)},_c.prototype.maxPost=function(){var t=fc.EMPTY_NODE.updateChild(this.indexPath_,gc);return new xu(as,t)},_c.prototype.toString=function(){return lu(this.indexPath_,0).join("/")},_c);function _c(t){var e=mc.call(this)||this;return e.indexPath_=t,oo(!du(t)&&".priority"!==au(t),"Can't create PathIndex with empty path or .priority key"),e}function Ec(){return null!==bc&&bc.apply(this,arguments)||this}function Tc(t){if(t===""+ps)return"-";var e=gs(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?as:(e=n[i],e=Nc.charAt(Nc.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function Ic(t){if(t===""+ds)return os;var e=gs(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+ps:(delete n[n.length-1],n.join("")):(n[n.length-1]=Nc.charAt(Nc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var Sc,kc,Cc=new(Yi(Ec,bc=W),Ec.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ss(t.name,e.name):n},Ec.prototype.isDefinedOn=function(t){return!0},Ec.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Ec.prototype.minPost=function(){return xu.MIN},Ec.prototype.maxPost=function(){return xu.MAX},Ec.prototype.makePost=function(t,e){return t=vc(t),new xu(e,t)},Ec.prototype.toString=function(){return".value"},Ec),Nc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ac=(Sc=0,kc=[],function(t){var e=t===Sc;Sc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Nc.charAt(t%64),t=Math.floor(t/64);oo(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===kc[r];r--)kc[r]=0;kc[r]++}else for(r=0;r<12;r++)kc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Nc.charAt(kc[r]);return oo(20===i.length,"nextPushId: Length should be 20."),i});function Rc(t){return{type:"value",snapshotNode:t}}function xc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Dc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Oc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Pc=(Lc.prototype.updateChild=function(t,e,n,r,i,o){oo(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Dc(e,a)):oo(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(xc(e,n)):o.trackChildChange(Oc(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Lc.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(ec,(function(t,r){e.hasChild(t)||n.trackChildChange(Dc(t,r))})),e.isLeafNode()||e.forEachChild(ec,(function(e,r){var i;t.hasChild(e)?(i=t.getImmediateChild(e)).equals(r)||n.trackChildChange(Oc(e,r,i)):n.trackChildChange(xc(e,r))}))),e.withIndex(this.index_)},Lc.prototype.updatePriority=function(t,e){return t.isEmpty()?fc.EMPTY_NODE:t.updatePriority(e)},Lc.prototype.filtersNodes=function(){return!1},Lc.prototype.getIndexedFilter=function(){return this},Lc.prototype.getIndex=function(){return this.index_},Lc);function Lc(t){this.index_=t}var Mc=(Fc.prototype.getStartPost=function(){return this.startPost_},Fc.prototype.getEndPost=function(){return this.endPost_},Fc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Fc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new xu(e,n))||(n=fc.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Fc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=fc.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(fc.EMPTY_NODE),i=this;return e.forEachChild(ec,(function(t,e){i.matches(new xu(t,e))||(r=r.updateImmediateChild(t,fc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},Fc.prototype.updatePriority=function(t,e){return t},Fc.prototype.filtersNodes=function(){return!0},Fc.prototype.getIndexedFilter=function(){return this.indexedFilter_},Fc.prototype.getIndex=function(){return this.index_},Fc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Fc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Fc);function Fc(t){this.indexedFilter_=new Pc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Fc.getStartPost_(t),this.endPost_=Fc.getEndPost_(t)}var jc=(Uc.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new xu(e,n))||(n=fc.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Uc.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=fc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=fc.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(fc.EMPTY_NODE);var s,u=void 0,c=void 0,l=void 0;i=void 0,l=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),s=this.index_.getCompare(),function(t,e){return s(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0;for(var h=!1;i.hasNext();)a=i.getNext(),(h=!h&&l(u,a)<=0||h)&&o<this.limit_&&l(a,c)<=0?o++:r=r.updateImmediateChild(a.name,fc.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Uc.prototype.updatePriority=function(t,e){return t},Uc.prototype.filtersNodes=function(){return!0},Uc.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Uc.prototype.getIndex=function(){return this.index_},Uc.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,a;a=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var s=t;oo(s.numChildren()===this.limit_,"");var u=new xu(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);return l&&!n.isEmpty()&&0<=d?(null!=i&&i.trackChildChange(Oc(e,n,h)),s.updateImmediateChild(e,n)):(null!=i&&i.trackChildChange(Dc(e,h)),h=s.updateImmediateChild(e,fc.EMPTY_NODE),null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(xc(f.name,f.node)),h.updateImmediateChild(f.name,f.node)):h)}return!n.isEmpty()&&l&&0<=a(c,u)?(null!=i&&(i.trackChildChange(Dc(c.name,c.node)),i.trackChildChange(xc(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,fc.EMPTY_NODE)):t},Uc);function Uc(t){this.rangedFilter_=new Mc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Vc=(qc.prototype.hasStart=function(){return this.startSet_},qc.prototype.hasStartAfter=function(){return this.startAfterSet_},qc.prototype.hasEndBefore=function(){return this.endBeforeSet_},qc.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},qc.prototype.getIndexStartValue=function(){return oo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},qc.prototype.getIndexStartName=function(){return oo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:os},qc.prototype.hasEnd=function(){return this.endSet_},qc.prototype.getIndexEndValue=function(){return oo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},qc.prototype.getIndexEndName=function(){return oo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:as},qc.prototype.hasLimit=function(){return this.limitSet_},qc.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},qc.prototype.getLimit=function(){return oo(this.limitSet_,"Only valid if limit has been set"),this.limit_},qc.prototype.getIndex=function(){return this.index_},qc.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},qc.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ec},qc.prototype.copy=function(){var t=new qc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},qc);function qc(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ec}function Bc(t,e,n){return(t=t.copy()).startSet_=!0,t.indexStartValue_=e=void 0===e?null:e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function zc(t,e,n){return(t=t.copy()).endSet_=!0,t.indexEndValue_=e=void 0===e?null:e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function Kc(t,e){return(t=t.copy()).index_=e,t}function Hc(t){var e,n={};return t.isDefault()||(e=t.index_===ec?"$priority":t.index_===Cc?"$value":t.index_===Lu?"$key":(oo(t.index_ instanceof wc,"Unrecognized index type!"),t.index_.toString()),n.orderBy=xo(e),t.startSet_&&(n.startAt=xo(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+xo(t.indexStartName_))),t.endSet_&&(n.endAt=xo(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+xo(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Wc(t){var e,n={};return t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==ec&&(n.i=t.index_.toString()),n}var Gc,Qc=(Yi(Yc,Gc=G),Yc.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Yc.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(oo(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},Yc.prototype.listen=function(t,e,n,r){var i=this,o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);var a=Yc.getListenId_(t,n),s={};this.listens_[a]=s,t=Hc(t._queryParams),this.restRequest_(o+".json",t,(function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),Lo(i.listens_,a)===s&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},Yc.prototype.unlisten=function(t,e){e=Yc.getListenId_(t,e),delete this.listens_[e]},Yc.prototype.get=function(t){var e=this,n=Hc(t._queryParams),r=t._path.toString(),i=new lo;return this.restRequest_(r+".json",n,(function(t,n){null===(t=404===t?n=null:t)?(e.onDataUpdate_(r,n,!1,null),i.resolve(n)):i.reject(new Error(n))})),i.promise},Yc.prototype.refreshAuthToken=function(t){},Yc.prototype.restRequest_=function(t,e,n){var r=this;return(e=void 0===e?{}:e).format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){i=(o=to(i,2))[0];var o=o[1];i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+jo(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(200<=s.status&&s.status<300){try{t=Ro(s.responseText)}catch(t){is("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&is("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},Yc);function Yc(t,e,n,r){var i=Gc.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=e,i.authTokenProvider_=n,i.appCheckTokenProvider_=r,i.log_=ns("p:rest:"),i.listens_={},i}var $c=(Xc.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Xc.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Xc);function Xc(){this.rootNode_=fc.EMPTY_NODE}function Jc(){return{value:null,children:new Map}}function Zc(t,e,n){var r;du(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=au(e),t.children.has(r)||t.children.set(r,Jc()),Zc(t.children.get(r),e=uu(e),n))}function tl(t,e,n){var r;null!==t.value?n(e,t.value):(r=function(t,r){tl(r,new ru(e.toString()+"/"+t),n)},t.children.forEach((function(t,e){r(e,t)})))}var el=(nl.prototype.get=function(){var t=this.collection_.get(),e=$i({},t);return this.last_&&cs(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},nl);function nl(t){this.collection_=t,this.last_=null}var rl,il=(ol.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;cs(e,(function(e,i){0<i&&Po(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),hs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},ol);function ol(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new el(t),t=1e4+2e4*Math.random(),hs(this.reportStats_.bind(this),Math.floor(t))}function al(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ul(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}($s=rl=rl||{})[$s.OVERWRITE=0]="OVERWRITE",$s[$s.MERGE=1]="MERGE",$s[$s.ACK_USER_WRITE=2]="ACK_USER_WRITE",$s[$s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var cl=(ll.prototype.operationForChild=function(t){if(du(this.path)){if(null!=this.affectedTree.value)return oo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new ru(t));return new ll(ou(),e,this.revert)}return oo(au(this.path)===t,"operationForChild called for unrelated child."),new ll(uu(this.path),this.affectedTree,this.revert)},ll);function ll(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=rl.ACK_USER_WRITE,this.source=al()}var hl=(fl.prototype.operationForChild=function(t){return du(this.path)?new fl(this.source,ou()):new fl(this.source,uu(this.path))},fl);function fl(t,e){this.source=t,this.path=e,this.type=rl.LISTEN_COMPLETE}var dl=(pl.prototype.operationForChild=function(t){return du(this.path)?new pl(this.source,ou(),this.snap.getImmediateChild(t)):new pl(this.source,uu(this.path),this.snap)},pl);function pl(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=rl.OVERWRITE}var gl=(yl.prototype.operationForChild=function(t){if(du(this.path)){var e=this.children.subtree(new ru(t));return e.isEmpty()?null:e.value?new dl(this.source,ou(),e.value):new yl(this.source,ou(),e)}return oo(au(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new yl(this.source,uu(this.path),this.children)},yl.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},yl);function yl(t,e,n){this.source=t,this.path=e,this.children=n,this.type=rl.MERGE}var vl=(ml.prototype.isFullyInitialized=function(){return this.fullyInitialized_},ml.prototype.isFiltered=function(){return this.filtered_},ml.prototype.isCompleteForPath=function(t){return du(t)?this.isFullyInitialized()&&!this.filtered_:(t=au(t),this.isCompleteForChild(t))},ml.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},ml.prototype.getNode=function(){return this.node_},ml);function ml(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var bl,wl=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function _l(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),El(t,i,"child_removed",e,r,n),El(t,i,"child_added",e,r,n),El(t,i,"child_moved",o,r,n),El(t,i,"child_changed",e,r,n),El(t,i,"value",e,r,n),i}function El(t,e,n,r,i,o){(r=r.filter((function(t){return t.type===n}))).sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw ao("Should only compare child_ events.");return e=new xu(e.childName,e.snapshotNode),n=new xu(n.childName,n.snapshotNode),t.index_.compare(e,n)}(t,e,n)})),r.forEach((function(n){var r,a,s,u=(r=t,s=o,"value"===(a=n).type||"child_removed"===a.type||(a.prevName=s.getPredecessorChildName(a.childName,a.snapshotNode,r.index_)),a);i.forEach((function(r){r.respondsTo(n.type)&&e.push(r.createEvent(u,t.query_))}))}))}function Tl(t,e){return{eventCache:t,serverCache:e}}function Il(t,e,n,r){return Tl(new vl(e,n,r),t.serverCache)}function Sl(t,e,n,r){return Tl(t.eventCache,new vl(e,n,r))}function kl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Cl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Nl=(Al.fromObject=function(t){var e=new Al(null);return cs(t,(function(t,n){e=e.set(new ru(t),n)})),e},Al.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Al.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ou(),value:this.value};if(du(t))return null;var n=au(t),r=this.children.get(n);return null===r||null==(e=r.findRootMostMatchingPathAndValue(uu(t),e))?null:{path:fu(new ru(n),e.path),value:e.value}},Al.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},Al.prototype.subtree=function(t){if(du(t))return this;var e=au(t);return null!==(e=this.children.get(e))?e.subtree(uu(t)):new Al(null)},Al.prototype.set=function(t,e){if(du(t))return new Al(e,this.children);var n=au(t);return e=(this.children.get(n)||new Al(null)).set(uu(t),e),e=this.children.insert(n,e),new Al(this.value,e)},Al.prototype.remove=function(t){if(du(t))return this.children.isEmpty()?new Al(null):new Al(null,this.children);var e=au(t),n=this.children.get(e);return n?(n=n.remove(uu(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&t.isEmpty()?new Al(null):new Al(this.value,t)):this},Al.prototype.get=function(t){if(du(t))return this.value;var e=au(t);return(e=this.children.get(e))?e.get(uu(t)):null},Al.prototype.setTree=function(t,e){if(du(t))return e;var n=au(t);return t=(this.children.get(n)||new Al(null)).setTree(uu(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t),new Al(this.value,e)},Al.prototype.fold=function(t){return this.fold_(ou(),t)},Al.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(fu(t,r),e)})),e(t,this.value,n)},Al.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ou(),e)},Al.prototype.findOnPath_=function(t,e,n){if(r=!!this.value&&n(e,this.value))return r;if(du(t))return null;var r,i=au(t);return(r=this.children.get(i))?r.findOnPath_(uu(t),fu(e,i),n):null},Al.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ou(),e)},Al.prototype.foreachOnPath_=function(t,e,n){if(du(t))return this;this.value&&n(e,this.value);var r=au(t),i=this.children.get(r);return i?i.foreachOnPath_(uu(t),fu(e,r),n):new Al(null)},Al.prototype.foreach=function(t){this.foreach_(ou(),t)},Al.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(fu(t,n),e)})),this.value&&e(t,this.value)},Al.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},Al);function Al(t,e){void 0===e&&(e=bl=bl||new Bu(Ka)),this.value=t,this.children=e}var Rl=(xl.empty=function(){return new xl(new Nl(null))},xl);function xl(t){this.writeTree_=t}function Dl(t,e,n){if(du(e))return new Rl(new Nl(n));if(null!=(o=t.writeTree_.findRootMostValueAndPath(e))){var r=o.path,i=o.value,o=pu(r,e);return i=i.updateChild(o,n),new Rl(t.writeTree_.set(r,i))}return n=new Nl(n),n=t.writeTree_.setTree(e,n),new Rl(n)}function Ol(t,e,n){var r=t;return cs(n,(function(t,n){r=Dl(r,fu(e,t),n)})),r}function Pl(t,e){return du(e)?Rl.empty():(e=t.writeTree_.setTree(e,new Nl(null)),new Rl(e))}function Ll(t,e){return null!=Ml(t,e)}function Ml(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(pu(n.path,e)):null}function Fl(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ec,(function(t,n){e.push(new xu(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new xu(t,n.value))})),e}function jl(t,e){if(du(e))return t;var n=Ml(t,e);return new Rl(null!=n?new Nl(n):t.writeTree_.subtree(e))}function Ul(t){return t.writeTree_.isEmpty()}function Vl(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(oo(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(fu(e,n),o,r)})),r=r.getChild(e).isEmpty()||null===i?r:r.updateChild(fu(e,".priority"),i)}(ou(),t.writeTree_,e)}function ql(t,e){return Zl(e,t)}function Bl(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));oo(0<=n,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i,o=r.visible,a=!1,s=t.allWrites.length-1;o&&0<=s;){var u=t.allWrites[s];u.visible&&(n<=s&&function(t,e){if(t.snap)return vu(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&vu(fu(t.path,n),e))return!0;return!1}(u,r.path)?o=!1:vu(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?((i=t).visibleWrites=Kl(i.allWrites,zl,ou()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?t.visibleWrites=Pl(t.visibleWrites,r.path):cs(r.children,(function(e){t.visibleWrites=Pl(t.visibleWrites,fu(r.path,e))})),!0)}function zl(t){return t.visible}function Kl(t,e,n){for(var r=Rl.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)vu(n,a)?r=Dl(r,s=pu(n,a),o.snap):vu(a,n)&&(s=pu(a,n),r=Dl(r,ou(),o.snap.getChild(s)));else{if(!o.children)throw ao("WriteRecord should have .snap or .children");vu(n,a)?r=Ol(r,s=pu(n,a),o.children):vu(a,n)&&(du(s=pu(a,n))?r=Ol(r,ou(),o.children):(o=Lo(o.children,au(s)))&&(s=o.getChild(uu(s)),r=Dl(r,ou(),s)))}}}return r}function Hl(t,e,n,r,i){if(r||i){var o=jl(t.visibleWrites,e);return!i&&Ul(o)?n:i||null!=n||Ll(o,ou())?Vl(Kl(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(vu(t.path,e)||vu(e,t.path))}),e),n||fc.EMPTY_NODE):null}return null!=(o=Ml(t.visibleWrites,e))?o:Ul(t=jl(t.visibleWrites,e))?n:null!=n||Ll(t,ou())?Vl(t,n||fc.EMPTY_NODE):null}function Wl(t,e,n,r){return Hl(t.writeTree,t.treePath,e,n,r)}function Gl(t,e){return function(t,e,n){var r=fc.EMPTY_NODE,i=Ml(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ec,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=jl(t.visibleWrites,e);return n.forEachChild(ec,(function(t,e){e=Vl(jl(o,new ru(t)),e),r=r.updateImmediateChild(t,e)})),Fl(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Fl(jl(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Ql(t,e,n,r){return i=t.writeTree,t=t.treePath,e=e,r=r,oo(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=fu(t,e),Ll(i.visibleWrites,t)?null:Ul(t=jl(i.visibleWrites,t))?r.getChild(e):Vl(t,r.getChild(e));var i}function Yl(t,e){return n=t.writeTree,e=fu(t.treePath,e),Ml(n.visibleWrites,e);var n}function $l(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s;if(null!=(e=Ml(t=jl(t.visibleWrites,e),ou())))s=e;else{if(null==n)return[];s=Vl(t,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=a.getCompare(),l=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),h=l.getNext();h&&u.length<i;)0!==c(h,r)&&u.push(h),h=l.getNext();return u}(t.writeTree,t.treePath,e,n,r,i,o)}function Xl(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=fu(i,n=e),null!=(i=Ml(r.visibleWrites,e))?i:t.isCompleteForChild(n)?Vl(jl(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function Jl(t,e){return Zl(fu(t.treePath,e),t.writeTree)}function Zl(t,e){return{treePath:t,writeTree:e}}var th=(eh.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;oo("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),oo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Oc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Dc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,xc(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw ao("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Oc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},eh.prototype.getChanges=function(){return Array.from(this.changeMap.values())},eh);function eh(){this.changeMap=new Map}function nh(){}var rh=new(nh.prototype.getCompleteChild=function(t){return null},nh.prototype.getChildAfterChild=function(t,e,n){return null},nh),ih=(oh.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;return e.isCompleteForChild(t)?e.getNode().getImmediateChild(t):(e=null!=this.optCompleteServerCache_?new vl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,Xl(this.writes_,t,e))},oh.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Cl(this.viewCache_);return 0===(t=$l(this.writes_,r,e,1,n,t)).length?null:t[0]},oh);function oh(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function ah(t,e,n,r,i){var o,a,s,u,c,l,h,f,d=new th;if(n.type===rl.OVERWRITE)var p=n,g=p.source.fromUser?ch(t,e,p.path,p.snap,r,i,d):(oo(p.source.fromServer,"Unknown source."),o=p.source.tagged||e.serverCache.isFiltered()&&!du(p.path),uh(t,e,p.path,p.snap,r,i,o,d));else if(n.type===rl.MERGE){var y=n;g=y.source.fromUser?(a=t,s=e,u=y.path,p=y.children,c=r,l=i,h=d,f=s,p.foreach((function(t,e){t=fu(u,t),lh(s,au(t))&&(f=ch(a,f,t,e,c,l,h))})),p.foreach((function(t,e){t=fu(u,t),lh(s,au(t))||(f=ch(a,f,t,e,c,l,h))})),f):(oo(y.source.fromServer,"Unknown source."),o=y.source.tagged||e.serverCache.isFiltered(),fh(t,e,y.path,y.children,r,i,o,d))}else if(n.type===rl.ACK_USER_WRITE){var v=n;g=v.revert?function(t,e,n,r,i,o){var a;if(null!=Yl(r,n))return e;var s,u,c=new ih(r,e,i),l=e.eventCache.getNode();return i=void 0,du(n)||".priority"===au(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?Wl(r,Cl(e)):(s=e.serverCache.getNode(),oo(s instanceof fc,"serverChildren would be complete if leaf node"),Gl(r,s)),i=t.filter.updateFullNode(l,u,o)):(null==(u=Xl(r,s=au(n),e.serverCache))&&e.serverCache.isCompleteForChild(s)&&(u=l.getImmediateChild(s)),(i=null!=u?t.filter.updateChild(l,s,u,uu(n),c,o):e.eventCache.getNode().hasChild(s)?t.filter.updateChild(l,s,fc.EMPTY_NODE,uu(n),c,o):l).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Wl(r,Cl(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,a,o))),a=e.serverCache.isFullyInitialized()||null!=Yl(r,ou()),Il(e,i,a,t.filter.filtersNodes())}(t,e,v.path,r,i,d):function(t,e,n,r,i,o,a){if(null!=Yl(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(du(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return uh(t,e,n,u.getNode().getChild(n),i,o,s,a);if(du(n)){var c=new Nl(null);return u.getNode().forEachChild(Lu,(function(t,e){c=c.set(new ru(t),e)})),fh(t,e,n,c,i,o,s,a)}return e}var l=new Nl(null);return r.foreach((function(t,e){var r=fu(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),fh(t,e,n,l,i,o,s,a)}(t,e,v.path,v.affectedTree,r,i,d)}else{if(n.type!==rl.LISTEN_COMPLETE)throw ao("Unknown operation type: "+n.type);v=t,i=n.path,t=r,n=d,g=sh(v,r=Sl(e,(r=e.serverCache).getNode(),r.isFullyInitialized()||du(i),r.isFiltered()),i,t,rh,n)}return function(t,e,n){var r,i,o=e.eventCache;o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=kl(t),(0<n.length||!t.eventCache.isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Rc(kl(e))))}(e,g,d=d.getChanges()),{viewCache:g,changes:d}}function sh(t,e,n,r,i,o){var a=e.eventCache;if(null!=Yl(r,n))return e;var s,u,c,l,h=void 0,f=void 0;return h=du(n)?(oo(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(s=Gl(r,(s=Cl(e))instanceof fc?s:fc.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),s,o)):(u=Wl(r,Cl(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=au(n))?(oo(1===su(n),"Can't have a priority with additional path components"),null!=(l=Ql(r,n,c=a.getNode(),f=e.serverCache.getNode()))?t.filter.updatePriority(c,l):a.getNode()):(c=uu(n),l=void 0,null!=(l=a.isCompleteForChild(u)?(f=e.serverCache.getNode(),null!=(f=Ql(r,n,a.getNode(),f))?a.getNode().getImmediateChild(u).updateChild(c,f):a.getNode().getImmediateChild(u)):Xl(r,u,e.serverCache))?t.filter.updateChild(a.getNode(),u,l,c,i,o):a.getNode()),Il(e,h,a.isFullyInitialized()||du(n),t.filter.filtersNodes())}function uh(t,e,n,r,i,o,a,s){var u=e.serverCache,c=a?t.filter:t.filter.getIndexedFilter();if(du(n))h=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var l=u.getNode().updateChild(n,r),h=c.updateFullNode(u.getNode(),l,null);else{if(a=au(n),!u.isCompleteForPath(n)&&1<su(n))return e;l=uu(n),r=u.getNode().getImmediateChild(a).updateChild(l,r),h=".priority"===a?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),a,r,l,rh,null)}return sh(t,c=Sl(e,h,u.isFullyInitialized()||du(n),c.filtersNodes()),n,i,new ih(i,c,o),s)}function ch(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new ih(i,e,o);return du(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),Il(e,u,!0,t.filter.filtersNodes())):".priority"===(s=au(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),Il(e,u,c.isFullyInitialized(),c.isFiltered())):(i=uu(n),o=c.getNode().getImmediateChild(s),u=void 0,u=du(i)?r:null!=(n=l.getCompleteChild(s))?".priority"===cu(i)&&n.getChild(hu(i)).isEmpty()?n:n.updateChild(i,r):fc.EMPTY_NODE,o.equals(u)?e:Il(e,t.filter.updateChild(c.getNode(),s,u,i,l,a),c.isFullyInitialized(),t.filter.filtersNodes()))}function lh(t,e){return t.eventCache.isCompleteForChild(e)}function hh(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function fh(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u=e,c=(r=du(n)?r:new Nl(null).setTree(n,r),e.serverCache.getNode());return r.children.inorderTraversal((function(n,r){c.hasChild(n)&&(r=hh(0,e.serverCache.getNode().getImmediateChild(n),r),u=uh(t,u,new ru(n),r,i,o,a,s))})),r.children.inorderTraversal((function(n,r){var l=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;c.hasChild(n)||l||(r=hh(0,e.serverCache.getNode().getImmediateChild(n),r),u=uh(t,u,new ru(n),r,i,o,a,s))})),u}var dh,ph=(Object.defineProperty(gh.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),gh);function gh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Pc(n.getIndex()),i=(o=n).loadsAllData()?new Pc(o.getIndex()):new(o.hasLimit()?jc:Mc)(o);this.processor_={filter:i},t=e.serverCache,n=e.eventCache;var o=r.updateFullNode(fc.EMPTY_NODE,t.getNode(),null);e=i.updateFullNode(fc.EMPTY_NODE,n.getNode(),null),r=new vl(o,t.isFullyInitialized(),r.filtersNodes()),i=new vl(e,n.isFullyInitialized(),i.filtersNodes()),this.viewCache_=Tl(i,r),this.eventGenerator_=new wl(this.query_)}function yh(t){return 0===t.eventRegistrations_.length}function vh(t,e,n){var r,i=[];if(n&&(oo(null==e,"A cancel should cancel all event registrations."),r=t.query._path,t.eventRegistrations_.forEach((function(t){(t=t.createCancelEvent(n,r))&&i.push(t)}))),e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function mh(t,e,n,r){e.type===rl.MERGE&&null!==e.source.queryId&&(oo(Cl(t.viewCache_),"We should always have a full cache before handling merges"),oo(kl(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_;return e=ah(t.processor_,i,e,n,r),n=t.processor_,r=e.viewCache,oo(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),oo(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),oo(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,bh(t,e.changes,e.viewCache.eventCache.getNode(),null)}function bh(t,e,n,r){return r=r?[r]:t.eventRegistrations_,_l(t.eventGenerator_,e,n,r)}var wh,_h=function(){this.views=new Map};function Eh(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return oo(null!=s,"SyncTree gave us an op for an invalid query."),mh(s,e,n,r)}var u=[];try{for(var c=Zi(t.views.values()),l=c.next();!l.done;l=c.next())s=l.value,u=u.concat(mh(s,e,n,r))}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function Th(t,e,n,r,i){var o=e._queryIdentifier;return(t=t.views.get(o))?t:(t=!1,t=!!(o=Wl(n,i?r:null))||(o=r instanceof fc?Gl(n,r):fc.EMPTY_NODE,!1),i=Tl(new vl(o,t,!1),new vl(r,i,!1)),new ph(e,i))}function Ih(t,e,n,r,i,o){var a;return o=Th(t,e,r,i,o),t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),o.eventRegistrations_.push(n),e=n,o=(n=o).viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(ec,(function(t,e){a.push(xc(t,e))})),o.isFullyInitialized()&&a.push(Rc(o.getNode())),bh(n,a,o.getNode(),e)}function Sh(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=Rh(t);if("default"===a)try{for(var l=Zi(t.views.entries()),h=l.next();!h.done;h=l.next()){var f=to(h.value,2),d=f[0],p=f[1];u=u.concat(vh(p,n,r)),yh(p)&&(t.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(p=t.views.get(a))&&(u=u.concat(vh(p,n,r)),yh(p)&&(t.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)));return c&&!Rh(t)&&s.push((oo(dh,"Reference.ts has not been loaded"),new dh(e._repo,e._path))),{removed:s,events:u}}function kh(t){var e,n,r=[];try{for(var i=Zi(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ch(t,e){var n,r,i,o,a,s=null;try{for(var u=Zi(t.views.values()),c=u.next();!c.done;c=u.next()){var l=c.value;s=s||(o=e,a=void 0,(a=Cl((i=l).viewCache_))&&(i.query._queryParams.loadsAllData()||!du(o)&&!a.getImmediateChild(au(o)).isEmpty())?a.getChild(o):null)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return s}function Nh(t,e){return e._queryParams.loadsAllData()?xh(t):(e=e._queryIdentifier,t.views.get(e))}function Ah(t,e){return null!=Nh(t,e)}function Rh(t){return null!=xh(t)}function xh(t){var e,n;try{for(var r=Zi(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Dh=1,Oh=function(t){this.listenProvider_=t,this.syncPointTree_=new Nl(null),this.pendingWriteTree_={visibleWrites:Rl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Ph(t,e,n,r,i){var o,a,s,u;return o=t.pendingWriteTree_,a=e,s=n,u=i,oo((r=r)>o.lastWriteId,"Stacking an older write on top of newer ones"),o.allWrites.push({path:a,snap:s,writeId:r,visible:u=void 0===u||u}),u&&(o.visibleWrites=Dl(o.visibleWrites,a,s)),o.lastWriteId=r,i?Bh(t,new dl(al(),e,n)):[]}function Lh(t,e,n,r){var i,o,a;return i=t.pendingWriteTree_,o=e,a=n,oo((r=r)>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:a,writeId:r,visible:!0}),i.visibleWrites=Ol(i.visibleWrites,o,a),i.lastWriteId=r,n=Nl.fromObject(n),Bh(t,new gl(al(),e,n))}function Mh(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(Bl(t.pendingWriteTree_,e)){var i=new Nl(null);return null!=r.snap?i=i.set(ou(),!0):cs(r.children,(function(t){i=i.set(new ru(t),!0)})),Bh(t,new cl(r.path,i,n))}return[]}function Fh(t,e,n){return Bh(t,new dl(sl(),e,n))}function jh(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||Ah(o,e))){var s=Sh(o,e,n,r);if(0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i)),n=s.removed,a=s.events,o=-1!==n.findIndex((function(t){return t._queryParams.loadsAllData()})),s=t.syncPointTree_.findOnPath(i,(function(t,e){return Rh(e)})),o&&!s&&!(i=t.syncPointTree_.subtree(i)).isEmpty())for(var u=i.fold((function(t,e,n){if(e&&Rh(e))return[xh(e)];var r=[];return e&&(r=kh(e)),cs(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=(h=u[c]).query,h=Kh(t,h);t.listenProvider_.startListening($h(l),Hh(t,l),h.hashFn,h.onComplete)}!s&&0<n.length&&!r&&(o?t.listenProvider_.stopListening($h(e),null):n.forEach((function(e){var n=t.queryToTagMap.get(Wh(e));t.listenProvider_.stopListening($h(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i._queryParams.loadsAllData()||(r=Wh(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(t,n)}return a}function Uh(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){t=pu(t,r),i=i||Ch(e,t),o=o||Rh(e)}));var a=t.syncPointTree_.get(r);a?(o=o||Rh(a),i=i||Ch(a,ou())):(a=new _h,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i?l=!0:(l=!1,i=fc.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){(e=Ch(e,ou()))&&(i=i.updateImmediateChild(t,e))})));var s,u,c=Ah(a,e);c||e._queryParams.loadsAllData()||(s=Wh(e),oo(!t.queryToTagMap.has(s),"View does not exist, but we have a tag"),u=Dh++,t.queryToTagMap.set(s,u),t.tagToQueryMap.set(u,s));var l=Ih(a,e,n,ql(t.pendingWriteTree_,r),i,l);return c||o||(a=Nh(a,e),l=l.concat(function(t,e,n){var r=e._path,i=Hh(t,e);if(n=Kh(t,n),n=t.listenProvider_.startListening($h(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r),i)oo(!Rh(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold((function(t,e,n){if(!du(t)&&e&&Rh(e))return[xh(e).query];var r=[];return e&&(r=r.concat(kh(e).map((function(t){return t.query})))),cs(n,(function(t,e){r=r.concat(e)})),r})),a=0;a<o.length;++a){var s=o[a];t.listenProvider_.stopListening($h(s),Hh(t,s))}return n}(t,e,a))),l}function Vh(t,e,n){var r=t.pendingWriteTree_;return t=t.syncPointTree_.findOnPath(e,(function(t,n){if(t=Ch(n,pu(t,e)))return t})),Hl(r,e,t,n,!0)}function qh(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){t=pu(t,n),r=r||Ch(e,t)}));var i=t.syncPointTree_.get(n);i?r=r||Ch(i,ou()):(i=new _h,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new vl(r,!0,!1):null;return kl(Th(i,e,ql(t.pendingWriteTree_,e._path),o?a.getNode():fc.EMPTY_NODE,o).viewCache_)}function Bh(t,e){return function t(e,n,r,i){if(du(e.path))return zh(e,n,r,i);var o=n.get(ou());null==r&&null!=o&&(r=Ch(o,ou()));var a=[],s=au(e.path),u=e.operationForChild(s),c=n.children.get(s);return c&&u&&(n=r?r.getImmediateChild(s):null,s=Jl(i,s),a=a.concat(t(u,c,n,s))),o?a.concat(Eh(o,e,i,r)):a}(e,t.syncPointTree_,null,ql(t.pendingWriteTree_,ou()))}function zh(t,e,n,r){var i=e.get(ou());null==n&&null!=i&&(n=Ch(i,ou()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=Jl(r,e);(e=t.operationForChild(e))&&(o=o.concat(zh(e,i,a,s)))})),o=i?o.concat(Eh(i,t,r,n)):o}function Kh(t,e){var n=e.query,r=Hh(t,n);return{hashFn:function(){return(e.viewCache_.serverCache.getNode()||fc.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Gh(t,n);return r?(r=(n=Qh(r)).path,n=n.queryId,e=pu(r,e),Yh(t,r,new hl(ul(n),e))):[]}(t,n._path,r):(i=n._path,Bh(t,new hl(sl(),i)));var i=(i="Unknown Error","too_big"===(e=e)?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?i="Client doesn't have permission to access the desired data.":"unavailable"===e&&(i="The service is unavailable"),(i=new Error(e+" at "+n._path.toString()+": "+i)).code=e.toUpperCase(),i);return jh(t,n,null,i)}}}function Hh(t,e){return e=Wh(e),t.queryToTagMap.get(e)}function Wh(t){return t._path.toString()+"$"+t._queryIdentifier}function Gh(t,e){return t.tagToQueryMap.get(e)}function Qh(t){var e=t.indexOf("$");return oo(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ru(t.substr(0,e))}}function Yh(t,e,n){var r=t.syncPointTree_.get(e);return oo(r,"Missing sync point for query tag that we're tracking"),Eh(r,n,ql(t.pendingWriteTree_,e),null)}function $h(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?(oo(wh,"Reference.ts has not been loaded"),new wh(t._repo,t._path)):t}var Xh=(Jh.prototype.getImmediateChild=function(t){return new Jh(this.node_.getImmediateChild(t))},Jh.prototype.node=function(){return this.node_},Jh);function Jh(t){this.node_=t}var Zh=(tf.prototype.getImmediateChild=function(t){return t=fu(this.path_,t),new tf(this.syncTree_,t)},tf.prototype.node=function(){return Vh(this.syncTree_,this.path_)},tf);function tf(t,e){this.syncTree_=t,this.path_=e}var ef=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},nf=function(t,e,n){return t&&"object"==typeof t?(oo(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?rf(t[".sv"],e,n):"object"==typeof t[".sv"]?of(t[".sv"],e):void oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},rf=function(t,e,n){if("timestamp"===t)return n.timestamp;oo(!1,"Unexpected server value: "+t)},of=function(t,e,n){return t.hasOwnProperty("increment")||oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2)),"number"!=typeof(t=t.increment)&&oo(!1,"Unexpected increment value: "+t),e=e.node(),oo(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),e.isLeafNode()?"number"!=typeof(e=e.getValue())?t:e+t:t},af=function(t,e,n,r){return uf(e,new Zh(n,t),r)},sf=function(t,e,n){return uf(t,new Xh(e),n)};function uf(t,e,n){var r=t.getPriority().val(),i=nf(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var o=t;return(r=nf(o.getValue(),e,n))!==o.getValue()||i!==o.getPriority().val()?new Ju(r,vc(i)):t}var a=t=t;return i!==t.getPriority().val()&&(a=a.updatePriority(new Ju(i))),t.forEachChild(ec,(function(t,r){var i=uf(r,e.getImmediateChild(t),n);i!==r&&(a=a.updateImmediateChild(t,i))})),a}var cf=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t=void 0===t?"":t,this.parent=e,this.node=n};function lf(t,e){for(var n=e instanceof ru?e:new ru(e),r=t,i=au(n);null!==i;){var o=Lo(r.node.children,i)||{children:{},childCount:0};r=new cf(i,r,o),i=au(n=uu(n))}return r}function hf(t){return t.node.value}function ff(t,e){t.node.value=e,yf(t)}function df(t){return 0<t.node.childCount}function pf(t,e){cs(t.node.children,(function(n,r){e(new cf(n,t,r))}))}function gf(t){return new ru(null===t.parent?t.name:gf(t.parent)+"/"+t.name)}function yf(t){var e,n,r,i;null!==t.parent&&(e=t.parent,n=t.name,i=function(t){return void 0===hf(t)&&!df(t)}(r=t),t=Po(e.node.children,n),i&&t?(delete e.node.children[n],e.node.childCount--,yf(e)):i||t||(e.node.children[n]=r.node,e.node.childCount++,yf(e)))}function vf(t){return"string"==typeof t&&0!==t.length&&!Ef.test(t)}function mf(t){return"string"==typeof t&&0!==t.length&&!Tf.test(t)}function bf(t,e,n,r){if(!r||void 0!==e){var i=Wo(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];cs(e,(function(t,e){if(t=new ru(t),Cf(i,e,fu(n,t)),".priority"===cu(t)&&!Sf(e))throw new Error(i+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(t)})),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=lu(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!vf(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(gu);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&vu(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}}function wf(t,e,n){if(!n||void 0!==e){if(za(e))throw new Error(Wo(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sf(e))throw new Error(Wo(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function _f(t,e,n,r){if(!(r&&void 0===n||vf(n)))throw new Error(Wo(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}var Ef=/[\[\].#$\/\u0000-\u001F\u007F]/,Tf=/[\[\].#$\u0000-\u001F\u007F]/,If=10485760,Sf=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!za(t)||t&&"object"==typeof t&&Po(t,".sv")},kf=function(t,e,n,r){r&&void 0===e||Cf(Wo(t,"value"),e,n)},Cf=function t(e,n,r){var i=r instanceof ru?new mu(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+wu(i));if("function"==typeof n)throw new Error(e+"contains a function "+wu(i)+" with contents = "+n.toString());if(za(n))throw new Error(e+"contains "+n.toString()+" "+wu(i));if("string"==typeof n&&n.length>If/3&&Yo(n)>If)throw new Error(e+"contains a string greater than "+If+" utf8 bytes "+wu(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(cs(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!vf(n)))throw new Error(e+" contains an invalid key ("+n+") "+wu(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s;s=n,0<(n=i).parts_.length&&(n.byteLength_+=1),n.parts_.push(s),n.byteLength_+=Yo(s),bu(n),t(e,r,i),r=(n=i).parts_.pop(),n.byteLength_-=Yo(r),0<n.parts_.length&&--n.byteLength_})),o&&a)throw new Error(e+' contains ".value" child '+wu(i)+" in addition to actual children.")}},Nf=function(t,e,n,r){if(!(r&&void 0===n||mf(n)))throw new Error(Wo(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Af=function(t,e,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),Nf(t,e,n,r)},Rf=function(t,e){if(".info"===au(e))throw new Error(t+" failed = Can't modify data under /.info/")},xf=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vf(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!mf(n=(n=n)&&n.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(Wo(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Df=function(){this.eventLists_=[],this.recursionDepth_=0};function Of(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||yu(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function Pf(t,e,n){Of(t,n),Mf(t,(function(t){return yu(t,e)}))}function Lf(t,e,n){Of(t,n),Mf(t,(function(t){return vu(t,e)||vu(e,t)}))}function Mf(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),Za&&es("event: "+r.toString()),ys(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}var Ff="repo_interrupt",jf=25,Uf=(Vf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Vf);function Vf(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Df,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jc(),this.transactionQueueTree_=new cf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function qf(t,e,n){if(t.stats_=Os(t.repoInfo_),t.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))t.server_=new Qc(t.repoInfo_,(function(e,n,r,i){Kf(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Hf(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xo(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}t.persistentConnection_=new Cu(t.repoInfo_,e,(function(e,n,r,i){Kf(t,e,n,r,i)}),(function(e){Hf(t,e)}),(function(e){var n;n=t,cs(e,(function(t,e){Wf(n,t,e)}))}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(n=function(){return new il(t.stats_,t.server_)},e=(e=t.repoInfo_).toString(),Ds[e]||(Ds[e]=n()),Ds[e]),t.infoData_=new $c,t.infoSyncTree_=new Oh({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Fh(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Wf(t,"connected",!1),t.serverSyncTree_=new Oh({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){r=i(n,r),Lf(t.eventQueue_,e._path,r)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function Bf(t){return t=t.infoData_.getNode(new ru(".info/serverTimeOffset")).val()||0,(new Date).getTime()+t}function zf(t){return ef({timestamp:Bf(t)})}function Kf(t,e,n,r,i){t.dataUpdateCount++;var o=new ru(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a,s,u,c,l=[];e=o,0<(l=i?r?(a=Fo(n,(function(t){return vc(t)})),function(t,e,n,r){var i=Gh(t,r);return i?(i=(r=Qh(i)).path,r=r.queryId,e=pu(i,e),n=Nl.fromObject(n),Yh(t,i,new gl(ul(r),e,n))):[]}(t.serverSyncTree_,o,a,i)):(c=vc(n),a=t.serverSyncTree_,s=o,u=c,null==(i=Gh(a,c=i))?[]:(c=Qh(i),i=c.path,c=c.queryId,s=pu(i,s),Yh(a,i,new dl(ul(c),s,u)))):r?(c=Fo(n,(function(t){return vc(t)})),s=t.serverSyncTree_,u=o,r=c,r=Nl.fromObject(c),Bh(s,new gl(sl(),u,r))):(n=vc(n),Fh(t.serverSyncTree_,o,n))).length&&(e=rd(t,o)),Lf(t.eventQueue_,e,l)}function Hf(t,e){Wf(t,"connected",e),!1===e&&function(t){Zf(t,"onDisconnectEvents");var e=zf(t),n=Jc();tl(t.onDisconnect_,ou(),(function(r,i){i=af(r,i,t.serverSyncTree_,e),Zc(n,r,i)}));var r=[];tl(n,ou(),(function(e,n){r=r.concat(Fh(t.serverSyncTree_,e,n)),e=sd(t,e),rd(t,e)})),t.onDisconnect_=Jc(),Lf(t.eventQueue_,ou(),r)}(t)}function Wf(t,e,n){e=new ru("/.info/"+e),n=vc(n),t.infoData_.updateSnapshot(e,n),n=Fh(t.infoSyncTree_,e,n),Lf(t.eventQueue_,e,n)}function Gf(t){return t.nextWriteId_++}function Qf(t,e,n,r,i){Zf(t,"set",{path:e.toString(),value:n,priority:r});var o=zf(t),a=(n=vc(n,r),r=Vh(t.serverSyncTree_,e),o=sf(n,r,o),Gf(t));o=Ph(t.serverSyncTree_,e,o,a,!0),Of(t.eventQueue_,o),t.server_.put(e.toString(),n.val(!0),(function(n,r){var o="ok"===n;o||is("set at "+e+" failed: "+n),o=Mh(t.serverSyncTree_,a,!o),Lf(t.eventQueue_,e,o),td(0,i,n,r)})),n=sd(t,e),rd(t,n),Lf(t.eventQueue_,n,[])}function Yf(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(du(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(ec,(function(t,n){Zc(e,new ru(t),n)})),t(e,n)}return!(0<e.children.size)||(r=au(n),n=uu(n),e.children.has(r)&&t(e.children.get(r),n)&&e.children.delete(r),0===e.children.size)}(t.onDisconnect_,e),td(0,n,r,i)}))}function $f(t,e,n,r){var i=vc(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Zc(t.onDisconnect_,e,i),td(0,r,n,o)}))}function Xf(t,e,n){n=".info"===au(e._path)?jh(t.infoSyncTree_,e,n):jh(t.serverSyncTree_,e,n),Pf(t.eventQueue_,e._path,n)}function Jf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Ff)}function Zf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),es.apply(void 0,eo([r],to(e)))}function td(t,e,n,r){e&&ys((function(){var t,i;"ok"===n?e(null):(i=t=(n||"error").toUpperCase(),r&&(i+=": "+r),(i=new Error(i)).code=t,e(i))}))}function ed(t,e,n){return Vh(t.serverSyncTree_,e,n)||fc.EMPTY_NODE}function nd(t,e){var n;(e=void 0===e?t.transactionQueueTree_:e)||ad(t,e),hf(e)?(n=od(t,e),oo(0<n.length,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=u=ed(t,e,r),o=(r=u.hash(),0);o<n.length;o++){var a=n[o];oo(0===a.status,"tryToSendTransactionQueue_: items in queue should all be run."),a.status=1,a.retryCount++;var s=pu(e,a.path);i=i.updateChild(s,a.currentOutputSnapshotRaw)}var u=i.val(!0),c=e;t.server_.put(c.toString(),u,(function(r){Zf(t,"transaction put response",{path:c.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++)!function(e){n[e].status=2,i=i.concat(Mh(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()}(a);for(ad(t,lf(t.transactionQueueTree_,e)),nd(t,t.transactionQueueTree_),Lf(t.eventQueue_,e,i),a=0;a<o.length;a++)ys(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else for(is("transaction at "+c.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;rd(t,e)}}),r)}(t,gf(e),n)):df(e)&&pf(e,(function(e){nd(t,e)}))}function rd(t,e){var n=id(t,e);return e=gf(n),function(t,e,n){if(0!==e.length){for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=0;a<e.length;a++)!function(a){var s,u,c,l,h=e[a],f=pu(n,h.path),d=!1;oo(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(s=h.abortReason,i=i.concat(Mh(t.serverSyncTree_,h.currentWriteId,d=!0))):0===h.status&&(i=h.retryCount>=jf?(s="maxretry",i.concat(Mh(t.serverSyncTree_,h.currentWriteId,d=!0))):(u=ed(t,h.path,o),h.currentInputSnapshot=u,void 0!==(l=e[a].update(u.val()))?(Cf("transaction failed: Data returned ",l,h.path),c=vc(l),"object"==typeof l&&null!=l&&Po(l,".priority")||(c=c.updatePriority(u.getPriority())),f=h.currentWriteId,l=zf(t),l=sf(c,u,l),h.currentOutputSnapshotRaw=c,h.currentOutputSnapshotResolved=l,h.currentWriteId=Gf(t),o.splice(o.indexOf(f),1),(i=i.concat(Ph(t.serverSyncTree_,h.path,l,h.currentWriteId,h.applyLocally))).concat(Mh(t.serverSyncTree_,f,!0))):(s="nodata",i.concat(Mh(t.serverSyncTree_,h.currentWriteId,d=!0))))),Lf(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,d=e[a].unwatcher,setTimeout(d,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))}(a);for(ad(t,t.transactionQueueTree_),a=0;a<r.length;a++)ys(r[a]);nd(t,t.transactionQueueTree_)}}(t,od(t,n),e),e}function id(t,e){for(var n=t.transactionQueueTree_,r=au(e);null!==r&&void 0===hf(n);)n=lf(n,r),r=au(e=uu(e));return n}function od(t,e){var n=[];return function t(e,n,r){var i=hf(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);pf(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ad(t,e){var n=hf(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ff(e,0<n.length?n:void 0)}pf(e,(function(e){ad(t,e)}))}function sd(t,e){var n=gf(id(t,e));return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return;r=r.parent}}(e=lf(t.transactionQueueTree_,e),(function(e){ud(t,e)})),ud(t,e),function t(e,n,r,i){r&&!i&&n(e),pf(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(e,(function(e){ud(t,e)})),n}function ud(t,e){var n=hf(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(oo(o===a-1,"All SENT items should be at beginning of queue."),n[o=a].status=3,n[a].abortReason="set"):(oo(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Mh(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?ff(e,void 0):n.length=o+1,Lf(t.eventQueue_,gf(e),i),a=0;a<r.length;a++)ys(r[a])}}var cd=function(t,e){var n=ld(t),r=n.namespace;return"firebase.com"===n.domain&&rs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||rs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new ks(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new ru(n.pathString)}},ld=function(t){var e,n,r,i="",o="",a="",s="",u="",c=!0,l="https",h=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(l=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(s=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Zi(t.split("&")),o=i.next();!o.done;o=i.next()){var a,s=o.value;0!==s.length&&(2===(a=s.split("=")).length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):is("Invalid query segment '"+s+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===l||"wss"===l,h=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),a=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=a),"ns"in n&&(u=n.ns)),{host:i,port:h,domain:o,subdomain:a,secure:c,scheme:l,pathString:s,namespace:u}},hd=(fd.prototype.getPath=function(){var t=this.snapshot.ref;return("value"===this.eventType?t:t.parent)._path},fd.prototype.getEventType=function(){return this.eventType},fd.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},fd.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+xo(this.snapshot.exportVal())},fd);function fd(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var dd=(pd.prototype.getPath=function(){return this.path},pd.prototype.getEventType=function(){return"cancel"},pd.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},pd.prototype.toString=function(){return this.path.toString()+":cancel"},pd);function pd(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var gd=(yd.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},yd.prototype.onCancel=function(t){return oo(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(yd.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),yd.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},yd);function yd(t,e){this.snapshotCallback=t,this.cancelCallback=e}var vd=(md.prototype.cancel=function(){var t=new lo;return Yf(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},md.prototype.remove=function(){Rf("OnDisconnect.remove",this._path);var t=new lo;return $f(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},md.prototype.set=function(t){Rf("OnDisconnect.set",this._path),kf("OnDisconnect.set",t,this._path,!1);var e=new lo;return $f(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},md.prototype.setWithPriority=function(t,e){Rf("OnDisconnect.setWithPriority",this._path),kf("OnDisconnect.setWithPriority",t,this._path,!1),wf("OnDisconnect.setWithPriority",e,!1);var n,r,i,o,a=new lo;return n=this._repo,r=this._path,t=t,e=e,i=a.wrapCallback((function(){})),o=vc(t,e),n.server_.onDisconnectPut(r.toString(),o.val(!0),(function(t,e){"ok"===t&&Zc(n.onDisconnect_,r,o),td(0,i,t,e)})),a.promise},md.prototype.update=function(t){Rf("OnDisconnect.update",this._path),bf("OnDisconnect.update",t,this._path,!1);var e=new lo;return function(t,e,n,r){if(Mo(n))return es("onDisconnect().update() called with empty data.  Don't do anything."),td(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&cs(n,(function(n,r){r=vc(r),Zc(t.onDisconnect_,fu(e,n),r)})),td(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},md);function md(t,e){this._repo=t,this._path=e}var bd=(Object.defineProperty(wd.prototype,"key",{get:function(){return du(this._path)?null:cu(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(wd.prototype,"ref",{get:function(){return new Sd(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(wd.prototype,"_queryIdentifier",{get:function(){var t=Wc(this._queryParams);return"{}"===(t=us(t))?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(wd.prototype,"_queryObject",{get:function(){return Wc(this._queryParams)},enumerable:!1,configurable:!0}),wd.prototype.isEqual=function(t){if(!((t=ea(t))instanceof wd))return!1;var e=this._repo===t._repo,n=yu(this._path,t._path);return t=this._queryIdentifier===t._queryIdentifier,e&&n&&t},wd.prototype.toJSON=function(){return this.toString()},wd.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},wd);function wd(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}function _d(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ed(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==os)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==as)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ec){if(null!=e&&!Sf(e)||null!=n&&!Sf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(oo(t.getIndex()instanceof wc||t.getIndex()===Cc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Td(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Id,Sd=(Yi(kd,Id=bd),Object.defineProperty(kd.prototype,"parent",{get:function(){var t=hu(this._path);return null===t?null:new kd(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(kd.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),kd);function kd(t,e){return Id.call(this,t,e,new Vc,!1)||this}var Cd=(Object.defineProperty(Nd.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(Nd.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),Nd.prototype.child=function(t){var e=new ru(t);return t=xd(this.ref,t),new Nd(this._node.getChild(e),t,ec)},Nd.prototype.exists=function(){return!this._node.isEmpty()},Nd.prototype.exportVal=function(){return this._node.val(!0)},Nd.prototype.forEach=function(t){var e=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(n,r){return t(new Nd(r,xd(e.ref,n),ec))}))},Nd.prototype.hasChild=function(t){return t=new ru(t),!this._node.getChild(t).isEmpty()},Nd.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},Nd.prototype.toJSON=function(){return this.exportVal()},Nd.prototype.val=function(){return this._node.val()},Nd);function Nd(t,e,n){this._node=t,this.ref=e,this._index=n}function Ad(t,e){return(t=ea(t))._checkNotDeleted("ref"),void 0!==e?xd(t._root,e):t._root}function Rd(t,e){(t=ea(t))._checkNotDeleted("refFromURL");var n=cd(e,t._repo.repoInfo_.nodeAdmin);return xf("refFromURL",n),e=n.repoInfo,t._repo.repoInfo_.isCustomHost()||e.host===t._repo.repoInfo_.host||rs("refFromURL: Host name does not match the current database: (found "+e.host+" but expected "+t._repo.repoInfo_.host+")"),Ad(t,n.path.toString())}function xd(t,e){return(null===au((t=ea(t))._path)?Af:Nf)("child","path",e,!1),new Sd(t._repo,fu(t._path,e))}function Dd(t,e){t=ea(t),Rf("set",t._path),kf("set",e,t._path,!1);var n=new lo;return Qf(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Od(t,e){bf("update",e,t._path,!1);var n=new lo;return function(t,e,n,r){Zf(t,"update",{path:e.toString(),value:n});var i,o,a=!0,s=zf(t),u={};cs(n,(function(n,r){a=!1,u[n]=af(fu(e,n),vc(r),t.serverSyncTree_,s)})),a?(es("update() called with empty data.  Don't do anything."),td(0,r,"ok",void 0)):(i=Gf(t),o=Lh(t.serverSyncTree_,e,u,i),Of(t.eventQueue_,o),t.server_.merge(e.toString(),n,(function(n,o){(s="ok"===n)||is("update at "+e+" failed: "+n);var a=Mh(t.serverSyncTree_,i,!s),s=0<a.length?rd(t,e):e;Lf(t.eventQueue_,s,a),td(0,r,n,o)})),cs(n,(function(n){n=sd(t,fu(e,n)),rd(t,n)})),Lf(t.eventQueue_,e,[]))}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Pd(t){return t=ea(t),e=t._repo,n=t,(null!=(r=qh(e.serverSyncTree_,n))?Promise.resolve(r):e.server_.get(n).then((function(t){var r=vc(t).withIndex(n._queryParams.getIndex());return t=Fh(e.serverSyncTree_,n._path,r),Pf(e.eventQueue_,n._path,t),Promise.resolve(r)}),(function(t){return Zf(e,"get for query "+xo(n)+" failed: "+t),Promise.reject(new Error(t))}))).then((function(e){return new Cd(e,new Sd(t._repo,t._path),t._queryParams.getIndex())}));var e,n,r}var Ld=(Md.prototype.respondsTo=function(t){return"value"===t},Md.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new hd("value",this,new Cd(t.snapshotNode,new Sd(e._repo,e._path),n))},Md.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},Md.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new dd(this,t,e):null},Md.prototype.matches=function(t){return t instanceof Md&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},Md.prototype.hasAnyCallback=function(){return null!==this.callbackContext},Md);function Md(t){this.callbackContext=t}var Fd=(jd.prototype.respondsTo=function(t){return t="children_added"===t?"child_added":t,this.eventType===("children_removed"===t?"child_removed":t)},jd.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new dd(this,t,e):null},jd.prototype.createEvent=function(t,e){oo(null!=t.childName,"Child events should have a childName.");var n=xd(new Sd(e._repo,e._path),t.childName);return e=e._queryParams.getIndex(),new hd(t.type,this,new Cd(t.snapshotNode,n,e),t.prevName)},jd.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},jd.prototype.matches=function(t){return t instanceof jd&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))},jd.prototype.hasAnyCallback=function(){return!!this.callbackContext},jd);function jd(t,e){this.eventType=t,this.callbackContext=e}function Ud(t,e,n,r,i){var o;"object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce&&((i=function(e,n){Xf(t._repo,t,s),o(e,n)}).userCallback=(o=n).userCallback,i.context=n.context,n=i),n=new gd(n,a||void 0);var a,s="value"===e?new Ld(n):new Fd(e,n);return a=t._repo,e=s,e=".info"===au((n=t)._path)?Uh(a.infoSyncTree_,n,e):Uh(a.serverSyncTree_,n,e),Pf(a.eventQueue_,n._path,e),function(){return Xf(t._repo,t,s)}}function Vd(t,e,n,r){return Ud(t,"value",e,n,r)}function qd(t,e,n,r){return Ud(t,"child_added",e,n,r)}function Bd(t,e,n,r){return Ud(t,"child_changed",e,n,r)}function zd(t,e,n,r){return Ud(t,"child_moved",e,n,r)}function Kd(t,e,n,r){return Ud(t,"child_removed",e,n,r)}function Hd(t,e,n){var r=null;n=n?new gd(n):null,"value"===e?r=new Ld(n):e&&(r=new Fd(e,n)),Xf(t._repo,t,r)}var Wd,Gd=(Yi(Qd,Wd=li=function(){}),Qd.prototype._apply=function(t){kf("endAt",this._value,t._path,!0);var e=zc(t._queryParams,this._value,this._key);if(Td(e),Ed(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bd(t._repo,t._path,e,t._orderByCalled)},Qd);function Qd(t,e){var n=Wd.call(this)||this;return n._value=t,n._key=e,n}var Yd,$d=(Yi(Xd,Yd=li),Xd.prototype._apply=function(t){var e,n,r;if(kf("endBefore",this._value,t._path,!1),Td((e=t._queryParams,n=this._value,r=this._key,(r=e.index_===Lu?zc(e,n="string"==typeof n?Ic(n):n,r):zc(e,n,null==r?os:Ic(r))).endBeforeSet_=!0,r=r)),Ed(r),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bd(t._repo,t._path,r,t._orderByCalled)},Xd);function Xd(t,e){var n=Yd.call(this)||this;return n._value=t,n._key=e,n}var Jd,Zd=(Yi(tp,Jd=li),tp.prototype._apply=function(t){kf("startAt",this._value,t._path,!0);var e=Bc(t._queryParams,this._value,this._key);if(Td(e),Ed(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bd(t._repo,t._path,e,t._orderByCalled)},tp);function tp(t,e){var n=Jd.call(this)||this;return n._value=t,n._key=e,n}var ep,np=(Yi(rp,ep=li),rp.prototype._apply=function(t){var e,n,r;if(kf("startAfter",this._value,t._path,!1),Td((e=t._queryParams,n=this._value,r=this._key,(r=e.index_===Lu?Bc(e,n="string"==typeof n?Tc(n):n,r):Bc(e,n,null==r?as:Tc(r))).startAfterSet_=!0,r=r)),Ed(r),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bd(t._repo,t._path,r,t._orderByCalled)},rp);function rp(t,e){var n=ep.call(this)||this;return n._value=t,n._key=e,n}var ip,op=(Yi(ap,ip=li),ap.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bd(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="l",e),t._orderByCalled);var e,n},ap);function ap(t){var e=ip.call(this)||this;return e._limit=t,e}var sp,up=(Yi(cp,sp=li),cp.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bd(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="r",e),t._orderByCalled);var e,n},cp);function cp(t){var e=sp.call(this)||this;return e._limit=t,e}var lp,hp=(Yi(fp,lp=li),fp.prototype._apply=function(t){_d(t,"orderByChild");var e=new ru(this._path);if(du(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");return e=new wc(e),Ed(e=Kc(t._queryParams,e)),new bd(t._repo,t._path,e,!0)},fp);function fp(t){var e=lp.call(this)||this;return e._path=t,e}var dp,pp=(Yi(gp,dp=li),gp.prototype._apply=function(t){_d(t,"orderByKey");var e=Kc(t._queryParams,Lu);return Ed(e),new bd(t._repo,t._path,e,!0)},gp);function gp(){return null!==dp&&dp.apply(this,arguments)||this}var yp,vp=(Yi(mp,yp=li),mp.prototype._apply=function(t){_d(t,"orderByPriority");var e=Kc(t._queryParams,ec);return Ed(e),new bd(t._repo,t._path,e,!0)},mp);function mp(){return null!==yp&&yp.apply(this,arguments)||this}var bp,wp=(Yi(_p,bp=li),_p.prototype._apply=function(t){_d(t,"orderByValue");var e=Kc(t._queryParams,Cc);return Ed(e),new bd(t._repo,t._path,e,!0)},_p);function _p(){return null!==bp&&bp.apply(this,arguments)||this}var Ep,Tp,Ip,Sp=(Yi(kp,Ep=li),kp.prototype._apply=function(t){if(kf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gd(this._value,this._key)._apply(new Zd(this._value,this._key)._apply(t))},kp);function kp(t,e){var n=Ep.call(this)||this;return n._value=t,n._key=e,n}function Cp(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=ea(t);try{for(var a=Zi(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}Tp=Sd,oo(!dh,"__referenceConstructor has already been defined"),dh=Tp,Ip=Sd,oo(!wh,"__referenceConstructor has already been defined"),wh=Ip;var Np="FIREBASE_DATABASE_EMULATOR_HOST",Ap={},Rp=!1;function xp(t,e,r,i,o){var a=i||t.options.databaseURL;void 0===a&&(t.options.projectId||rs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),es("Using default host for project ",t.options.projectId),a=t.options.projectId+"-default-rtdb.firebaseio.com");var s,u=cd(a,o),c=u.repoInfo;return i=void 0,(i="undefined"!=typeof n?Object({NODE_ENV:"production",PUBLIC_URL:"/gestalt-laws-game-deploy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[Np]:i)?(s=!0,a="http://"+i+"?ns="+c.namespace,c=(u=cd(a,o)).repoInfo):s=!u.repoInfo.secure,e=o&&s?new _s(_s.OWNER):new bs(t.name,t.options,e),xf("Invalid Firebase Database URL",u),du(u.path)||rs("Database URL must point to the root of a Firebase Database (not including a child path)."),r=function(t,e,n,r){var i=Ap[e.name];return i||(i={},Ap[e.name]=i),(e=i[t.toURLString()])&&rs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),e=new Uf(t,Rp,n,r),i[t.toURLString()]=e}(c,t,e,new vs(t.name,r)),new Dp(r,t)}var Dp=(Object.defineProperty(Op.prototype,"_repo",{get:function(){return this._instanceStarted||(qf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(Op.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Sd(this._repo,ou())),this._rootInternal},enumerable:!1,configurable:!0}),Op.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=Ap[e])&&n[t.key]===t||rs("Database "+e+"("+t.repoInfo_+") has already been deleted."),Jf(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},Op.prototype._checkNotDeleted=function(t){null===this._rootInternal&&rs("Cannot call "+t+" on a deleted database.")},Op);function Op(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}function Pp(t,e,n,r){void 0===r&&(r={}),(t=ea(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&rs("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;i.repoInfo_.nodeAdmin?(r.mockUserToken&&rs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new _s(_s.OWNER)):r.mockUserToken&&(t=fo(r.mockUserToken,t.app.options.projectId),o=new _s(t)),o=o,(i=i).repoInfo_=new ks(e+":"+n,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),o&&(i.authTokenProvider_=o)}function Lp(t){(t=ea(t))._checkNotDeleted("goOnline"),(t=t._repo).persistentConnection_&&t.persistentConnection_.resume(Ff)}var Mp={".sv":"timestamp"},Fp=(jp.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},jp);function jp(t,e){this.committed=t,this.snapshot=e}function Up(t,e,n){if(t=ea(t),Rf("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";n=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i;var r=new lo,i=Vd(t,(function(){}));return function(t,e,n,r,i,o){Zf(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:Xa(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null};n=ed(t,e,void 0),a.currentInputSnapshot=n,void 0===(r=a.update(n.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot)):(Cf("transaction failed: Data returned ",r,a.path),a.status=0,(i=hf(o=lf(t.transactionQueueTree_,e))||[]).push(a),ff(o,i),o=void 0,"object"==typeof r&&null!==r&&Po(r,".priority")?(o=Lo(r,".priority"),oo(Sf(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(Vh(t.serverSyncTree_,e)||fc.EMPTY_NODE).getPriority().val(),i=zf(t),o=vc(r,o),i=sf(o,n,i),a.currentOutputSnapshotRaw=o,a.currentOutputSnapshotResolved=i,a.currentWriteId=Gf(t),a=Ph(t.serverSyncTree_,e,i,a.currentWriteId,a.applyLocally),Lf(t.eventQueue_,e,a),nd(t,t.transactionQueueTree_))}(t._repo,t._path,e,(function(e,n,i){var o;e?r.reject(e):(o=new Cd(i,new Sd(t._repo,t._path),ec),r.resolve(new Fp(n,o)))}),i,n),r.promise}var Vp=(qp.prototype.cancel=function(t){Ho("OnDisconnect.cancel",0,1,arguments.length),Go("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},qp.prototype.remove=function(t){Ho("OnDisconnect.remove",0,1,arguments.length),Go("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},qp.prototype.set=function(t,e){return Ho("OnDisconnect.set",1,2,arguments.length),Go("OnDisconnect.set","onComplete",e,!0),t=this._delegate.set(t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},qp.prototype.setWithPriority=function(t,e,n){return Ho("OnDisconnect.setWithPriority",2,3,arguments.length),Go("OnDisconnect.setWithPriority","onComplete",n,!0),e=this._delegate.setWithPriority(t,e),n&&e.then((function(){return n(null)}),(function(t){return n(t)})),e},qp.prototype.update=function(t,e){if(Ho("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,is("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Go("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},qp);function qp(t){this._delegate=t}var Bp=(zp.prototype.toJSON=function(){return Ho("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},zp);function zp(t,e){this.committed=t,this.snapshot=e}var Kp=(Hp.prototype.val=function(){return Ho("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},Hp.prototype.exportVal=function(){return Ho("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},Hp.prototype.toJSON=function(){return Ho("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},Hp.prototype.exists=function(){return Ho("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},Hp.prototype.child=function(t){return Ho("DataSnapshot.child",0,1,arguments.length),t=String(t),Nf("DataSnapshot.child","path",t,!1),new Hp(this._database,this._delegate.child(t))},Hp.prototype.hasChild=function(t){return Ho("DataSnapshot.hasChild",1,1,arguments.length),Nf("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},Hp.prototype.getPriority=function(){return Ho("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},Hp.prototype.forEach=function(t){var e=this;return Ho("DataSnapshot.forEach",1,1,arguments.length),Go("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(n){return t(new Hp(e._database,n))}))},Hp.prototype.hasChildren=function(){return Ho("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(Hp.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),Hp.prototype.numChildren=function(){return Ho("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},Hp.prototype.getRef=function(){return Ho("DataSnapshot.ref",0,0,arguments.length),new Yp(this._database,this._delegate.ref)},Object.defineProperty(Hp.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Hp);function Hp(t,e){this._database=t,this._delegate=e}var Wp=(Gp.prototype.on=function(t,e,n,r){var i=this;function o(t,n){e.call(a.context,new Kp(i.database,t),n)}Ho("Query.on",2,4,arguments.length),Go("Query.on","callback",e,!1);var a=Gp.getCancelAndContextArgs_("Query.on",n,r);o.userCallback=e,o.context=a.context;var s=null===(r=a.cancel)||void 0===r?void 0:r.bind(a.context);switch(t){case"value":return Vd(this._delegate,o,s),e;case"child_added":return qd(this._delegate,o,s),e;case"child_removed":return Kd(this._delegate,o,s),e;case"child_changed":return Bd(this._delegate,o,s),e;case"child_moved":return zd(this._delegate,o,s),e;default:throw new Error(Wo("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Gp.prototype.off=function(t,e,n){var r;Ho("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Wo(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",t),Go("Query.off","callback",e,!0),Qo("Query.off","context",n,!0),e?((r=function(){}).userCallback=e,r.context=n,Hd(this._delegate,t,r)):Hd(this._delegate,t)},Gp.prototype.get=function(){var t=this;return Pd(this._delegate).then((function(e){return new Kp(t.database,e)}))},Gp.prototype.once=function(t,e,n,r){var i=this;function o(t,n){t=new Kp(i.database,t),e&&e.call(a.context,t,n),s.resolve(t)}Ho("Query.once",1,4,arguments.length),Go("Query.once","callback",e,!0);var a=Gp.getCancelAndContextArgs_("Query.once",n,r),s=new lo;function u(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)}switch(o.userCallback=e,o.context=a.context,t){case"value":Vd(this._delegate,o,u,{onlyOnce:!0});break;case"child_added":qd(this._delegate,o,u,{onlyOnce:!0});break;case"child_removed":Kd(this._delegate,o,u,{onlyOnce:!0});break;case"child_changed":Bd(this._delegate,o,u,{onlyOnce:!0});break;case"child_moved":zd(this._delegate,o,u,{onlyOnce:!0});break;default:throw new Error(Wo("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},Gp.prototype.limitToFirst=function(t){return Ho("Query.limitToFirst",1,1,arguments.length),new Gp(this.database,Cp(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new op(t)}(t)))},Gp.prototype.limitToLast=function(t){return Ho("Query.limitToLast",1,1,arguments.length),new Gp(this.database,Cp(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new up(t)}(t)))},Gp.prototype.orderByChild=function(t){return Ho("Query.orderByChild",1,1,arguments.length),new Gp(this.database,Cp(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Nf("orderByChild","path",t,!1),new hp(t)}(t)))},Gp.prototype.orderByKey=function(){return Ho("Query.orderByKey",0,0,arguments.length),new Gp(this.database,Cp(this._delegate,new pp))},Gp.prototype.orderByPriority=function(){return Ho("Query.orderByPriority",0,0,arguments.length),new Gp(this.database,Cp(this._delegate,new vp))},Gp.prototype.orderByValue=function(){return Ho("Query.orderByValue",0,0,arguments.length),new Gp(this.database,Cp(this._delegate,new wp))},Gp.prototype.startAt=function(t,e){return void 0===t&&(t=null),Ho("Query.startAt",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(void 0===(t=t)&&(t=null),_f("startAt","key",e=e,!0),new Zd(t,e))))},Gp.prototype.startAfter=function(t,e){return void 0===t&&(t=null),Ho("Query.startAfter",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(t=t,_f("startAfter","key",e=e,!0),new np(t,e))))},Gp.prototype.endAt=function(t,e){return void 0===t&&(t=null),Ho("Query.endAt",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(t=t,_f("endAt","key",e=e,!0),new Gd(t,e))))},Gp.prototype.endBefore=function(t,e){return void 0===t&&(t=null),Ho("Query.endBefore",0,2,arguments.length),new Gp(this.database,Cp(this._delegate,(t=t,_f("endBefore","key",e=e,!0),new $d(t,e))))},Gp.prototype.equalTo=function(t,e){return Ho("Query.equalTo",1,2,arguments.length),new Gp(this.database,Cp(this._delegate,(t=t,_f("equalTo","key",e=e,!0),new Sp(t,e))))},Gp.prototype.toString=function(){return Ho("Query.toString",0,0,arguments.length),this._delegate.toString()},Gp.prototype.toJSON=function(){return Ho("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},Gp.prototype.isEqual=function(t){if(Ho("Query.isEqual",1,1,arguments.length),t instanceof Gp)return this._delegate.isEqual(t._delegate);throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")},Gp.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Go(t,"cancel",r.cancel,!0),r.context=n,Qo(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Wo(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Gp.prototype,"ref",{get:function(){return new Yp(this.database,new Sd(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),Gp);function Gp(t,e){this.database=t,this._delegate=e}var Qp,Yp=(Yi($p,Qp=Wp),$p.prototype.getKey=function(){return Ho("Reference.key",0,0,arguments.length),this._delegate.key},$p.prototype.child=function(t){return Ho("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new $p(this.database,xd(this._delegate,t))},$p.prototype.getParent=function(){Ho("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new $p(this.database,t):null},$p.prototype.getRoot=function(){return Ho("Reference.root",0,0,arguments.length),new $p(this.database,this._delegate.root)},$p.prototype.set=function(t,e){return Ho("Reference.set",1,2,arguments.length),Go("Reference.set","onComplete",e,!0),t=Dd(this._delegate,t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},$p.prototype.update=function(t,e){if(Ho("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,is("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rf("Reference.update",this._delegate._path),Go("Reference.update","onComplete",e,!0);var i=Od(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},$p.prototype.setWithPriority=function(t,e,n){return Ho("Reference.setWithPriority",2,3,arguments.length),Go("Reference.setWithPriority","onComplete",n,!0),e=function(t,e,n){if(Rf("setWithPriority",t._path),kf("setWithPriority",e,t._path,!1),wf("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new lo;return Qf(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,t,e),n&&e.then((function(){return n(null)}),(function(t){return n(t)})),e},$p.prototype.remove=function(t){Ho("Reference.remove",0,1,arguments.length),Go("Reference.remove","onComplete",t,!0);var e=(e=this._delegate,Rf("remove",e._path),Dd(e,null));return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},$p.prototype.transaction=function(t,e,n){var r=this;return Ho("Reference.transaction",1,3,arguments.length),Go("Reference.transaction","transactionUpdate",t,!1),Go("Reference.transaction","onComplete",e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Wo("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n),n=Up(this._delegate,t,{applyLocally:n}).then((function(t){return new Bp(t.committed,new Kp(r.database,t.snapshot))})),e&&n.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),n},$p.prototype.setPriority=function(t,e){return Ho("Reference.setPriority",1,2,arguments.length),Go("Reference.setPriority","onComplete",e,!0),t=function(t,e){t=ea(t),Rf("setPriority",t._path),wf("setPriority",e,!1);var n=new lo;return Qf(t._repo,fu(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},$p.prototype.push=function(t,e){var n=this;Ho("Reference.push",0,2,arguments.length),Go("Reference.push","onComplete",e,!0);var r=function(t,e){t=ea(t),Rf("push",t._path),kf("push",e,t._path,!0);var n=Bf(t._repo),r=Ac(n),i=(n=xd(t,r),xd(t,r));return e=null!=e?Dd(i,e).then((function(){return i})):Promise.resolve(i),n.then=e.then.bind(e),n.catch=e.then.bind(e,void 0),n}(this._delegate,t);return t=r.then((function(t){return new $p(n.database,t)})),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),(r=new $p(this.database,r)).then=t.then.bind(t),r.catch=t.catch.bind(t,void 0),r},$p.prototype.onDisconnect=function(){return Rf("Reference.onDisconnect",this._delegate._path),new Vp(new vd(this._delegate._repo,this._delegate._path))},Object.defineProperty($p.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty($p.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty($p.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),$p);function $p(t,e){var n=Qp.call(this,t,new bd(e._repo,e._path,new Vc,!1))||this;return n.database=t,n._delegate=e,n}var Xp=(Jp.prototype.useEmulator=function(t,e,n){Pp(this._delegate,t,e,n=void 0===n?{}:n)},Jp.prototype.ref=function(t){if(Ho("database.ref",0,1,arguments.length),t instanceof Yp){var e=Rd(this._delegate,t.toString());return new Yp(this,e)}return e=Ad(this._delegate,t),new Yp(this,e)},Jp.prototype.refFromURL=function(t){return Ho("database.refFromURL",1,1,arguments.length),t=Rd(this._delegate,t),new Yp(this,t)},Jp.prototype.goOffline=function(){var t;Ho("database.goOffline",0,0,arguments.length),(t=ea(t=this._delegate))._checkNotDeleted("goOffline"),Jf(t._repo)},Jp.prototype.goOnline=function(){return Ho("database.goOnline",0,0,arguments.length),Lp(this._delegate)},Jp.ServerValue={TIMESTAMP:Mp,increment:function(t){return{".sv":{increment:t}}}},Jp);function Jp(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var Zp=Object.freeze({__proto__:null,forceLongPolling:function(){zs.forceDisallow(),js.forceAllow()},forceWebSockets:function(){js.forceDisallow()},isWebSocketsAvailable:function(){return zs.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var n;t=t._delegate._repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new el(t.stats_)),t.statsListener_.get()):t.stats_.get(),n=Object.keys(t).reduce((function(t,e){return Math.max(e.length,t)}),0),cs(t,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})))},statsIncrementCounter:function(t,e){e=e,(t=t._delegate._repo).stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){t._delegate._repo.interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace;return t=void 0!==(t=t.nodeAdmin)&&t,La(r),(r=new oa("auth-internal",new sa("database-standalone"))).setComponent(new na("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Xp(xp(e,r,void 0,n,t),e),namespace:o}}});W=Cu,Cu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Cu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var tg,eg=Object.freeze({__proto__:null,DataConnection:W,RealTimeConnection:Gs,hijackHash:function(t){var e=Cu.prototype.put;return Cu.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Cu.prototype.put=e}},ConnectionTarget:ks,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){Rp=t}}),ng=Xp.ServerValue;La((tg=Oa).SDK_VERSION),tg.INTERNAL.registerComponent(new na("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate();return e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal"),new Xp(xp(r,e,t,n),r)}),"PUBLIC").setServiceProps({Reference:Yp,Query:Wp,Database:Xp,DataSnapshot:Kp,enableLogging:qa,INTERNAL:Zp,ServerValue:ng,TEST_ACCESS:eg}).setMultipleInstances(!0)),tg.registerVersion("@firebase/database","0.10.9");var rg=function(t,e){return(rg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ig(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};var og={},ag=G||self;function sg(){}function ug(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function cg(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var lg="closure_uid_"+(1e9*Math.random()>>>0),hg=0;function fg(t,e,n){return t.call.apply(t.bind,arguments)}function dg(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pg(t,e,n){return(pg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fg:dg).apply(null,arguments)}function gg(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function yg(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,(t.prototype.constructor=t).Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function vg(){this.s=this.s,this.o=this.o}var mg={};vg.prototype.s=!1,vg.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,t=Object.prototype.hasOwnProperty.call(t,lg)&&t[lg]||(t[lg]=++hg),delete mg[t])},vg.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bg=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},wg=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function _g(){return Array.prototype.concat.apply([],arguments)}function Eg(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Tg(t){return/^[\s\xa0]*$/.test(t)}var Ig,Sg=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function kg(t,e){return-1!=t.indexOf(e)}function Cg(t,e){return t<e?-1:e<t?1:0}var Ng=ag.navigator;function Ag(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Rg(t){var e,n={};for(e in t)n[e]=t[e];return n}Ig=Ng&&(Ng=Ng.userAgent)?Ng:"";var xg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dg(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<xg.length;i++)e=xg[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Og(t){return Og[" "](t),t}Og[" "]=sg;var Pg,Lg=kg(Ig,"Opera"),Mg=kg(Ig,"Trident")||kg(Ig,"MSIE"),Fg=kg(Ig,"Edge"),jg=Fg||Mg,Ug=kg(Ig,"Gecko")&&!(kg(Ig.toLowerCase(),"webkit")&&!kg(Ig,"Edge"))&&!(kg(Ig,"Trident")||kg(Ig,"MSIE"))&&!kg(Ig,"Edge"),Vg=kg(Ig.toLowerCase(),"webkit")&&!kg(Ig,"Edge");function qg(){var t=ag.document;return t?t.documentMode:void 0}var Bg="",zg=(zg=Ig,Ug?/rv:([^\);]+)(\)|;)/.exec(zg):Fg?/Edge\/([\d\.]+)/.exec(zg):Mg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zg):Vg?/WebKit\/(\S+)/.exec(zg):Lg?/(?:Version)[ \/]?(\S+)/.exec(zg):void 0);zg&&(Bg=zg?zg[1]:""),Pg=Mg&&null!=(zg=qg())&&zg>parseFloat(Bg)?String(zg):Bg;var Kg={};function Hg(){return t=function(){for(var t=0,e=Sg(String(Pg)).split("."),n=Sg("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=Cg(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Cg(0==o[2].length,0==a[2].length)||Cg(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t},e=Kg,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9);var t,e}var Wg=ag.document&&Mg&&(qg()||parseInt(Pg,10))||void 0,Gg=function(){if(!ag.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ag.addEventListener("test",sg,e),ag.removeEventListener("test",sg,e)}catch(t){}return t}();function Qg(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Yg(t,e){if(Qg.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ug){t:{try{Og(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$g[t.pointerType]||"",this.state=t.state,(this.i=t).defaultPrevented&&Yg.Z.h.call(this)}}Qg.prototype.h=function(){this.defaultPrevented=!0},yg(Yg,Qg);var $g={2:"touch",3:"pen",4:"mouse"};Yg.prototype.h=function(){Yg.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Xg="closure_listenable_"+(1e6*Math.random()|0),Jg=0;function Zg(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Jg,this.ca=this.fa=!1}function ty(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ey(t){this.src=t,this.g={},this.h=0}function ny(t,e){var n,r,i,o=e.type;o in t.g&&(n=t.g[o],(i=0<=(r=bg(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(ty(e),0==t.g[o].length&&(delete t.g[o],t.h--)))}function ry(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ey.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=ry(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new Zg(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var iy="closure_lm_"+(1e6*Math.random()|0),oy={};function ay(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=dy(r),e&&e[Xg]?e.O(n,r,cg(i)?!!i.capture:!!i,o):sy(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ay(t,e[o],n,r,i);return null}return n=dy(n),t&&t[Xg]?t.N(e,n,cg(r)?!!r.capture:!!r,i):sy(t,e,n,!1,r,i)}function sy(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s=cg(i)?!!i.capture:!!i,u=hy(t);if(u||(t[iy]=u=new ey(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(a=ly,(n.proxy=r=function t(e){return a.call(t.src,t.listener,e)}).src=t,r.listener=n,t.addEventListener)void 0===(i=Gg?i:s)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(cy(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function uy(t){var e,n,r;"number"!=typeof t&&t&&!t.ca&&((e=t.src)&&e[Xg]?ny(e.i,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hy(e))?(ny(n,t),0==n.h&&(n.src=null,e[iy]=null)):ty(t)))}function cy(t){return t in oy?oy[t]:oy[t]="on"+t}function ly(t,e){var n,r;return!!t.ca||(e=new Yg(e,this),n=t.listener,r=t.ia||t.src,t.fa&&uy(t),n.call(r,e))}function hy(t){return(t=t[iy])instanceof ey?t:null}var fy="__closure_events_fn_"+(1e9*Math.random()>>>0);function dy(t){return"function"==typeof t?t:(t[fy]||(t[fy]=function(e){return t.handleEvent(e)}),t[fy])}function py(){vg.call(this),this.i=new ey(this),(this.P=this).I=null}function gy(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e?e=new Qg(e,t):e instanceof Qg?e.target=e.target||t:(a=e,Dg(e=new Qg(r,t),a)),a=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.g=n[i],a=yy(o,r,!0,e)&&a;if(a=yy(o=e.g=t,r,!0,e)&&a,a=yy(o,r,!1,e)&&a,n)for(i=0;i<n.length;i++)a=yy(o=e.g=n[i],r,!1,e)&&a}function yy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.ca&&u.capture==n&&(a=u.listener,s=u.ia||u.src,u.fa&&ny(t.i,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}yg(py,vg),py.prototype[Xg]=!0,py.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=cg(i)?!!i.capture:!!i,r=dy(r),e&&e[Xg]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=ry(a=e.g[n],r,i,o))&&(ty(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.g[n],e.h--))):(e=e&&hy(e))&&(n=e.g[n.toString()],(r=(e=-1)<(e=n?ry(n,r,i,o):e)?n[e]:null)&&uy(r))}(this,t,e,n,r)},py.prototype.M=function(){if(py.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ty(n[r]);delete e.g[t],e.h--}}this.I=null},py.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},py.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var vy=ag.JSON.stringify;function my(){this.h=this.g=null}my.prototype.add=function(t,e){var n=by.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},$s=my;var by=(wy.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},new wy((function(){return new Ey}),(function(t){return t.reset()})));function wy(t,e){this.i=t,this.j=e,this.h=0,this.g=null}var _y,Ey=(Ty.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},Ty.prototype.reset=function(){this.next=this.g=this.h=null},Ty);function Ty(){this.next=this.g=this.h=null}function Iy(t,e){var n;_y||(n=ag.Promise.resolve(void 0),_y=function(){n.then(Cy)}),Sy||(_y(),Sy=!0),ky.add(t,e)}var Sy=!1,ky=new $s;function Cy(){for(var t;e=t=void 0,e=null,(t=ky).g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(t){!function(t){ag.setTimeout((function(){throw t}),0)}(t)}var e=by;e.j(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}Sy=!1}function Ny(t,e){py.call(this),this.h=t||1,this.g=e||ag,this.j=pg(this.kb,this),this.l=Date.now()}function Ay(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ry(t,e,n){if("function"==typeof t)n&&(t=pg(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pg(t.handleEvent,t)}return 2147483647<Number(e)?-1:ag.setTimeout(t,e||0)}yg(Ny,py),(li=Ny.prototype).da=!1,li.S=null,li.kb=function(){var t;this.da&&(0<(t=Date.now()-this.l)&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gy(this,"tick"),this.da&&(Ay(this),this.start())))},li.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},li.M=function(){Ny.Z.M.call(this),Ay(this),delete this.g};var xy,Dy=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}rg(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(Oy,xy=vg),Oy.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=Ry((function(){e.g=null,e.i&&(e.i=!1,t(e))}),e.j);var n=e.h;e.h=null,e.m.apply(null,n)}(this)},Oy.prototype.M=function(){xy.prototype.M.call(this),this.g&&(ag.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},Oy);function Oy(t,e){var n=xy.call(this)||this;return n.m=t,n.j=e,n.h=null,n.i=!1,n.g=null,n}function Py(t){vg.call(this),this.h=t,this.g={}}yg(Py,vg);var Ly=[];function My(t,e,n,r){Array.isArray(n)||(n&&(Ly[0]=n.toString()),n=Ly);for(var i=0;i<n.length;i++){var o=ay(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Fy(t){Ag(t.g,(function(t,e){this.g.hasOwnProperty(e)&&uy(t)}),t),t.g={}}function jy(){this.g=!0}function Uy(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return vy(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Py.prototype.M=function(){Py.Z.M.call(this),Fy(this)},Py.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jy.prototype.Aa=function(){this.g=!1},jy.prototype.info=function(){};var Vy={},qy=null;function By(){return qy=qy||new py}function zy(t){Qg.call(this,Vy.Ma,t)}function Ky(){var t=By();gy(t,new zy(t))}function Hy(t,e){Qg.call(this,Vy.STAT_EVENT,t),this.stat=e}function Wy(t){var e=By();gy(e,new Hy(e,t))}function Gy(t,e){Qg.call(this,Vy.Na,t),this.size=e}function Qy(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ag.setTimeout((function(){t()}),e)}function Yy(){}function $y(t){return t.h||(t.h=t.i())}function Xy(){}function Jy(){Qg.call(this,"d")}function Zy(){Qg.call(this,"c")}function tv(){}function ev(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Py(this),this.P=iv,this.W=new Ny(t=jg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new nv}function nv(){this.i=null,this.g="",this.h=!1}Vy.Ma="serverreachability",yg(zy,Qg),Vy.STAT_EVENT="statevent",yg(Hy,Qg),Vy.Na="timingevent",yg(Gy,Qg),W={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},G={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"},Yy.prototype.h=null,$s={OPEN:"a",pb:"b",Ka:"c",Bb:"d"},yg(Jy,Qg),yg(Zy,Qg),yg(tv,Yy),tv.prototype.g=function(){return new XMLHttpRequest},tv.prototype.i=function(){return{}};var rv=new tv,iv=45e3,ov={},av={};function sv(t,e,n){t.K=1,t.v=Av(Tv(e)),t.s=n,t.U=!0,uv(t,null)}function uv(t,e){t.F=Date.now(),hv(t),t.A=Tv(t.v);var n,r,i,o,a,s,u=t.A,c=t.X;Array.isArray(c)||(c=[String(c)]),Bv(u.h,"t",c),t.C=0,u=t.l.H,t.h=new nv,t.g=zm(t.l,u?e:null,!t.s),0<t.O&&(t.L=new Dy(pg(t.Ia,t,t.g),t.O)),My(t.V,t.g,"readystatechange",t.gb),e=t.H?Rg(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ky(),n=t.j,r=t.u,i=t.A,o=t.m,a=t.X,s=t.s,n.info((function(){if(n.g)if(s)for(var t="",e=s.split("&"),u=0;u<e.length;u++){var c,l,h=e[u].split("=");1<h.length&&(c=h[0],h=h[1],t=2<=(l=c.split("_")).length&&"type"==l[1]?t+(c+"=")+h+"&":t+(c+"=redacted&"))}else t=null;else t=s;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+r+"\n"+i+"\n"+t}))}function cv(t){return t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function lv(t,e,n){for(var r,i,o,a,s,u=!0;!t.I&&t.C<n.length;){if(o=n,s=a=void 0,a=(i=t).C,(r=-1==(s=o.indexOf("\n",a))?av:(a=Number(o.substring(a,s)),isNaN(a)?ov:(s+=1)+a>o.length?av:(o=o.substr(s,a),i.C=s+a,o)))==av){4==e&&(t.o=4,Wy(14),u=!1),Uy(t.j,t.m,null,"[Incomplete Response]");break}if(r==ov){t.o=4,Wy(15),Uy(t.j,t.m,n,"[Invalid Chunk]"),u=!1;break}Uy(t.j,t.m,r,null),yv(t,r)}cv(t)&&r!=av&&r!=ov&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Wy(16),u=!1),t.i=t.i&&u,u?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lm(e),e.L=!0,Wy(11))):(Uy(t.j,t.m,n,"[Invalid Chunked Response]"),gv(t),pv(t))}function hv(t){t.Y=Date.now()+t.P,fv(t,t.P)}function fv(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Qy(pg(t.eb,t),e)}function dv(t){t.B&&(ag.clearTimeout(t.B),t.B=null)}function pv(t){0==t.l.G||t.I||jm(t.l,t)}function gv(t){dv(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ay(t.W),Fy(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function yv(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||$v(n.i,t)))if(n.I=t.N,!t.J&&$v(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Fm(n),km(n)}Pm(n),Wy(18)}}else n.ta=i[1],0<n.ta-n.U&&i[2]<37500&&n.N&&0==n.A&&!n.v&&(n.v=Qy(pg(n.ab,n),6e3));if(Yv(n.i)<=1&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else Vm(n,11)}else if(!t.J&&n.g!=t||Fm(n),!Tg(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o,a,s,u,c,l,h,f,d,p,g=i[e];n.U=g[0],g=g[1],2==n.G?"c"==g[0]?(n.J=g[1],n.la=g[2],null!=(o=g[3])&&(n.ma=o,n.h.info("VER="+n.ma)),null!=(a=g[4])&&(n.za=a,n.h.info("SVER="+n.za)),null!=(s=g[5])&&"number"==typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n,(u=t.g)&&(!(c=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null)||!(l=r.i).g&&(kg(c,"spdy")||kg(c,"quic")||kg(c,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Xv(l,l.h),l.h=null)),!r.D||(h=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null)&&(r.sa=h,Nv(r.F,r.D,h))),n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),f=t,(r=n).oa=Bm(r,r.H?r.la:null,r.W),f.J?(Jv(r.i,f),d=f,(p=r.K)&&d.setTimeout(p),d.B&&(dv(d),hv(d)),r.g=f):Om(r),0<n.l.length&&Am(n)):"stop"!=g[0]&&"close"!=g[0]||Vm(n,7):3==n.G&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?Vm(n,7):Sm(n):"noop"!=g[0]&&n.j&&n.j.wa(g),n.A=0)}Ky()}catch(g){}}function vv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ug(t)||"string"==typeof t)wg(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ug(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ug(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function mv(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mv)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function bv(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];wv(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)wv(i,r=t.g[e])||(i[t.g[n++]=r]=1),e++;t.g.length=n}}function wv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(li=ev.prototype).setTimeout=function(t){this.P=t},li.gb=function(t){t=t.target;var e=this.L;e&&3==wm(t)?e.l():this.Ia(t)},li.Ia=function(t){try{if(t==this.g)t:{var e=wm(this.g),n=this.g.Da();if(this.g.ba(),!(e<3)&&(3!=e||jg||this.g&&(this.h.h||this.g.ga()||_m(this.g)))){this.I||4!=e||7==n||Ky(),dv(this);var r=this.g.ba();this.N=r;e:if(cv(this)){var i=_m(this.g);t="";var o=i.length,a=4==wm(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){gv(this),pv(this);var s="";break e}this.h.i=new ag.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(i[n],{stream:a&&n==o-1});i.splice(0,o),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==r,h=this.j,f=this.u,d=this.A,p=this.m,g=this.X,y=e,v=r,h.info((function(){return"XMLHTTP RESP ("+p+") [ attempt "+g+"]: "+f+"\n"+d+"\n"+y+" "+v})),this.i){if(this.$&&!this.J){e:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tg(u)){var l=u;break e}}l=null}if(!(r=l)){this.i=!1,this.o=3,Wy(12),gv(this),pv(this);break t}Uy(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yv(this,r)}this.U?(lv(this,e,s),jg&&this.i&&3==e&&(My(this.V,this.W,"tick",this.fb),this.W.start())):(Uy(this.j,this.m,s,null),yv(this,s)),4==e&&gv(this),this.i&&!this.I&&(4==e?jm(this.l,this):(this.i=!1,hv(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Wy(12)):(this.o=0,Wy(13)),gv(this),pv(this)}}}catch(e){}var h,f,d,p,g,y,v},li.fb=function(){var t,e;this.g&&(t=wm(this.g),e=this.g.ga(),this.C<e.length&&(dv(this),lv(this,t,e),this.i&&4!=t&&hv(this)))},li.cancel=function(){this.I=!0,gv(this)},li.eb=function(){this.B=null;var t,e,n=Date.now();0<=n-this.Y?(t=this.j,e=this.A,t.info((function(){return"TIMEOUT: "+e})),2!=this.K&&(Ky(),Wy(17)),gv(this),this.o=2,pv(this)):fv(this,this.Y-n)},(li=mv.prototype).R=function(){bv(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},li.T=function(){return bv(this),this.g.concat()},li.get=function(t,e){return wv(this.h,t)?this.h[t]:e},li.set=function(t,e){wv(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},li.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var _v=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ev(t,e){var n;this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ev?(this.g=void 0!==e?e:t.g,Iv(this,t.j),this.s=t.s,Sv(this,t.i),kv(this,t.m),this.l=t.l,e=t.h,(n=new jv).i=e.i,e.g&&(n.g=new mv(e.g),n.h=e.h),Cv(this,n),this.o=t.o):t&&(n=String(t).match(_v))?(this.g=!!e,Iv(this,n[1]||"",!0),this.s=Rv(n[2]||""),Sv(this,n[3]||"",!0),kv(this,n[4]),this.l=Rv(n[5]||"",!0),Cv(this,n[6]||"",!0),this.o=Rv(n[7]||"")):(this.g=!!e,this.h=new jv(null,this.g))}function Tv(t){return new Ev(t)}function Iv(t,e,n){t.j=n?Rv(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Sv(t,e,n){t.i=n?Rv(e,!0):e}function kv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Cv(t,e,n){var r,i;e instanceof jv?(t.h=e,r=t.h,(i=t.g)&&!r.j&&(Uv(r),r.i=null,r.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Vv(this,e),Bv(this,n,t))}),r)),r.j=i):(n||(e=xv(e,Mv)),t.h=new jv(e,t.g))}function Nv(t,e,n){t.h.set(e,n)}function Av(t){return Nv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Rv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Dv),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Dv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ev.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xv(e,Ov,!0),":");var n=this.i;return!n&&"file"!=e||(t.push("//"),(e=this.s)&&t.push(xv(e,Ov,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(xv(n,"/"==n.charAt(0)?Lv:Pv,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xv(n,Fv)),t.join("")};var Ov=/[#\/\?@]/g,Pv=/[#\?:]/g,Lv=/[#\?]/g,Mv=/[#\?@]/g,Fv=/#/g;function jv(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Uv(t){t.g||(t.g=new mv,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Vv(t,e){Uv(t),e=zv(t,e),wv(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,wv((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&bv(t)))}function qv(t,e){return Uv(t),e=zv(t,e),wv(t.g.h,e)}function Bv(t,e,n){Vv(t,e),0<n.length&&(t.i=null,t.g.set(zv(t,e),Eg(n)),t.h+=n.length)}function zv(t,e){return e=String(e),t.j?e.toLowerCase():e}(li=jv.prototype).add=function(t,e){Uv(this),this.i=null,t=zv(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},li.forEach=function(t,e){Uv(this),this.g.forEach((function(n,r){wg(n,(function(n){t.call(e,n,r,this)}),this)}),this)},li.T=function(){Uv(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},li.R=function(t){Uv(this);var e=[];if("string"==typeof t)qv(this,t)&&(e=_g(e,this.g.get(zv(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=_g(e,t[n])}return e},li.set=function(t,e){return Uv(this),this.i=null,qv(this,t=zv(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},li.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},li.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.R(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.i=t.join("&")};var Kv=function(t,e){this.h=t,this.g=e};function Hv(t){this.l=t||Gv,t=ag.PerformanceNavigationTiming?0<(t=ag.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ag.g&&ag.g.Ea&&ag.g.Ea()&&ag.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wv,Gv=10;function Qv(t){return t.h||t.g&&t.g.size>=t.j}function Yv(t){return t.h?1:t.g?t.g.size:0}function $v(t,e){return t.h?t.h==e:t.g&&t.g.has(e)}function Xv(t,e){t.g?t.g.add(e):t.h=e}function Jv(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Zv(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null==t.g||0===t.g.size)return Eg(t.i);var r=t.i;try{for(var i=ig(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function tm(){}function em(){this.g=new tm}function nm(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function rm(t){this.l=t.$b||null,this.j=t.ib||!1}function im(t,e){py.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=om,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hv.prototype.cancel=function(){var t,e;if(this.i=Zv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=ig(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},tm.prototype.stringify=function(t){return ag.JSON.stringify(t,void 0)},tm.prototype.parse=function(t){return ag.JSON.parse(t,void 0)},yg(rm,Yy),rm.prototype.g=function(){return new im(this.l,this.j)},rm.prototype.i=(Wv={},function(){return Wv}),yg(im,py);var om=0;function am(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function sm(t){t.readyState=4,t.l=null,t.j=null,t.A=null,um(t)}function um(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(li=im.prototype).open=function(t,e){if(this.readyState!=om)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,um(this)},li.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ag).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},li.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sm(this)),this.readyState=om},li.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,um(this)),this.g&&(this.readyState=3,um(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ag.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;am(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},li.Sa=function(t){var e;this.g&&(this.u&&t.value?this.response.push(t.value):this.u||(e=t.value||new Uint8Array(0),(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)),(t.done?sm:um)(this),3==this.readyState&&am(this))},li.Ua=function(t){this.g&&(this.response=this.responseText=t,sm(this))},li.Ta=function(t){this.g&&(this.response=t,sm(this))},li.ha=function(){this.g&&sm(this)},li.setRequestHeader=function(t,e){this.v.append(t,e)},li.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},li.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(im.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var cm=ag.JSON.parse;function lm(t){py.call(this),this.headers=new mv,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hm,this.K=this.L=!1}yg(lm,py);var hm="",fm=/^https?$/i,dm=["POST","PUT"];function pm(t){return"content-type"==t.toLowerCase()}function gm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ym(t),mm(t)}function ym(t){t.D||(t.D=!0,gy(t,"complete"),gy(t,"error"))}function vm(t){if(t.h&&void 0!==og&&(!t.C[1]||4!=wm(t)||2!=t.ba()))if(t.v&&4==wm(t))Ry(t.Fa,0,t);else if(gy(t,"readystatechange"),4==wm(t)){t.h=!1;try{var e,n,r,i,o=t.ba();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}if((e=a)||((n=0===o)&&(!(i=String(t.H).match(_v)[1]||null)&&ag.self&&ag.self.location&&(i=(r=ag.self.location.protocol).substr(0,r.length-1)),n=!fm.test(i?i.toLowerCase():"")),e=n),e)gy(t,"complete"),gy(t,"success");else{t.m=6;try{var s=2<wm(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",ym(t)}}finally{mm(t)}}}function mm(t,e){if(t.g){bm(t);var n=t.g,r=t.C[0]?sg:null;t.g=null,t.C=null,e||gy(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function bm(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ag.clearTimeout(t.A),t.A=null)}function wm(t){return t.g?t.g.readyState:0}function _m(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case hm:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Em(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Ag(n,(function(t,e){i+=e,i+=":",i+=t,i+="\r\n"})),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Nv(t,e,n))}function Tm(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Im(t){this.za=0,this.l=[],this.h=new jy,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Tm("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Tm("baseRetryDelayMs",5e3,t),this.$a=Tm("retryDelaySeedMs",1e4,t),this.Ya=Tm("forwardChannelMaxRetries",2,t),this.ra=Tm("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Hv(t&&t.concurrentRequestLimit),this.Ca=new em,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Sm(t){var e,n;Cm(t),3==t.G&&(e=t.V++,Nv(n=Tv(t.F),"SID",t.J),Nv(n,"RID",e),Nv(n,"TYPE","terminate"),xm(t,n),(e=new ev(t,t.h,e,void 0)).K=2,e.v=Av(Tv(n)),n=!1,!(n=ag.navigator&&ag.navigator.sendBeacon?ag.navigator.sendBeacon(e.v.toString(),""):n)&&ag.Image&&((new Image).src=e.v,n=!0),n||(e.g=zm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),hv(e)),qm(t)}function km(t){t.g&&(Lm(t),t.g.cancel(),t.g=null)}function Cm(t){km(t),t.u&&(ag.clearTimeout(t.u),t.u=null),Fm(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ag.clearTimeout(t.m),t.m=null)}function Nm(t,e){t.l.push(new Kv(t.Za++,e)),3==t.G&&Am(t)}function Am(t){Qv(t.i)||t.m||(t.m=!0,Iy(t.Ha,t),t.C=0)}function Rm(t,e){var n=e?e.m:t.V++,r=Tv(t.F);Nv(r,"SID",t.J),Nv(r,"RID",n),Nv(r,"AID",t.U),xm(t,r),t.o&&t.s&&Em(r,t.o,t.s),n=new ev(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Dm(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Xv(t.i,n),sv(n,r,e)}function xm(t,e){t.j&&vv({},(function(t,n){Nv(e,n,t)}))}function Dm(t,e,n){n=Math.min(t.l.length,n);var r=t.j?pg(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if((c-=o)<0)o=Math.max(0,i[u].h-100),s=!1;else try{!function(t,e,n){var r=n||"";try{vv(t,(function(t,n){var i=t;cg(t)&&(i=vy(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Om(t){t.g||t.u||(t.Y=1,Iy(t.Ga,t),t.A=0)}function Pm(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Qy(pg(t.Ga,t),Um(t,t.A)),t.A++,1)}function Lm(t){null!=t.B&&(ag.clearTimeout(t.B),t.B=null)}function Mm(t){t.g=new ev(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Tv(t.oa);Nv(e,"RID","rpc"),Nv(e,"SID",t.J),Nv(e,"CI",t.N?"0":"1"),Nv(e,"AID",t.U),xm(t,e),Nv(e,"TYPE","xmlhttp"),t.o&&t.s&&Em(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Av(Tv(e)),n.s=null,n.U=!0,uv(n,t)}function Fm(t){null!=t.v&&(ag.clearTimeout(t.v),t.v=null)}function jm(t,e){var n,r,i,o=null;if(t.g==e){Fm(t),Lm(t),t.g=null;var a=2}else{if(!$v(t.i,e))return;o=e.D,Jv(t.i,e),a=1}if(t.I=e.N,0!=t.G)if(e.i)1==a?(o=e.s?e.s.length:0,e=Date.now()-e.F,n=t.C,gy(a=By(),new Gy(a,o)),Am(t)):Om(t);else if(3==(n=e.o)||0==n&&0<t.I||(1!=a||(i=e,Yv((r=t).i)>=r.i.j-(r.m?1:0)||(r.m?(r.l=i.D.concat(r.l),0):1==r.G||2==r.G||r.C>=(r.Xa?0:r.Ya)||(r.m=Qy(pg(r.Ha,r,i),Um(r,r.C)),r.C++,0))))&&(2!=a||!Pm(t)))switch(o&&0<o.length&&(e=t.i,e.i=e.i.concat(o)),n){case 1:Vm(t,5);break;case 4:Vm(t,10);break;case 3:Vm(t,6);break;default:Vm(t,2)}}function Um(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Vm(t,e){var n,r,i,o;t.h.info("Error code "+e),2==e?(r=null,t.j&&(r=null),o=pg(t.jb,t),r||(r=new Ev("//www.google.com/images/cleardot.gif"),ag.location&&"http"==ag.location.protocol||Iv(r,"https"),Av(r)),n=r.toString(),r=o,o=new jy,ag.Image?((i=new Image).onload=gg(nm,o,i,"TestLoadImage: loaded",!0,r),i.onerror=gg(nm,o,i,"TestLoadImage: error",!1,r),i.onabort=gg(nm,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=gg(nm,o,i,"TestLoadImage: timeout",!1,r),ag.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=n):r(!1)):Wy(2),t.G=0,t.j&&t.j.va(e),qm(t),Cm(t)}function qm(t){t.G=0,t.I=-1,t.j&&(0==Zv(t.i).length&&0==t.l.length||(t.i.i.length=0,Eg(t.l),t.l.length=0),t.j.ua())}function Bm(t,e,n){var r,i,o,a,s,u=(a=n)instanceof Ev?Tv(a):new Ev(a,void 0);return""!=u.i?(e&&Sv(u,e+"."+u.i),kv(u,u.m)):(r=(s=ag.location).protocol,i=e?e+"."+s.hostname:s.hostname,o=+s.port,a=n,s=new Ev(null,void 0),r&&Iv(s,r),i&&Sv(s,i),o&&kv(s,o),a&&(s.l=a),u=s),t.aa&&Ag(t.aa,(function(t,e){Nv(u,e,t)})),e=t.D,n=t.sa,e&&n&&Nv(u,e,n),Nv(u,"VER",t.ma),xm(t,u),u}function zm(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new lm(new rm({ib:!0})):new lm(t.qa)).L=t.H,e}function Km(){}function Hm(){if(Mg&&!(10<=Number(Wg)))throw Error("Environmental error: no available transport.")}function Wm(t,e){py.call(this),this.g=new Im(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Tg(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tg(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ym(this)}function Gm(t){Jy.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Qm(){Zy.call(this),this.status=1}function Ym(t){this.g=t}(li=lm.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=(this.u||rv).g(),this.C=this.u?$y(this.u):$y(rv),this.g.onreadystatechange=pg(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void gm(this,t)}t=n||"";var i,o=new mv(this.headers);r&&vv(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=pm,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.T()),n=ag.FormData&&t instanceof ag.FormData,0<=bg(dm,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bm(this),0<this.B&&((this.K=(i=this.g,Mg&&Hg()&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=pg(this.pa,this)):this.A=Ry(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){gm(this,t)}},li.pa=function(){void 0!==og&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gy(this,"timeout"),this.abort(8))},li.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,gy(this,"complete"),gy(this,"abort"),mm(this))},li.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mm(this,!0)),lm.Z.M.call(this)},li.Fa=function(){this.s||(this.F||this.v||this.l?vm(this):this.cb())},li.cb=function(){vm(this)},li.ba=function(){try{return 2<wm(this)?this.g.status:-1}catch(t){return-1}},li.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},li.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),cm(e)}},li.Da=function(){return this.m},li.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(li=Im.prototype).ma=8,li.G=1,li.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},li.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ev(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Dg(n=Rg(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Dm(this,e,r),Nv(i=Tv(this.F),"RID",t),Nv(i,"CVER",22),this.D&&Nv(i,"X-HTTP-Session-Id",this.D),xm(this,i),this.o&&n&&Em(i,this.o,n),Xv(this.i,e),this.Ra&&Nv(i,"TYPE","init"),this.ja?(Nv(i,"$req",r),Nv(i,"SID","null"),e.$=!0,sv(e,i,null)):sv(e,i,r),this.G=2}}else 3==this.G&&(t?Rm(this,t):0==this.l.length||Qv(this.i)||Rm(this))},li.Ga=function(){var t;this.u=null,Mm(this),this.$&&!(this.L||null==this.g||this.O<=0)&&(t=2*this.O,this.h.info("BP detection timer enabled: "+t),this.B=Qy(pg(this.bb,this),t))},li.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wy(10),km(this),Mm(this))},li.ab=function(){null!=this.v&&(this.v=null,km(this),Pm(this),Wy(19))},li.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Wy(2)):(this.h.info("Failed to ping google.com"),Wy(1))},(li=Km.prototype).xa=function(){},li.wa=function(){},li.va=function(){},li.ua=function(){},li.Oa=function(){},Hm.prototype.g=function(t,e){return new Wm(t,e)},yg(Wm,py),Wm.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Iy(pg(t.hb,t,e))),Wy(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Bm(t,null,t.W),Am(t)},Wm.prototype.close=function(){Sm(this.g)},Wm.prototype.u=function(t){var e;"string"==typeof t?((e={}).__data__=t,Nm(this.g,e)):this.v?((e={}).__data__=vy(t),Nm(this.g,e)):Nm(this.g,t)},Wm.prototype.M=function(){this.g.j=null,delete this.j,Sm(this.g),delete this.g,Wm.Z.M.call(this)},yg(Gm,Jy),yg(Qm,Zy),yg(Ym,Km),Ym.prototype.xa=function(){gy(this.g,"a")},Ym.prototype.wa=function(t){gy(this.g,new Gm(t))},Ym.prototype.va=function(t){gy(this.g,new Qm)},Ym.prototype.ua=function(){gy(this.g,"b")},Hm.prototype.createWebChannel=Hm.prototype.g,Wm.prototype.send=Wm.prototype.u,Wm.prototype.open=Wm.prototype.m,W.NO_ERROR=0,W.TIMEOUT=8,W.HTTP_ERROR=6,G.COMPLETE="complete",(Xy.EventType=$s).OPEN="a",$s.CLOSE="b",$s.ERROR="c",$s.MESSAGE="d",py.prototype.listen=py.prototype.N,lm.prototype.listenOnce=lm.prototype.O,lm.prototype.getLastError=lm.prototype.La,lm.prototype.getLastErrorCode=lm.prototype.Da,lm.prototype.getStatus=lm.prototype.ba,lm.prototype.getResponseJson=lm.prototype.Qa,lm.prototype.getResponseText=lm.prototype.ga,lm.prototype.send=lm.prototype.ea;var $m=By,Xm=W,Jm=G,Zm=Vy,tb=10,eb=11,nb=rm,rb=Xy,ib=lm,ob=(ab.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},ab.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},ab);function ab(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}ob.o=-1;var sb,ub={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},cb=(Yi(hb,sb=Error),hb),lb=new ga("@firebase/firestore");function hb(t,e){var n=this;return(n=sb.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function fb(){return lb.logLevel}function db(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];lb.logLevel<=ca.DEBUG&&(e=n.map(yb),lb.debug.apply(lb,eo(["Firestore (8.8.1): "+t],e)))}function pb(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];lb.logLevel<=ca.ERROR&&(e=n.map(yb),lb.error.apply(lb,eo(["Firestore (8.8.1): "+t],e)))}function gb(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];lb.logLevel<=ca.WARN&&(e=n.map(yb),lb.warn.apply(lb,eo(["Firestore (8.8.1): "+t],e)))}function yb(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function vb(t){throw pb(t="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t)),new Error(t)}function mb(t){t||vb()}var bb=(wb.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},wb);function wb(){}function _b(t,e){return t<e?-1:e<t?1:0}function Eb(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Tb(t){return t+"\0"}var Ib=(Cb.now=function(){return Cb.fromMillis(Date.now())},Cb.fromDate=function(t){return Cb.fromMillis(t.getTime())},Cb.fromMillis=function(t){var e=Math.floor(t/1e3);return new Cb(e,Math.floor(1e6*(t-1e3*e)))},Cb.prototype.toDate=function(){return new Date(this.toMillis())},Cb.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Cb.prototype._compareTo=function(t){return this.seconds===t.seconds?_b(this.nanoseconds,t.nanoseconds):_b(this.seconds,t.seconds)},Cb.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Cb.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Cb.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Cb.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Cb),Sb=(kb.fromTimestamp=function(t){return new kb(t)},kb.min=function(){return new kb(new Ib(0,0))},kb.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},kb.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},kb.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},kb.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},kb.prototype.toTimestamp=function(){return this.timestamp},kb);function kb(t){this.timestamp=t}function Cb(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new cb(ub.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new cb(ub.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new cb(ub.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new cb(ub.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Nb(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Ab(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Rb(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}Object.defineProperty(Bb.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),Bb.prototype.isEqual=function(t){return 0===Bb.comparator(this,t)},Bb.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Bb?t.forEach((function(t){e.push(t)})):e.push(t),this.construct(e)},Bb.prototype.limit=function(){return this.offset+this.length},Bb.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},Bb.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},Bb.prototype.firstSegment=function(){return this.segments[this.offset]},Bb.prototype.lastSegment=function(){return this.get(this.length-1)},Bb.prototype.get=function(t){return this.segments[this.offset+t]},Bb.prototype.isEmpty=function(){return 0===this.length},Bb.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Bb.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Bb.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Bb.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Bb.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0};var xb,Db,Ob=(Yi(qb,Db=W=Bb),qb.prototype.construct=function(t,e,n){return new qb(t,e,n)},qb.prototype.canonicalString=function(){return this.toArray().join("/")},qb.prototype.toString=function(){return this.canonicalString()},qb.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new cb(ub.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter((function(t){return 0<t.length})))}return new qb(n)},qb.emptyPath=function(){return new qb([])},qb),Pb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lb=(Yi(Vb,xb=W),Vb.prototype.construct=function(t,e,n){return new Vb(t,e,n)},Vb.isValidIdentifier=function(t){return Pb.test(t)},Vb.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vb.isValidIdentifier(t)?t:"`"+t+"`"})).join(".")},Vb.prototype.toString=function(){return this.canonicalString()},Vb.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},Vb.keyField=function(){return new Vb(["__name__"])},Vb.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new cb(ub.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new cb(ub.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new cb(ub.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new cb(ub.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vb(e)},Vb.emptyPath=function(){return new Vb([])},Vb),Mb=(Ub.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},Ub.prototype.isEqual=function(t){return Eb(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},Ub),Fb=(jb.fromBase64String=function(t){return new jb(atob(t))},jb.fromUint8Array=function(t){return new jb(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},jb.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},jb.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},jb.prototype.approximateByteSize=function(){return 2*this.binaryString.length},jb.prototype.compareTo=function(t){return _b(this.binaryString,t.binaryString)},jb.prototype.isEqual=function(t){return this.binaryString===t.binaryString},jb);function jb(t){this.binaryString=t}function Ub(t){(this.fields=t).sort(Lb.comparator)}function Vb(){return null!==xb&&xb.apply(this,arguments)||this}function qb(){return null!==Db&&Db.apply(this,arguments)||this}function Bb(t,e,n){void 0===e?e=0:e>t.length&&vb(),void 0===n?n=t.length-e:n>t.length-e&&vb(),this.segments=t,this.offset=e,this.len=n}Fb.EMPTY_BYTE_STRING=new Fb("");var zb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kb(t){if(mb(!!t),"string"!=typeof t)return{seconds:Hb(t.seconds),nanos:Hb(t.nanos)};var e=0,n=zb.exec(t);return mb(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Hb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wb(t){return"string"==typeof t?Fb.fromBase64String(t):Fb.fromUint8Array(t)}function Gb(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Qb(t){return t=Kb(t.mapValue.fields.__local_write_time__.timestampValue),new Ib(t.seconds,t.nanos)}function Yb(t){return null==t}function $b(t){return 0===t&&1/t==-1/0}function Xb(t){return"number"==typeof t&&Number.isInteger(t)&&!$b(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Jb=(Zb.fromPath=function(t){return new Zb(Ob.fromString(t))},Zb.fromName=function(t){return new Zb(Ob.fromString(t).popFirst(5))},Zb.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Zb.prototype.isEqual=function(t){return null!==t&&0===Ob.comparator(this.path,t.path)},Zb.prototype.toString=function(){return this.path.toString()},Zb.comparator=function(t,e){return Ob.comparator(t.path,e.path)},Zb.isDocumentKey=function(t){return t.length%2==0},Zb.fromSegments=function(t){return new Zb(new Ob(t.slice()))},Zb);function Zb(t){this.path=t}function tw(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gb(t)?4:10:vb()}function ew(t,e){var n,r,i=tw(t);if(i!==tw(e))return!1;switch(i){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qb(t).isEqual(Qb(e));case 3:return function(e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Kb(t.timestampValue);return e=Kb(e.timestampValue),n.seconds===e.seconds&&n.nanos===e.nanos}(e);case 5:return t.stringValue===e.stringValue;case 6:return r=e,Wb(t.bytesValue).isEqual(Wb(r.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return n=e,Hb((r=t).geoPointValue.latitude)===Hb(n.geoPointValue.latitude)&&Hb(r.geoPointValue.longitude)===Hb(n.geoPointValue.longitude);case 2:return function(t,e){return"integerValue"in t&&"integerValue"in e?Hb(t.integerValue)===Hb(e.integerValue):"doubleValue"in t&&"doubleValue"in e&&((t=Hb(t.doubleValue))===(e=Hb(e.doubleValue))?$b(t)===$b(e):isNaN(t)&&isNaN(e))}(t,e);case 9:return Eb(t.arrayValue.values||[],e.arrayValue.values||[],ew);case 10:return function(){var n,r=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Nb(r)!==Nb(i))return!1;for(n in r)if(r.hasOwnProperty(n)&&(void 0===i[n]||!ew(r[n],i[n])))return!1;return!0}();default:return vb()}}function nw(t,e){return void 0!==(t.values||[]).find((function(t){return ew(t,e)}))}function rw(t,e){var n,r,i,o=tw(t),a=tw(e);if(o!==a)return _b(o,a);switch(o){case 0:return 0;case 1:return _b(t.booleanValue,e.booleanValue);case 2:return r=e,(i=Hb(t.integerValue||t.doubleValue))<(r=Hb(r.integerValue||r.doubleValue))?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return iw(t.timestampValue,e.timestampValue);case 4:return iw(Qb(t),Qb(e));case 5:return _b(t.stringValue,e.stringValue);case 6:return function(t,e){return t=Wb(t),e=Wb(e),t.compareTo(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_b(n[i],r[i]);if(0!==o)return o}return _b(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=_b(Hb(n.latitude),Hb(i.latitude)))?r:_b(Hb(n.longitude),Hb(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=rw(n[i],r[i]);if(o)return o}return _b(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=_b(r[a],o[a]);if(0!==s)return s;if(0!==(s=rw(n[r[a]],i[o[a]])))return s}return _b(r.length,o.length)}(t.mapValue,e.mapValue);default:throw vb()}}function iw(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _b(t,e);var n=Kb(t);return t=Kb(e),0!==(e=_b(n.seconds,t.seconds))?e:_b(n.nanos,t.nanos)}function ow(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){return"time("+(t=Kb(t)).seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Jb.fromName(n).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):vb();var n}(t)}function aw(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function sw(t){return t&&"integerValue"in t}function uw(t){return!!t&&"arrayValue"in t}function cw(t){return t&&"nullValue"in t}function lw(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hw(t){return t&&"mapValue"in t}function fw(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Ab(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=fw(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=fw(t.arrayValue.values[r]);return n}return Object.assign({},t)}var dw=(pw.empty=function(){return new pw({mapValue:{}})},pw.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!hw(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},pw.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=fw(e)},pw.prototype.setAll=function(t){var e=this,n=Lb.emptyPath(),r={},i=[];t.forEach((function(t,o){var a;n.isImmediateParentOf(o)||(a=e.getFieldsMap(n),e.applyChanges(a,r,i),r={},i=[],n=o.popLast()),t?r[o.lastSegment()]=fw(t):i.push(o.lastSegment())})),t=this.getFieldsMap(n),this.applyChanges(t,r,i)},pw.prototype.delete=function(t){var e=this.field(t.popLast());hw(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},pw.prototype.isEqual=function(t){return ew(this.value,t.value)},pw.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];hw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},pw.prototype.applyChanges=function(t,e,n){Ab(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},pw.prototype.clone=function(){return new pw(fw(this.value))},pw);function pw(t){this.value=t}var gw=(vw.newInvalidDocument=function(t){return new vw(t,0,Sb.min(),dw.empty(),0)},vw.newFoundDocument=function(t,e,n){return new vw(t,1,e,n,0)},vw.newNoDocument=function(t,e){return new vw(t,2,e,dw.empty(),0)},vw.newUnknownDocument=function(t,e){return new vw(t,3,e,dw.empty(),2)},vw.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},vw.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=dw.empty(),this.documentState=0,this},vw.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=dw.empty(),this.documentState=2,this},vw.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},vw.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(vw.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(vw.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(vw.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),vw.prototype.isValidDocument=function(){return 0!==this.documentType},vw.prototype.isFoundDocument=function(){return 1===this.documentType},vw.prototype.isNoDocument=function(){return 2===this.documentType},vw.prototype.isUnknownDocument=function(){return 3===this.documentType},vw.prototype.isEqual=function(t){return t instanceof vw&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},vw.prototype.clone=function(){return new vw(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},vw.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},vw),yw=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function vw(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}function mw(t,e,n,r,i,o,a){return new yw(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,a=void 0===a?null:a)}function bw(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((function(t){return(t=t).field.canonicalString()+t.op.toString()+ow(t.value)})).join(","),t+="|ob:",t+=e.orderBy.map((function(t){return(t=t).field.canonicalString()+t.dir})).join(","),Yb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Qw(e.startAt)),e.endAt&&(t+="|ub:",t+=Qw(e.endAt)),e.h=t),e.h}function ww(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,a,s=0;s<t.filters.length;s++)if(o=t.filters[s],a=e.filters[s],o.op!==a.op||!o.field.isEqual(a.field)||!ew(o.value,a.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xw(t.startAt,e.startAt)&&Xw(t.endAt,e.endAt)}function _w(t){return Jb.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ew,Tw=(Yi(Iw,Ew=function(){}),Iw.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new Nw(t,e,n):"array-contains"===e?new Uw(t,n):"in"===e?new Vw(t,n):"not-in"===e?new qw(t,n):"array-contains-any"===e?new Bw(t,n):new Iw(t,e,n)},Iw.l=function(t,e,n){return new("in"===e?Aw:Rw)(t,n)},Iw.prototype.matches=function(t){return t=t.data.field(this.field),"!="===this.op?null!==t&&this.m(rw(t,this.value)):null!==t&&tw(this.value)===tw(t)&&this.m(rw(t,this.value))},Iw.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return vb()}},Iw.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Iw);function Iw(t,e,n){var r=this;return(r=Ew.call(this)||this).field=t,r.op=e,r.value=n,r}var Sw,kw,Cw,Nw=(Yi(Ow,Cw=Tw),Ow.prototype.matches=function(t){return t=Jb.comparator(t.key,this.key),this.m(t)},Ow),Aw=(Yi(Dw,kw=Tw),Dw.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},Dw),Rw=(Yi(xw,Sw=Tw),xw.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},xw);function xw(t,e){var n=this;return(n=Sw.call(this,t,"not-in",e)||this).keys=Pw(0,e),n}function Dw(t,e){var n=this;return(n=kw.call(this,t,"in",e)||this).keys=Pw(0,e),n}function Ow(t,e,n){var r=this;return(r=Cw.call(this,t,e,n)||this).key=Jb.fromName(n.referenceValue),r}function Pw(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map((function(t){return Jb.fromName(t.referenceValue)}))}var Lw,Mw,Fw,jw,Uw=(Yi(Gw,jw=Tw),Gw.prototype.matches=function(t){return uw(t=t.data.field(this.field))&&nw(t.arrayValue,this.value)},Gw),Vw=(Yi(Ww,Fw=Tw),Ww.prototype.matches=function(t){return null!==(t=t.data.field(this.field))&&nw(this.value.arrayValue,t)},Ww),qw=(Yi(Hw,Mw=Tw),Hw.prototype.matches=function(t){return!nw(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&null!==(t=t.data.field(this.field))&&!nw(this.value.arrayValue,t)},Hw),Bw=(Yi(Kw,Lw=Tw),Kw.prototype.matches=function(t){var e=this;return!(!uw(t=t.data.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some((function(t){return nw(e.value.arrayValue,t)}))},Kw),zw=function(t,e){this.position=t,this.before=e};function Kw(t,e){return Lw.call(this,t,"array-contains-any",e)||this}function Hw(t,e){return Mw.call(this,t,"not-in",e)||this}function Ww(t,e){return Fw.call(this,t,"in",e)||this}function Gw(t,e){return jw.call(this,t,"array-contains",e)||this}function Qw(t){return(t.before?"b":"a")+":"+t.position.map(ow).join(",")}var Yw=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function $w(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Jb.comparator(Jb.fromName(a.referenceValue),n.key):rw(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Xw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ew(t.position[n],e.position[n]))return!1;return!0}var Jw=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Zw(t,e,n,r,i,o,a,s){return new Jw(t,e,n,r,i,o,a,s)}function t_(t){return new Jw(t)}function e_(t){return!Yb(t.limit)&&"F"===t.limitType}function n_(t){return!Yb(t.limit)&&"L"===t.limitType}function r_(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function i_(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function o_(t){return null!==t.collectionGroup}function a_(t){var e=t;if(null===e.p){e.p=[];var n=i_(e);if(t=r_(e),null!==n&&null===t)n.isKeyField()||e.p.push(new Yw(n)),e.p.push(new Yw(Lb.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new Yw(Lb.keyField(),n)))}}return e.p}function s_(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=mw(e.path,e.collectionGroup,a_(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=a_(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Yw(o.field,a))}var s=e.endAt?new zw(e.endAt.position,!e.endAt.before):null;t=e.startAt?new zw(e.startAt.position,!e.startAt.before):null,e.T=mw(e.path,e.collectionGroup,n,e.filters,e.limit,s,t)}return e.T}function u_(t,e,n){return new Jw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function c_(t,e){return ww(s_(t),s_(e))&&t.limitType===e.limitType}function l_(t){return bw(s_(t))+"|lt:"+t.limitType}function h_(t){return"Query(target="+(n=(e=s_(t)).path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map((function(t){return(t=t).field.canonicalString()+" "+t.op+" "+ow(t.value)})).join(", ")+"]"),Yb(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(t=t).field.canonicalString()+" ("+t.dir+")"})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Qw(e.startAt)),e.endAt&&(n+=", endAt: "+Qw(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function f_(t,e){return e.isFoundDocument()&&(n=t,r=e.key.path,null!==n.collectionGroup?e.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Jb.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r))&&function(e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return}return 1}(e)&&function(e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return;return 1}(e)&&(r=e,(!(e=t).startAt||$w(e.startAt,a_(e),r))&&(!e.endAt||!$w(e.endAt,a_(e),r)));var n,r}function d_(t){return function(e,n){for(var r=!1,i=0,o=a_(t);i<o.length;i++){var a=o[i],s=function(t,e,n){var r=t.field.isKeyField()?Jb.comparator(e.key,n.key):function(t,n){var r=e.data.field(t);return t=n.data.field(t),null!==r&&null!==t?rw(r,t):vb()}(t.field,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vb()}}(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function p_(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$b(e)?"-0":e}}function g_(t){return{integerValue:""+t}}function y_(t,e){return Xb(e)?g_(e):p_(t,e)}function v_(t,e){return t instanceof R_?sw(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var m_,b_,w_=(Yi(T_,b_=G=function(){this._=void 0}),T_),__=(Yi(E_,m_=G),E_);function E_(t){var e=this;return(e=m_.call(this)||this).elements=t,e}function T_(){return null!==b_&&b_.apply(this,arguments)||this}function I_(t,e){for(var n=O_(e),r=0,i=t.elements;r<i.length;r++)!function(t){n.some((function(e){return ew(e,t)}))||n.push(t)}(i[r]);return{arrayValue:{values:n}}}var S_,k_=(Yi(C_,S_=G),C_);function C_(t){var e=this;return(e=S_.call(this)||this).elements=t,e}function N_(t,e){for(var n=O_(e),r=0,i=t.elements;r<i.length;r++)!function(t){n=n.filter((function(e){return!ew(e,t)}))}(i[r]);return{arrayValue:{values:n}}}var A_,R_=(Yi(x_,A_=G),x_);function x_(t,e){var n=this;return(n=A_.call(this)||this).R=t,n.A=e,n}function D_(t){return Hb(t.integerValue||t.doubleValue)}function O_(t){return uw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function P_(t,e){this.version=t,this.transformResults=e}var L_=function(t,e){this.field=t,this.transform=e},M_=(F_.none=function(){return new F_},F_.exists=function(t){return new F_(void 0,t)},F_.updateTime=function(t){return new F_(t)},Object.defineProperty(F_.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),F_.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},F_);function F_(t,e){this.updateTime=t,this.exists=e}function j_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}function U_(t,e,n){var r,i,o,a;t instanceof K_?(i=e,o=n,j_((r=t).precondition,i)&&(a=r.value.clone(),o=$_(r.fieldTransforms,o,i),a.setAll(o),i.convertToFoundDocument(q_(i),a).setHasLocalMutations())):t instanceof H_?(o=e,i=n,j_((a=t).precondition,o)&&(n=$_(a.fieldTransforms,i,o),(i=o.data).setAll(Q_(a)),i.setAll(n),o.convertToFoundDocument(q_(o),i).setHasLocalMutations())):(e=e,j_(t.precondition,e)&&e.convertToNoDocument(Sb.min()))}function V_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Eb(n,r,(function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof __&&e instanceof __||t instanceof k_&&e instanceof k_?Eb(t.elements,e.elements,ew):t instanceof R_&&e instanceof R_?ew(t.A,e.A):t instanceof w_&&e instanceof w_)}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function q_(t){return t.isFoundDocument()?t.version:Sb.min()}var B_,z_,K_=(Yi(G_,z_=W=function(){}),G_),H_=(Yi(W_,B_=W),W_);function W_(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=B_.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function G_(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=z_.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function Q_(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){var r;n.isEmpty()||(r=t.data.field(n),e.set(n,r))})),e}function Y_(t,e,n){var r=new Map;mb(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,(o=a,a=s,s=n[i],o instanceof __?I_(o,a):o instanceof k_?N_(o,a):s))}return r}function $_(t,e,n){for(var r,i=new Map,o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=n.data.field(s.field);i.set(s.field,(r=c,s=e,c=void 0,(u=u)instanceof w_?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof __?I_(u,r):u instanceof k_?N_(u,r):(r=D_(u=v_(c=u,r))+D_(c.A),sw(u)&&sw(c.A)?g_(r):p_(c.R,r))))}return i}function X_(t){this.count=t}var J_,Z_,tE,eE=(Yi(iE,tE=W),iE),nE=(Yi(rE,Z_=W),rE);function rE(t,e){var n=this;return(n=Z_.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function iE(t,e){var n=this;return(n=tE.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function oE(t){switch(t){case ub.OK:return vb(),0;case ub.CANCELLED:case ub.UNKNOWN:case ub.DEADLINE_EXCEEDED:case ub.RESOURCE_EXHAUSTED:case ub.INTERNAL:case ub.UNAVAILABLE:case ub.UNAUTHENTICATED:return;case ub.INVALID_ARGUMENT:case ub.NOT_FOUND:case ub.ALREADY_EXISTS:case ub.PERMISSION_DENIED:case ub.FAILED_PRECONDITION:case ub.ABORTED:case ub.OUT_OF_RANGE:case ub.UNIMPLEMENTED:case ub.DATA_LOSS:return 1;default:return vb(),0}}function aE(t){if(void 0===t)return pb("GRPC error has no .code"),ub.UNKNOWN;switch(t){case J_.OK:return ub.OK;case J_.CANCELLED:return ub.CANCELLED;case J_.UNKNOWN:return ub.UNKNOWN;case J_.DEADLINE_EXCEEDED:return ub.DEADLINE_EXCEEDED;case J_.RESOURCE_EXHAUSTED:return ub.RESOURCE_EXHAUSTED;case J_.INTERNAL:return ub.INTERNAL;case J_.UNAVAILABLE:return ub.UNAVAILABLE;case J_.UNAUTHENTICATED:return ub.UNAUTHENTICATED;case J_.INVALID_ARGUMENT:return ub.INVALID_ARGUMENT;case J_.NOT_FOUND:return ub.NOT_FOUND;case J_.ALREADY_EXISTS:return ub.ALREADY_EXISTS;case J_.PERMISSION_DENIED:return ub.PERMISSION_DENIED;case J_.FAILED_PRECONDITION:return ub.FAILED_PRECONDITION;case J_.ABORTED:return ub.ABORTED;case J_.OUT_OF_RANGE:return ub.OUT_OF_RANGE;case J_.UNIMPLEMENTED:return ub.UNIMPLEMENTED;case J_.DATA_LOSS:return ub.DATA_LOSS;default:return vb()}}(G=J_=J_||{})[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var sE=(fE.prototype.insert=function(t,e){return new fE(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,cE.BLACK,null,null))},fE.prototype.remove=function(t){return new fE(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cE.BLACK,null,null))},fE.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},fE.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},fE.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(fE.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),fE.prototype.minKey=function(){return this.root.minKey()},fE.prototype.maxKey=function(){return this.root.maxKey()},fE.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},fE.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},fE.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},fE.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},fE.prototype.getIterator=function(){return new uE(this.root,null,this.comparator,!1)},fE.prototype.getIteratorFrom=function(t){return new uE(this.root,t,this.comparator,!1)},fE.prototype.getReverseIterator=function(){return new uE(this.root,null,this.comparator,!0)},fE.prototype.getReverseIteratorFrom=function(t){return new uE(this.root,t,this.comparator,!0)},fE),uE=(hE.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},hE.prototype.hasNext=function(){return 0<this.nodeStack.length},hE.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},hE),cE=(lE.prototype.copy=function(t,e,n,r,i){return new lE(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},lE.prototype.isEmpty=function(){return!1},lE.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},lE.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},lE.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},lE.prototype.minKey=function(){return this.min().key},lE.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},lE.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},lE.prototype.removeMin=function(){if(this.left.isEmpty())return lE.EMPTY;var t=this;return(t=(t=t.left.isRed()||t.left.left.isRed()?t:t.moveRedLeft()).copy(null,null,null,t.left.removeMin(),null)).fixUp()},lE.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()?r:r.moveRedLeft()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed()?r:r.moveRedRight()).key)){if(r.right.isEmpty())return lE.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},lE.prototype.isRed=function(){return this.color},lE.prototype.fixUp=function(){var t=this;return(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},lE.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},lE.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},lE.prototype.rotateLeft=function(){var t=this.copy(null,null,lE.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},lE.prototype.rotateRight=function(){var t=this.copy(null,null,lE.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},lE.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},lE.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},lE.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw vb();if(this.right.isRed())throw vb();var t=this.left.check();if(t!==this.right.check())throw vb();return t+(this.isRed()?0:1)},lE);function lE(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:lE.RED,this.left=null!=r?r:lE.EMPTY,this.right=null!=i?i:lE.EMPTY,this.size=this.left.size+1+this.right.size}function hE(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function fE(t,e){this.comparator=t,this.root=e||cE.EMPTY}function dE(){this.size=0}cE.EMPTY=null,cE.RED=!0,cE.BLACK=!1,cE.EMPTY=(Object.defineProperty(dE.prototype,"key",{get:function(){throw vb()},enumerable:!1,configurable:!0}),Object.defineProperty(dE.prototype,"value",{get:function(){throw vb()},enumerable:!1,configurable:!0}),Object.defineProperty(dE.prototype,"color",{get:function(){throw vb()},enumerable:!1,configurable:!0}),Object.defineProperty(dE.prototype,"left",{get:function(){throw vb()},enumerable:!1,configurable:!0}),Object.defineProperty(dE.prototype,"right",{get:function(){throw vb()},enumerable:!1,configurable:!0}),dE.prototype.copy=function(t,e,n,r,i){return this},dE.prototype.insert=function(t,e,n){return new cE(t,e)},dE.prototype.remove=function(t,e){return this},dE.prototype.isEmpty=function(){return!0},dE.prototype.inorderTraversal=function(t){return!1},dE.prototype.reverseTraversal=function(t){return!1},dE.prototype.minKey=function(){return null},dE.prototype.maxKey=function(){return null},dE.prototype.isRed=function(){return!1},dE.prototype.checkMaxDepth=function(){return!0},dE.prototype.check=function(){return 0},new dE);var pE=(mE.prototype.has=function(t){return null!==this.data.get(t)},mE.prototype.first=function(){return this.data.minKey()},mE.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(mE.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),mE.prototype.indexOf=function(t){return this.data.indexOf(t)},mE.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},mE.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},mE.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},mE.prototype.firstAfterOrEqual=function(t){return(t=this.data.getIteratorFrom(t)).hasNext()?t.getNext().key:null},mE.prototype.getIterator=function(){return new gE(this.data.getIterator())},mE.prototype.getIteratorFrom=function(t){return new gE(this.data.getIteratorFrom(t))},mE.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},mE.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},mE.prototype.isEmpty=function(){return this.data.isEmpty()},mE.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},mE.prototype.isEqual=function(t){if(!(t instanceof mE))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},mE.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},mE.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},mE.prototype.copy=function(t){var e=new mE(this.comparator);return e.data=t,e},mE),gE=(vE.prototype.getNext=function(){return this.iter.getNext().key},vE.prototype.hasNext=function(){return this.iter.hasNext()},vE),yE=new sE(Jb.comparator);function vE(t){this.iter=t}function mE(t){this.comparator=t,this.data=new sE(this.comparator)}var bE=new sE(Jb.comparator),wE=new sE(Jb.comparator),_E=new pE(Jb.comparator);function EE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=_E,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var TE=new pE(_b),IE=(PE.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,SE.createSynthesizedTargetChangeForCurrentChange(t,e)),new PE(Sb.min(),n,TE,yE,EE())},PE),SE=(OE.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new OE(Fb.EMPTY_BYTE_STRING,e,EE(),EE(),EE())},OE),kE=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},CE=function(t,e){this.targetId=t,this.V=e},NE=function(t,e,n,r){void 0===n&&(n=Fb.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},AE=(Object.defineProperty(DE.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(DE.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(DE.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(DE.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),DE.prototype.O=function(t){0<t.approximateByteSize()&&(this.F=!0,this.C=t)},DE.prototype.M=function(){var t=EE(),e=EE(),n=EE();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:vb()}})),new SE(this.C,this.N,t,e,n)},DE.prototype.L=function(){this.F=!1,this.D=ME()},DE.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},DE.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},DE.prototype.U=function(){this.S+=1},DE.prototype.K=function(){--this.S},DE.prototype.j=function(){this.F=!0,this.N=!0},DE),RE=(xE.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},xE.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:vb()}}))},xE.prototype.forEachTarget=function(t,e){var n=this;0<t.targetIds.length?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},xE.prototype.rt=function(t){var e=t.targetId,n=t.V.count;(t=this.ot(e))&&(_w(t=t.target)?0===n?(t=new Jb(t.path),this.tt(e,t,gw.newNoDocument(t,Sb.min()))):mb(1===n):this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e)))},xE.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);o&&(r.current&&_w(o.target)&&(o=new Jb(o.target.path),null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,gw.newNoDocument(o,t))),r.$&&(n.set(i,r.M()),r.L()))}));var r=EE();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){return!(t=e.ot(t))||2===t.purpose||(i=!1)})),i&&(r=r.add(t))}));var i=new IE(t,n,this.Y,this.H,r);return this.H=yE,this.J=LE(),this.Y=new pE(_b),i},xE.prototype.Z=function(t,e){var n;this.st(t)&&(n=this.at(t,e.key)?2:0,this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t)))},xE.prototype.tt=function(t,e,n){var r;this.st(t)&&(r=this.nt(t),this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n)))},xE.prototype.removeTarget=function(t){this.G.delete(t)},xE.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},xE.prototype.U=function(t){this.nt(t).U()},xE.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new AE,this.G.set(t,e)),e},xE.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new pE(_b),this.J=this.J.insert(t,e)),e},xE.prototype.st=function(t){var e=null!==this.ot(t);return e||db("WatchChangeAggregator","Detected inactive target",t),e},xE.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},xE.prototype.it=function(t){var e=this;this.G.set(t,new AE),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},xE.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},xE);function xE(t){this.W=t,this.G=new Map,this.H=yE,this.J=LE(),this.Y=new pE(_b)}function DE(){this.S=0,this.D=ME(),this.C=Fb.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}function OE(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function PE(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function LE(){return new sE(Jb.comparator)}function ME(){return new sE(Jb.comparator)}var FE={asc:"ASCENDING",desc:"DESCENDING"},jE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UE=function(t,e){this.databaseId=t,this.I=e};function VE(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function qE(t,e){return t.I?e.toBase64():e.toUint8Array()}function BE(t){return mb(!!t),Sb.fromTimestamp((t=Kb(t),new Ib(t.seconds,t.nanos)))}function zE(t,e){return new Ob(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function KE(t){return mb(lT(t=Ob.fromString(t))),t}function HE(t,e){return zE(t.databaseId,e.path)}function WE(t,e){if((e=KE(e)).get(1)!==t.databaseId.projectId)throw new cb(ub.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new cb(ub.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new Jb($E(e))}function GE(t,e){return zE(t.databaseId,e)}function QE(t){return 4===(t=KE(t)).length?Ob.emptyPath():$E(t)}function YE(t){return new Ob(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $E(t){return mb(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function XE(t,e,n){return{name:HE(t,e),fields:n.value.mapValue.fields}}function JE(t,e,n){var r=WE(t,e.name);return t=BE(e.updateTime),e=new dw({mapValue:{fields:e.fields}}),e=gw.newFoundDocument(r,t,e),n&&e.setHasCommittedMutations(),n?e.setHasCommittedMutations():e}function ZE(t,e){var n,r,i;if(e instanceof K_)n={update:XE(t,e.key,e.value)};else if(e instanceof eE)n={delete:HE(t,e.key)};else if(e instanceof H_)n={update:XE(t,e.key,e.data),updateMask:(r=e.fieldMask,i=[],r.fields.forEach((function(t){return i.push(t.canonicalString())})),{fieldPaths:i})};else{if(!(e instanceof nE))return vb();n={verify:HE(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map((function(t){var e=t.transform;if(e instanceof w_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof __)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof k_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof R_)return{fieldPath:t.field.canonicalString(),increment:e.A};throw vb()}))),e.precondition.isNone||(n.currentDocument=void 0!==(e=e.precondition).updateTime?{updateTime:VE(t,e.updateTime.toTimestamp())}:void 0!==e.exists?{exists:e.exists}:vb()),n}function tT(t,e){var n=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?M_.updateTime(BE(a.updateTime)):void 0!==a.exists?M_.exists(a.exists):M_.none():M_.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n,r=null;return"setToServerValue"in e?(mb("REQUEST_TIME"===e.setToServerValue),r=new w_):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new __(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new k_(n)):"increment"in e?r=new R_(t,e.increment):vb(),e=Lb.fromServerFormat(e.fieldPath),new L_(e,r)}(t,e)})):[];if(e.update){e.update.name;var i=WE(t,e.update.name),o=new dw({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=(a=e.updateMask.fieldPaths||[],new Mb(a.map((function(t){return Lb.fromServerFormat(t)}))));return new H_(i,o,a,n,r)}return new K_(i,o,n,r)}return e.delete?(r=WE(t,e.delete),new eE(r,n)):e.verify?(e=WE(t,e.verify),new nE(e,n)):vb()}function eT(t,e){return{documents:[GE(t,e.path)]}}function nT(t,e){var n={structuredQuery:{}},r=e.path;return null!==e.collectionGroup?(n.parent=GE(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=GE(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),(r=function(t){if(0!==t.length)return 1===(t=t.map((function(t){if("=="===t.op){if(lw(t.value))return{unaryFilter:{field:aT(t.field),op:"IS_NAN"}};if(cw(t.value))return{unaryFilter:{field:aT(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(lw(t.value))return{unaryFilter:{field:aT(t.field),op:"IS_NOT_NAN"}};if(cw(t.value))return{unaryFilter:{field:aT(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aT(t.field),op:(e=t.op,jE[e]),value:t.value}};var e}))).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(e.filters))&&(n.structuredQuery.where=r),(r=function(t){if(0!==t.length)return t.map((function(t){return{field:aT((t=t).field),direction:(t=t.dir,FE[t])}}))}(e.orderBy))&&(n.structuredQuery.orderBy=r),r=e.limit,null!==(r=t.I||Yb(r)?r:{value:r})&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=iT(e.startAt)),e.endAt&&(n.structuredQuery.endAt=iT(e.endAt)),n}function rT(t){var e=QE(t.parent),n=t.structuredQuery,r=null;0<(a=n.from?n.from.length:0)&&(mb(1===a),(s=n.from[0]).allDescendants?r=s.collectionId:e=e.child(s.collectionId));var i=[];n.where&&(i=function t(e){return e?void 0!==e.unaryFilter?[cT(e)]:void 0!==e.fieldFilter?[uT(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):vb():[]}(n.where));var o=[],a=(t=null,null),s=null;return Zw(e,r,o=n.orderBy?n.orderBy.map((function(t){return new Yw(sT((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})):o,i,t=n.limit?Yb(i="object"==typeof(i=n.limit)?i.value:i)?null:i:t,"F",a=n.startAt?oT(n.startAt):a,s=n.endAt?oT(n.endAt):s)}function iT(t){return{before:t.before,values:t.position}}function oT(t){var e=!!t.before;return t=t.values||[],new zw(t,e)}function aT(t){return{fieldPath:t.canonicalString()}}function sT(t){return Lb.fromServerFormat(t.fieldPath)}function uT(t){return Tw.create(sT(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return vb()}}(),t.fieldFilter.value)}function cT(t){switch(t.unaryFilter.op){case"IS_NAN":var e=sT(t.unaryFilter.field);return Tw.create(e,"==",{doubleValue:NaN});case"IS_NULL":return e=sT(t.unaryFilter.field),Tw.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=sT(t.unaryFilter.field);return Tw.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return n=sT(t.unaryFilter.field),Tw.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return vb()}}function lT(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function hT(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=fT(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(t.get(n),e);return fT(e)}function fT(t){return t+"\x01\x01"}function dT(t){var e=t.length;if(mb(2<=e),2===e)return mb("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ob.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||n<a)&&vb(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:vb()}o=a+2}return new Ob(r)}function pT(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var gT=function(t,e){this.seconds=t,this.nanoseconds=e};function yT(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}function vT(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}pT.store="owner",pT.key="owner",yT.store="mutationQueues",yT.keyPath="userId",vT.store="mutations",vT.keyPath="batchId",vT.userMutationsIndex="userMutationsIndex",vT.userMutationsKeyPath=["userId","batchId"];var mT=(bT.prefixForUser=function(t){return[t]},bT.prefixForPath=function(t,e){return[t,hT(e)]},bT.key=function(t,e,n){return[t,hT(e),n]},bT);function bT(){}function wT(t,e){this.path=t,this.readTime=e}function _T(t,e){this.path=t,this.version=e}mT.store="documentMutations",mT.PLACEHOLDER=new mT;var ET=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};function TT(t){this.byteSize=t}function IT(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}ET.store="remoteDocuments",ET.readTimeIndex="readTimeIndex",ET.readTimeIndexPath="readTime",ET.collectionReadTimeIndex="collectionReadTimeIndex",ET.collectionReadTimeIndexPath=["parentPath","readTime"],TT.store="remoteDocumentGlobal",TT.key="remoteDocumentGlobalKey",IT.store="targets",IT.keyPath="targetId",IT.queryTargetsIndexName="queryTargetsIndex",IT.queryTargetsKeyPath=["canonicalId","targetId"];var ST=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};function kT(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function CT(t,e){this.collectionId=t,this.parent=e}function NT(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}function AT(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}function RT(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}ST.store="targetDocuments",ST.keyPath=["targetId","path"],ST.documentTargetsIndex="documentTargetsIndex",ST.documentTargetsKeyPath=["path","targetId"],kT.key="targetGlobalKey",kT.store="targetGlobal",CT.store="collectionParents",CT.keyPath=["collectionId","parent"],NT.store="clientMetadata",NT.keyPath="clientId",AT.store="bundles",AT.keyPath="bundleId",RT.store="namedQueries",RT.keyPath="name";var xT,DT=eo(eo([],eo(eo([],eo(eo([],eo(eo([],[yT.store,vT.store,mT.store,ET.store,IT.store,pT.store,kT.store,ST.store]),[NT.store])),[TT.store])),[CT.store])),[AT.store,RT.store]),OT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",PT=(HT.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},HT.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},W=HT,function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}),LT=(KT.prototype.catch=function(t){return this.next(void 0,t)},KT.prototype.next=function(t,e){var n=this;return this.callbackAttached&&vb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new KT((function(r,i){n.nextCallback=function(e){n.wrapSuccess(t,e).next(r,i)},n.catchCallback=function(t){n.wrapFailure(e,t).next(r,i)}}))},KT.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},KT.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof KT?e:KT.resolve(e)}catch(t){return KT.reject(t)}},KT.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):KT.resolve(e)},KT.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):KT.reject(e)},KT.resolve=function(t){return new KT((function(e,n){e(t)}))},KT.reject=function(t){return new KT((function(e,n){n(t)}))},KT.waitFor=function(t){return new KT((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},KT.or=function(t){for(var e=KT.resolve(!1),n=0,r=t;n<r.length;n++)!function(t){e=e.next((function(e){return e?KT.resolve(e):t()}))}(r[n]);return e},KT.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},KT),MT=(zT.open=function(t,e,n,r){try{return new zT(e,t.transaction(r,n))}catch(t){throw new UT(e,t)}},Object.defineProperty(zT.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),zT.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(db("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},zT.prototype.store=function(t){return t=this.transaction.objectStore(t),new GT(t)},zT),FT=(BT.delete=function(t){return db("SimpleDb","Removing database:",t),YT(window.indexedDB.deleteDatabase(t)).toPromise()},BT.yt=function(){if("undefined"==typeof indexedDB)return!1;if(BT.gt())return!0;var t=po(),e=0<(n=BT._t(t))&&n<10,n=0<(n=BT.Et(t))&&n<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n)},BT.gt=function(){var t;return"undefined"!=typeof n&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/gestalt-laws-game-deploy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===t?void 0:t.Tt)},BT.It=function(t,e){return t.store(e)},BT._t=function(t){return t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1",Number(t)},BT.Et=function(t){return t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1",Number(t)},BT.prototype.At=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(db("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){t=t.target.result,e(t)},i.onblocked=function(){r(new UT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){"VersionError"===(e=e.target.error).name?r(new cb(ub.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new UT(t,e))},i.onupgradeneeded=function(t){db("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){db("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},BT.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},BT.prototype.runTransaction=function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u;return Ji(this,(function(c){switch(c.label){case 0:++o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=c.sent(),e=MT.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),LT.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(c.sent(),s),u)];case 4:return s=c.sent(),u="FirebaseError"!==s.name&&o<3,db("SimpleDb","Transaction failed with error:",s.message,"Retrying:",u),a.close(),u?[3,5]:[2,{value:Promise.reject(s)}];case 5:return[2]}}))},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(s=u.sent()))return[2,s.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},BT.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},BT),jT=(Object.defineProperty(qT.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(qT.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(qT.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),qT.prototype.done=function(){this.Vt=!0},qT.prototype.Ct=function(t){this.St=t},qT.prototype.delete=function(){return YT(this.Pt.delete())},qT),UT=(Yi(VT,xT=cb),VT);function VT(t,e){var n=this;return(n=xT.call(this,ub.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function qT(t){this.Pt=t,this.Vt=!1,this.St=null}function BT(t,e,n){this.name=t,this.version=e,this.wt=n,12.2===BT._t(po())&&pb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function zT(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new PT,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new UT(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){e=XT(e.target.error),n.ft.reject(new UT(t,e))}}function KT(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}function HT(){this.onCommittedListeners=[]}function WT(t){return"IndexedDbTransactionError"===t.name}var GT=(QT.prototype.put=function(t,e){return YT(t=void 0!==e?(db("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(db("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},QT.prototype.add=function(t){return db("SimpleDb","ADD",this.store.name,t,t),YT(this.store.add(t))},QT.prototype.get=function(t){var e=this;return YT(this.store.get(t)).next((function(n){return db("SimpleDb","GET",e.store.name,t,n=void 0===n?null:n),n}))},QT.prototype.delete=function(t){return db("SimpleDb","DELETE",this.store.name,t),YT(this.store.delete(t))},QT.prototype.count=function(){return db("SimpleDb","COUNT",this.store.name),YT(this.store.count())},QT.prototype.Nt=function(t,e){e=this.cursor(this.options(t,e));var n=[];return this.xt(e,(function(t,e){n.push(e)})).next((function(){return n}))},QT.prototype.Ft=function(t,e){return db("SimpleDb","DELETE ALL",this.store.name),(e=this.options(t,e)).kt=!1,e=this.cursor(e),this.xt(e,(function(t,e,n){return n.delete()}))},QT.prototype.$t=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.xt(n,e)},QT.prototype.Ot=function(t){var e=this.cursor({});return new LT((function(n,r){e.onerror=function(t){t=XT(t.target.error),r(t)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},QT.prototype.xt=function(t,e){var n=[];return new LT((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i,o=t.target.result;o?(i=new jT(o),(t=e(o.primaryKey,o.value,i))instanceof LT&&(t=t.catch((function(t){return i.done(),LT.reject(t)})),n.push(t)),i.isDone?r():null===i.Dt?o.continue():o.continue(i.Dt)):r()}})).next((function(){return LT.waitFor(n)}))},QT.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},QT.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},QT);function QT(t){this.store=t}function YT(t){return new LT((function(e,n){t.onsuccess=function(t){t=t.target.result,e(t)},t.onerror=function(t){t=XT(t.target.error),n(t)}}))}var $T=!1;function XT(t){var e=FT._t(po());if(12.2<=e&&e<13&&(e="An internal error was encountered in the Indexed Database server",0<=t.message.indexOf(e))){var n=new cb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return $T||($T=!0,setTimeout((function(){throw n}),0)),n}return t}var JT,ZT=(Yi(tI,JT=W),tI);function tI(t,e){var n=this;return(n=JT.call(this)||this).Mt=t,n.currentSequenceNumber=e,n}function eI(t,e){return FT.It(t.Mt,e)}var nI=(uI.prototype.applyToRemoteDocument=function(t,e){for(var n,r,i,o,a,s,u=e.mutationResults,c=0;c<this.mutations.length;c++){var l=this.mutations[c];l.key.isEqual(t.key)&&(n=l,r=t,i=u[c],l=s=a=o=void 0,n instanceof K_?(a=r,s=i,l=(o=n).value.clone(),o=Y_(o.fieldTransforms,a,s.transformResults),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()):n instanceof H_?(o=r,a=i,j_((s=n).precondition,o)?(l=Y_(s.fieldTransforms,o,a.transformResults),(n=o.data).setAll(Q_(s)),n.setAll(l),o.convertToFoundDocument(a.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(a.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},uI.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(r=n[e]).key.isEqual(t.key)&&U_(r,t,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(t.key)&&U_(r,t,this.localWriteTime)},uI.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key);n=r,e.applyToLocalView(n),r.isValidDocument()||n.convertToNoDocument(Sb.min())}))},uI.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),EE())},uI.prototype.isEqual=function(t){return this.batchId===t.batchId&&Eb(this.mutations,t.mutations,V_)&&Eb(this.baseMutations,t.baseMutations,V_)},uI),rI=(sI.from=function(t,e,n){mb(t.mutations.length===n.length);for(var r=wE,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new sI(t,e,n,r)},sI),iI=(aI.prototype.withSequenceNumber=function(t){return new aI(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},aI.prototype.withResumeToken=function(t,e){return new aI(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},aI.prototype.withLastLimboFreeSnapshotVersion=function(t){return new aI(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},aI),oI=function(t){this.Lt=t};function aI(t,e,n,r,i,o,a){void 0===i&&(i=Sb.min()),void 0===o&&(o=Sb.min()),void 0===a&&(a=Fb.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}function sI(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function uI(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function cI(t,e){if(e.document)return JE(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Jb.fromSegments(e.noDocument.path),r=pI(e.noDocument.readTime);return n=gw.newNoDocument(n,r),e.hasCommittedMutations?n.setHasCommittedMutations():n}return e.unknownDocument?(n=Jb.fromSegments(e.unknownDocument.path),r=pI(e.unknownDocument.version),gw.newUnknownDocument(n,r)):vb()}function lI(t,e,n){var r=hI(n);if(n=e.key.path.popLast().toArray(),e.isFoundDocument()){var i={name:HE(o=t.Lt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:VE(o,a.version.toTimestamp())},o=e.hasCommittedMutations;return new ET(null,null,i,o,r,n)}if(e.isNoDocument()){var a=e.key.path.toArray();return i=dI(e.version),o=e.hasCommittedMutations,new ET(null,new wT(a,i),null,o,r,n)}return e.isUnknownDocument()?(o=e.key.path.toArray(),e=dI(e.version),new ET(new _T(o,e),null,null,!0,r,n)):vb()}function hI(t){return[(t=t.toTimestamp()).seconds,t.nanoseconds]}function fI(t){return t=new Ib(t[0],t[1]),Sb.fromTimestamp(t)}function dI(t){return t=t.toTimestamp(),new gT(t.seconds,t.nanoseconds)}function pI(t){return t=new Ib(t.seconds,t.nanoseconds),Sb.fromTimestamp(t)}function gI(t,e){for(var n=(e.baseMutations||[]).map((function(e){return tT(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i,o=e.mutations[r];r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(i=e.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r+1,1),++r)}var a=e.mutations.map((function(e){return tT(t.Lt,e)})),s=Ib.fromMillis(e.localWriteTimeMs);return new nI(e.batchId,s,n,a)}function yI(t){var e=pI(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?pI(t.lastLimboFreeSnapshotVersion):Sb.min(),r=void 0!==t.query.documents?(mb(1===(r=t.query).documents.length),s_(t_(QE(r.documents[0])))):s_(rT(t.query));return new iI(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Fb.fromBase64String(t.resumeToken))}function vI(t,e){var n=dI(e.snapshotVersion),r=dI(e.lastLimboFreeSnapshotVersion),i=(_w(e.target)?eT:nT)(t.Lt,e.target);return t=e.resumeToken.toBase64(),new IT(e.targetId,bw(e.target),n,t,e.sequenceNumber,r,i)}function mI(t){var e=rT({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?u_(e,e.limit,"L"):e}var bI=(wI.prototype.getBundleMetadata=function(t,e){return _I(t).get(e).next((function(t){if(t)return{id:(t=t).bundleId,createTime:pI(t.createTime),version:t.version}}))},wI.prototype.saveBundleMetadata=function(t,e){return _I(t).put({bundleId:(e=e).id,createTime:dI(BE(e.createTime)),version:e.version})},wI.prototype.getNamedQuery=function(t,e){return EI(t).get(e).next((function(t){if(t)return{name:(t=t).name,query:mI(t.bundledQuery),readTime:pI(t.readTime)}}))},wI.prototype.saveNamedQuery=function(t,e){return EI(t).put({name:(e=e).name,readTime:dI(BE(e.readTime)),bundledQuery:e.bundledQuery})},wI);function wI(){}function _I(t){return eI(t,AT.store)}function EI(t){return eI(t,RT.store)}var TI=(NI.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),LT.resolve()},NI.prototype.getCollectionParents=function(t,e){return LT.resolve(this.Bt.getEntries(e))},NI),II=(CI.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new pE(Ob.comparator);return t=!r.has(n),this.index[e]=r.add(n),t},CI.prototype.has=function(t){var e=t.lastSegment();return t=t.popLast(),(e=this.index[e])&&e.has(t)},CI.prototype.getEntries=function(t){return(this.index[t]||new pE(Ob.comparator)).toArray()},CI),SI=(kI.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.qt.has(e))return LT.resolve();var r=e.lastSegment(),i=e.popLast();return t.addOnCommittedListener((function(){n.qt.add(e)})),i={collectionId:r,parent:hT(i)},AI(t).put(i)},kI.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Tb(e),""],!1,!0);return AI(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(dT(o.parent))}return n}))},kI);function kI(){this.qt=new II}function CI(){this.index={}}function NI(){this.Bt=new II}function AI(t){return eI(t,CT.store)}var RI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xI=(DI.withCacheSize=function(t){return new DI(t,DI.DEFAULT_COLLECTION_PERCENTILE,DI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},DI);function DI(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function OI(t,e,n){var r=t.store(vT.store),i=t.store(mT.store),o=[],a=(t=IDBKeyRange.only(n.batchId),0);t=r.$t({range:t},(function(t,e,n){return a++,n.delete()})),o.push(t.next((function(){mb(1===a)})));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var l=c[u],h=mT.key(e,l.key.path,n.batchId);o.push(i.delete(h)),s.push(l.key)}return LT.waitFor(o).next((function(){return s}))}function PI(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw vb();e=t.noDocument}return JSON.stringify(e).length}xI.DEFAULT_COLLECTION_PERCENTILE=10,xI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xI.DEFAULT=new xI(41943040,xI.DEFAULT_COLLECTION_PERCENTILE,xI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xI.DISABLED=new xI(-1,0,0);var LI=(MI.Qt=function(t,e,n,r){return mb(""!==t.uid),new MI(t.isAuthenticated()?t.uid:"",e,n,r)},MI.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jI(t).$t({index:vT.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},MI.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=UI(t),a=jI(t);return a.add({}).next((function(s){mb("number"==typeof s);for(var u,c,l,h,f,d=new nI(s,e,n,r),p=(u=i.R,c=i.userId,h=(l=d).baseMutations.map((function(t){return ZE(u.Lt,t)})),f=l.mutations.map((function(t){return ZE(u.Lt,t)})),new vT(c,l.batchId,l.localWriteTime.toMillis(),h,f)),g=[],y=new pE((function(t,e){return _b(t.canonicalString(),e.canonicalString())})),v=0,m=r;v<m.length;v++){var b=m[v],w=mT.key(i.userId,b.key.path,s);y=y.add(b.key.path.popLast()),g.push(a.put(p)),g.push(o.put(w,mT.PLACEHOLDER))}return y.forEach((function(e){g.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=d.keys()})),LT.waitFor(g).next((function(){return d}))}))},MI.prototype.lookupMutationBatch=function(t,e){var n=this;return jI(t).get(e).next((function(t){return t?(mb(t.userId===n.userId),gI(n.R,t)):null}))},MI.prototype.jt=function(t,e){var n=this;return this.Kt[e]?LT.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){return t?(t=t.keys(),n.Kt[e]=t):null}))},MI.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=(e=IDBKeyRange.lowerBound([this.userId,r]),null);return jI(t).$t({index:vT.userMutationsIndex,range:e},(function(t,e,o){e.userId===n.userId&&(mb(e.batchId>=r),i=gI(n.R,e)),o.done()})).next((function(){return i}))},MI.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jI(t).$t({index:vT.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},MI.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jI(t).Nt(vT.userMutationsIndex,n).next((function(t){return t.map((function(t){return gI(e.R,t)}))}))},MI.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=mT.prefixForPath(this.userId,e.path),i=(r=IDBKeyRange.lowerBound(r),[]);return UI(t).$t({range:r},(function(r,o,a){var s=r[0],u=r[1];if(r=r[2],u=dT(u),s===n.userId&&e.path.isEqual(u))return jI(t).get(r).next((function(t){if(!t)throw vb();mb(t.userId===n.userId),i.push(gI(n.R,t))}));a.done()})).next((function(){return i}))},MI.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pE(_b),i=[];return e.forEach((function(e){var o=mT.prefixForPath(n.userId,e.path);o=IDBKeyRange.lowerBound(o),o=UI(t).$t({range:o},(function(t,i,o){var a=t[0],s=t[1];t=t[2],s=dT(s),a===n.userId&&e.path.isEqual(s)?r=r.add(t):o.done()})),i.push(o)})),LT.waitFor(i).next((function(){return n.Wt(t,r)}))},MI.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=(e=mT.prefixForPath(this.userId,r),e=IDBKeyRange.lowerBound(e),new pE(_b));return UI(t).$t({range:e},(function(t,e,a){var s=t[0],u=t[1];t=t[2],u=dT(u),s===n.userId&&r.isPrefixOf(u)?u.length===i&&(o=o.add(t)):a.done()})).next((function(){return n.Wt(t,o)}))},MI.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(jI(t).get(e).next((function(t){if(null===t)throw vb();mb(t.userId===n.userId),r.push(gI(n.R,t))})))})),LT.waitFor(i).next((function(){return r}))},MI.prototype.removeMutationBatch=function(t,e){var n=this;return OI(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),LT.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},MI.prototype.Gt=function(t){delete this.Kt[t]},MI.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return LT.resolve();n=IDBKeyRange.lowerBound(mT.prefixForUser(e.userId));var r=[];return UI(t).$t({range:n},(function(t,n,i){t[0]===e.userId?(t=dT(t[1]),r.push(t)):i.done()})).next((function(){mb(0===r.length)}))}))},MI.prototype.containsKey=function(t,e){return FI(t,this.userId,e)},MI.prototype.zt=function(t){var e=this;return VI(t).get(this.userId).next((function(t){return t||new yT(e.userId,-1,"")}))},MI);function MI(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}function FI(t,e,n){var r=(n=mT.prefixForPath(e,n.path))[1],i=(n=IDBKeyRange.lowerBound(n),!1);return UI(t).$t({range:n,kt:!0},(function(t,n,o){var a=t[0],s=t[1];t[2],a===e&&s===r&&(i=!0),o.done()})).next((function(){return i}))}function jI(t){return eI(t,vT.store)}function UI(t){return eI(t,mT.store)}function VI(t){return eI(t,yT.store)}var qI=(KI.prototype.next=function(){return this.Ht+=2,this.Ht},KI.Jt=function(){return new KI(0)},KI.Yt=function(){return new KI(-1)},KI),BI=(zI.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new qI(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},zI.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Sb.fromTimestamp(new Ib(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},zI.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},zI.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},zI.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},zI.prototype.updateTargetData=function(t,e){return this.te(t,e)},zI.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return HI(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return mb(0<e.targetCount),--e.targetCount,n.Zt(t,e)}))},zI.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return HI(t).$t((function(a,s){(s=yI(s)).sequenceNumber<=e&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(t,s)))})).next((function(){return LT.waitFor(o)})).next((function(){return i}))},zI.prototype.forEachTarget=function(t,e){return HI(t).$t((function(t,n){n=yI(n),e(n)}))},zI.prototype.Xt=function(t){return WI(t).get(kT.key).next((function(t){return mb(null!==t),t}))},zI.prototype.Zt=function(t,e){return WI(t).put(kT.key,e)},zI.prototype.te=function(t,e){return HI(t).put(vI(this.R,e))},zI.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},zI.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},zI.prototype.getTargetData=function(t,e){var n=bw(e),r=(n=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),null);return HI(t).$t({range:n,index:IT.queryTargetsIndexName},(function(t,n,i){n=yI(n),ww(e,n.target)&&(r=n,i.done())})).next((function(){return r}))},zI.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=GI(t);return e.forEach((function(e){var a=hT(e.path);i.push(o.put(new ST(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),LT.waitFor(i)},zI.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=GI(t);return LT.forEach(e,(function(e){var o=hT(e.path);return LT.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},zI.prototype.removeMatchingKeysForTargetId=function(t,e){return t=GI(t),e=IDBKeyRange.bound([e],[e+1],!1,!0),t.delete(e)},zI.prototype.getMatchingKeysForTargetId=function(t,e){e=IDBKeyRange.bound([e],[e+1],!1,!0),t=GI(t);var n=EE();return t.$t({range:e,kt:!0},(function(t,e,r){t=dT(t[1]),t=new Jb(t),n=n.add(t)})).next((function(){return n}))},zI.prototype.containsKey=function(t,e){e=hT(e.path),e=IDBKeyRange.bound([e],[Tb(e)],!1,!0);var n=0;return GI(t).$t({index:ST.documentTargetsIndex,kt:!0,range:e},(function(t,e,r){var i=t[0];t[1],0!==i&&(n++,r.done())})).next((function(){return 0<n}))},zI.prototype.lt=function(t,e){return HI(t).get(e).next((function(t){return t?yI(t):null}))},zI);function zI(t,e){this.referenceDelegate=t,this.R=e}function KI(t){this.Ht=t}function HI(t){return eI(t,IT.store)}function WI(t){return eI(t,kT.store)}function GI(t){return eI(t,ST.store)}function QI(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){if(t.code!==ub.FAILED_PRECONDITION||t.message!==OT)throw t;return db("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function YI(t,e){var n=t[0],r=t[1];return t=e[0],e=e[1],0===(t=_b(n,t))?_b(r,e):t}var $I=(rS.prototype.ie=function(){return++this.se},rS.prototype.re=function(t){var e=[t,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(e):YI(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(rS.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),rS),XI=(nS.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},nS.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(nS.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),nS.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;db("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Xi(e,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return WT(e=n.sent())?(db("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,QI(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},nS),JI=(eS.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},eS.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return LT.resolve(ob.o);var r=new $I(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},eS.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},eS.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},eS.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(db("LruGarbageCollector","Garbage collection skipped; disabled"),LT.resolve(RI)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(db("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),RI):n.fe(t,e)}))},eS.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},eS.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return r=e>c.params.maximumSequenceNumbersToCollect?(db("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),c.params.maximumSequenceNumbersToCollect):e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),fb()<=ca.DEBUG&&db("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),LT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},eS),ZI=(tS.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},tS.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},tS.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},tS.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},tS.prototype.addReference=function(t,e,n){return iS(t,n)},tS.prototype.removeReference=function(t,e,n){return iS(t,n)},tS.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},tS.prototype.markPotentiallyOrphaned=iS,tS.prototype._e=function(t,e){return r=e,i=!1,VI(n=t).Ot((function(t){return FI(n,t,r).next((function(t){return t&&(i=!0),LT.resolve(!t)}))})).next((function(){return i}));var n,r,i},tS.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){s<=e&&(s=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),GI(t).delete([0,hT(a.path)])}))})),i.push(s))})).next((function(){return LT.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},tS.prototype.removeTarget=function(t,e){return e=e.withSequenceNumber(t.currentSequenceNumber),this.db.getTargetCache().updateTargetData(t,e)},tS.prototype.updateLimboDocument=iS,tS.prototype.we=function(t,e){t=GI(t);var n,r=ob.o;return t.$t({index:ST.documentTargetsIndex},(function(t,i){var o=t[0];t[1],t=i.path,i=i.sequenceNumber,0===o?(r!==ob.o&&e(new Jb(dT(n)),r),r=i,n=t):r=ob.o})).next((function(){r!==ob.o&&e(new Jb(dT(n)),r)}))},tS.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},tS);function tS(t,e){this.db=t,this.garbageCollector=new JI(this,e)}function eS(t,e){this.ae=t,this.params=e}function nS(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}function rS(t){this.ne=t,this.buffer=new pE(YI),this.se=0}function iS(t,e){return GI(t).put((t=t.currentSequenceNumber,new ST(0,hT(e.path),t)))}var oS,aS=(fS.prototype.get=function(t){var e=this.mapKeyFn(t);if(void 0!==(e=this.inner[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.equalsFn(i,t))return o}},fS.prototype.has=function(t){return void 0!==this.get(t)},fS.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},fS.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},fS.prototype.forEach=function(t){Ab(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=(a=i[r])[0],a=a[1];t(o,a)}}))},fS.prototype.isEmpty=function(){return Rb(this.inner)},fS),sS=(hS.prototype.getReadTime=function(t){return(t=this.changes.get(t))?t.readTime:Sb.min()},hS.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},hS.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:gw.newInvalidDocument(t),readTime:e})},hS.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?LT.resolve(n.document):this.getFromCache(t,e)},hS.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},hS.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},hS.prototype.assertNotApplied=function(){},G=hS,lS.prototype.addEntry=function(t,e,n){return pS(t).put(gS(e),n)},lS.prototype.removeEntry=function(t,e){return t=pS(t),e=gS(e),t.delete(e)},lS.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},lS.prototype.getEntry=function(t,e){var n=this;return pS(t).get(gS(e)).next((function(t){return n.ye(e,t)}))},lS.prototype.ge=function(t,e){var n=this;return pS(t).get(gS(e)).next((function(t){return{document:n.ye(e,t),size:PI(t)}}))},lS.prototype.getEntries=function(t,e){var n=this,r=yE;return this.pe(t,e,(function(t,e){e=n.ye(t,e),r=r.insert(t,e)})).next((function(){return r}))},lS.prototype.Ee=function(t,e){var n=this,r=yE,i=new sE(Jb.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,PI(e))})).next((function(){return{documents:r,Te:i}}))},lS.prototype.pe=function(t,e,n){if(e.isEmpty())return LT.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return pS(t).$t({range:r},(function(t,e,r){for(var a=Jb.fromSegments(t);o&&Jb.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},lS.prototype.getDocumentsMatchingQuery=function(t,e,n){var r,i=this,o=yE,a=e.path.length+1,s={};return n.isEqual(Sb.min())?(r=e.path.toArray(),s.range=IDBKeyRange.lowerBound(r)):(r=e.path.toArray(),n=hI(n),s.range=IDBKeyRange.lowerBound([r,n],!0),s.index=ET.collectionReadTimeIndex),pS(t).$t(s,(function(t,n,r){t.length===a&&(n=cI(i.R,n),e.path.isPrefixOf(n.key.path)?f_(e,n)&&(o=o.insert(n.key,n)):r.done())})).next((function(){return o}))},lS.prototype.newChangeBuffer=function(t){return new uS(this,!!t&&t.trackRemovals)},lS.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},lS.prototype.getMetadata=function(t){return dS(t).get(TT.key).next((function(t){return mb(!!t),t}))},lS.prototype.me=function(t,e){return dS(t).put(TT.key,e)},lS.prototype.ye=function(t,e){return!e||(e=cI(this.R,e)).isNoDocument()&&e.version.isEqual(Sb.min())?gw.newInvalidDocument(t):e},lS),uS=(Yi(cS,oS=G),cS.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new pE((function(t,e){return _b(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s,u=e.Ae.get(o);a.document.isValidDocument()?(s=lI(e.Ie.R,a.document,e.getReadTime(o)),i=i.add(o.path.popLast()),a=PI(s),r+=a-u,n.push(e.Ie.addEntry(t,o,s))):(r-=u,e.trackRemovals?(u=lI(e.Ie.R,gw.newNoDocument(o,Sb.min()),e.getReadTime(o)),n.push(e.Ie.addEntry(t,o,u))):n.push(e.Ie.removeEntry(t,o)))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),LT.waitFor(n)},cS.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},cS.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},cS);function cS(t,e){var n=this;return(n=oS.call(this)||this).Ie=t,n.trackRemovals=e,n.Ae=new aS((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),n}function lS(t,e){this.R=t,this.Ut=e}function hS(){this.changes=new aS((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}function fS(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function dS(t){return eI(t,TT.store)}function pS(t){return eI(t,ET.store)}function gS(t){return t.path.toArray()}var yS=(vS.prototype.Rt=function(t,e,n,r){var i=this;mb(n<r&&0<=n&&r<=11);var o=new MT("createOrUpgrade",e);n<1&&1<=r&&(t.createObjectStore(pT.store),(a=t).createObjectStore(yT.store,{keyPath:yT.keyPath}),a.createObjectStore(vT.store,{keyPath:vT.keyPath,autoIncrement:!0}).createIndex(vT.userMutationsIndex,vT.userMutationsKeyPath,{unique:!0}),a.createObjectStore(mT.store),mS(t),t.createObjectStore(ET.store));var a,s=LT.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(ST.store),a.deleteObjectStore(IT.store),a.deleteObjectStore(kT.store),mS(t)),s=s.next((function(){return t=o.store(kT.store),e=new kT(0,0,Sb.min().toTimestamp(),0),t.put(kT.key,e);var t,e}))),n<4&&4<=r&&(s=(s=0!==n?s.next((function(){return e=t,(n=o).store(vT.store).Nt().next((function(t){e.deleteObjectStore(vT.store),e.createObjectStore(vT.store,{keyPath:vT.keyPath,autoIncrement:!0}).createIndex(vT.userMutationsIndex,vT.userMutationsKeyPath,{unique:!0});var r=n.store(vT.store);return t=t.map((function(t){return r.put(t)})),LT.waitFor(t)}));var e,n})):s).next((function(){t.createObjectStore(NT.store,{keyPath:NT.keyPath})}))),n<5&&5<=r&&(s=s.next((function(){return i.Re(o)}))),n<6&&6<=r&&(s=s.next((function(){return t.createObjectStore(TT.store),i.be(o)}))),n<7&&7<=r&&(s=s.next((function(){return i.ve(o)}))),n<8&&8<=r&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&9<=r&&(s=s.next((function(){var n;(n=t).objectStoreNames.contains("remoteDocumentChanges")&&n.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(ET.store)).createIndex(ET.readTimeIndex,ET.readTimeIndexPath,{unique:!1}),n.createIndex(ET.collectionReadTimeIndex,ET.collectionReadTimeIndexPath,{unique:!1})}))),n<10&&10<=r&&(s=s.next((function(){return i.Ve(o)}))),n<11&&11<=r?s.next((function(){t.createObjectStore(AT.store,{keyPath:AT.keyPath}),t.createObjectStore(RT.store,{keyPath:RT.keyPath})})):s},vS.prototype.be=function(t){var e=0;return t.store(ET.store).$t((function(t,n){e+=PI(n)})).next((function(){var n=new TT(e);return t.store(TT.store).put(TT.key,n)}))},vS.prototype.Re=function(t){var e=this,n=t.store(yT.store),r=t.store(vT.store);return n.Nt().next((function(n){return LT.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(vT.userMutationsIndex,i).next((function(r){return LT.forEach(r,(function(r){return mb(r.userId===n.userId),r=gI(e.R,r),OI(t,n.userId,r).next((function(){}))}))}))}))}))},vS.prototype.ve=function(t){var e=t.store(ST.store),n=t.store(ET.store);return t.store(kT.store).get(kT.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Ob(n);n=[0,hT(o)],r.push(e.get(n).next((function(n){return n?LT.resolve():e.put(new ST(0,hT(o),t.highestListenSequenceNumber))})))})).next((function(){return LT.waitFor(r)}))}))},vS.prototype.Pe=function(t,e){function n(t){if(i.add(t)){var e=t.lastSegment();return t=t.popLast(),r.put({collectionId:e,parent:hT(t)})}}t.createObjectStore(CT.store,{keyPath:CT.keyPath});var r=e.store(CT.store),i=new II;return e.store(ET.store).$t({kt:!0},(function(t,e){return n((t=new Ob(t)).popLast())})).next((function(){return e.store(mT.store).$t({kt:!0},(function(t,e){t[0];var r=t[1];return t[2],n((r=dT(r)).popLast())}))}))},vS.prototype.Ve=function(t){var e=this,n=t.store(IT.store);return n.$t((function(t,r){return r=yI(r),r=vI(e.R,r),n.put(r)}))},vS);function vS(t){this.R=t}function mS(t){t.createObjectStore(ST.store,{keyPath:ST.keyPath}).createIndex(ST.documentTargetsIndex,ST.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(IT.store,{keyPath:IT.keyPath}).createIndex(IT.queryTargetsIndexName,IT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(kT.store)}var bS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wS=(_S.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new cb(ub.FAILED_PRECONDITION,bS);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new ob(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},_S.prototype.He=function(t){var e=this;return this.Me=function(n){return Xi(e,void 0,void 0,(function(){return Ji(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},_S.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Xi(e,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},_S.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Xi(e,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},_S.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return TS(e).put(new NT(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(WT(e))return db("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return db("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},_S.prototype.Je=function(t){var e=this;return ES(t).get(pT.key).next((function(t){return LT.resolve(e.tn(t))}))},_S.prototype.en=function(t){return TS(t).delete(this.clientId)},_S.prototype.nn=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Ji(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=eI(t,NT.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return LT.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},_S.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},_S.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},_S.prototype.Ye=function(t){var e=this;return this.Ce?LT.resolve(!0):ES(t).get(pT.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new cb(ub.FAILED_PRECONDITION,bS);return!1}}return!(!e.networkEnabled||!e.inForeground)||TS(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground;if(t=e.networkEnabled===t.networkEnabled,n||r&&t)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&db("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},_S.prototype.shutdown=function(){return Xi(this,void 0,void 0,(function(){var t=this;return Ji(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[pT.store,NT.store],(function(e){var n=new ZT(e,ob.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},_S.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},_S.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return TS(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(_S.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),_S.prototype.getMutationQueue=function(t){return LI.Qt(t,this.R,this.Ut,this.referenceDelegate)},_S.prototype.getTargetCache=function(){return this.qe},_S.prototype.getRemoteDocumentCache=function(){return this.Ue},_S.prototype.getIndexManager=function(){return this.Ut},_S.prototype.getBundleCache=function(){return this.Ke},_S.prototype.runTransaction=function(t,e,n){var r,i=this;return db("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",DT,(function(o){return r=new ZT(o,i.Ne?i.Ne.next():ob.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw pb("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new cb(ub.FAILED_PRECONDITION,OT);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},_S.prototype.dn=function(t){var e=this;return ES(t).get(pT.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new cb(ub.FAILED_PRECONDITION,bS)}))},_S.prototype.Ze=function(t){var e=new pT(this.clientId,this.allowTabSynchronization,Date.now());return ES(t).put(pT.key,e)},_S.yt=function(){return FT.yt()},_S.prototype.Xe=function(t){var e=this,n=ES(t);return n.get(pT.key).next((function(t){return e.tn(t)?(db("IndexedDbPersistence","Releasing primary lease."),n.delete(pT.key)):LT.resolve()}))},_S.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(pb("Detected an update time that is in the future: "+t+" > "+n),1))},_S.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},_S.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},_S.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!yo()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},_S.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},_S.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return db("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return pb("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},_S.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){pb("Failed to set zombie client id.",t)}},_S.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},_S.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},_S);function _S(t,e,n,r,i,o,a,s,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Se=i,this.window=o,this.document=a,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!_S.yt())throw new cb(ub.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZI(this,r),this.Le=e+"main",this.R=new oI(s),this.Be=new FT(this.Le,11,new yS(this.R)),this.qe=new BI(this.referenceDelegate,this.R),this.Ut=new SI,this.Ue=(e=this.R,s=this.Ut,new sS(e,s)),this.Ke=new bI,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===c&&pb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function ES(t){return eI(t,pT.store)}function TS(t){return eI(t,NT.store)}function IS(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function SS(t,e){this.progress=t,this.wn=e}var kS=(OS.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},OS.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},OS.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},OS.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},OS.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},OS.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Jb.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):o_(e)?this.In(t,e,n):this.An(t,e,n);var r},OS.prototype.Tn=function(t,e){return this.mn(t,new Jb(e)).next((function(t){var e=bE;return t.isFoundDocument()?e.insert(t.key,t):e}))},OS.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=bE;return this.Ut.getCollectionParents(t,i).next((function(a){return LT.forEach(a,(function(a){var s=(s=e,a=a.child(i),new Jw(a,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},OS.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=gw.newInvalidDocument(c),r=r.insert(c,l)),U_(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){f_(e,n)||(r=r.remove(t))})),r}))},OS.prototype.Rn=function(t,e,n){for(var r=EE(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof H_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},OS),CS=(DS.Pn=function(t,e){for(var n=EE(),r=EE(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new DS(t,e.fromCache,n,r)},DS),NS=(xS.prototype.Vn=function(t){this.Sn=t},xS.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())||n.isEqual(Sb.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(e_(e)||n_(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(fb()<=ca.DEBUG&&db("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),h_(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},xS.prototype.Cn=function(t,e){var n=new pE(d_(t));return e.forEach((function(e,r){f_(t,r)&&(n=n.add(r))})),n},xS.prototype.Nn=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.compareTo(r))},xS.prototype.Dn=function(t,e){return fb()<=ca.DEBUG&&db("QueryEngine","Using full collection scan to execute query:",h_(e)),this.Sn.getDocumentsMatchingQuery(t,e,Sb.min())},xS),AS=(RS.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},RS);function RS(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new sE(_b),this.kn=new aS(bw,ww),this.$n=Sb.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new kS(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}function xS(){}function DS(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}function OS(t,e,n){this.Ue=t,this._n=e,this.Ut=n}function PS(t,e,n,r){return new AS(t,e,n,r)}function LS(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return r=(n=t)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new kS(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=EE(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var g=p[d];r.push(g.batchId);for(var y=0,v=g.mutations;y<v.length;y++){var m=v[y];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function MS(t,e){var n=t;return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,a,s,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return r=n,i=t,a=h,u=(s=(o=e).batch).keys(),c=LT.resolve(),u.forEach((function(t){c=c.next((function(){return a.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);mb(null!==n),e.version.compareTo(n)<0&&(s.applyToRemoteDocument(e,o),e.isValidDocument()&&a.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,s)})).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function FS(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function jS(t,e){var n=t,r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s,u,c,l=i.get(o);l&&(a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}))),0<(c=e.resumeToken).approximateByteSize()&&(s=l.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber),i=i.insert(o,s),u=l,c=e,mb(0<(l=s).resumeToken.approximateByteSize()),(0===u.resumeToken.approximateByteSize()||3e8<=l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()||0<c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size)&&a.push(n.qe.updateTargetData(t,s))))}));var s,u=yE;return e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(US(t,o,e.documentUpdates,r,void 0).next((function(t){u=t}))),r.isEqual(Sb.min())||(s=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)})),a.push(s)),LT.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,u)})).next((function(){return u}))})).then((function(t){return n.Fn=i,t}))}function US(t,e,n,r,i){var o=EE();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=yE;return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Sb.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||0<a.version.compareTo(s.version)||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):db("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function VS(t,e){var n=t;return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,LT.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new iI(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||0<t.snapshotVersion.compareTo(r.snapshotVersion))&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function qS(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:i=(r=t).Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!WT(o=a.sent()))throw o;return db("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function BS(t,e,n){var r=t,i=Sb.min(),o=EE();return r.persistence.runTransaction("Execute query","readonly",(function(t){return a=r,s=t,u=s_(e),(void 0!==(a=(c=a).kn.get(u))?LT.resolve(c.Fn.get(a)):c.qe.getTargetData(s,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Sb.min(),n?o:EE())})).next((function(t){return{documents:t,Bn:o}}));var a,s,u,c}))}function zS(t,e){var n=t,r=n.qe;return(t=n.Fn.get(e))?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function KS(t){var e=t;return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,t=e.$n,i=n,o=yE,a=hI(t),t=pS(r),r=IDBKeyRange.lowerBound(a,!0),t.$t({index:ET.readTimeIndex,range:r},(function(t,e){var n=cI(i.R,e);o=o.insert(n.key,n),a=e.readTime})).next((function(){return{wn:o,readTime:fI(a)}}));var n,r,i,o,a})).then((function(t){var n=t.wn;return t=t.readTime,e.$n=t,n}))}function HS(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){return[2,(e=t).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return t=pS(t),e=Sb.min(),t.$t({index:ET.readTimeIndex,reverse:!0},(function(t,n,r){n.readTime&&(e=fI(n.readTime)),r.done()})).next((function(){return e}));var e})).then((function(t){e.$n=t}))]}))}))}var WS,GS,QS=(gk.prototype.getBundleMetadata=function(t,e){return LT.resolve(this.Qn.get(e))},gk.prototype.saveBundleMetadata=function(t,e){return this.Qn.set(e.id,{id:e.id,version:e.version,createTime:BE(e.createTime)}),LT.resolve()},gk.prototype.getNamedQuery=function(t,e){return LT.resolve(this.jn.get(e))},gk.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(e=e).name,query:mI(e.bundledQuery),readTime:BE(e.readTime)}),LT.resolve()},gk),YS=(pk.prototype.isEmpty=function(){return this.Wn.isEmpty()},pk.prototype.addReference=function(t,e){e=new $S(t,e),this.Wn=this.Wn.add(e),this.zn=this.zn.add(e)},pk.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},pk.prototype.removeReference=function(t,e){this.Yn(new $S(t,e))},pk.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},pk.prototype.Zn=function(t){var e=this,n=new Jb(new Ob([])),r=new $S(n,t),i=(t=new $S(n,t+1),[]);return this.zn.forEachInRange([r,t],(function(t){e.Yn(t),i.push(t.key)})),i},pk.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},pk.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},pk.prototype.es=function(t){var e=new Jb(new Ob([])),n=new $S(e,t),r=(t=new $S(e,t+1),EE());return this.zn.forEachInRange([n,t],(function(t){r=r.add(t.key)})),r},pk.prototype.containsKey=function(t){var e=new $S(t,0);return null!==(e=this.Wn.firstAfterOrEqual(e))&&t.isEqual(e.key)},pk),$S=(dk.Gn=function(t,e){return Jb.comparator(t.key,e.key)||_b(t.ns,e.ns)},dk.Hn=function(t,e){return _b(t.ns,e.ns)||Jb.comparator(t.key,e.key)},dk),XS=(fk.prototype.checkEmpty=function(t){return LT.resolve(0===this._n.length)},fk.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1],n=new nI(i,e,n,r),this._n.push(n);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.rs=this.rs.add(new $S(s.key,i)),this.Ut.addToCollectionParentIndex(t,s.key.path.popLast())}return LT.resolve(n)},fk.prototype.lookupMutationBatch=function(t,e){return LT.resolve(this.os(e))},fk.prototype.getNextMutationBatchAfterBatchId=function(t,e){return e=(e=this.cs(e+1))<0?0:e,LT.resolve(this._n.length>e?this._n[e]:null)},fk.prototype.getHighestUnacknowledgedBatchId=function(){return LT.resolve(0===this._n.length?-1:this.ss-1)},fk.prototype.getAllMutationBatches=function(t){return LT.resolve(this._n.slice())},fk.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new $S(e,0),i=(e=new $S(e,Number.POSITIVE_INFINITY),[]);return this.rs.forEachInRange([r,e],(function(t){t=n.os(t.ns),i.push(t)})),LT.resolve(i)},fk.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pE(_b);return e.forEach((function(t){var e=new $S(t,0);t=new $S(t,Number.POSITIVE_INFINITY),n.rs.forEachInRange([e,t],(function(t){r=r.add(t.ns)}))})),LT.resolve(this.us(r))},fk.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1;e=n,Jb.isDocumentKey(e)||(e=e.child("")),e=new $S(new Jb(e),0);var i=new pE(_b);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.ns)),!0)}),e),LT.resolve(this.us(i))},fk.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){null!==(t=e.os(t))&&n.push(t)})),n},fk.prototype.removeMutationBatch=function(t,e){var n=this;mb(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return LT.forEach(e.mutations,(function(i){var o=new $S(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},fk.prototype.Gt=function(t){},fk.prototype.containsKey=function(t,e){var n=new $S(e,0);return n=this.rs.firstAfterOrEqual(n),LT.resolve(e.isEqual(n&&n.key))},fk.prototype.performConsistencyCheck=function(t){return this._n.length,LT.resolve()},fk.prototype.hs=function(t,e){return this.cs(t)},fk.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},fk.prototype.os=function(t){return(t=this.cs(t))<0||t>=this._n.length?null:this._n[t]},fk),JS=(hk.prototype.addEntry=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-i,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},hk.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},hk.prototype.getEntry=function(t,e){var n=this.docs.get(e);return LT.resolve(n?n.document.clone():gw.newInvalidDocument(e))},hk.prototype.getEntries=function(t,e){var n=this,r=yE;return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():gw.newInvalidDocument(t))})),LT.resolve(r)},hk.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=yE,i=new Jb(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=(s=o.getNext()).key,s=(u=s.value).document,u=u.readTime;if(!e.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||f_(e,s)&&(r=r.insert(s.key,s.clone()))}return LT.resolve(r)},hk.prototype.fs=function(t,e){return LT.forEach(this.docs,(function(t){return e(t)}))},hk.prototype.newChangeBuffer=function(t){return new ZS(this)},hk.prototype.getSize=function(t){return LT.resolve(this.size)},hk),ZS=(Yi(lk,GS=G),lk.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),LT.waitFor(n)},lk.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},lk.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},lk),tk=(ck.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),LT.resolve()},ck.prototype.getLastRemoteSnapshotVersion=function(t){return LT.resolve(this.lastRemoteSnapshotVersion)},ck.prototype.getHighestSequenceNumber=function(t){return LT.resolve(this.ws)},ck.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),LT.resolve(this.highestTargetId)},ck.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),LT.resolve()},ck.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new qI(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},ck.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,LT.resolve()},ck.prototype.updateTargetData=function(t,e){return this.te(e),LT.resolve()},ck.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),--this.targetCount,LT.resolve()},ck.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),LT.waitFor(o).next((function(){return i}))},ck.prototype.getTargetCount=function(t){return LT.resolve(this.targetCount)},ck.prototype.getTargetData=function(t,e){return e=this.ds.get(e)||null,LT.resolve(e)},ck.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),LT.resolve()},ck.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),LT.waitFor(i)},ck.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),LT.resolve()},ck.prototype.getMatchingKeysForTargetId=function(t,e){return e=this._s.es(e),LT.resolve(e)},ck.prototype.containsKey=function(t,e){return LT.resolve(this._s.containsKey(e))},ck),ek=(uk.prototype.start=function(){return Promise.resolve()},uk.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(uk.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),uk.prototype.setDatabaseDeletedListener=function(){},uk.prototype.setNetworkEnabled=function(){},uk.prototype.getIndexManager=function(){return this.Ut},uk.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new XS(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},uk.prototype.getTargetCache=function(){return this.qe},uk.prototype.getRemoteDocumentCache=function(){return this.Ue},uk.prototype.getBundleCache=function(){return this.Ke},uk.prototype.runTransaction=function(t,e,n){var r=this;db("MemoryPersistence","Starting transaction:",t);var i=new nk(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},uk.prototype.Is=function(t,e){return LT.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},uk),nk=(Yi(sk,WS=W),sk),rk=(ak.bs=function(t){return new ak(t)},Object.defineProperty(ak.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw vb()},enumerable:!1,configurable:!0}),ak.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),LT.resolve()},ak.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),LT.resolve()},ak.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),LT.resolve()},ak.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},ak.prototype.Es=function(){this.Rs=new Set},ak.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return LT.forEach(this.vs,(function(r){var i=Jb.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},ak.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},ak.prototype.ps=function(t){return 0},ak.prototype.Ps=function(t,e){var n=this;return LT.or([function(){return LT.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},ak),ik=(ok.prototype.isAuthenticated=function(){return null!=this.uid},ok.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},ok.prototype.isEqual=function(t){return t.uid===this.uid},ok);function ok(t){this.uid=t}function ak(t){this.persistence=t,this.As=new YS,this.Rs=null}function sk(t){var e=this;return(e=WS.call(this)||this).currentSequenceNumber=t,e}function uk(t,e){var n=this;this.gs={},this.Ne=new ob(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new tk(this),this.Ut=new TI,this.Ue=(t=this.Ut,new JS(t,(function(t){return n.referenceDelegate.ps(t)}))),this.R=new oI(e),this.Ke=new QS(this.R)}function ck(t){this.persistence=t,this.ds=new aS(bw,ww),this.lastRemoteSnapshotVersion=Sb.min(),this.highestTargetId=0,this.ws=0,this._s=new YS,this.targetCount=0,this.ys=qI.Jt()}function lk(t){var e=this;return(e=GS.call(this)||this).Ie=t,e}function hk(t,e){this.Ut=t,this.ls=e,this.docs=new sE(Jb.comparator),this.size=0}function fk(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new pE($S.Gn)}function dk(t,e){this.key=t,this.ns=e}function pk(){this.Wn=new pE($S.Gn),this.zn=new pE($S.Hn)}function gk(t){this.R=t,this.Qn=new Map,this.jn=new Map}function yk(t,e){return"firestore_clients_"+t+"_"+e}function vk(t,e,n){return n="firestore_mutations_"+t+"_"+n,e.isAuthenticated()&&(n+="_"+e.uid),n}function mk(t,e){return"firestore_targets_"+t+"_"+e}ik.UNAUTHENTICATED=new ik(null),ik.GOOGLE_CREDENTIALS=new ik("google-credentials-uid"),ik.FIRST_PARTY=new ik("first-party-uid");var bk,wk=(zk.Vs=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new cb(i.error.code,i.error.message)),o?new zk(t,e,i.state,r):(pb("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},zk.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},zk),_k=(Bk.Vs=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new cb(r.error.code,r.error.message)),i?new Bk(t,r.state,n):(pb("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},Bk.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Bk),Ek=(qk.Vs=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=TE,o=0;r&&o<n.activeTargetIds.length;++o)r=Xb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new qk(t,i):(pb("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},qk),Tk=(Vk.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Vk(e.clientId,e.onlineState):(pb("SharedClientState","Failed to parse online state: "+t),null)},Vk),Ik=(Uk.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Uk.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Uk.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},Uk),Sk=(jk.yt=function(t){return!(!t||!t.localStorage)},jk.prototype.start=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Ji(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(o=h.sent(),t=0,e=o;t<e.length;t++)(n=e[t])!==this.Ns&&(r=this.getItem(yk(this.persistenceKey,n)))&&(i=Ek.Vs(n,r))&&(this.ks=this.ks.insert(i.clientId,i));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),s=0,u=this.$s;s<u.length;s++)c=u[s],this.Fs(c);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},jk.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},jk.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},jk.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},jk.prototype.addPendingMutation=function(t){this.zs(t,"pending")},jk.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},jk.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem(mk(this.persistenceKey,t)))||(e=_k.Vs(t,e))&&(n=e.state)),this.Js.Ds(t),this.Qs(),n},jk.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},jk.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},jk.prototype.clearQueryState=function(t){this.removeItem(mk(this.persistenceKey,t))},jk.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},jk.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},jk.prototype.setOnlineState=function(t){this.Xs(t)},jk.prototype.notifyBundleLoaded=function(){this.Zs()},jk.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},jk.prototype.getItem=function(t){var e=this.storage.getItem(t);return db("SharedClientState","READ",t,e),e},jk.prototype.setItem=function(t,e){db("SharedClientState","SET",t,e),this.storage.setItem(t,e)},jk.prototype.removeItem=function(t){db("SharedClientState","REMOVE",t),this.storage.removeItem(t)},jk.prototype.Fs=function(t){var e=this,n=t;n.storageArea===this.storage&&(db("SharedClientState","EVENT",n.key,n.newValue),n.key!==this.Os?this.Se.enqueueRetryable((function(){return Xi(e,void 0,void 0,(function(){var t,e,r,i;return Ji(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(e=this.si(n.key,n.newValue)))return[2,this.ii(e)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(r=this.ri(n.key,n.newValue)))return[2,this.oi(r)]}else if(n.key===this.Us){if(null!==n.newValue&&(i=this.js(n.newValue)))return[2,this.Ws(i)]}else if(n.key===this.Ms)(i=function(t){var e=ob.o;if(null!=t)try{var n=JSON.parse(t);mb("number"==typeof n),e=n}catch(t){pb("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ob.o&&this.sequenceNumberHandler(i);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))})):pb("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(jk.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),jk.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},jk.prototype.zs=function(t,e,n){n=new wk(this.currentUser,t,e,n),t=vk(this.persistenceKey,this.currentUser,t),this.setItem(t,n.Ss())},jk.prototype.Hs=function(t){t=vk(this.persistenceKey,this.currentUser,t),this.removeItem(t)},jk.prototype.Xs=function(t){t={clientId:this.Ns,onlineState:t},this.storage.setItem(this.Us,JSON.stringify(t))},jk.prototype.Ys=function(t,e,n){var r=mk(this.persistenceKey,t);n=new _k(t,e,n),this.setItem(r,n.Ss())},jk.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},jk.prototype.ti=function(t){return(t=this.Ls.exec(t))?t[1]:null},jk.prototype.ni=function(t,e){return t=this.ti(t),Ek.Vs(t,e)},jk.prototype.si=function(t,e){var n=this.Bs.exec(t);return t=Number(n[1]),n=void 0!==n[2]?n[2]:null,wk.Vs(new ik(n),t,e)},jk.prototype.ri=function(t,e){return t=this.qs.exec(t),t=Number(t[1]),_k.Vs(t,e)},jk.prototype.js=function(t){return Tk.Vs(t)},jk.prototype.ii=function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(db("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},jk.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},jk.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},jk.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},jk.prototype.Gs=function(t){var e=TE;return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},jk),kk=(Fk.prototype.addPendingMutation=function(t){},Fk.prototype.updateMutationState=function(t,e,n){},Fk.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},Fk.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},Fk.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},Fk.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},Fk.prototype.clearQueryState=function(t){delete this.fi[t]},Fk.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},Fk.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},Fk.prototype.start=function(){return this.li=new Ik,Promise.resolve()},Fk.prototype.handleUserChange=function(t,e,n){},Fk.prototype.setOnlineState=function(t){},Fk.prototype.shutdown=function(){},Fk.prototype.writeSequenceNumber=function(t){},Fk.prototype.notifyBundleLoaded=function(){},Fk),Ck=(Mk.prototype.di=function(t){},Mk.prototype.shutdown=function(){},Mk),Nk=(Lk.prototype.di=function(t){this.gi.push(t)},Lk.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},Lk.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},Lk.prototype._i=function(){db("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},Lk.prototype.yi=function(){db("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},Lk.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Lk),Ak={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Rk=(Pk.prototype.Ii=function(t){this.Ai=t},Pk.prototype.Ri=function(t){this.bi=t},Pk.prototype.onMessage=function(t){this.vi=t},Pk.prototype.close=function(){this.Ti()},Pk.prototype.send=function(t){this.Ei(t)},Pk.prototype.Pi=function(){this.Ai()},Pk.prototype.Vi=function(t){this.bi(t)},Pk.prototype.Si=function(t){this.vi(t)},Pk),xk=(Ok.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);return db("RestConnection","Sending: ",i,n),e={},this.Fi(e,r),this.ki(t,i,e,n).then((function(t){return db("RestConnection","Received: ",t),t}),(function(e){throw gb("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},Ok.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},Ok.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},Ok.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ak[t]},Yi(Dk,bk=Ok),Dk.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new ib;a.listenOnce(Jm.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Xm.NO_ERROR:var e=a.getResponseJson();db("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Xm.TIMEOUT:db("Connection",'RPC "'+t+'" timed out'),o(new cb(ub.DEADLINE_EXCEEDED,"Request time out"));break;case Xm.HTTP_ERROR:var n,r,s=a.getStatus();db("Connection",'RPC "'+t+'" failed with status:',s,"response text:",a.getResponseText()),0<s?(n=a.getResponseJson().error)&&n.status&&n.message?(u=n.status.toLowerCase().replace(/_/g,"-"),r=0<=Object.values(ub).indexOf(u)?u:ub.UNKNOWN,o(new cb(r,n.message))):o(new cb(ub.UNKNOWN,"Server responded with status "+a.getStatus())):o(new cb(ub.UNAVAILABLE,"Connection failed."));break;default:vb()}}finally{db("Connection",'RPC "'+t+'" completed.')}var u}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},Dk.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Hm,i=$m();t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},this.useFetchStreams&&(t.xmlHttpFactory=new nb({})),this.Fi(t.initMessageHeaders,e),go()||mo()||0<=po().indexOf("Electron/")||0<=(e=po()).indexOf("MSIE ")||0<=e.indexOf("Trident/")||0<=po().indexOf("MSAppHost/")||vo()||(t.httpHeadersOverwriteParam="$httpHeaders"),db("Connection","Creating WebChannel: "+(n=n.join("")),t);var o=r.createWebChannel(n,t),a=!1,s=!1,u=new Rk({Ei:function(t){s?db("Connection","Not sending because WebChannel is closed:",t):(a||(db("Connection","Opening WebChannel transport."),o.open(),a=!0),db("Connection","WebChannel sending:",t),o.send(t))},Ti:function(){return o.close()}});return(t=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))})(o,rb.EventType.OPEN,(function(){s||db("Connection","WebChannel transport opened.")})),t(o,rb.EventType.CLOSE,(function(){s||(s=!0,db("Connection","WebChannel transport closed"),u.Vi())})),t(o,rb.EventType.ERROR,(function(t){s||(s=!0,gb("Connection","WebChannel transport errored:",t),u.Vi(new cb(ub.UNAVAILABLE,"The operation could not be completed")))})),t(o,rb.EventType.MESSAGE,(function(t){var e,n,r,i;s||(mb(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(db("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=J_[r];if(void 0!==t)return aE(t)}(),i=n.message,void 0===t&&(t=ub.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,u.Vi(new cb(t,i)),o.close()):(db("Connection","WebChannel received:",e),u.Si(e)))})),t(i,Zm.STAT_EVENT,(function(t){t.stat===tb?db("Connection","Detected buffering proxy"):t.stat===eb&&db("Connection","Detected no buffering proxy")})),setTimeout((function(){u.Pi()}),0),u},Dk);function Dk(t){var e=this;return(e=bk.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e.useFetchStreams=t.useFetchStreams,e}function Ok(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function Pk(t){this.Ei=t.Ei,this.Ti=t.Ti}function Lk(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}function Mk(){}function Fk(){this.li=new Ik,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function jk(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new sE(_b),this.started=!1,this.$s=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.Os=yk(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new Ik),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function Uk(){this.activeTargetIds=TE}function Vk(t,e){this.clientId=t,this.onlineState=e}function qk(t,e){this.clientId=t,this.activeTargetIds=e}function Bk(t,e,n){this.targetId=t,this.state=e,this.error=n}function zk(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function Kk(){return"undefined"!=typeof window?window:null}function Hk(){return"undefined"!=typeof document?document:null}function Wk(t){return new UE(t,!0)}function Gk(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Xi(o,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return yC(this)?(db("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return(e=t).Or.add(4),[4,cC(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,uC(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new eC(n,r)}var Qk,Yk,$k,Xk=(sC.prototype.reset=function(){this.qi=0},sC.prototype.Qi=function(){this.qi=this.Bi},sC.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);0<i&&db("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},sC.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},sC.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},sC.prototype.Wi=function(){return(Math.random()-.5)*this.qi},sC),Jk=(aC.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},aC.prototype.er=function(){return 2===this.state},aC.prototype.start=function(){3!==this.state?this.auth():this.nr()},aC.prototype.stop=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},aC.prototype.sr=function(){this.state=0,this.Zi.reset()},aC.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},aC.prototype.cr=function(t){this.ur(),this.stream.send(t)},aC.prototype.rr=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},aC.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},aC.prototype.close=function(t,e){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ub.RESOURCE_EXHAUSTED?(pb(e.toString()),pb("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===ub.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},aC.prototype.ar=function(){},aC.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new cb(ub.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},aC.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},aC.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Xi(t,void 0,void 0,(function(){return Ji(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},aC.prototype.dr=function(t){return db("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},aC.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(db("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},Yi(oC,$k=G=aC),oC.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},oC.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:vb(),r=e.targetChange.targetIds||[],i=(a=e.targetChange.resumeToken,t.I?(mb(void 0===a||"string"==typeof a),Fb.fromBase64String(a||"")):(mb(void 0===a||a instanceof Uint8Array),Fb.fromUint8Array(a||new Uint8Array))),o=(s=e.targetChange.cause)&&(u=void 0===(c=s).code?ub.UNKNOWN:aE(c.code),new cb(u,c.message||"")),a=new NE(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=WE(t,n.document.name),i=BE(n.document.updateTime);var s=new dw({mapValue:{fields:n.document.fields}}),u=(o=gw.newFoundDocument(r,i,s),n.targetIds||[]),c=n.removedTargetIds||[];a=new kE(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=WE(t,n.document),i=n.readTime?BE(n.readTime):Sb.min(),s=gw.newNoDocument(r,i),o=n.removedTargetIds||[],a=new kE([],o,s.key,s);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=WE(t,n.document),i=n.removedTargetIds||[],a=new kE([],i,r,null);else{if(!("filter"in e))return vb();e.filter,(e=e.filter).targetId,r=new X_(n=e.count||0),i=e.targetId,a=new CE(i,r)}return a}(this.R,t);return t=function(t){return"targetChange"in t?(t=t.targetChange).targetIds&&t.targetIds.length||!t.readTime?Sb.min():BE(t.readTime):Sb.min()}(t),this.listener._r(e,t)},oC.prototype.mr=function(t){var e,n,r,i,o={};o.database=YE(this.R),o.addTarget=(e=this.R,(r=_w(r=(n=t).target)?{documents:eT(e,r)}:{query:nT(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=qE(e,n.resumeToken):0<n.snapshotVersion.compareTo(Sb.min())&&(r.readTime=VE(e,n.snapshotVersion.toTimestamp())),r),this.R,i=t,(t=null==(t=function(){switch(i.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vb()}}())?null:{"goog-listen-tags":t})&&(o.labels=t),this.cr(o)},oC.prototype.yr=function(t){var e={};e.database=YE(this.R),e.removeTarget=t,this.cr(e)},oC),Zk=(Yi(iC,Yk=G),Object.defineProperty(iC.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),iC.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,Yk.prototype.start.call(this)},iC.prototype.ar=function(){this.gr&&this.Er([])},iC.prototype.wr=function(t){return this.Hi.Oi("Write",t)},iC.prototype.onMessage=function(t){if(mb(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(mb(void 0!==r),n.map((function(t){return n=r,(t=(e=t).updateTime?BE(e.updateTime):BE(n)).isEqual(Sb.min())&&(t=BE(n)),new P_(t,e.transformResults||[]);var e,n}))):[]),n=BE(t.commitTime);return this.listener.Tr(n,e)}var r;return mb(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},iC.prototype.Ar=function(){var t={};t.database=YE(this.R),this.cr(t)},iC.prototype.Er=function(t){var e=this;t={streamToken:this.lastStreamToken,writes:t.map((function(t){return ZE(e.R,t)}))},this.cr(t)},iC),tC=(Yi(rC,Qk=function(){}),rC.prototype.br=function(){if(this.Rr)throw new cb(ub.FAILED_PRECONDITION,"The client has already been terminated.")},rC.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ub.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new cb(ub.UNKNOWN,t.toString())}))},rC.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ub.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new cb(ub.UNKNOWN,t.toString())}))},rC.prototype.terminate=function(){this.Rr=!0},rC),eC=(nC.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},nC.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},nC.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},nC.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},nC.prototype.Cr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Vr?(pb(t),this.Vr=!1):db("OnlineStateTracker",t)},nC.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},nC);function nC(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function rC(t,e,n){var r=this;return(r=Qk.call(this)||this).credentials=t,r.Hi=e,r.R=n,r.Rr=!1,r}function iC(t,e,n,r,i){var o=this;return(o=Yk.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).R=r,o.gr=!1,o}function oC(t,e,n,r,i){var o=this;return(o=$k.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).R=r,o}function aC(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Xk(t,e)}function sC(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}function uC(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:if(!yC(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function cC(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function lC(t,e){t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),gC(t)?pC(t):SC(t).er()&&fC(t,e))}function hC(t,e){var n=t;t=SC(n),n.$r.delete(e),t.er()&&dC(n,e),0===n.$r.size&&(t.er()?t.ir():yC(n)&&n.Br.set("Unknown"))}function fC(t,e){t.qr.U(e.targetId),SC(t).mr(e)}function dC(t,e){t.qr.U(e),SC(t).yr(e)}function pC(t){t.qr=new RE({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),SC(t).start(),t.Br.Sr()}function gC(t){return yC(t)&&!SC(t).tr()&&0<t.$r.size}function yC(t){return 0===t.Or.size}function vC(t){t.qr=void 0}function mC(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof NE&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),db("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,bC(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof kE?t.qr.X(e):e instanceof CE?t.qr.rt(e):t.qr.et(e),n.isEqual(Sb.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,FS(t.localStore)];case 8:return i=o.sent(),0<=n.compareTo(i)?[4,(s=n,(u=(a=t).qr.ut(s)).targetChanges.forEach((function(t,e){var n;0<t.resumeToken.approximateByteSize()&&(n=a.$r.get(e))&&a.$r.set(e,n.withResumeToken(t.resumeToken,s))})),u.targetMismatches.forEach((function(t){var e=a.$r.get(t);e&&(a.$r.set(t,e.withResumeToken(Fb.EMPTY_BYTE_STRING,e.snapshotVersion)),dC(a,t),e=new iI(e.target,t,1,e.sequenceNumber),fC(a,e))})),a.remoteSyncer.applyRemoteEvent(u))]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return db("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,bC(t,i)];case 12:return o.sent(),[3,13];case 13:return[2]}var a,s,u}))}))}function bC(t,e,n){return Xi(this,void 0,void 0,(function(){var r=this;return Ji(this,(function(i){switch(i.label){case 0:if(!WT(e))throw e;return t.Or.add(1),[4,cC(t)];case 1:return i.sent(),t.Br.set("Offline"),n=n||function(){return FS(t.localStore)},t.asyncQueue.enqueueRetryable((function(){return Xi(r,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return db("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,uC(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function wC(t,e){return e().catch((function(n){return bC(t,n,e)}))}function _C(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i;return Ji(this,(function(o){switch(o.label){case 0:n=kC(e=t),r=0<e.kr.length?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!(yC(e)&&e.kr.length<10))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,(a=e.localStore,s=r,(u=a).persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===s&&(s=-1),u._n.getNextMutationBatchAfterBatchId(t,s)})))];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e),(t=kC(t)).er()&&t.pr&&t.Er(e.mutations)}(e,i),[3,6]);case 4:return i=o.sent(),[4,bC(e,i)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return EC(e)&&TC(e),[2]}var a,s,u}))}))}function EC(t){return yC(t)&&!kC(t).tr()&&0<t.kr.length}function TC(t){kC(t).start()}function IC(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return n=t,e?(n.Or.delete(2),[4,uC(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,cC(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function SC(t){var e,n,r,i=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){return t.$r.forEach((function(e,n){fC(t,e)})),[2]}))}))}.bind(null,t),Ri:function(t,e){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(n){return vC(t),gC(t)?(t.Br.Nr(e),pC(t)):t.Br.set("Unknown"),[2]}))}))}.bind(null,t),_r:mC.bind(null,t)},e.br(),new Jk(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return Xi(i,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),gC(t)?pC(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),vC(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function kC(t){var e,n,r,i=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){return kC(t).Ar(),[2]}))}))}.bind(null,t),Ri:function(t,e){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return e&&kC(t).pr?[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return oE(r=e.code)&&r!==ub.ABORTED?(n=t.kr.shift(),kC(t).sr(),[4,wC(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,_C(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return EC(t)&&TC(t),[2]}}))}))}.bind(null,t),Ir:function(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i;return Ji(this,(function(o){for(e=kC(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}.bind(null,t),Tr:function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=rI.from(r,e,n),[4,wC(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,_C(t)];case 2:return o.sent(),[2]}}))}))}.bind(null,t)},e.br(),new Zk(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return Xi(i,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,_C(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),0<t.kr.length&&(db("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var CC=(NC.createAndSchedule=function(t,e,n,r,i){return(i=new NC(t,e,Date.now()+n,r,i)).start(n),i},NC.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},NC.prototype.skipDelay=function(){return this.handleDelayElapsed()},NC.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cb(ub.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},NC.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},NC.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},NC);function NC(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new PT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}function AC(t,e){if(pb("AsyncQueue",e+": "+t),WT(t))return new cb(ub.UNAVAILABLE,e+": "+t);throw t}function RC(){this.queries=new aS(l_,c_),this.onlineState="Unknown",this.Gr=new Set}var xC=(FC.emptySet=function(t){return new FC(t.comparator)},FC.prototype.has=function(t){return null!=this.keyedMap.get(t)},FC.prototype.get=function(t){return this.keyedMap.get(t)},FC.prototype.first=function(){return this.sortedSet.minKey()},FC.prototype.last=function(){return this.sortedSet.maxKey()},FC.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},FC.prototype.indexOf=function(t){return(t=this.keyedMap.get(t))?this.sortedSet.indexOf(t):-1},Object.defineProperty(FC.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),FC.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},FC.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},FC.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},FC.prototype.isEqual=function(t){if(!(t instanceof FC))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},FC.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},FC.prototype.copy=function(t,e){var n=new FC;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},FC),DC=(MC.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);!n||0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):vb()},MC.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},MC),OC=(LC.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:0,doc:t})})),new LC(t,e,xC.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(LC.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),LC.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&c_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},LC),PC=function(){this.Wr=void 0,this.listeners=[]};function LC(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function MC(){this.Qr=new sE(Jb.comparator)}function FC(t){this.comparator=t?function(e,n){return t(e,n)||Jb.comparator(e.key,n.key)}:function(t,e){return Jb.comparator(t.key,e.key)},this.keyedMap=bE,this.sortedSet=new sE(this.comparator)}function jC(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:if(n=t,r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new PC),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return a=AC(a=s.sent(),"Initialization of query '"+h_(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&VC(n),[2]}}))}))}function UC(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){return n=t,r=e.query,i=!1,(o=n.queries.get(r))&&0<=(a=o.listeners.indexOf(e))&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function VC(t){t.Gr.forEach((function(t){t.next()}))}var qC=(QC.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new OC(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},QC.prototype.onError=function(t){this.Jr.error(t)},QC.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},QC.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},QC.prototype.Zr=function(t){if(0<t.docChanges.length)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},QC.prototype.no=function(t){t=OC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},QC),BC=(GC.prototype.io=function(){return"metadata"in this.payload},GC),zC=(WC.prototype.qn=function(t){return WE(this.R,t)},WC.prototype.Un=function(t){return t.metadata.exists?JE(this.R,t.document,!1):gw.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},WC.prototype.Kn=BE,WC),KC=(HC.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},HC.prototype.co=function(t){for(var e=new Map,n=new zC(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||EE()).add(a);e.set(c,l)}}return e},HC.prototype.complete=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return Ji(this,(function(p){switch(p.label){case 0:for(i=t,o=EE(),a=yE,s=wE,u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,VS(i,s_(t_(Ob.fromString("__bundle__/docs/"+r))))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return US(t,f,a,Sb.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}(this.localStore,new zC(this.R),this.documents,this.ro.id)];case 1:t=i.sent(),e=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(r=r[n],[4,function(t,e,n){return void 0===n&&(n=EE()),Xi(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:return[4,VS(t,s_(mI(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=t).persistence.runTransaction("Save named query","readwrite",(function(t){var o=BE(e.readTime);return 0<=r.snapshotVersion.compareTo(o)?i.Ke.saveNamedQuery(t,e):(o=r.withResumeToken(Fb.EMPTY_BYTE_STRING,o),i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)})))}))]}}))}))}(this.localStore,r,e.get(r.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new SS(Object.assign({},this.progress),t))]}}))}))},HC);function HC(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=YC(t)}function WC(t){this.R=t}function GC(t,e){this.payload=t,this.byteLength=e}function QC(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function YC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var $C=function(t){this.key=t},XC=function(t){this.key=t},JC=(Object.defineProperty(rN.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),rN.prototype._o=function(t,e){var n=this,r=e?e.mo:new DC,i=(e||this).fo,o=(e||this).mutatedKeys,a=i,s=!1,u=e_(this.query)&&i.size===this.query.limit?i.last():null,c=n_(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=f_(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations);e=!1,l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),e=!0):n.yo(l,h)||(r.track({type:2,doc:h}),e=!0,(u&&0<n.lo(h,u)||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),e=!0):l&&!h&&(r.track({type:1,doc:l}),e=!0,(u||c)&&(s=!0)),e&&(o=h?(a=a.add(h),d?o.add(t):o.delete(t)):(a=a.delete(t),o.delete(t)))})),e_(this.query)||n_(this.query))for(;a.size>this.query.limit;){var l=e_(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},rN.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},rN.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return i=t.type,o=e.type,n(i)-n(o)||r.lo(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vb()}}var i,o})),this.po(n);var a=e?this.Eo():[];return e=(n=0===this.ho.size&&this.current?1:0)!==this.ao,this.ao=n,0!==o.length||e?{snapshot:new OC(this.query,t.fo,i,o,t.mutatedKeys,0==n,e,!1),To:a}:{To:a}},rN.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new DC,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},rN.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},rN.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},rN.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=EE(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new XC(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new $C(t))})),n},rN.prototype.Ao=function(t){return this.uo=t.Bn,this.ho=EE(),t=this._o(t.documents),this.applyChanges(t,!0)},rN.prototype.Ro=function(){return OC.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},rN),ZC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},tN=function(t){this.key=t,this.bo=!1},eN=(Object.defineProperty(nN.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),nN);function nN(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new aS(l_,c_),this.Vo=new Map,this.So=new Set,this.Do=new sE(Jb.comparator),this.Co=new Map,this.No=new YS,this.xo={},this.Fo=new Map,this.ko=qI.Yt(),this.onlineState="Unknown",this.$o=void 0}function rN(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=EE(),this.mutatedKeys=EE(),this.lo=d_(t),this.fo=new xC(this.lo)}function iN(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o;return Ji(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,BS(t.localStore,e.query,!1).then((function(t){return t=t.documents,e.view._o(t,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(pN(t,e.targetId,o.To),o.snapshot)]}}))}))}(t,e,n,r)},[4,BS(t.localStore,e,!0)];case 1:return o=s.sent(),a=new JC(e,o.Bn),i=a._o(o.documents),o=SE.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),o=a.applyChanges(i,t.isPrimaryClient,o),pN(t,n,o.To),a=new ZC(e,n,a),[2,(t.Po.set(e,a),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),o.snapshot)]}}))}))}function oN(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:i=TN(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,(c=i.localStore,l=e,f=c,d=Ib.now(),p=l.reduce((function(t,e){return t.add(e.key)}),EE()),f.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return f.Mn.pn(t,p).next((function(e){h=e;for(var n=[],r=0,i=l;r<i.length;r++){var o=i[r],a=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field);null!=(a=v_(o.transform,a||null))&&(n=null==n?dw.empty():n).set(o.field,a)}return n||null}(o,h.get(o.key));null!=a&&n.push(new H_(o.key,a,function t(e){var n=[];return Ab(e.fields,(function(e,r){var i=new Lb([e]);if(hw(r))if(0===(r=t(r.mapValue).fields).length)n.push(i);else for(var o=0,a=r;o<a.length;o++){var s=a[o];n.push(i.child(s))}else n.push(i)})),new Mb(n)}(a.value.mapValue),M_.exists(!0)))}return f._n.addMutationBatch(t,d,n,l)}))})).then((function(t){return t.applyToLocalDocumentSet(h),{batchId:t.batchId,changes:h}})))];case 2:return r=o.sent(),i.sharedClientState.addPendingMutation(r.batchId),a=i,s=r.batchId,u=n,c=(c=(c=a.xo[a.currentUser.toKey()])||new sE(_b)).insert(s,u),a.xo[a.currentUser.toKey()]=c,[4,yN(i,r.changes)];case 3:return o.sent(),[4,_C(i.remoteStore)];case 4:return o.sent(),[3,6];case 5:return i=AC(i=o.sent(),"Failed to persist write"),n.reject(i),[3,6];case 6:return[2]}var a,s,u,c,l,h,f,d,p}))}))}function aN(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:n=t,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,jS(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){(e=n.Co.get(e))&&(mb(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.bo=!0:0<t.modifiedDocuments.size?mb(e.bo):0<t.removedDocuments.size&&(mb(e.bo),e.bo=!1))})),[4,yN(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,QI(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function sN(t,e,n){var r;((t=t).isPrimaryClient&&0===n||!t.isPrimaryClient&&1===n)&&(r=[],t.Po.forEach((function(t,n){(n=n.view.zr(e)).snapshot&&r.push(n.snapshot)})),function(t,e){t.onlineState=e;var n=!1;t.queries.forEach((function(t,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].zr(e)&&(n=!0)})),n&&VC(t)}(t.eventManager,e),r.length&&t.vo._r(r),t.onlineState=e,t.isPrimaryClient&&t.sharedClientState.setOnlineState(e))}function uN(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:r=t,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=e,(u=a).persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,s).next((function(n){return mb(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),hN(r,e,n),lN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,yN(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,QI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function cN(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:yC((n=t).remoteStore)||db("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(a=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return a._n.getHighestUnacknowledgedBatchId(t)}))];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return i=AC(i=o.sent(),"Initialization of waitForPendingWrites() operation failed"),e.reject(i),[3,4];case 4:return[2]}var a}))}))}function lN(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function hN(t,e,n){var r=t,i=r.xo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i)}function fN(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||dN(t,e)}))}function dN(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(hC(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),gN(t))}function pN(t,e,n){for(var r,i,o,a=0,s=n;a<s.length;a++){var u=s[a];u instanceof $C?(t.No.addReference(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(db("SyncEngine","New document in limbo: "+o),r.So.add(i),gN(r))):u instanceof XC?(db("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||dN(t,u.key)):vb()}}function gN(t){for(;0<t.So.size&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Jb(Ob.fromString(e));e=t.ko.next(),t.Co.set(e,new tN(n)),t.Do=t.Do.insert(n,e),lC(t.remoteStore,new iI(s_(t_(n.path)),e,2,ob.o))}}function yN(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return i=[],o=[],a=[],(r=t).Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){t&&(r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t),t=CS.Pn(s.targetId,t),o.push(t))})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Ji(this,(function(c){switch(c.label){case 0:n=t,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return LT.forEach(e,(function(e){return LT.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return LT.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return c.sent(),[3,4];case 3:if(!WT(r=c.sent()))throw r;return db("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=o[i],a=u.targetId,u.fromCache||(s=n.Fn.get(a),u=s.snapshotVersion,u=s.withLastLimboFreeSnapshotVersion(u),n.Fn=n.Fn.insert(a,u));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function vN(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return(n=t).currentUser.isEqual(e)?[3,3]:(db("SyncEngine","User change. New user:",e.toKey()),[4,LS(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new cb(ub.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,yN(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function mN(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,(s=(i=t).localStore,u=e,l=(c=s)._n,c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):LT.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,_C(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(hN(i,e,r||null),lN(i,e),i.localStore._n.Gt(e)):vb(),a.label=4;case 4:return[4,yN(i,o)];case 5:return a.sent(),[3,7];case 6:db("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}var s,u,c,l}))}))}function bN(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return Ji(this,(function(l){switch(l.label){case 0:return EN(n=t),TN(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,wN(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,IC(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],lC(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return fN(n,e),qS(n.localStore,e,!0)})),hC(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,wN(n,u)];case 5:return l.sent(),(h=n).Co.forEach((function(t,e){hC(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new sE(Jb.comparator),n.$o=!1,[4,IC(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function wN(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d;return Ji(this,(function(p){switch(p.label){case 0:n=t,r=[],i=[],o=0,a=e,p.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,VS(n.localStore,s_(c[0]))]:[3,7]):[3,13];case 2:u=p.sent(),l=0,h=c,p.label=3;case 3:return l<h.length?(f=h[l],f=n.Po.get(f),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,BS((n=t).localStore,e.query,!0)];case 1:return r=i.sent(),r=e.view.Ao(r),[2,(n.isPrimaryClient&&pN(n,e.targetId,r.To),r)]}}))}))}(n,f)]):[3,6];case 4:(f=p.sent()).snapshot&&i.push(f.snapshot),p.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,zS(n.localStore,s)];case 8:return d=p.sent(),[4,VS(n.localStore,d)];case 9:return u=p.sent(),[4,iN(n,_N(d),s,!1)];case 10:p.sent(),p.label=11;case 11:r.push(u),p.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function _N(t){return Zw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function EN(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=aN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.Co.get(e))&&t.bo)return EE().add(t.key);var r=EE();if(!(e=n.Vo.get(e)))return r;for(var i=0,o=e;i<o.length;i++){var a=o[i];a=n.Po.get(a),r=r.unionWith(a.view.wo)}return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return(r=t).sharedClientState.updateQueryState(e,"rejected",n),a=r.Co.get(e),(i=a&&a.key)?(o=(o=new sE(Jb.comparator)).insert(i,gw.newNoDocument(i,Sb.min())),a=EE().add(i),a=new IE(Sb.min(),new Map,new pE(_b),o,a),[4,aN(r,a)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(i),r.Co.delete(e),gN(r),[3,4];case 2:return[4,qS(r.localStore,e,!1).then((function(){return fN(r,e,n)})).catch(QI)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}.bind(null,t),t.vo._r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query;if(s=n.queries.get(s)){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&VC(n)}.bind(null,t.eventManager),t.vo.Mo=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function TN(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:n=t,r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,MS(n.localStore,e)];case 2:return i=o.sent(),hN(n,r,null),lN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,yN(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,QI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uN.bind(null,t),t}function IN(t,e,n){var r=t;(function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return u.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=u.sent(),[4,(h=t.localStore,d=h,p=BE((f=r).createTime),d.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return d.Ke.getBundleMetadata(t,f.id)})).then((function(t){return!!t&&0<=t.createTime.compareTo(p)})))];case 2:return u.sent()?[4,e.close()]:[3,4];case 3:return[2,(u.sent(),void n._completeWith({taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}))];case 4:return n._updateProgress(YC(r)),i=new KC(r,t.localStore,e.R),[4,e.Lo()];case 5:o=u.sent(),u.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=u.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=u.sent(),u.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=u.sent(),[4,yN(t,s.wn,void 0)];case 12:return u.sent(),[4,(h=t.localStore,c=r,(l=h).persistence.runTransaction("Save bundle","readwrite",(function(t){return l.Ke.saveBundleMetadata(t,c)})))];case 13:return u.sent(),n._completeWith(s.progress),[3,15];case 14:return gb("SyncEngine","Loading bundle failed with "+(s=u.sent())),n._failWith(s),[3,15];case 15:return[2]}var c,l,h,f,d,p}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var SN,kN,CN=(PN.prototype.initialize=function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return this.R=Wk(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},PN.prototype.Uo=function(t){return null},PN.prototype.Ko=function(t){return PS(this.persistence,new NS,t.initialUser,this.R)},PN.prototype.qo=function(t){return new ek(rk.bs,this.R)},PN.prototype.Bo=function(t){return new kk},PN.prototype.terminate=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},PN),NN=(Yi(ON,kN=CN),ON.prototype.initialize=function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return[4,kN.prototype.initialize.call(this,t)];case 1:return e.sent(),[4,HS(this.localStore)];case 2:return e.sent(),[4,this.Qo.initialize(this,t)];case 3:return e.sent(),[4,TN(this.Qo.syncEngine)];case 4:return e.sent(),[4,_C(this.Qo.remoteStore)];case 5:return e.sent(),[2]}}))}))},ON.prototype.Ko=function(t){return PS(this.persistence,new NS,t.initialUser,this.R)},ON.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new XI(e,t.asyncQueue)},ON.prototype.qo=function(t){var e=IS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xI.withCacheSize(this.cacheSizeBytes):xI.DEFAULT;return new wS(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Kk(),Hk(),this.R,this.sharedClientState,!!this.forceOwnership)},ON.prototype.Bo=function(t){return new kk},ON),AN=(Yi(DN,SN=NN),DN.prototype.initialize=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return[4,SN.prototype.initialize.call(this,t)];case 1:return r.sent(),e=this.Qo.syncEngine,this.sharedClientState instanceof Sk?(this.sharedClientState.syncEngine={ui:mN.bind(null,e),ai:function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return(i=t).$o?(db("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,KS(i.localStore)];case 3:return o=s.sent(),a=IE.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,yN(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,qS(i.localStore,e,!0)];case 6:return s.sent(),fN(i,e,r),[3,8];case 7:vb(),s.label=8;case 8:return[2]}}))}))}.bind(null,e),hi:function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return Ji(this,(function(h){switch(h.label){case 0:if(!(r=EN(t)).$o)return[3,10];i=0,o=e,h.label=1;case 1:return i<o.length?(o=o[i],r.Vo.has(o)?(db("SyncEngine","Adding an already active target "+o),[3,5]):[4,zS(r.localStore,o)]):[3,6];case 2:return a=h.sent(),[4,VS(r.localStore,a)];case 3:return s=h.sent(),[4,iN(r,_N(a),s.targetId,!1)];case 4:h.sent(),lC(r.remoteStore,s),h.label=5;case 5:return i++,[3,1];case 6:u=function(t){return Ji(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,qS(r.localStore,t,!1).then((function(){hC(r.remoteStore,t),fN(r,t)})).catch(QI)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=0,l=n,h.label=7;case 7:return c<l.length?(l=l[c],[5,u(l)]):[3,10];case 8:h.sent(),h.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))}.bind(null,e),fn:function(t){return t.localStore.persistence.fn()}.bind(null,e),ci:function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){return[2,KS((e=t).localStore).then((function(t){return yN(e,t)}))]}))}))}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[4,this.persistence.He((function(t){return Xi(n,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return[4,bN(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return r.sent(),[2]}}))}))},DN.prototype.Bo=function(t){var e=Kk();if(!Sk.yt(e))throw new cb(ub.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=IS(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Sk(e,t.asyncQueue,n,t.clientId,t.initialUser)},DN),RN=(xN.prototype.initialize=function(t,e){return Xi(this,void 0,void 0,(function(){var n=this;return Ji(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return sN(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=vN.bind(null,this.syncEngine),[4,IC(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},xN.prototype.createEventManager=function(t){return new RC},xN.prototype.createDatastore=function(t){var e=Wk(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new xk(n));return t=t.credentials,new tC(t,n,e)},xN.prototype.createRemoteStore=function(t){var e=this;return new Gk(this.localStore,this.datastore,t.asyncQueue,(function(t){return sN(e.syncEngine,t,0)}),t=new(Nk.yt()?Nk:Ck))},xN.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){return o=new eN(t,e,n,r,i,o),a&&(o.$o=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},xN.prototype.terminate=function(){return function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=t,db("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,cC(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},xN);function xN(){}function DN(t,e){var n=this;return(n=SN.call(this,t,e,!1)||this).Qo=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function ON(t,e,n){var r=this;return(r=kN.call(this)||this).Qo=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function PN(){this.synchronizeTabs=!1}function LN(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Xi(this,void 0,void 0,(function(){var r;return Ji(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var MN=(HN.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},HN.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},HN.prototype.Wo=function(){this.muted=!0},HN.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},HN),FN=(KN.prototype.close=function(){return this.Go.cancel()},KN.prototype.getMetadata=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){return[2,this.metadata.promise]}))}))},KN.prototype.Lo=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},KN.prototype.Ho=function(){return Xi(this,void 0,void 0,(function(){var t,e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(n=this.zo.decode(t),e=Number(n),isNaN(e)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(e)]);case 2:return n=r.sent(),[2,new BC(JSON.parse(n),t.length+e)]}}))}))},KN.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},KN.prototype.Jo=function(){return Xi(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},KN.prototype.Xo=function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},KN.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},KN.prototype.tc=function(){return Xi(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},KN),jN=(zN.prototype.lookup=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new cb(ub.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return r=YE((n=t).R)+"/documents",i={documents:e.map((function(t){return HE(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return i=s.sent(),o=new Map,i.forEach((function(t){var e;e=n.R,t="found"in(t=t)?function(t,e){mb(!!e.found),e.found.name,e.found.updateTime;var n=WE(t,e.found.name);return t=BE(e.found.updateTime),e=new dw({mapValue:{fields:e.found.fields}}),gw.newFoundDocument(n,t,e)}(e,t):"missing"in t?function(t,e){return mb(!!e.missing),mb(!!e.readTime),t=WE(t,e.missing),e=BE(e.readTime),gw.newNoDocument(t,e)}(e,t):vb(),o.set(t.key.toString(),t)})),a=[],[2,(e.forEach((function(t){mb(!!(t=o.get(t.toString()))),a.push(t)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},zN.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},zN.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},zN.prototype.delete=function(t){this.write(new eE(t,this.precondition(t))),this.writtenDocs.add(t.toString())},zN.prototype.commit=function(){return Xi(this,void 0,void 0,(function(){var t,e=this;return Ji(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){n=Jb.fromPath(n),e.mutations.push(new nE(n,e.precondition(n)))})),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return r=YE((n=t).R)+"/documents",i={writes:e.map((function(t){return ZE(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},zN.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw vb();e=Sb.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new cb(ub.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},zN.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?M_.updateTime(e):M_.none()},zN.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return M_.exists(!0);if(e.isEqual(Sb.min()))throw new cb(ub.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return M_.updateTime(e)},zN.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},zN.prototype.ensureCommitNotCalled=function(){},zN),UN=(BN.prototype.run=function(){--this.ec,this.nc()},BN.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Xi(t,void 0,void 0,(function(){var t,e,n=this;return Ji(this,(function(r){return t=new jN(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},BN.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Yb(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},BN.prototype.ic=function(t){var e=this;0<this.ec&&this.rc(t)?(--this.ec,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},BN.prototype.rc=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!oE(t))},BN),VN=(qN.prototype.getConfiguration=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},qN.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},qN.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new cb(ub.FAILED_PRECONDITION,"The client has already been terminated.")},qN.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new PT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Xi(t,void 0,void 0,(function(){var t;return Ji(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=AC(t=n.sent(),"Failed to shutdown persistence"),e.reject(t),[3,6];case 6:return[2]}}))}))})),e.promise},qN);function qN(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=ik.UNAUTHENTICATED,this.clientId=bb.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Xi(r,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return db("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}function BN(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Xk(this.asyncQueue,"transaction_retry")}function zN(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function KN(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new PT,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}function HN(t){this.observer=t,this.muted=!1}function WN(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i=this;return Ji(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),db("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Xi(i,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,LS(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function GN(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,QN(t)];case 1:return n=i.sent(),db("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return(n=t).asyncQueue.verifyOperationInProgress(),db("RemoteStore","RemoteStore received new credentials"),r=yC(n),n.Or.add(3),[4,cC(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,uC(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function QN(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(db("FirestoreClient","Using default OfflineComponentProvider"),[4,WN(t,new CN)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function YN(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(db("FirestoreClient","Using default OnlineComponentProvider"),[4,GN(t,new RN)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function $N(t){return QN(t).then((function(t){return t.persistence}))}function XN(t){return QN(t).then((function(t){return t.localStore}))}function JN(t){return YN(t).then((function(t){return t.remoteStore}))}function ZN(t){return YN(t).then((function(t){return t.syncEngine}))}function tA(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,YN(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return n=EN(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,VS(n.localStore,s_(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.targetId,[4,iN(n,e,r,"current"===a)];case 3:i=s.sent(),n.isPrimaryClient&&lC(n.remoteStore,o),s.label=4;case 4:return[2,i]}}))}))}.bind(null,e.syncEngine),n.onUnlisten=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return r=(n=t).Po.get(e),1<(i=n.Vo.get(r.targetId)).length?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!c_(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,qS(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),hC(n.remoteStore,r.targetId),fN(n,r.targetId)})).catch(QI)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return fN(n,r.targetId),[4,qS(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}.bind(null,e.syncEngine),n)]}}))}))}function eA(t,e,n){var r=this;void 0===n&&(n={});var i=new PT;return t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var r;return Ji(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new MN({next:function(o){e.enqueueAndForget((function(){return UC(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new cb(ub.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new cb(ub.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new qC(t_(n.path),o,{includeMetadataChanges:!0,so:!0});return jC(t,a)},[4,tA(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function nA(t,e,n){var r=this;void 0===n&&(n={});var i=new PT;return t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var r;return Ji(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new MN({next:function(n){e.enqueueAndForget((function(){return UC(t,a)})),n.fromCache&&"server"===r.source?i.reject(new cb(ub.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new qC(n,o,{includeMetadataChanges:!0,so:!0});return jC(t,a)},[4,tA(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function rA(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var iA=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},oA=(Object.defineProperty(vA.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),vA.prototype.isEqual=function(t){return t instanceof vA&&t.projectId===this.projectId&&t.database===this.database},vA),aA=new Map,sA=(yA.prototype.getToken=function(){return Promise.resolve(null)},yA.prototype.invalidateToken=function(){},yA.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(ik.UNAUTHENTICATED)}))},yA.prototype.removeChangeListener=function(){this.changeListener=null},yA),uA=(gA.prototype.getToken=function(){return Promise.resolve(this.token)},gA.prototype.invalidateToken=function(){},gA.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},gA.prototype.removeChangeListener=function(){this.changeListener=null},gA),cA=(pA.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(db("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(mb("string"==typeof n.accessToken),new rA(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},pA.prototype.invalidateToken=function(){this.forceRefresh=!0},pA.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Xi(n,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},pA.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},pA.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return mb(null===t||"string"==typeof t),new ik(t)},pA),lA=(Object.defineProperty(dA.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),dA),hA=(fA.prototype.getToken=function(){return Promise.resolve(new lA(this.hc,this.lc,this.fc))},fA.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(ik.FIRST_PARTY)}))},fA.prototype.removeChangeListener=function(){},fA.prototype.invalidateToken=function(){},fA);function fA(t,e,n){this.hc=t,this.lc=e,this.fc=n}function dA(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=ik.FIRST_PARTY}function pA(t){var e=this;function n(t){db("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)}this.currentUser=ik.UNAUTHENTICATED,this.oc=new PT,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))},t.onInit(n),setTimeout((function(){var r;e.auth||((r=t.getImmediate({optional:!0}))?n(r):(db("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve()))}),0)}function gA(t){this.token=t,this.changeListener=null}function yA(){this.changeListener=null}function vA(t,e){this.projectId=t,this.database=e||"(default)"}function mA(t,e,n){if(!n)throw new cb(ub.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function bA(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new cb(ub.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function wA(t,e,n,r){if(!0===e&&!0===r)throw new cb(ub.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function _A(t){if(!Jb.isDocumentKey(t))throw new cb(ub.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function EA(t){if(Jb.isDocumentKey(t))throw new cb(ub.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function TA(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":vb();if(t instanceof Array)return"an array";var e=function(){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}();return e?"a custom "+e+" object":"an object"}function IA(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new cb(ub.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=TA(t),new cb(ub.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function SA(t,e){if(e<=0)throw new cb(ub.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var kA,CA=(MA.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},MA),NA=(Object.defineProperty(LA.prototype,"app",{get:function(){if(!this._app)throw new cb(ub.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(LA.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(LA.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),LA.prototype._setSettings=function(t){if(this._settingsFrozen)throw new cb(ub.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CA(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new sA;switch(t.type){case"gapi":var e=t.client;return mb(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new hA(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new cb(ub.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},LA.prototype._getSettings=function(){return this._settings},LA.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},LA.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},LA.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},LA.prototype._terminate=function(){return(t=aA.get(this))&&(db("ComponentProvider","Removing Datastore"),aA.delete(this),t.terminate()),Promise.resolve();var t},LA),AA=(Object.defineProperty(PA.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(PA.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(PA.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(PA.prototype,"parent",{get:function(){return new xA(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),PA.prototype.withConverter=function(t){return new PA(this.firestore,t,this._key)},PA),RA=(OA.prototype.withConverter=function(t){return new OA(this.firestore,t,this._query)},OA),xA=(Yi(DA,kA=RA),Object.defineProperty(DA.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(DA.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(DA.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new AA(this.firestore,null,new Jb(t))},enumerable:!1,configurable:!0}),DA.prototype.withConverter=function(t){return new DA(this.firestore,t,this._path)},DA);function DA(t,e,n){var r=this;return(r=kA.call(this,t,e,t_(n))||this)._path=n,r.type="collection",r}function OA(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}function PA(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}function LA(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CA({}),this._settingsFrozen=!1,t instanceof oA?(this._databaseId=t,this._credentials=new sA):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new cb(ub.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oA(t.options.projectId)}(t),this._credentials=new cA(e))}function MA(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new cb(ub.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new cb(ub.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,wA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function FA(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ea(t),mA("collection","path",e),t instanceof NA)return EA(n=Ob.fromString.apply(Ob,eo([e],r))),new xA(t,null,n);if(!(t instanceof AA||t instanceof xA))throw new cb(ub.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return EA(n=Ob.fromString.apply(Ob,eo([t.path],r)).child(Ob.fromString(e))),new xA(t.firestore,null,n)}function jA(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=ea(t),mA("doc","path",e=1===arguments.length?bb.u():e),t instanceof NA)return _A(n=Ob.fromString.apply(Ob,eo([e],r))),new AA(t,null,new Jb(n));if(!(t instanceof AA||t instanceof xA))throw new cb(ub.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _A(n=t._path.child(Ob.fromString.apply(Ob,eo([e],r)))),new AA(t.firestore,t instanceof xA?t.converter:null,new Jb(n))}function UA(t,e){return t=ea(t),e=ea(e),(t instanceof AA||t instanceof xA)&&(e instanceof AA||e instanceof xA)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function VA(t,e){return t=ea(t),e=ea(e),t instanceof RA&&e instanceof RA&&t.firestore===e.firestore&&c_(t._query,e._query)&&t.converter===e.converter}var qA=(Object.defineProperty(BA.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),BA.prototype.enqueueAndForget=function(t){this.enqueue(t)},BA.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},BA.prototype.enterRestrictedMode=function(t){this._c||(this._c=!0,this.Ec=t||!1,(t=Hk())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic))},BA.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new PT;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},BA.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},BA.prototype.bc=function(){return Xi(this,void 0,void 0,(function(){var t,e=this;return Ji(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!WT(t=n.sent()))throw t;return db("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:0<this.wc.length&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},BA.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,pb("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",r=n.stack?n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack:r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n},BA.prototype.enqueueAfterDelay=function(t,e,n){var r=this;return this.Ac(),-1<this.Tc.indexOf(t)&&(e=0),n=CC.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)})),this.mc.push(n),n},BA.prototype.Ac=function(){this.yc&&vb()},BA.prototype.verifyOperationInProgress=function(){},BA.prototype.Pc=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},BA.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},BA.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},BA.prototype.Dc=function(t){this.Tc.push(t)},BA.prototype.vc=function(t){t=this.mc.indexOf(t),this.mc.splice(t,1)},BA);function BA(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Xk(this,"async_queue_retry"),this.Ic=function(){var e=Hk();e&&db("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Hk();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}function zA(t){return function(){if("object"==typeof t&&null!==t)for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}}()}var KA,HA=(QA.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},QA.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},QA.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},QA.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},QA.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},QA.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},QA),WA=(Yi(GA,KA=NA),GA.prototype._terminate=function(){return this._firestoreClient||$A(this),this._firestoreClient.terminate()},GA);function GA(t,e){var n=this;return(n=KA.call(this,t,e)||this).type="firestore",n._queue=new qA,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function QA(){this._progressObserver={},this._taskCompletionResolver=new PT,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function YA(t){return t._firestoreClient||$A(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $A(t){var e,n,r,i=t._freezeSettings();e=t._databaseId,n=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",r=t._persistenceKey,i=new iA(e,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams),t._firestoreClient=new VN(t._credentials,t._queue,i)}function XA(t,e,n){var r=this,i=new PT;return t.asyncQueue.enqueue((function(){return Xi(r,void 0,void 0,(function(){var r;return Ji(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,WN(t,n)];case 1:return o.sent(),[4,GN(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(r=o.sent()).name?r.code===ub.FAILED_PRECONDITION||r.code===ub.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function JA(t){if(t._initialized||t._terminated)throw new cb(ub.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ZA=(lR.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},lR),tR=(cR.fromBase64String=function(t){try{return new cR(Fb.fromBase64String(t))}catch(t){throw new cb(ub.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},cR.fromUint8Array=function(t){return new cR(Fb.fromUint8Array(t))},cR.prototype.toBase64=function(){return this._byteString.toBase64()},cR.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},cR.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},cR.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},cR),eR=function(t){this._methodName=t},nR=(Object.defineProperty(uR.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(uR.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),uR.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},uR.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},uR.prototype._compareTo=function(t){return _b(this._lat,t._lat)||_b(this._long,t._long)},uR),rR=/^__.*__$/,iR=(sR.prototype.toMutation=function(t,e){return null!==this.fieldMask?new H_(t,this.data,this.fieldMask,e,this.fieldTransforms):new K_(t,this.data,e,this.fieldTransforms)},sR),oR=(aR.prototype.toMutation=function(t,e){return new H_(t,this.data,this.fieldMask,e,this.fieldTransforms)},aR);function aR(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function sR(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function uR(t,e){if(!isFinite(t)||t<-90||90<t)throw new cb(ub.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new cb(ub.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function cR(t){this._byteString=t}function lR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new cb(ub.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lb(t)}function hR(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw vb()}}var fR=(Object.defineProperty(gR.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(gR.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),gR.prototype.xc=function(t){return new gR(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},gR.prototype.Fc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.xc({path:e,kc:!1})).$c(t),e},gR.prototype.Oc=function(t){var e;return t=null===(e=this.path)||void 0===e?void 0:e.child(t),(t=this.xc({path:t,kc:!1})).Cc(),t},gR.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},gR.prototype.Lc=function(t){return KR(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},gR.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},gR.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},gR.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(hR(this.Nc)&&rR.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},gR),dR=(pR.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new fR({Nc:t,methodName:e,qc:n,path:Lb.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},pR);function pR(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Wk(t)}function gR(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function yR(t){var e=t._freezeSettings(),n=Wk(t._databaseId);return new dR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vR(t,e,n,r,i,o){var a,s,u=t.Uc((o=void 0===o?{}:o).merge||o.mergeFields?2:0,e,n,i);if(VR("Data must be an object, but it was:",u,r),r=jR(r,u),o.merge)a=new Mb(u.fieldMask),s=u.fieldTransforms;else if(o.mergeFields){for(var c=[],l=0,h=o.mergeFields;l<h.length;l++){var f=qR(e,h[l],n);if(!u.contains(f))throw new cb(ub.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");HR(c,f)||c.push(f)}a=new Mb(c),s=u.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,s=u.fieldTransforms;return new iR(new dw(r),a,s)}var mR,bR=(Yi(wR,mR=eR),wR.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},wR.prototype.isEqual=function(t){return t instanceof wR},wR);function wR(){return null!==mR&&mR.apply(this,arguments)||this}function _R(t,e,n){return new fR({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var ER,TR,IR,SR,kR=(Yi(OR,SR=eR),OR.prototype._toFieldTransform=function(t){return new L_(t.path,new w_)},OR.prototype.isEqual=function(t){return t instanceof OR},OR),CR=(Yi(DR,IR=eR),DR.prototype._toFieldTransform=function(t){var e=_R(this,t,!0),n=this.Kc.map((function(t){return FR(t,e)}));return n=new __(n),new L_(t.path,n)},DR.prototype.isEqual=function(t){return this===t},DR),NR=(Yi(xR,TR=eR),xR.prototype._toFieldTransform=function(t){var e=_R(this,t,!0),n=this.Kc.map((function(t){return FR(t,e)}));return n=new k_(n),new L_(t.path,n)},xR.prototype.isEqual=function(t){return this===t},xR),AR=(Yi(RR,ER=eR),RR.prototype._toFieldTransform=function(t){var e=new R_(t.R,y_(t.R,this.Qc));return new L_(t.path,e)},RR.prototype.isEqual=function(t){return this===t},RR);function RR(t,e){var n=this;return(n=ER.call(this,t)||this).Qc=e,n}function xR(t,e){var n=this;return(n=TR.call(this,t)||this).Kc=e,n}function DR(t,e){var n=this;return(n=IR.call(this,t)||this).Kc=e,n}function OR(){return null!==SR&&SR.apply(this,arguments)||this}function PR(t,e,n,r){var i=t.Uc(1,e,n);VR("Data must be an object, but it was:",i,r);var o=[],a=dw.empty();return Ab(r,(function(t,r){var s=zR(e,t,n);r=ea(r),t=i.Oc(s),r instanceof bR?o.push(s):null!=(t=FR(r,t))&&(o.push(s),a.set(s,t))})),r=new Mb(o),new oR(a,r,i.fieldTransforms)}function LR(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[qR(e,r,n)],u=[i];if(o.length%2!=0)throw new cb(ub.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(qR(e,o[c])),u.push(o[c+1]);for(var l,h,f,d=[],p=dw.empty(),g=s.length-1;0<=g;--g)HR(d,s[g])||(l=s[g],h=ea(h=u[g]),f=a.Oc(l),h instanceof bR?d.push(l):null!=(f=FR(h,f))&&(d.push(l),p.set(l,f)));return i=new Mb(d),new oR(p,i,a.fieldTransforms)}function MR(t,e,n,r){return FR(n,t.Uc((r=void 0!==r&&r)?4:3,e))}function FR(t,e){if(UR(t=ea(t)))return VR("Unsupported field value:",e,t),jR(t,e);if(t instanceof eR)return function(t,e){if(!hR(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");(t=t._toFieldTransform(e))&&e.fieldTransforms.push(t)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=FR(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e)}return function(e,n){if(null===(e=ea(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return y_(n.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var r=Ib.fromDate(e);return{timestampValue:VE(n.R,r)}}if(e instanceof Ib)return r=new Ib(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:VE(n.R,r)};if(e instanceof nR)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof tR)return{bytesValue:qE(n.R,e._byteString)};if(e instanceof AA){r=n.databaseId;var i=e.firestore._databaseId;if(!i.isEqual(r))throw n.Lc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+r.projectId+"/"+r.database);return{referenceValue:zE(e.firestore._databaseId||n.databaseId,e._key.path)}}throw n.Lc("Unsupported field value: "+TA(e))}(0,e)}function jR(t,e){var n={};return Rb(t)?e.path&&0<e.path.length&&e.fieldMask.push(e.path):Ab(t,(function(t,r){null!=(r=FR(r,e.Fc(t)))&&(n[t]=r)})),{mapValue:{fields:n}}}function UR(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ib||t instanceof nR||t instanceof tR||t instanceof AA||t instanceof eR)}function VR(t,e,n){if(!UR(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=TA(n))?e.Lc(t+" a custom object"):e.Lc(t+" "+n);var r}function qR(t,e,n){if((e=ea(e))instanceof ZA)return e._internalPath;if("string"==typeof e)return zR(t,e);throw KR("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var BR=new RegExp("[~\\*/\\[\\]]");function zR(e,n,r){if(0<=n.search(BR))throw KR("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(ZA.bind.apply(ZA,eo([void 0],n.split(".")))))._internalPath}catch(t){throw KR("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function KR(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i;return e="Function "+e+"() called with invalid data",n&&(e+=" (via `toFirestore()`)"),n="",(o||a)&&(n+=" (found",o&&(n+=" in field "+r),a&&(n+=" in document "+i),n+=")"),new cb(ub.INVALID_ARGUMENT,(e+=". ")+t+n)}function HR(t,e){return t.some((function(t){return t.isEqual(e)}))}var WR,GR=(Object.defineProperty($R.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty($R.prototype,"ref",{get:function(){return new AA(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),$R.prototype.exists=function(){return null!==this._document},$R.prototype.data=function(){if(this._document){if(this._converter){var t=new QR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},$R.prototype.get=function(t){if(this._document&&null!==(t=this._document.data.field(XR("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t)},$R),QR=(Yi(YR,WR=GR),YR.prototype.data=function(){return WR.prototype.data.call(this)},YR);function YR(){return null!==WR&&WR.apply(this,arguments)||this}function $R(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function XR(t,e){return"string"==typeof e?zR(t,e):(e instanceof ZA?e:e._delegate)._internalPath}var JR,ZR,tx=(sx.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},sx),ex=(Yi(ax,ZR=GR),ax.prototype.exists=function(){return ZR.prototype.exists.call(this)},ax.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new nx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},ax.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document&&null!==(t=this._document.data.field(XR("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t,e.serverTimestamps)},ax),nx=(Yi(ox,JR=ex),ox.prototype.data=function(t){return JR.prototype.data.call(this,t=void 0===t?{}:t)},ox),rx=(Object.defineProperty(ix.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(ix.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(ix.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),ix.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new nx(n._firestore,n._userDataWriter,r.key,r,new tx(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},ix.prototype.docChanges=function(t){if((t=!!(t=void 0===t?{}:t).includeMetadataChanges)&&this._snapshot.excludesMetadataChanges)throw new cb(ub.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new nx(t._firestore,t._userDataWriter,e.doc.key,e.doc,new tx(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new nx(t._firestore,t._userDataWriter,e.doc.key,e.doc,new tx(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vb()}}(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},ix);function ix(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new tx(r.hasPendingWrites,r.fromCache),this.query=n}function ox(){return null!==JR&&JR.apply(this,arguments)||this}function ax(t,e,n,r,i,o){var a=this;return(a=ZR.call(this,t,e,n,r,o)||this)._firestore=t,a._firestoreImpl=t,a.metadata=i,a}function sx(t,e){this.hasPendingWrites=t,this.fromCache=e}function ux(t,e){return t instanceof ex&&e instanceof ex?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof rx&&e instanceof rx&&t._firestore===e._firestore&&VA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function cx(t){if(n_(t)&&0===t.explicitOrderBy.length)throw new cb(ub.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function lx(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var hx,fx,dx,px,gx,yx=(Yi(Sx,gx=W=function(){}),Sx.prototype._apply=function(t){var e=yR(t.firestore);return e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new cb(ub.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){Nx(o,i);for(var a=[],s=0,u=o;s<u.length;s++){var c=u[s];a.push(Cx(n,t,c))}l={arrayValue:{values:a}}}else l=Cx(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Nx(o,i),l=MR(e,"where",o,"in"===i||"not-in"===i);var l=Tw.create(r,i,l);return function(t,e){if(e.g()){var n=i_(t);if(null!==n&&!n.isEqual(e.field))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=r_(t))&&Ax(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new cb(ub.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new cb(ub.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,l),l}(t._query,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc),new RA(t.firestore,t.converter,(e=(t=t._query).filters.concat([e]),new Jw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},Sx),vx=(Yi(Ix,px=W),Ix.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yw(e,n);return e=r,null!==r_(n=t)||null!==(t=i_(n))&&Ax(0,t,e.field),r}(t._query,this.jc,this.zc);return new RA(t.firestore,t.converter,(e=(t=t._query).explicitOrderBy.concat([e]),new Jw(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},Ix),mx=(Yi(Tx,dx=W),Tx.prototype._apply=function(t){return new RA(t.firestore,t.converter,u_(t._query,this.Hc,this.Jc))},Tx),bx=(Yi(Ex,fx=W),Ex.prototype._apply=function(t){var e=kx(t,this.type,this.Yc,this.Xc);return new RA(t.firestore,t.converter,(t=t._query,e=e,new Jw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},Ex),wx=(Yi(_x,hx=W),_x.prototype._apply=function(t){var e=kx(t,this.type,this.Yc,this.Xc);return new RA(t.firestore,t.converter,(t=t._query,e=e,new Jw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},_x);function _x(t,e,n){var r=this;return(r=hx.call(this)||this).type=t,r.Yc=e,r.Xc=n,r}function Ex(t,e,n){var r=this;return(r=fx.call(this)||this).type=t,r.Yc=e,r.Xc=n,r}function Tx(t,e,n){var r=this;return(r=dx.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function Ix(t,e){var n=this;return(n=px.call(this)||this).jc=t,n.zc=e,n.type="orderBy",n}function Sx(t,e,n){var r=this;return(r=gx.call(this)||this).jc=t,r.Wc=e,r.Gc=n,r.type="where",r}function kx(t,e,n,r){if(n[0]=ea(n[0]),n[0]instanceof GR)return function(t,n,r,i){if(!r)throw new cb(ub.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");for(var o=[],a=0,s=a_(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(aw(n,r.key));else{var c=r.data.field(u.field);if(Gb(c))throw new cb(ub.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c)throw u=u.field.canonicalString(),new cb(ub.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.");o.push(c)}}return new zw(o,i)}(t._query,t.firestore._databaseId,n[0]._document,r);var i=yR(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new cb(ub.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!o_(t)&&-1!==c.indexOf("/"))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ob.fromString(c));if(!Jb.isDocumentKey(l))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");l=new Jb(l),s.push(aw(e,l))}else c=MR(n,r,c),s.push(c)}return new zw(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Cx(t,e,n){if("string"==typeof(n=ea(n))){if(""===n)throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!o_(e)&&-1!==n.indexOf("/"))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(Ob.fromString(n)),!Jb.isDocumentKey(e))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return aw(t,new Jb(e))}if(n instanceof AA)return aw(t,n._key);throw new cb(ub.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+TA(n)+".")}function Nx(t,e){if(!Array.isArray(t)||0===t.length)throw new cb(ub.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new cb(ub.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ax(t,e,n){if(!n.isEqual(e))throw new cb(ub.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Rx(){}function xx(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}Rx.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),tw(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hb(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Wb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw vb()}},Rx.prototype.convertObject=function(t,e){var n=this,r={};return Ab(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},Rx.prototype.convertGeoPoint=function(t){return new nR(Hb(t.latitude),Hb(t.longitude))},Rx.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},Rx.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){return Gb(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Qb(t));default:return null}},Rx.prototype.convertTimestamp=function(t){return t=Kb(t),new Ib(t.seconds,t.nanos)},Rx.prototype.convertDocumentKey=function(t,e){var n=Ob.fromString(t);return mb(lT(n)),t=new oA(n.get(1),n.get(3)),n=new Jb(n.popFirst(5)),t.isEqual(e)||pb("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n};var Dx,Ox=(Yi(Mx,Dx=G=Rx),Mx.prototype.convertBytes=function(t){return new tR(t)},Mx.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new AA(this.firestore,null,t)},Mx),Px=(Lx.prototype.set=function(t,e,n){return this._verifyNotCommitted(),e=xx((t=Fx(t,this._firestore)).converter,e,n),n=vR(this._dataReader,"WriteBatch.set",t._key,e,null!==t.converter,n),this._mutations.push(n.toMutation(t._key,M_.none())),this},Lx.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this._verifyNotCommitted(),t=Fx(t,this._firestore),e="string"==typeof(e=ea(e))||e instanceof ZA?LR(this._dataReader,"WriteBatch.update",t._key,e,n,r):PR(this._dataReader,"WriteBatch.update",t._key,e),this._mutations.push(e.toMutation(t._key,M_.exists(!0))),this},Lx.prototype.delete=function(t){return this._verifyNotCommitted(),t=Fx(t,this._firestore),this._mutations=this._mutations.concat(new eE(t._key,M_.none())),this},Lx.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},Lx.prototype._verifyNotCommitted=function(){if(this._committed)throw new cb(ub.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Lx);function Lx(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=yR(t)}function Mx(t){var e=this;return(e=Dx.call(this)||this).firestore=t,e}function Fx(t,e){if((t=ea(t)).firestore!==e)throw new cb(ub.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var jx,Ux=(Yi(Vx,jx=G),Vx.prototype.convertBytes=function(t){return new tR(t)},Vx.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new AA(this.firestore,null,t)},Vx);function Vx(t){var e=this;return(e=jx.call(this)||this).firestore=t,e}function qx(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=IA(t,AA);var o=IA(t.firestore,WA),a=yR(o);return zx(o,[("string"==typeof(e=ea(e))||e instanceof ZA?LR(a,"updateDoc",t._key,e,n,r):PR(a,"updateDoc",t._key,e)).toMutation(t._key,M_.exists(!0))])}function Bx(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=ea(t);var r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||zA(e[i])||(r=e[i],i++);var o,a,s,u,c,l,h={includeMetadataChanges:r.includeMetadataChanges};return zA(e[i])&&(o=e[i],e[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),e[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),e[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),t instanceof AA?(s=IA(t.firestore,WA),u=t_(t._key.path),l={next:function(n){e[i]&&e[i](Kx(s,t,n))},error:e[i+1],complete:e[i+2]}):(a=IA(t,RA),s=IA(a.firestore,WA),u=a._query,c=new Ux(s),l={next:function(t){e[i]&&e[i](new rx(s,c,a,t))},error:e[i+1],complete:e[i+2]},cx(t._query)),function(t,e,n){var r=this,i=new MN(l),o=new qC(e,i,n);return t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=jC,[4,tA(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))})),function(){i.Wo(),t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=UC,[4,tA(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))}))}}(YA(s),u,h)}function zx(t,e){return function(t,e){var n=this,r=new PT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return n=oN,[4,ZN(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(YA(t),e)}function Kx(t,e,n){var r=n.docs.get(e._key),i=new Ux(t);return new ex(t,i,e._key,r,new tx(n.hasPendingWrites,n.fromCache),e.converter)}var Hx,Wx=(Qx.prototype.get=function(t){var e=this,n=Fx(t,this._firestore),r=new Ox(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return vb();if((t=t[0]).isFoundDocument())return new GR(e._firestore,r,t.key,t,n.converter);if(t.isNoDocument())return new GR(e._firestore,r,n._key,null,n.converter);throw vb()}))},Qx.prototype.set=function(t,e,n){return e=xx((t=Fx(t,this._firestore)).converter,e,n),n=vR(this._dataReader,"Transaction.set",t._key,e,null!==t.converter,n),this._transaction.set(t._key,n),this},Qx.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=Fx(t,this._firestore),e="string"==typeof(e=ea(e))||e instanceof ZA?LR(this._dataReader,"Transaction.update",t._key,e,n,r):PR(this._dataReader,"Transaction.update",t._key,e),this._transaction.update(t._key,e),this},Qx.prototype.delete=function(t){return t=Fx(t,this._firestore),this._transaction.delete(t._key),this},Yi(Gx,Hx=Qx),Gx.prototype.get=function(t){var e=this,n=Fx(t,this._firestore),r=new Ux(this._firestore);return Hx.prototype.get.call(this,t).then((function(t){return new ex(e._firestore,r,n._key,t._document,new tx(!1,!1),n.converter)}))},Gx);function Gx(t,e){var n=this;return(n=Hx.call(this,t,e)||this)._firestore=t,n}function Qx(t,e){this._firestore=t,this._transaction=e,this._dataReader=yR(t)}function Yx(){if("undefined"==typeof Uint8Array)throw new cb(ub.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $x(){if("undefined"==typeof atob)throw new cb(ub.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xx,Jx=(oD.fromBase64String=function(t){return $x(),new oD(tR.fromBase64String(t))},oD.fromUint8Array=function(t){return Yx(),new oD(tR.fromUint8Array(t))},oD.prototype.toBase64=function(){return $x(),this._delegate.toBase64()},oD.prototype.toUint8Array=function(){return Yx(),this._delegate.toUint8Array()},oD.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},oD.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},oD),Zx=(iD.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){JA(t=IA(t,WA));var n=YA(t),r=t._freezeSettings();return XA(n,t=new RN,new NN(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},iD.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){JA(t=IA(t,WA));var e=YA(t),n=t._freezeSettings();return XA(e,t=new RN,new AN(t,n.cacheSizeBytes))}(t._delegate)},iD.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new cb(ub.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new PT;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Xi(e,void 0,void 0,(function(){var e;return Ji(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return FT.yt()?(e=t+"main",[4,FT.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(IS(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},iD),tD=(Object.defineProperty(rD.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),rD.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||gb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},rD.prototype.useEmulator=function(t,e,n){!function(t,e,n,r){void 0===r&&(r={});var i=(t=IA(t,NA))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&gb("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){if(n=fo(r.mockUserToken),!(r=r.mockUserToken.sub||r.mockUserToken.user_id))throw new cb(ub.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new uA(new rA(n,new ik(r)))}}(this._delegate,t,e,n=void 0===n?{}:n)},rD.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Xi(e,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,$N(t)];case 1:return e=r.sent(),[4,JN(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),(i=n).Or.delete(0),uC(i))]}var i}))}))}))}(YA(IA(this._delegate,WA)))},rD.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Xi(e,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,$N(t)];case 1:return e=r.sent(),[4,JN(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return(e=t).Or.add(0),[4,cC(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(YA(IA(this._delegate,WA)))},rD.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&wA("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},rD.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},rD.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},rD.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new PT;return t.asyncQueue.enqueueAndForget((function(){return Xi(e,void 0,void 0,(function(){var e;return Ji(this,(function(r){switch(r.label){case 0:return e=cN,[4,ZN(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(YA(IA(this._delegate,WA)))},rD.prototype.onSnapshotsInSync=function(t){return t=t,function(t,e){var n=this,r=new MN(e);return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,tA(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,tA(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(YA(IA(this._delegate,WA)),zA(t)?t:{next:t})},Object.defineProperty(rD.prototype,"app",{get:function(){if(!this.tu)throw new cb(ub.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),rD.prototype.collection=function(t){try{return new ID(this,FA(this._delegate,t))}catch(t){throw pD(t,"collection()","Firestore.collection()")}},rD.prototype.doc=function(t){try{return new fD(this,jA(this._delegate,t))}catch(t){throw pD(t,"doc()","Firestore.doc()")}},rD.prototype.collectionGroup=function(t){try{return new _D(this,function(t,e){if(t=IA(t,NA),mA("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new cb(ub.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new RA(t,null,(e=e,new Jw(Ob.emptyPath(),e)))}(this._delegate,t))}catch(t){throw pD(t,"collectionGroup()","Firestore.collectionGroup()")}},rD.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new PT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return[4,YN(t).then((function(t){return t.datastore}))];case 1:return n=i.sent(),new UN(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(YA(e=this._delegate),(function(r){return r=new Wx(e,r),t(new aD(n,r))}))},rD.prototype.batch=function(){var t=this;return YA(this._delegate),new sD(new Px(this._delegate,(function(e){return zx(t._delegate,e)})))},rD.prototype.loadBundle=function(t){throw new cb(ub.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},rD.prototype.namedQuery=function(t){throw new cb(ub.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},rD),eD=(Yi(nD,Xx=G),nD.prototype.convertBytes=function(t){return new Jx(new tR(t))},nD.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),fD.eu(t,this.firestore,null)},nD);function nD(t){var e=this;return(e=Xx.call(this)||this).firestore=t,e}function rD(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof oA||(this.tu=t)}function iD(){}function oD(t){this._delegate=t}var aD=(hD.prototype.get=function(t){var e=this,n=xD(t);return this._delegate.get(n).then((function(t){return new bD(e._firestore,new ex(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},hD.prototype.set=function(t,e,n){return t=xD(t),n?(bA("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},hD.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=xD(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,eo([o,e,n],r)),this},hD.prototype.delete=function(t){return t=xD(t),this._delegate.delete(t),this},hD),sD=(lD.prototype.set=function(t,e,n){return t=xD(t),n?(bA("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},lD.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=xD(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,eo([o,e,n],r)),this},lD.prototype.delete=function(t){return t=xD(t),this._delegate.delete(t),this},lD.prototype.commit=function(){return this._delegate.commit()},lD),uD=(cD.prototype.fromFirestore=function(t,e){return t=new nx(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null),this._delegate.fromFirestore(new wD(this._firestore,t),null!=e?e:{})},cD.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},cD.nu=function(t,e){var n=cD.su,r=n.get(t);return r||(r=new WeakMap,n.set(t,r)),(n=r.get(e))||(n=new cD(t,new eD(t),e),r.set(e,n)),n},cD);function cD(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}function lD(t){this._delegate=t}function hD(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new eD(t)}uD.su=new WeakMap;var fD=(dD.iu=function(t,e,n){if(t.length%2!=0)throw new cb(ub.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new dD(e,new AA(e._delegate,n,new Jb(t)))},dD.eu=function(t,e,n){return new dD(e,new AA(e._delegate,n,t))},Object.defineProperty(dD.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(dD.prototype,"parent",{get:function(){return new ID(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(dD.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),dD.prototype.collection=function(t){try{return new ID(this.firestore,FA(this._delegate,t))}catch(t){throw pD(t,"collection()","DocumentReference.collection()")}},dD.prototype.isEqual=function(t){return(t=ea(t))instanceof AA&&UA(this._delegate,t)},dD.prototype.set=function(t,e){e=bA("DocumentReference.set",e);try{return function(t,e,n){t=IA(t,AA);var r=IA(t.firestore,WA);return e=xx(t.converter,e,n),zx(r,[vR(yR(r),"setDoc",t._key,e,null!==t.converter,n).toMutation(t._key,M_.none())])}(this._delegate,t,e)}catch(t){throw pD(t,"setDoc()","DocumentReference.set()")}},dD.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?qx(this._delegate,t):qx.apply(void 0,eo([this._delegate,t,e],n))}catch(t){throw pD(t,"updateDoc()","DocumentReference.update()")}},dD.prototype.delete=function(){return zx(IA((t=this._delegate).firestore,WA),[new eE(t._key,M_.none())]);var t},dD.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gD(e),i=yD(e,(function(e){return new bD(t.firestore,new ex(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Bx(this._delegate,r,i)},dD.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=IA(t,AA);var e=IA(t.firestore,WA),n=YA(e),r=new Ux(e);return function(t,e){var n=this,r=new PT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=e,(s=t).persistence.runTransaction("read document","readonly",(function(t){return s.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new cb(ub.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=AC(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s}))}))},[4,XN(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new ex(e,r,t._key,n,new tx(null!==n&&n.hasLocalMutations,!0),t.converter)}))}:"server"===(null==t?void 0:t.source)?function(t){t=IA(t,AA);var e=IA(t.firestore,WA);return eA(YA(e),t._key,{source:"server"}).then((function(n){return Kx(e,t,n)}))}:function(t){t=IA(t,AA);var e=IA(t.firestore,WA);return eA(YA(e),t._key).then((function(n){return Kx(e,t,n)}))})(this._delegate).then((function(t){return new bD(e.firestore,new ex(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},dD.prototype.withConverter=function(t){return new dD(this.firestore,t?this._delegate.withConverter(uD.nu(this.firestore,t)):this._delegate.withConverter(null))},dD);function dD(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new eD(t)}function pD(t,e,n){return t.message=t.message.replace(e,n),t}function gD(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!zA(r))return r}return{}}function yD(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=zA(t[0])?t[0]:zA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var vD,mD,bD=(Object.defineProperty(RD.prototype,"ref",{get:function(){return new fD(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(RD.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(RD.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(RD.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),RD.prototype.data=function(t){return this._delegate.data(t)},RD.prototype.get=function(t,e){return this._delegate.get(t,e)},RD.prototype.isEqual=function(t){return ux(this._delegate,t._delegate)},RD),wD=(Yi(AD,mD=bD),AD.prototype.data=function(t){return this._delegate.data(t)},AD),_D=(ND.prototype.where=function(t,e,n){try{return new ND(this.firestore,lx(this._delegate,(r=n,i=e,o=XR("where",t),new yx(o,i,r))))}catch(t){throw pD(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},ND.prototype.orderBy=function(t,e){try{return new ND(this.firestore,lx(this._delegate,(n=void 0===e?"asc":e,r=XR("orderBy",t),new vx(r,n))))}catch(t){throw pD(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},ND.prototype.limit=function(t){try{return new ND(this.firestore,lx(this._delegate,(SA("limit",e=t),new mx("limit",e,"F"))))}catch(t){throw pD(t,"limit()","Query.limit()")}var e},ND.prototype.limitToLast=function(t){try{return new ND(this.firestore,lx(this._delegate,(SA("limitToLast",e=t),new mx("limitToLast",e,"L"))))}catch(t){throw pD(t,"limitToLast()","Query.limitToLast()")}var e},ND.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ND(this.firestore,lx(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bx("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw pD(t,"startAt()","Query.startAt()")}},ND.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ND(this.firestore,lx(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bx("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw pD(t,"startAfter()","Query.startAfter()")}},ND.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ND(this.firestore,lx(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wx("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw pD(t,"endBefore()","Query.endBefore()")}},ND.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new ND(this.firestore,lx(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wx("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw pD(t,"endAt()","Query.endAt()")}},ND.prototype.isEqual=function(t){return VA(this._delegate,t._delegate)},ND.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=IA(t,RA);var e=IA(t.firestore,WA),n=YA(e),r=new Ux(e);return function(t,e){var n=this,r=new PT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,BS(t,e,!0)];case 1:return o=a.sent(),r=new JC(e,o.Bn),i=r._o(o.documents),i=r.applyChanges(i,!1),n.resolve(i.snapshot),[3,3];case 2:return i=a.sent(),o=AC(i,"Failed to execute query '"+e+" against cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,XN(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new rx(e,r,t,n)}))}:"server"===(null==t?void 0:t.source)?function(t){t=IA(t,RA);var e=IA(t.firestore,WA),n=YA(e),r=new Ux(e);return nA(n,t._query,{source:"server"}).then((function(n){return new rx(e,r,t,n)}))}:function(t){t=IA(t,RA);var e=IA(t.firestore,WA),n=YA(e),r=new Ux(e);return cx(t._query),nA(n,t._query).then((function(n){return new rx(e,r,t,n)}))})(this._delegate).then((function(t){return new TD(e.firestore,new rx(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},ND.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=gD(e),i=yD(e,(function(e){return new TD(t.firestore,new rx(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Bx(this._delegate,r,i)},ND.prototype.withConverter=function(t){return new ND(this.firestore,t?this._delegate.withConverter(uD.nu(this.firestore,t)):this._delegate.withConverter(null))},ND),ED=(Object.defineProperty(CD.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(CD.prototype,"doc",{get:function(){return new wD(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(CD.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(CD.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),CD),TD=(Object.defineProperty(kD.prototype,"query",{get:function(){return new _D(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(kD.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(kD.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(kD.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(kD.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new wD(t._firestore,e)}))},enumerable:!1,configurable:!0}),kD.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new ED(e._firestore,t)}))},kD.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new wD(n._firestore,r))}))},kD.prototype.isEqual=function(t){return ux(this._delegate,t._delegate)},kD),ID=(Yi(SD,vD=_D),Object.defineProperty(SD.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(SD.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(SD.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new fD(this.firestore,t):null},enumerable:!1,configurable:!0}),SD.prototype.doc=function(t){try{return new fD(this.firestore,void 0===t?jA(this._delegate):jA(this._delegate,t))}catch(t){throw pD(t,"doc()","CollectionReference.doc()")}},SD.prototype.add=function(t){var e,n,r,i=this;return n=t,t=IA((e=this._delegate).firestore,WA),r=jA(e),n=xx(e.converter,n),zx(t,[vR(yR(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,M_.exists(!1))]).then((function(){return r})).then((function(t){return new fD(i.firestore,t)}))},SD.prototype.isEqual=function(t){return UA(this._delegate,t._delegate)},SD.prototype.withConverter=function(t){return new SD(this.firestore,t?this._delegate.withConverter(uD.nu(this.firestore,t)):this._delegate.withConverter(null))},SD);function SD(t,e){var n=this;return(n=vD.call(this,t,e)||this).firestore=t,n._delegate=e,n}function kD(t,e){this._firestore=t,this._delegate=e}function CD(t,e){this._firestore=t,this._delegate=e}function ND(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new eD(t)}function AD(){return null!==mD&&mD.apply(this,arguments)||this}function RD(t,e){this._firestore=t,this._delegate=e}function xD(t){return IA(t,AA)}function DD(t){this._delegate=t}function OD(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ZA.bind.apply(ZA,eo([void 0],t)))}function PD(t){return e=this._delegate,n=t,r=YA(e=IA(e,WA)),t=new HA,function(t,e,r){var i,o=this,a=(i=n,e=Wk(e),i=function(t){if(t instanceof Uint8Array)return LN(t,void 0);if(t instanceof ArrayBuffer)return LN(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new FN(i,e));t.asyncQueue.enqueueAndForget((function(){return Xi(o,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=IN,[4,ZN(t)];case 1:return e.apply(void 0,[n.sent(),a,r]),[2]}}))}))}))}(r,e._databaseId,t),t;var e,n,r}function LD(t){var e=this,n=this._delegate;return t=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return Xi(n,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,XN(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(YA(n=IA(n,WA)),t).then((function(t){return t?new RA(n,null,t.query):null})).then((function(t){return t?new _D(e,t):null}))}OD.documentId=function(){return new OD(Lb.keyField().canonicalString())},OD.prototype.isEqual=function(t){return(t=ea(t))instanceof ZA&&this._delegate._internalPath.isEqual(t._internalPath)},W=OD,DD.serverTimestamp=function(){var t=new kR("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new DD(t)},DD.delete=function(){var t=new bR("deleteField");return t._methodName="FieldValue.delete",new DD(t)},DD.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new CR("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new DD(n)},DD.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new NR("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new DD(n)},DD.increment=function(t){return(t=new AR("increment",t))._methodName="FieldValue.increment",new DD(t)},DD.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)};var MD,FD,jD={Firestore:tD,GeoPoint:nR,Timestamp:Ib,Blob:Jx,Transaction:aD,WriteBatch:sD,DocumentReference:fD,DocumentSnapshot:bD,Query:_D,QueryDocumentSnapshot:wD,QuerySnapshot:TD,CollectionReference:ID,FieldPath:W,FieldValue:G=DD,setLogLevel:function(t){lb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(MD=Oa).INTERNAL.registerComponent(new na("firestore",(function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new tD(e,new WA(e,t),new Zx)}),"PUBLIC").setServiceProps(Object.assign({},jD))),MD.registerVersion("@firebase/firestore","2.3.10"),(FD=tD).prototype.loadBundle=PD,FD.prototype.namedQuery=LD;var UD,VD={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qD=(Yi(BD,UD=Error),BD);function BD(t,e,n){return e=UD.call(this,e)||this,Object.setPrototypeOf(e,BD.prototype),e.code=t,e.details=n,e}function zD(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r;t=void 0;try{var o=e&&e.error;if(o){var a=o.status;if("string"==typeof a){if(!VD[a])return new qD("internal","internal");r=VD[a],i=a}var s=o.message;"string"==typeof s&&(i=s),void 0!==(t=o.details)&&(t=n.decode(t))}}catch(t){}return"ok"===r?null:new qD(r,i,t)}var KD=(HD.prototype.getAuthToken=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},HD.prototype.getInstanceIdToken=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},HD.prototype.getContext=function(){return Xi(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},HD);function HD(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}function WD(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var GD=(QD.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return WD(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},QD.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?WD(t,(function(t){return e.decode(t)})):t},QD);function QD(){}var YD,$D,XD,JD=(Object.defineProperty(ZD.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),ZD.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},ZD.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},ZD.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},ZD.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},ZD.prototype.postJSON=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},ZD.prototype.getAppCheckToken=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},ZD.prototype.call=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=u.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,c=s,h=new Promise((function(t,e){l=setTimeout((function(){e(new qD("deadline-exceeded","deadline-exceeded"))}),c)})),s=(a={timer:l,promise:h}).timer,a=a.promise,[4,Promise.race([tO(s,this.postJSON(r,i,o)),a,tO(s,this.cancelAllRequests)])];case 2:if(!(a=u.sent()))throw new qD("cancelled","Firebase Functions instance was deleted.");if(s=zD(a.status,a.json,this.serializer))throw s;if(!a.json)throw new qD("internal","Response is not valid JSON object.");if(void 0===(s=void 0===(s=a.json.data)?a.json.result:s))throw new qD("internal","Response is missing data field.");return[2,{data:this.serializer.decode(s)}]}var c,l,h}))}))},ZD);function ZD(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new GD,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new KD(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}function tO(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}function eO(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function nO(t,e,n){var r,i=new Promise((function(i,o){eO(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function rO(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function iO(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return nO(this[e],r,arguments)})}))}function oO(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function aO(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return t=this[e],(n=nO(t,r,arguments)).then((function(t){if(t)return new uO(t,n.request)}));var t,n})}))}function sO(t){this._index=t}function uO(t,e){this._cursor=t,this._request=e}function cO(t){this._store=t}function lO(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function hO(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new lO(n)}function fO(t){this._db=t}function dO(t,e,n){var r=(e=nO(indexedDB,"open",[t,e])).request;return r&&(r.onupgradeneeded=function(t){n&&n(new hO(r.result,t.oldVersion,r.transaction))}),e.then((function(t){return new fO(t)}))}function pO(t){return nO(indexedDB,"deleteDatabase",[t])}YD=Oa,$D=fetch.bind(self),XD={Functions:JD},YD.INTERNAL.registerComponent(new na("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return e=t.getProvider("app-check-internal"),t=t.getProvider("messaging"),new JD(r,i,t,e,n,$D)}),"PUBLIC").setServiceProps(XD).setMultipleInstances(!0)),Oa.registerVersion("@firebase/functions","0.6.14"),rO(sO,"_index",["name","keyPath","multiEntry","unique"]),iO(sO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),aO(sO,"_index",IDBIndex,["openCursor","openKeyCursor"]),rO(uO,"_cursor",["direction","key","primaryKey","value"]),iO(uO,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(uO.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),eO(e._request).then((function(t){if(t)return new uO(t,e._request)}))}))})})),cO.prototype.createIndex=function(){return new sO(this._store.createIndex.apply(this._store,arguments))},cO.prototype.index=function(){return new sO(this._store.index.apply(this._store,arguments))},rO(cO,"_store",["name","keyPath","indexNames","autoIncrement"]),iO(cO,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),aO(cO,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),oO(cO,"_store",IDBObjectStore,["deleteIndex"]),lO.prototype.objectStore=function(){return new cO(this._tx.objectStore.apply(this._tx,arguments))},rO(lO,"_tx",["objectStoreNames","mode"]),oO(lO,"_tx",IDBTransaction,["abort"]),hO.prototype.createObjectStore=function(){return new cO(this._db.createObjectStore.apply(this._db,arguments))},rO(hO,"_db",["name","version","objectStoreNames"]),oO(hO,"_db",IDBDatabase,["deleteObjectStore","close"]),fO.prototype.transaction=function(){return new lO(this._db.transaction.apply(this._db,arguments))},rO(fO,"_db",["name","version","objectStoreNames"]),oO(fO,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[cO,sO].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=(r=arguments,Array.prototype.slice.call(r)),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[sO,cO].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var gO=1e4,yO="w:0.4.31",vO="FIS_v2",mO="https://firebaseinstallations.googleapis.com/v1",bO=36e5,wO=((W={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["not-registered"]="Firebase Installation is not registered.",W["installation-not-found"]="Firebase Installation not found.",W["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',W["app-offline"]="Could not process request. Application offline.",W["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",new Co("installations","Installations",G=W));function _O(t){return t instanceof So&&t.code.includes("request-failed")}function EO(t){return t=t.projectId,mO+"/projects/"+t+"/installations"}function TO(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function IO(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,e.json()];case 1:return n=(n=r.sent()).error,[2,wO.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}}))}))}function SO(t){return t=t.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kO(t,e){return e=e.refreshToken,(t=SO(t)).append("Authorization",vO+" "+e),t}function CO(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return 500<=(e=n.sent()).status&&e.status<600?[2,t()]:[2,e]}}))}))}function NO(t){return new Promise((function(e){setTimeout(e,t)}))}var AO=/^[cdef][\w-]{21}$/,RO="";function xO(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,eo([],to(t)))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return AO.test(e)?e:RO}catch(t){return RO}}function DO(t){return t.appName+"!"+t.appId}var OO=new Map;function PO(t,e){LO(t=DO(t),e),function(t,e){var n=FO();n&&n.postMessage({key:t,fid:e}),jO()}(t,e)}function LO(t,e){var n,r;if(t=OO.get(t))try{for(var i=Zi(t),o=i.next();!o.done;o=i.next())(0,o.value)(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}var MO=null;function FO(){return!MO&&"BroadcastChannel"in self&&((MO=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){LO(t.data.key,t.data.fid)}),MO}function jO(){0===OO.size&&MO&&(MO.close(),MO=null)}var UO,VO="firebase-installations-database",qO=1,BO="firebase-installations-store",zO=null;function KO(){return zO=zO||dO(VO,qO,(function(t){0===t.oldVersion&&t.createObjectStore(BO)}))}function HO(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return n=DO(t),[4,KO()];case 1:return i=a.sent(),r=i.transaction(BO,"readwrite"),[4,(i=r.objectStore(BO)).get(n)];case 2:return o=a.sent(),[4,i.put(e,n)];case 3:return a.sent(),[4,r.complete];case 4:return a.sent(),o&&o.fid===e.fid||PO(t,e.fid),[2,e]}}))}))}function WO(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return e=DO(t),[4,KO()];case 1:return[4,(n=(n=r.sent()).transaction(BO,"readwrite")).objectStore(BO).delete(e)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}function GO(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return n=DO(t),[4,KO()];case 1:return i=s.sent(),r=i.transaction(BO,"readwrite"),[4,(i=r.objectStore(BO)).get(n)];case 2:return o=s.sent(),void 0!==(a=e(o))?[3,4]:[4,i.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,i.put(a,n)];case 5:s.sent(),s.label=6;case 6:return[4,r.complete];case 7:return s.sent(),!a||o&&o.fid===a.fid||PO(t,a.fid),[2,a]}}))}))}function QO(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,GO(t,(function(n){return n=$O(n||{fid:xO(),registrationStatus:0}),n=function(t,e){return 0!==e.registrationStatus?1===e.registrationStatus?{installationEntry:e,registrationPromise:function(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,YO(t)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,NO(100)];case 3:return i.sent(),[4,YO(t)];case 4:return e=i.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,QO(t)];case 6:return r=i.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}}))}))}(t)}:{installationEntry:e}:navigator.onLine?(t=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(t,e){var n=e.fid;return Xi(this,void 0,void 0,(function(){var e,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return e=EO(t),r=SO(t),a={fid:n,authVersion:vO,appId:t.appId,sdkVersion:yO},i={method:"POST",headers:r,body:JSON.stringify(a)},[4,CO((function(){return fetch(e,i)}))];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:TO(a.authToken)}];case 3:return[4,IO("Create Installation",o)];case 4:throw s.sent()}}))}))}(t,e)];case 1:return n=i.sent(),[2,HO(t,n)];case 2:return _O(r=i.sent())&&409===r.customData.serverCode?[4,WO(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,HO(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()}),{installationEntry:e,registrationPromise:t}):{installationEntry:e,registrationPromise:Promise.reject(wO.create("app-offline"))}}(t,n),e=n.registrationPromise,n.installationEntry}))];case 1:return(n=i.sent()).fid!==RO?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function YO(t){return GO(t,(function(t){if(!t)throw wO.create("installation-not-found");return $O(t)}))}function $O(t){return 1===(e=t).registrationStatus&&e.registrationTime+gO<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function XO(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Xi(this,void 0,void 0,(function(){var t,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return t=function(t,e){return e=e.fid,EO(t)+"/"+e+"/authTokens:generate"}(n,e),i=kO(n,e),(s=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",s.getPlatformInfoString()),s={installation:{sdkVersion:yO}},o={method:"POST",headers:i,body:JSON.stringify(s)},[4,CO((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,TO(s=u.sent())];case 3:return[4,IO("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function JO(t,e){return void 0===e&&(e=!1),Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return[4,GO(t.appConfig,(function(r){if(!tP(r))throw wO.create("not-registered");var i,o=r.authToken;if(e||2!==(i=o).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+bO}(i)){if(1===o.requestStatus)return n=function(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,ZO(t.appConfig)];case 1:n=r.sent(),r.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,NO(100)];case 3:return r.sent(),[4,ZO(t.appConfig)];case 4:return n=r.sent(),[3,2];case 5:return 0===(n=n.authToken).requestStatus?[2,JO(t,e)]:[2,n]}}))}))}(t,e),r;if(!navigator.onLine)throw wO.create("app-offline");return i=r,o={requestStatus:1,requestTime:Date.now()},o=$i($i({},i),{authToken:o}),n=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,XO(t,e)];case 1:return n=o.sent(),i=$i($i({},e),{authToken:n}),[4,HO(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!_O(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,WO(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=$i($i({},e),{authToken:{requestStatus:0}}),[4,HO(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}return r}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function ZO(t){return GO(t,(function(t){if(!tP(t))throw wO.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+gO<Date.now()?$i($i({},t),{authToken:{requestStatus:0}}):t}))}function tP(t){return void 0!==t&&2===t.registrationStatus}function eP(t,e){return void 0===e&&(e=!1),Xi(this,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return[4,QO(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}(t.appConfig)];case 1:return n.sent(),[4,JO(t,e)];case 2:return[2,n.sent().token]}}))}))}function nP(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return n=function(t,e){return e=e.fid,EO(t)+"/"+e}(t,e),i=kO(t,e),r={method:"DELETE",headers:i},[4,CO((function(){return fetch(n,r)}))];case 1:return(i=o.sent()).ok?[3,3]:[4,IO("Delete Installation",i)];case 2:throw o.sent();case 3:return[2]}}))}))}function rP(t,e){var n=t.appConfig;return function(t,e){FO();var n=DO(t);(t=OO.get(n))||(t=new Set,OO.set(n,t)),t.add(e)}(n,e),function(){var t,r,i;r=e,i=DO(t=n),(t=OO.get(i))&&(t.delete(r),0===t.size&&OO.delete(i),jO())}}function iP(t){return wO.create("missing-app-config-values",{valueName:t})}(UO=Oa).INTERNAL.registerComponent(new na("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw iP("App Configuration");if(!t.name)throw iP("App Name");try{for(var r=Zi(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw iP(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,QO(t.appConfig)];case 1:return e=r.sent(),n=e.installationEntry,(e.registrationPromise||JO(t)).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return eP(n,t)},delete:function(){return function(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,GO(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw wO.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw wO.create("app-offline");case 3:return[4,nP(e,n)];case 4:return r.sent(),[4,WO(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return rP(n,t)}}}),"PUBLIC")),UO.registerVersion("@firebase/installations","0.4.31"),(W={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["only-available-in-window"]="This method is available in a Window context.",W["only-available-in-sw"]="This method is available in a service worker context.",W["permission-default"]="The notification permission was not granted and dismissed instead.",W["permission-blocked"]="The notification permission was not granted and blocked instead.",W["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",W["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",W["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",W["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",W["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",W["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",W["token-update-no-token"]="FCM returned no token when updating the user to push.",W["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",W["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",W["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",W["invalid-vapid-key"]="The public VAPID key must be a string.",W["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.";var oP,aP=new Co("messaging","Messaging",G=W),sP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uP="https://fcmregistrations.googleapis.com/v1",cP="FCM_MSG",lP="google.c.a.c_id";function hP(t){return t=new Uint8Array(t),btoa(String.fromCharCode.apply(String,eo([],to(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(W=oP=oP||{}).PUSH_RECEIVED="push-received",W.NOTIFICATION_CLICKED="notification-clicked";var fP="fcm_token_details_db",dP=5,pP="fcm_token_object_Store";function gP(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(fP))return[2,null];r.label=2;case 2:return e=null,[4,dO(fP,dP,(function(r){return Xi(n,void 0,void 0,(function(){var n,i,o;return Ji(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(pP)?[4,(o=r.transaction.objectStore(pP)).index("fcmSenderId").get(t)]:[2];case 1:return n=a.sent(),[4,o.clear()];case 2:if(a.sent(),!n)return[2];if(2===r.oldVersion){if(!(i=n).auth||!i.p256dh||!i.endpoint)return[2];e={token:i.fcmToken,createTime:null!==(o=i.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:i.auth,p256dh:i.p256dh,endpoint:i.endpoint,swScope:i.swScope,vapidKey:"string"==typeof i.vapidKey?i.vapidKey:hP(i.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(i=n).fcmToken,createTime:i.createTime,subscriptionOptions:{auth:hP(i.auth),p256dh:hP(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:hP(i.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,pO(fP)];case 4:return r.sent(),[4,pO("fcm_vapid_details_db")];case 5:return r.sent(),[4,pO("undefined")];case 6:return r.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(e)?e:null]}}))}))}var yP="firebase-messaging-database",vP=1,mP="firebase-messaging-store",bP=null;function wP(){return bP=bP||dO(yP,vP,(function(t){0===t.oldVersion&&t.createObjectStore(mP)}))}function _P(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return e=TP(t),[4,wP()];case 1:return[4,r.sent().transaction(mP).objectStore(mP).get(e)];case 2:return(e=r.sent())?[2,e]:[3,3];case 3:return[4,gP(t.appConfig.senderId)];case 4:return(n=r.sent())?[4,EP(t,n)]:[3,6];case 5:return r.sent(),[2,n];case 6:return[2]}}))}))}function EP(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return n=TP(t),[4,wP()];case 1:return[4,(r=(r=i.sent()).transaction(mP,"readwrite")).objectStore(mP).put(e,n)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2,e]}}))}))}function TP(t){return t.appConfig.appId}function IP(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,kP(t)];case 1:n={method:"DELETE",headers:n=i.sent()},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(SP(t.appConfig)+"/"+e,n)];case 3:return[4,i.sent().json()];case 4:if((n=i.sent()).error)throw r=n.error.message,aP.create("token-unsubscribe-failed",{errorInfo:r});return[3,6];case 5:throw r=i.sent(),aP.create("token-unsubscribe-failed",{errorInfo:r});case 6:return[2]}}))}))}function SP(t){return t=t.projectId,uP+"/projects/"+t+"/registrations"}function kP(t){var e=t.appConfig,n=t.installations;return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function CP(t){var e=t.p256dh,n=t.auth;return e={web:{endpoint:t.endpoint,auth:n,p256dh:e}},(t=t.vapidKey)!==sP&&(e.web.applicationPubKey=t),e}function NP(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw aP.create("permission-blocked");return[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");for(var e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(e)})]}}))}))}(e,n)];case 1:return o=a.sent(),[4,_P(t)];case 2:return r=a.sent(),i={vapidKey:n,swScope:e.scope,endpoint:o.endpoint,auth:hP(o.getKey("auth")),p256dh:hP(o.getKey("p256dh"))},r?[3,3]:[2,RP(t,i)];case 3:if(s=r.subscriptionOptions,u=i.vapidKey===s.vapidKey,c=i.endpoint===s.endpoint,l=i.auth===s.auth,s=i.p256dh===s.p256dh,u&&c&&l&&s)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,IP(t,r.token)];case 5:return a.sent(),[3,7];case 6:return o=a.sent(),console.warn(o),[3,7];case 7:return[2,RP(t,i)];case 8:return Date.now()>=r.createTime+6048e5?[2,function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,kP(t)];case 1:n=a.sent(),r=CP(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(SP(t.appConfig)+"/"+e.token,r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),aP.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,aP.create("token-update-failed",{errorInfo:o});if(!i.token)throw aP.create("token-update-no-token");return[2,i.token]}}))}))}(e,t)];case 1:return r=a.sent(),i=$i($i({},t),{token:r,createTime:Date.now()}),[4,EP(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,AP(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}({token:r.token,createTime:Date.now(),subscriptionOptions:i},t,e)]:[2,r.token];case 9:return[2]}var s,u,c,l}))}))}function AP(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,_P(t)];case 1:return(n=r.sent())?[4,IP(t,n.token)]:[3,4];case 2:return r.sent(),[4,function(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return e=TP(t),[4,wP()];case 1:return[4,(n=(n=r.sent()).transaction(mP,"readwrite")).objectStore(mP).delete(e)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}(t)];case 3:r.sent(),r.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(n=r.sent())?[2,n.unsubscribe()]:[2,!0]}}))}))}function RP(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,kP(t)];case 1:n=a.sent(),r=CP(e),r={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(SP(t.appConfig),r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),aP.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,aP.create("token-subscribe-failed",{errorInfo:o});if(!i.token)throw aP.create("token-subscribe-no-token");return[2,i.token]}}))}))}(t,e)];case 1:return n={token:n=r.sent(),createTime:Date.now(),subscriptionOptions:e},[4,EP(t,n)];case 2:return r.sent(),[2,n.token]}}))}))}function xP(t){return"object"==typeof t&&t&&lP in t}function DP(t){return new Promise((function(e){setTimeout(e,t)}))}var OP=(Object.defineProperty(PP.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),PP.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw aP.create("invalid-bg-handler");this.bgMessageHandler=t},PP.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},PP.prototype.getToken=function(){var t;return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return this.vapidKey?[3,2]:[4,_P(this.firebaseDependencies)];case 1:e=n.sent(),this.vapidKey=null!==(t=null===(t=null==e?void 0:e.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==t?t:sP,n.label=2;case 2:return[2,NP(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},PP.prototype.deleteToken=function(){return AP(this.firebaseDependencies,self.registration)},PP.prototype.requestPermission=function(){throw aP.create("only-available-in-window")},PP.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw aP.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw aP.create("invalid-vapid-key");this.vapidKey=t},PP.prototype.useServiceWorker=function(){throw aP.create("only-available-in-window")},PP.prototype.onMessage=function(){throw aP.create("only-available-in-window")},PP.prototype.onTokenRefresh=function(){throw aP.create("only-available-in-window")},PP.prototype.onPush=function(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return(r=function(t){if(!(t=t.data))return null;try{return t.json()}catch(t){return null}}(t))?[4,LP()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(e=i.sent()).some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=oP.PUSH_RECEIVED;try{for(var i=Zi(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(e,r)]:(n=!1,r.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;return e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((c=$i({},(s=r).notification)).data=((u={})[cP]=s,u),c))]:[3,3]);case 2:i.sent(),n=!0,i.label=3;case 3:return!0===n&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=a={from:(o=r).from,collapseKey:o.collapse_key},(u=o).notification&&(s.notification={},(c=u.notification.title)&&(s.notification.title=c),(c=u.notification.body)&&(s.notification.body=c),(u=u.notification.image)&&(s.notification.image=u)),s=a,(u=o).data&&(s.data=u.data),s=a,(u=o).fcmOptions&&(s.fcmOptions={},(o=u.fcmOptions.link)&&(s.fcmOptions.link=o),(u=u.fcmOptions.analytics_label)&&(s.fcmOptions.analyticsLabel=u)),r=a,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(r):this.bgMessageHandler.next(r)),[4,DP(1e3)]);case 4:return i.sent(),[2]}var o,a,s,u,c}))}))},PP.prototype.onSubChange=function(t){var e;return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return t.newSubscription?[3,2]:[4,AP(this.firebaseDependencies,self.registration)];case 1:return r.sent(),[2];case 2:return[4,_P(this.firebaseDependencies)];case 3:return n=r.sent(),[4,AP(this.firebaseDependencies,self.registration)];case 4:return r.sent(),[4,NP(this.firebaseDependencies,self.registration,null!==(e=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==e?e:sP)];case 5:return r.sent(),[2]}}))}))},PP.prototype.onNotificationClick=function(t){var e;return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return(n=null===(e=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===e?void 0:e[cP])?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(r=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;return n||(xP(t.data)?self.location.origin:null)}(n))?(i=new URL(r,self.location.href),o=new URL(self.location.origin),i.host!==o.host?[2]:[4,function(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return[4,LP()];case 1:e=u.sent();try{for(n=Zi(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(u){a={error:u}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}(i)]):[2]):[2];case 1:return(a=s.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return a=s.sent(),[4,DP(3e3)];case 3:return s.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=s.sent(),s.label=6;case 6:return a?(n.messageType=oP.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,a.postMessage(n)]):[2]}}))}))},PP);function PP(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}function LP(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var MP=(Object.defineProperty(FP.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),FP.prototype.messageEventListener=function(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===oP.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(i=Object.assign({},e)).messageType,delete i.isFirebaseMessaging,i)):this.onMessageCallback.next(Object.assign({},e))),xP(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}var i}))}))},FP.prototype.getVapidKey=function(){return this.vapidKey},FP.prototype.getSwReg=function(){return this.swRegistration},FP.prototype.getToken=function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw aP.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,NP(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},FP.prototype.updateVapidKey=function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=sP),[2]}))}))},FP.prototype.updateSwReg=function(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw aP.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},FP.prototype.registerDefaultSw=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=e.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=e.sent(),aP.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},FP.prototype.deleteToken=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,AP(this.firebaseDependencies,this.swRegistration)]}}))}))},FP.prototype.requestPermission=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?aP.create("permission-blocked"):aP.create("permission-default")}}))}))},FP.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw aP.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw aP.create("invalid-vapid-key");this.vapidKey=t},FP.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw aP.create("invalid-sw-registration");if(this.swRegistration)throw aP.create("use-sw-after-get-token");this.swRegistration=t},FP.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},FP.prototype.setBackgroundMessageHandler=function(){throw aP.create("only-available-in-sw")},FP.prototype.onBackgroundMessage=function(){throw aP.create("only-available-in-sw")},FP.prototype.onTokenRefresh=function(){return function(){}},FP.prototype.logEvent=function(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case oP.NOTIFICATION_CLICKED:return"notification_open";case oP.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e[lP],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},FP);function FP(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}function jP(t){return aP.create("missing-app-config-values",{valueName:t})}function UP(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}G={isSupported:UP},Oa.INTERNAL.registerComponent(new na("messaging",(function(t){var e=t.getProvider("app").getImmediate();if(t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw jP("App Configuration Object");if(!t.name)throw jP("App Name");var r=t.options;try{for(var i=Zi(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw jP(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")},!UP())throw aP.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?OP:MP)(t)}),"PUBLIC").setServiceProps(G));var VP,qP="firebasestorage.googleapis.com",BP="storageBucket",zP=(Yi(KP,VP=So),KP.prototype._codeEquals=function(t){return HP(t)===this.code},Object.defineProperty(KP.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),KP);function KP(t,e){return(t=VP.call(this,HP(t),"Firebase Storage: "+e+" ("+HP(t)+")")||this).customData={serverResponse:null},t._baseMessage=t.message,Object.setPrototypeOf(t,KP.prototype),t}function HP(t){return"storage/"+t}function WP(){return new zP("unknown","An unknown error occurred, please check the error payload for server response.")}function GP(){return new zP("canceled","User canceled the upload/download.")}function QP(){return new zP("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function YP(t){return new zP("invalid-argument",t)}function $P(){return new zP("app-deleted","The Firebase app was deleted.")}function XP(t){return new zP("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function JP(t,e){return new zP("invalid-format","String does not match format '"+t+"': "+e)}function ZP(t){throw new zP("internal-error","Internal error: "+t)}var tL={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},eL=function(t,e){this.data=t,this.contentType=e||null};function nL(t,e){switch(t){case tL.RAW:return new eL(rL(e));case tL.BASE64:case tL.BASE64URL:return new eL(iL(t,e));case tL.DATA_URL:return new eL(function(t){return(t=new aL(t)).base64?iL(tL.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw JP(tL.DATA_URL,"Malformed data URL.")}return rL(e)}(t.rest)}(e),new aL(e).contentType)}throw WP()}function rL(t){for(var e=[],n=0;n<t.length;n++){var r,i,o=t.charCodeAt(n);o<=127?e.push(o):o<=2047?e.push(192|o>>6,128|63&o):55296==(64512&o)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=o,i=t.charCodeAt(++n),e.push(240|(o=65536|(1023&r)<<10|1023&i)>>18,128|o>>12&63,128|o>>6&63,128|63&o)):e.push(239,191,189):56320==(64512&o)?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(e)}function iL(t,e){switch(t){case tL.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw JP(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case tL.BASE64URL:if(r=-1!==e.indexOf("+"),n=-1!==e.indexOf("/"),r||n)throw JP(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(e)}catch(e){throw JP(t,"Invalid character found")}for(var o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o}var oL,aL=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw JP(tL.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},sL={STATE_CHANGED:"state_changed"},uL={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cL(t){switch(t){case"running":case"pausing":case"canceling":return uL.RUNNING;case"paused":return uL.PAUSED;case"success":return uL.SUCCESS;case"canceled":return uL.CANCELED;case"error":default:return uL.ERROR}}(W=oL=oL||{})[W.NO_ERROR=0]="NO_ERROR",W[W.NETWORK_ERROR=1]="NETWORK_ERROR",W[W.ABORT=2]="ABORT";var lL=(hL.prototype.send=function(t,e,n,r){if(this.sent_)throw ZP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},hL.prototype.getErrorCode=function(){if(!this.sent_)throw ZP("cannot .getErrorCode() before sending");return this.errorCode_},hL.prototype.getStatus=function(){if(!this.sent_)throw ZP("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},hL.prototype.getResponseText=function(){if(!this.sent_)throw ZP("cannot .getResponseText() before sending");return this.xhr_.responseText},hL.prototype.abort=function(){this.xhr_.abort()},hL.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},hL.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},hL.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},hL);function hL(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=oL.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=oL.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=oL.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}var fL=(dL.prototype.createConnection=function(){return new lL},dL);function dL(){}var pL=(Object.defineProperty(gL.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(gL.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),gL.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},gL.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},gL.makeFromBucketSpec=function(t,e){var n;try{n=gL.makeFromUrl(t,e)}catch(e){return new gL(t,"")}if(""===n.path)return n;throw new zP("invalid-default-bucket","Invalid default bucket '"+t+"'.")},gL.makeFromUrl=function(t,e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=e.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(e===qP?"(?:storage.googleapis.com|storage.cloud.google.com)":e)+"/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){n=new gL(l[c.indices.bucket],l[c.indices.path]||""),c.postModify(n);break}}if(null==n)throw new zP("invalid-url","Invalid URL '"+t+"'.");return n},gL);function gL(t,e){this.bucket=t,this.path_=e}var yL=(vL.prototype.getPromise=function(){return this.promise_},vL.prototype.cancel=function(t){},vL);function vL(t){this.promise_=Promise.reject(t)}function mL(t){return"string"==typeof t||t instanceof String}function bL(t){return wL()&&t instanceof Blob}function wL(){return"undefined"!=typeof Blob}function _L(t,e,n,r){if(r<e)throw YP("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw YP("Invalid value for '"+t+"'. Expected "+n+" or less.")}function EL(t,e){var n=e.match(/^(\w+):\/\/.+/);return(null==(null==n?void 0:n[1])?"https://"+e:e)+"/v0"+t}function TL(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"=")+n(t[e])+"&");return r.slice(0,-1)}var IL=(SL.prototype.start_=function(){var t,e,n,r,i,o,a,s,u,c=this;function l(t,e){var n,r=c.resolve_,i=c.reject_,o=e.connection;if(e.wasSuccessCode)try{var a=c.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(t){i(t)}else null!==o?((n=WP()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?$P:GP)()):i(n=new zP("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function h(){return 2===a}function f(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s||(s=!0,e.apply(null,t))}function d(e){i=setTimeout((function(){i=null,t(p,h())}),e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];s||(t||h()||o?f.call.apply(f,eo([null,t],e)):(r<64&&(r*=2),d(1===a?(a=2,0):1e3*(r+Math.random()))))}function g(t){u||(u=!0,s||(null!==i?(t||(a=2),clearTimeout(i),d(0)):t||(a=1)))}this.canceled_?l(0,new kL(!1,null,!0)):this.backoffId_=(t=function(t,e){var n;function r(t){var e=t.loaded;t=t.lengthComputable?t.total:-1,null!==c.progressCallback_&&c.progressCallback_(e,t)}e?t(!1,new kL(!1,null,!0)):(n=c.pool_.createConnection(),c.pendingConnection_=n,null!==c.progressCallback_&&n.addUploadProgressListener(r),n.send(c.url_,c.method_,c.body_,c.headers_).then((function(){null!==c.progressCallback_&&n.removeUploadProgressListener(r),c.pendingConnection_=null;var e,i=n.getErrorCode()===oL.NO_ERROR,o=n.getStatus();i&&!c.isRetryStatusCode_(o)?(e=-1!==c.successCodes_.indexOf(o),t(!0,new kL(e,n))):(e=n.getErrorCode()===oL.ABORT,t(!1,new kL(!1,null,e)))})))},e=l,n=this.timeout_,i=null,u=s=o=!(r=1),d(a=0),setTimeout((function(){o=!0,g(!0)}),n),g)},SL.prototype.getPromise=function(){return this.promise_},SL.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},SL.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t);return t=-1!==this.additionalRetryCodes_.indexOf(t),e||n||t},SL);function SL(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}var kL=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function CL(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(wL())return new Blob(t);throw new zP("unsupported-environment","This browser doesn't seem to support creating Blobs")}var NL=(AL.prototype.size=function(){return this.size_},AL.prototype.type=function(){return this.type_},AL.prototype.slice=function(t,e){if(bL(this.data_)){var n=this.data_;return null===(r=t,i=e,i=(n=n).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null)?null:new AL(i)}var r,i;return new AL(new Uint8Array(this.data_.buffer,t,e-t),!0)},AL.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(wL()){var n=t.map((function(t){return t instanceof AL?t.data_:t}));return new AL(CL.apply(null,n))}n=t.map((function(t){return mL(t)?nL(tL.RAW,t).data:t.data_}));var r=0;n.forEach((function(t){r+=t.byteLength}));var i=new Uint8Array(r),o=0;return n.forEach((function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]})),new AL(i,!0)},AL.prototype.uploadData=function(){return this.data_},AL);function AL(t,e){var n=0,r="";bL(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}function RL(t){var e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(t=e)||Array.isArray(t)?null:e}function xL(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function DL(t,e){return e}var OL=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||DL},PL=null;function LL(){if(PL)return PL;var t=[];t.push(new OL("bucket")),t.push(new OL("generation")),t.push(new OL("metageneration")),t.push(new OL("name","fullPath",!0));var e=new OL("name");return e.xform=function(t,e){return!mL(e=e)||e.length<2?e:xL(e)},t.push(e),(e=new OL("size")).xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new OL("timeCreated")),t.push(new OL("updated")),t.push(new OL("md5Hash",null,!0)),t.push(new OL("cacheControl",null,!0)),t.push(new OL("contentDisposition",null,!0)),t.push(new OL("contentEncoding",null,!0)),t.push(new OL("contentLanguage",null,!0)),t.push(new OL("contentType",null,!0)),t.push(new OL("metadata","customMetadata",!0)),PL=t}function ML(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath;return r=new pL(n,r),e._makeStorageReference(r)}})}function FL(t,e,n){return null===(e=RL(e))?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return ML(r,t),r}(t,e,n)}function jL(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var UL="prefixes",VL="items";function qL(t,e,n){return null===(n=RL(n))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[UL])for(var i=0,o=n[UL];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new pL(e,a));r.prefixes.push(s)}if(n[VL])for(var u=0,c=n[VL];u<c.length;u++){var l=c[u];s=t._makeStorageReference(new pL(e,l.name)),r.items.push(s)}return r}(t,e,n)}var BL=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function zL(t){if(!t)throw WP()}function KL(t,e){return function(n,r){return zL(null!==(r=FL(t,r,e))),r}}function HL(t,e){return function(n,r){return zL(null!==(r=qL(t,e,r))),r}}function WL(t,e){return function(n,r){var i=FL(t,r,e);return zL(null!==i),function(t,e,n){if(null===(e=RL(e)))return null;if(!mL(e.downloadTokens))return null;if(0===(e=e.downloadTokens).length)return null;var r=encodeURIComponent;return e.split(",").map((function(e){var i=t.bucket,o=t.fullPath;return EL("/b/"+r(i)+"/o/"+r(o),n)+TL({alt:"media",token:e})}))[0]}(i,r,t.host)}}function GL(t){return function(e,n){var r,i=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new zP("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new zP("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(r=t.bucket,new zP("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,new zP("unauthorized","User does not have permission to access '"+i+"'.")):n;return i.serverResponse=n.serverResponse,i}}function QL(t){var e=GL(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(n=t.path,i=new zP("object-not-found","Object '"+n+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function YL(t,e,n){var r=EL(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime;return(i=new BL(r,"GET",KL(t,n),i)).errorHandler=QL(e),i}function $L(t,e,n){return(n=Object.assign({},n)).fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function XL(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=$L(e,r,i);if(i="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+jL(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",null===(r=NL.getBlob(i,r,"\r\n--"+s+"--")))throw QP();return s={name:u.fullPath},u=EL(o,t.host),o=t.maxUploadRetryTime,(o=new BL(u,"POST",KL(t,n),o)).urlParams=s,o.headers=a,o.body=r.uploadData(),o.errorHandler=GL(e),o}var JL=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ZL(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){zL(!1)}return zL(!!n&&-1!==(e||["active"]).indexOf(n)),n}function tM(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=$L(e,r,i);return i={name:a.fullPath},o=EL(o,t.host),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},n=jL(a,n),t=t.maxUploadRetryTime,(t=new BL(o,"POST",(function(t){var e;ZL(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){zL(!1)}return zL(mL(e)),e}),t)).urlParams=i,t.headers=r,t.body=n,t.errorHandler=GL(e),t}function eM(t,e,n,r){return t=t.maxUploadRetryTime,(t=new BL(n,"POST",(function(t){var e=ZL(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){zL(!1)}return n||zL(!1),n=Number(n),zL(!isNaN(n)),new JL(n,r.size(),"final"===e)}),t)).headers={"X-Goog-Upload-Command":"query"},t.errorHandler=GL(e),t}function nM(t,e,n,r,i,o,a,s){var u=new JL(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new zP("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;if(0<i&&(l=Math.min(l,i)),a=u.current,i={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},null===(c=r.slice(a,a+l)))throw QP();return a=e.maxUploadRetryTime,(a=new BL(n,"POST",(function(t,n){var i=ZL(t,["active","final"]),a=u.current+l,s=r.size();return n="final"===i?KL(e,o)(t,n):null,new JL(a,s,"final"===i,n)}),a)).headers=i,a.body=c.uploadData(),a.progressCallback=s||null,a.errorHandler=GL(t),a}var rM=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(this.next=(t=t).next,this.error=t.error,this.complete=t.complete)};function iM(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var oM=(aM.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},aM.prototype._shouldDoResumable=function(t){return 262144<t.size()},aM.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},aM.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},aM.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=tM(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata);n=t._ref.storage._makeRequest(r,e,n),(t._request=n).getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},aM.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=eM(t._ref.storage,t._ref._location,e,t._blob);r=t._ref.storage._makeRequest(i,n,r),(t._request=r).getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},aM.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new JL(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=nM(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(i){return t._error=i,void t._transition("error")}o=t._ref.storage._makeRequest(a,i,o),(t._request=o).getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},aM.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},aM.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=YL(t._ref.storage,t._ref._location,t._mappings);n=t._ref.storage._makeRequest(r,e,n),(t._request=n).getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},aM.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=XL(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata);n=t._ref.storage._makeRequest(r,e,n),(t._request=n).getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},aM.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},aM.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=GP(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},aM.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(aM.prototype,"snapshot",{get:function(){var t=cL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),aM.prototype.on=function(t,e,n,r){var i=this,o=new rM(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},aM.prototype.then=function(t,e){return this._promise.then(t,e)},aM.prototype.catch=function(t){return this.then(null,t)},aM.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},aM.prototype._removeObserver=function(t){-1!==(t=this._observers.indexOf(t))&&this._observers.splice(t,1)},aM.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},aM.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(cL(this._state)){case uL.SUCCESS:iM(this._resolve.bind(null,this.snapshot))();break;case uL.CANCELED:case uL.ERROR:iM(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},aM.prototype._notifyObserver=function(t){switch(cL(this._state)){case uL.RUNNING:case uL.PAUSED:t.next&&iM(t.next.bind(t,this.snapshot))();break;case uL.SUCCESS:t.complete&&iM(t.complete.bind(t))();break;case uL.CANCELED:case uL.ERROR:t.error&&iM(t.error.bind(t,this._error))();break;default:t.error&&iM(t.error.bind(t,this._error))()}},aM.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},aM.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},aM.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},aM);function aM(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=LL(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}var sM=(uM.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},uM.prototype._newRef=function(t,e){return new uM(t,e)},Object.defineProperty(uM.prototype,"root",{get:function(){var t=new pL(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(uM.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(uM.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(uM.prototype,"name",{get:function(){return xL(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(uM.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(uM.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);return null===t?null:(t=new pL(this._location.bucket,t),new uM(this._service,t))},enumerable:!1,configurable:!0}),uM.prototype._throwIfRoot=function(t){if(""===this._location.path)throw XP(t)},uM);function uM(t,e){this._service=t,this._location=e instanceof pL?e:pL.makeFromUrl(e,t.host)}function cM(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Xi(this,void 0,void 0,(function(){var i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,lM(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(o=n.items).push.apply(o,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}function lM(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return null!=e&&"number"==typeof e.maxResults&&_L("options.maxResults",1,1e3,e.maxResults),n=e||{},i=t.storage,o=t._location,a="/",s=n.pageToken,u=n.maxResults,c={},o.isRoot?c.prefix="":c.prefix=o.path+"/",a&&0<a.length&&(c.delimiter=a),s&&(c.pageToken=s),u&&(c.maxResults=u),s=EL(o.bucketOnlyServerUrl(),i.host),u=i.maxOperationRetryTime,(u=new BL(s,"GET",HL(i,o.bucket),u)).urlParams=c,u.errorHandler=GL(o),[4,t.storage.makeRequestWithTokens(u)];case 1:return[2,r.sent().getPromise()]}var i,o,a,s,u,c}))}))}function hM(t,e){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("updateMetadata"),r=t.storage,i=t._location,o=e,a=LL(),s=EL(i.fullServerUrl(),r.host),u=jL(o,a),o=r.maxOperationRetryTime,(o=new BL(s,"PATCH",KL(r,a),o)).headers={"Content-Type":"application/json; charset=utf-8"},o.body=u,o.errorHandler=QL(i),[4,t.storage.makeRequestWithTokens(o)];case 1:return[2,n.sent().getPromise()]}var r,i,o,a,s,u}))}))}function fM(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t._throwIfRoot("getDownloadURL"),n=t.storage,r=t._location,i=LL(),o=EL(r.fullServerUrl(),n.host),a=n.maxOperationRetryTime,(a=new BL(o,"GET",WL(n,i),a)).errorHandler=QL(r),[4,t.storage.makeRequestWithTokens(a)];case 1:return[2,e.sent().getPromise().then((function(t){if(null===t)throw new zP("no-download-url","The given file does not have any download URLs.");return t}))]}var n,r,i,o,a}))}))}function dM(t){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t._throwIfRoot("deleteObject"),n=t.storage,i=EL((r=t._location).fullServerUrl(),n.host),n=n.maxOperationRetryTime,(n=new BL(i,"DELETE",(function(t,e){}),n)).successCodes=[200,204],n.errorHandler=QL(r),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,e.sent().getPromise()]}var n,r,i}))}))}function pM(t,e){var n;return n=t._location.path,e=(e=e).split("/").filter((function(t){return 0<t.length})).join("/"),e=0===n.length?e:n+"/"+e,e=new pL(t._location.bucket,e),new sM(t.storage,e)}function gM(t){return/^[A-Za-z]+:\/\//.test(t)}function yM(t,e){if(t instanceof bM){var n=t;if(null==n._bucket)throw new zP("no-default-bucket","No default bucket found. Did you set the '"+BP+"' property when initializing the app?");return n=new sM(n,n._bucket),null!=e?yM(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw YP('`path` param cannot contain ".."');return pM(t,e)}function vM(t,e){if(e&&gM(e)){if(t instanceof bM)return new sM(t,e);throw YP("To use ref(service, url), the first argument must be a Storage instance.")}return yM(t,e)}function mM(t,e){return null==(e=null==e?void 0:e[BP])?null:pL.makeFromBucketSpec(e,t)}var bM=(Object.defineProperty(wM.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=pL.makeFromBucketSpec(this._url,t):this._bucket=mM(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(wM.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){_L("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(wM.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){_L("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),wM.prototype._getAuthToken=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(t=e.sent()))return[2,t.accessToken];e.label=2;case 2:return[2,null]}}))}))},wM.prototype._getAppCheckToken=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},wM.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},wM.prototype._makeStorageReference=function(t){return new sM(this,t)},wM.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new yL($P());var i,o,a,s,u,c,l=(i=t,o=this._appId,a=e,s=n,u=this._pool,c=this._firebaseVersion,t=TL(i.urlParams),e=i.url+t,t=n=Object.assign({},i.headers),(o=o)&&(t["X-Firebase-GMPID"]=o),o=n,null!==(a=a)&&0<a.length&&(o.Authorization="Firebase "+a),c=c,n["X-Firebase-Storage-Version"]="webjs/"+(null!=c?c:"AppManager"),c=n,null!==(s=s)&&(c["X-Firebase-AppCheck"]=s),new IL(e,i.method,n,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,u));return this._requests.add(l),l.getPromise().then((function(){return r._requests.delete(l)}),(function(){return r._requests.delete(l)})),l},wM.prototype.makeRequestWithTokens=function(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=r.sent(),e=n[0],n=n[1],[2,this._makeRequest(t,e,n)]}}))}))},wM);function wM(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=qP,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?pL.makeFromBucketSpec(i,this._host):mM(this._host,this.app.options)}function _M(t,e,n){return e=e,n=n,(t=t=ea(t))._throwIfRoot("uploadBytesResumable"),new oM(t,new NL(e),n)}function EM(t){return function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=YL(t.storage,t._location,LL()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=ea(t))}function TM(t,e){return vM(t=ea(t),e)}var IM=(Object.defineProperty(SM.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(SM.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(SM.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(SM.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),SM);function SM(t,e,n){this._delegate=t,this.task=e,this.ref=n}var kM=(Object.defineProperty(CM.prototype,"snapshot",{get:function(){return new IM(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),CM.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new IM(e,n,n._ref))}),e)},CM.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new IM(t,i,i._ref))}:{next:e.next?function(t){return e.next(new IM(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},CM);function CM(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var NM=(Object.defineProperty(AM.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new RM(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(AM.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new RM(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(AM.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),AM);function AM(t,e){this._delegate=t,this._service=e}var RM=(Object.defineProperty(xM.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(xM.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(xM.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),xM.prototype.toString=function(){return this._delegate.toString()},xM.prototype.child=function(t){return new xM(pM(this._delegate,t),this.storage)},Object.defineProperty(xM.prototype,"root",{get:function(){return new xM(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(xM.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new xM(t,this.storage)},enumerable:!1,configurable:!0}),xM.prototype.put=function(t,e){return this._throwIfRoot("put"),new kM(_M(this._delegate,t,e),this)},xM.prototype.putString=function(t,e,n){return void 0===e&&(e=tL.RAW),this._throwIfRoot("putString"),t=nL(e,t),null==(n=$i({},n)).contentType&&null!=t.contentType&&(n.contentType=t.contentType),new kM(new oM(this._delegate,new NL(t.data,!0),n),this)},xM.prototype.listAll=function(){var t=this;return cM(ea(this._delegate)).then((function(e){return new NM(e,t.storage)}))},xM.prototype.list=function(t){var e=this;return t=t||void 0,lM(ea(this._delegate),t).then((function(t){return new NM(t,e.storage)}))},xM.prototype.getMetadata=function(){return EM(this._delegate)},xM.prototype.updateMetadata=function(t){return hM(ea(this._delegate),t)},xM.prototype.getDownloadURL=function(){return fM(ea(this._delegate))},xM.prototype.delete=function(){return this._throwIfRoot("delete"),dM(ea(this._delegate))},xM.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw XP(t)},xM);function xM(t,e){this._delegate=t,this.storage=e}var DM,OM,PM=(Object.defineProperty(LM.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(LM.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),LM.prototype.ref=function(t){if(gM(t))throw YP("ref() expected a child path but got a URL, use refFromURL instead.");return new RM(TM(this._delegate,t),this)},LM.prototype.refFromURL=function(t){if(!gM(t))throw YP("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pL.makeFromUrl(t,this._delegate.host)}catch(t){throw YP("refFromUrl() expected a valid full URL but got an invalid one.")}return new RM(TM(this._delegate,t),this)},LM.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},LM.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},LM.prototype.useEmulator=function(t,e){this._delegate.host="http://"+t+":"+e},LM);function LM(t,e){this.app=t,this._delegate=e}function MM(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate();return e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal"),new PM(r,new bM(r,e,t,new fL,n,Oa.SDK_VERSION))}OM={TaskState:uL,TaskEvent:sL,StringFormat:tL,Storage:bM,Reference:RM},(DM=Oa).INTERNAL.registerComponent(new na("storage",MM,"PUBLIC").setServiceProps(OM).setMultipleInstances(!0)),DM.registerVersion("@firebase/storage","0.6.1");var FM,jM,UM="0.4.17",VM="FB-PERF-TRACE-MEASURE",qM="@firebase/performance/config",BM="@firebase/performance/configexpire",zM=(G="Performance",(W={})["trace started"]="Trace {$traceName} was started before.",W["trace stopped"]="Trace {$traceName} is not running.",W["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",W["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",W["no window"]="Window is not available.",W["no app id"]="App id is not available.",W["no project id"]="Project id is not available.",W["no api key"]="Api key is not available.",W["invalid cc log"]="Attempted to queue invalid cc event",W["FB not default"]="Performance can only start when Firebase app instance is the default one.",W["RC response not ok"]="RC response is not ok",W["invalid attribute name"]="Attribute name {$attributeName} is invalid.",W["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",W["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",W["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",new Co("performance",G,W=W)),KM=new ga(G);KM.logLevel=ca.INFO;var HM,WM=(GM.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},GM.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},GM.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},GM.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},GM.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},GM.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},GM.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!wo()||(KM.info("IndexedDB is not supported by current browswer"),!1):(KM.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},GM.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},GM.getInstance=function(){return FM=void 0===FM?new GM(jM):FM},GM);function GM(t){if(!(this.window=t))throw zM.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function QM(t,e){var n=t.length-e.length;if(n<0||1<n)throw zM.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var YM,$M,XM=(JM.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw zM.create("no app id");return t},JM.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw zM.create("no project id");return t},JM.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw zM.create("no api key");return t},JM.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},JM.getInstance=function(){return HM=void 0===HM?new JM:HM},JM);function JM(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=QM("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=QM("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(G=$M=$M||{})[G.UNKNOWN=0]="UNKNOWN",G[G.VISIBLE=1]="VISIBLE",G[G.HIDDEN=2]="HIDDEN";var ZM=["firebase_","google_","ga_"],tF=new RegExp("^[a-zA-Z]\\w*$");function eF(){switch(WM.getInstance().document.visibilityState){case"visible":return $M.VISIBLE;case"hidden":return $M.HIDDEN;default:return $M.UNKNOWN}}var nF="0.0.1",rF={loggingEnabled:!0},iF="FIREBASE_INSTALLATIONS_AUTH";function oF(t){var e,n=function(){var t=WM.getInstance().localStorage;if(t){var e=t.getItem(BM);if(e&&function(t){return Number(t)>Date.now()}(e)&&(t=t.getItem(qM)))try{return JSON.parse(t)}catch(t){return}}}();return n?(sF(n),Promise.resolve()):(e=t,function(){var t=XM.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+XM.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+XM.getInstance().getApiKey();return t=new Request(n,{method:"POST",headers:{Authorization:iF+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:XM.getInstance().getAppId(),app_version:UM,sdk_version:nF})}),fetch(t).then((function(t){if(t.ok)return t.json();throw zM.create("RC response not ok")}))})).catch((function(){KM.info(aF)})).then(sF).then((function(t){var e;e=t,t=WM.getInstance().localStorage,e&&t&&(t.setItem(qM,JSON.stringify(e)),t.setItem(BM,String(Date.now()+60*XM.getInstance().configTimeToLive*60*1e3)))}),(function(){})))}var aF="Could not fetch config, will use default configs";function sF(t){if(!t)return t;var e=XM.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=rF.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=uF(e.tracesSamplingRate),e.logNetworkAfterSampling=uF(e.networkRequestsSamplingRate),t}function uF(t){return Math.random()<=t}var cF,lF=1;function hF(){return lF=2,cF=cF||function(){var t=WM.getInstance().document;return new Promise((function(e){var n;t&&"complete"!==t.readyState?(n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())},t.addEventListener("readystatechange",n)):e()}))}().then((function(){return(t=XM.getInstance().installationsService.getId()).then((function(t){YM=t})),t;var t})).then(oF).then(fF,fF)}function fF(){lF=3}var dF,pF=1e4,gF=5500,yF=3,vF=1e3,mF=yF,bF=[],wF=!1;function _F(t){setTimeout((function(){var t,e;if(0!==mF)return bF.length?(e=(t=bF.splice(0,vF)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=XM.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||KM.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=pF;isNaN(n)||(r=Math.max(n,r)),t=t.logResponseDetails,Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(bF=eo(eo([],e),bF),KM.info("Retry transport request later.")),mF=yF,_F(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:XM.getInstance().logSource,log_event:e},t).catch((function(){bF=eo(eo([],t),bF),mF--,KM.info("Tries left: "+mF+"."),_F(pF)}))):_F(pF)}),t)}function EF(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!function(t){if(!t.eventTime||!t.message)throw zM.create("invalid cc log");bF=eo(eo([],bF),[t])}({message:t.apply(void 0,e),eventTime:Date.now()})}}function TF(t,e){(dF=dF||EF(kF))(t,e)}function IF(t){var e=XM.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&WM.getInstance().requiredApisAvailable()&&(t.isAuto&&eF()!==$M.VISIBLE||(3===lF?SF(t):hF().then((function(){return SF(t)}),(function(){return SF(t)}))))}function SF(t){var e;!YM||(e=XM.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return TF(t,1)}),0)}function kF(t,e){return(0===e?function(t){return t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:CF(),network_request_metric:t},JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};return 0!==Object.keys(t.counters).length&&(e.counters=t.counters),t=t.getAttributes(),0!==Object.keys(t).length&&(e.custom_attributes=t),e={application_info:CF(),trace_metric:e},JSON.stringify(e)})(t)}function CF(){return{google_app_id:XM.getInstance().getAppId(),app_instance_id:YM,web_app_info:{sdk_version:UM,page_url:WM.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=WM.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:eF(),effective_connection_type:function(){var t=WM.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var NF=["_fp","_fcp","_fid"],AF=(RF.prototype.start=function(){if(1!==this.state)throw zM.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},RF.prototype.stop=function(){if(2!==this.state)throw zM.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),IF(this)},RF.prototype.record=function(t,e,n){if(t<=0)throw zM.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw zM.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=$i({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}IF(this)},RF.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},RF.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<NF.indexOf(n))&&n.startsWith("_"))throw zM.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&KM.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},RF.prototype.getMetric=function(t){return this.counters[t]||0},RF.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length)&&!ZM.some((function(t){return n.startsWith(t)}))&&!!n.match(tF),i=0!==(i=e).length&&i.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw zM.create("invalid attribute name",{attributeName:t});if(!i)throw zM.create("invalid attribute value",{attributeValue:e})}},RF.prototype.getAttribute=function(t){return this.customAttributes[t]},RF.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},RF.prototype.getAttributes=function(){return $i({},this.customAttributes)},RF.prototype.setStartTime=function(t){this.startTimeUs=t},RF.prototype.setDuration=function(t){this.durationUs=t},RF.prototype.calculateTraceMetrics=function(){var t;(t=(t=this.api.getEntriesByName(this.traceMeasure))&&t[0])&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},RF.createOobTrace=function(t,e,n){var r,i=WM.getInstance().getUrl();i&&(r=new RF("_wt_"+i,!0),i=Math.floor(1e3*WM.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find((function(t){return"first-paint"===t.name})))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find((function(t){return"first-contentful-paint"===t.name})))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),IF(r))},RF.createUserTimingTrace=function(t){IF(new RF(t,!1,t))},RF);function RF(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=WM.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||VM+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function xF(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=WM.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=XM.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout((function(){return TF(e,0)}),0)))}var DF=5e3;function OF(){YM&&(setTimeout((function(){var t,e=WM.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");e.onFirstInputDelay?(t=setTimeout((function(){AF.createOobTrace(n,r),t=void 0}),DF),e.onFirstInputDelay((function(e){t&&(clearTimeout(t),AF.createOobTrace(n,r,e))}))):AF.createOobTrace(n,r)}),0),setTimeout((function(){for(var t=WM.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)xF(n[e]);t.setupObserver("resource",xF)}),0),setTimeout((function(){for(var t=WM.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)PF(n[e]);t.setupObserver("measure",PF)}),0))}function PF(t){(t=t.name).substring(0,VM.length)!==VM&&AF.createUserTimingTrace(t)}var LF,MF=(FF.prototype.trace=function(t){return new AF(t)},Object.defineProperty(FF.prototype,"instrumentationEnabled",{get:function(){return XM.getInstance().instrumentationEnabled},set:function(t){XM.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(FF.prototype,"dataCollectionEnabled",{get:function(){return XM.getInstance().dataCollectionEnabled},set:function(t){XM.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),FF);function FF(t){this.app=t,WM.getInstance().requiredApisAvailable()&&_o().then((function(t){t&&(wF||(_F(gF),wF=!0),hF().then(OF,OF))})).catch((function(t){KM.info("Environment doesn't support IndexedDB: "+t)}))}function jF(t,e){if("[DEFAULT]"!==t.name)throw zM.create("FB not default");if("undefined"==typeof window)throw zM.create("no window");return jM=window,XM.getInstance().firebaseAppInstance=t,XM.getInstance().installationsService=e,new MF(t)}(LF=Oa).INTERNAL.registerComponent(new na("performance",(function(t){return jF(t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate())}),"PUBLIC")),LF.registerVersion("@firebase/performance","0.4.17");var UF,VF,qF="firebase_id",BF="origin",zF=6e4,KF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",HF="https://www.googletagmanager.com/gtag/js";(G=UF=UF||{}).EVENT="event",G.SET="set",G.CONFIG="config",(G=VF=VF||{}).ADD_SHIPPING_INFO="add_shipping_info",G.ADD_PAYMENT_INFO="add_payment_info",G.ADD_TO_CART="add_to_cart",G.ADD_TO_WISHLIST="add_to_wishlist",G.BEGIN_CHECKOUT="begin_checkout",G.CHECKOUT_PROGRESS="checkout_progress",G.EXCEPTION="exception",G.GENERATE_LEAD="generate_lead",G.LOGIN="login",G.PAGE_VIEW="page_view",G.PURCHASE="purchase",G.REFUND="refund",G.REMOVE_FROM_CART="remove_from_cart",G.SCREEN_VIEW="screen_view",G.SEARCH="search",G.SELECT_CONTENT="select_content",G.SELECT_ITEM="select_item",G.SELECT_PROMOTION="select_promotion",G.SET_CHECKOUT_OPTION="set_checkout_option",G.SHARE="share",G.SIGN_UP="sign_up",G.TIMING_COMPLETE="timing_complete",G.VIEW_CART="view_cart",G.VIEW_ITEM="view_item",G.VIEW_ITEM_LIST="view_item_list",G.VIEW_PROMOTION="view_promotion",G.VIEW_SEARCH_RESULTS="view_search_results";var WF=new ga("@firebase/analytics");function GF(t,e,n,r){return function(i,o,a){return Xi(this,void 0,void 0,(function(){var s;return Ji(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==UF.EVENT?[3,2]:[4,function(t,e,n,r,i){return Xi(this,void 0,void 0,(function(){var o,a,s,u,c,l,h;return Ji(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(h=i.send_to,Array.isArray(h)||(h=[h]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),s=function(t){var n;if(!(n=(n=a.find((function(e){return e.measurementId===t})))&&e[n.appId]))return o=[],"break";o.push(n)},u=0,c=h;u<c.length&&(l=c[u],"break"!==s(l));u++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(UF.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),WF.error(h),[3,5];case 5:return[2]}}))}))}(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==UF.CONFIG?[3,4]:[4,function(t,e,n,r,i,o){return Xi(this,void 0,void 0,(function(){var a,s;return Ji(this,(function(u){switch(u.label){case 0:a=r[i],u.label=1;case 1:return u.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return u.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return(s=(s=u.sent()).find((function(t){return t.measurementId===i})))?[4,e[s.appId]]:[3,6];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:return s=u.sent(),WF.error(s),[3,8];case 8:return t(UF.CONFIG,i,o),[2]}}))}))}(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(UF.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),WF.error(s),[3,7];case 7:return[2]}}))}))}}(G={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",G["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",G["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",G["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",G["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",G["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",G["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",G["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',G["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.';var QF=new Co("analytics","Analytics",G=G),YF=30;function $F(t,e){void 0===e&&(e=1e3),this.throttleMetadata=t=void 0===t?{}:t,this.intervalMillis=e}var XF=new($F.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},$F.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},$F.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},$F);function JF(t){var e;return Xi(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return n=t.appId,o=t.apiKey,o={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":o})},n=KF.replace("{app-id}",n),[4,fetch(n,o)];case 1:if(200===(r=a.sent()).status||304===r.status)return[3,6];i="",a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.json()];case 3:return o=a.sent(),null!==(e=o.error)&&void 0!==e&&e.message&&(i=o.error.message),[3,5];case 4:return a.sent(),[3,5];case 5:throw QF.create("config-fetch-failed",{httpStatus:r.status,responseMessage:i});case 6:return[2,r.json()]}}))}))}function ZF(t,e,n){return void 0===e&&(e=XF),Xi(this,void 0,void 0,(function(){var r,i,o,a,s,u=this;return Ji(this,(function(c){if(a=t.options,r=a.appId,i=a.apiKey,o=a.measurementId,!r)throw QF.create("no-app-id");if(i)return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new nj,setTimeout((function(){return Xi(u,void 0,void 0,(function(){return Ji(this,(function(t){return s.abort(),[2]}))}))}),void 0!==n?n:zF),[2,function t(e,n,r,i){var o=n.throttleEndTimeMillis,a=n.backoffCount;return void 0===i&&(i=XF),Xi(this,void 0,void 0,(function(){var n,s,u,c,l;return Ji(this,(function(h){switch(h.label){case 0:n=e.appId,s=e.measurementId,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,tj(r,o)];case 2:return h.sent(),[3,4];case 3:if(c=h.sent(),s)return WF.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:n,measurementId:s}];throw c;case 4:return h.trys.push([4,6,,7]),[4,JF(e)];case 5:return l=h.sent(),i.deleteThrottleMetadata(n),[2,l];case 6:if(ej(u=h.sent()))return c=503===Number(u.customData.httpStatus)?ta(a,i.intervalMillis,YF):ta(a,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:a+1},i.setThrottleMetadata(n,l),WF.debug("Calling attemptFetch again in "+c+" millis"),[2,t(e,l,r,i)];if(i.deleteThrottleMetadata(n),s)return WF.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:n,measurementId:s}];throw u;case 7:return[2]}}))}))}({appId:r,apiKey:i,measurementId:o},a,s,e)];if(o)return[2,{measurementId:o,appId:r}];throw QF.create("no-api-key")}))}))}function tj(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(QF.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function ej(t){if(t instanceof So&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}var nj=(rj.prototype.addEventListener=function(t){this.listeners.push(t)},rj.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},rj);function rj(){this.listeners=[]}function ij(t,e,n,r,i,o){return Xi(this,void 0,void 0,(function(){var a,s,u;return Ji(this,(function(c){switch(c.label){case 0:return(a=ZF(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&WF.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return WF.error(t)})),e.push(a),s=function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return wo()?[3,1]:(WF.warn(QF.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,_o()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),WF.warn(QF.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){if(t)return r.getId()})),[4,Promise.all([a,s])];case 1:return u=c.sent(),a=u[0],s=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(HF))return r}}()||(l=o,h=a.measurementId,(f=document.createElement("script")).src=HF+"?l="+l+"&id="+h,f.async=!0,document.head.appendChild(f)),i("js",new Date),(u={})[BF]="firebase",u.update=!0,u=u,null!=s&&(u[qF]=s),i(UF.CONFIG,a.measurementId,u),[2,a.measurementId]}var l,h,f}))}))}var oj,aj,sj={},uj=[],cj={},lj="dataLayer",hj="gtag",fj=!1;function dj(t){if(fj)throw QF.create("already-initialized");t.dataLayerName&&(lj=t.dataLayerName),t.gtagName&&(hj=t.gtagName)}function pj(t,e){i=[],vo()&&i.push("This is a browser extension environment."),Eo()||i.push("Cookies are not available."),0<i.length&&(i=i.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),i=QF.create("invalid-analytics-context",{errorInfo:i}),WF.warn(i.message));var n,r,i,o=t.options.appId;if(!o)throw QF.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw QF.create("no-api-key");WF.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=sj[o])throw QF.create("already-exists",{id:o});return fj||(r=lj,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i,n=lj,r=hj,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)},window[r]&&"function"==typeof window[r]&&(i=window[r]),window[r]=GF(i,sj,uj,cj),r={gtagCore:i,wrappedGtag:window[r]},aj=r.wrappedGtag,oj=r.gtagCore,fj=!0),sj[o]=ij(t,uj,cj,e,oj,lj),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Xi(this,void 0,void 0,(function(){var o;return Ji(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(UF.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),o=$i($i({},r),{send_to:o}),t(UF.EVENT,n,o),a.label=3;case 3:return[2]}}))}))})(aj,sj[o],t,e,n).catch((function(t){return WF.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i;return Ji(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(UF.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(UF.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(aj,sj[o],t,e).catch((function(t){return WF.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i;return Ji(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(UF.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(UF.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(aj,sj[o],t,e).catch((function(t){return WF.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a,s,u;return Ji(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(UF.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(UF.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(aj,sj[o],t,e).catch((function(t){return WF.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Xi(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(sj[o],t).catch((function(t){return WF.error(t)}))},INTERNAL:{delete:function(){return delete sj[o],Promise.resolve()}}}}var gj,yj="analytics";function vj(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:if(vo())return[2,!1];if(!Eo())return[2,!1];if(!wo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,_o()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}(gj=Oa).INTERNAL.registerComponent(new na(yj,(function(t){return pj(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:dj,EventName:VF,isSupported:vj})),gj.INTERNAL.registerComponent(new na("analytics-internal",(function(t){try{return{logEvent:t.getProvider(yj).getImmediate().logEvent}}catch(t){throw QF.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),gj.registerVersion("@firebase/analytics","0.6.16");var mj=(bj.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e;return e=n<=t,this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},bj.prototype.fetch=function(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return r=i.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return n=i.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return i.sent(),[2,n]}}))}))},bj);function bj(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}(G={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",G["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",G["registration-api-key"]="Undefined API key. Check Firebase app initialization.",G["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",G["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",G["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",G["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",G["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",G["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",G["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',G["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',G["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",G["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.";var wj=new Co("remoteconfig","Remote Config",G=G),_j=(Ej.prototype.fetch=function(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l;return Ji(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:i=h.sent(),e=i[0],r=i[1],n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",i=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,n={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},r={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:r,app_id:this.appId,language_code:(f=void 0===f?navigator:f).languages&&f.languages[0]||f.language},r={method:"POST",headers:n,body:JSON.stringify(r)},i=fetch(i,r),r=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Promise.race([i,r])];case 3:return h.sent(),[4,i];case 4:return l=h.sent(),[3,6];case 5:throw r=h.sent(),i="fetch-client-network","AbortError"===r.name&&(i="fetch-timeout"),wj.create(i,{originalErrorMessage:r.message});case 6:if(o=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];c=void 0,h.label=7;case 7:return h.trys.push([7,9,,10]),[4,l.json()];case 8:return c=h.sent(),[3,10];case 9:throw l=h.sent(),wj.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:s=c.entries,u=c.state,h.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===u?o=500:"NO_CHANGE"===u?o=304:"NO_TEMPLATE"!==u&&"EMPTY_CONFIG"!==u||(s={}),304!==o&&200!==o)throw wj.create("fetch-status",{httpStatus:o});return[2,{status:o,eTag:a,config:s}]}var f}))}))},Ej);function Ej(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var Tj=(Ij.prototype.addEventListener=function(t){this.listeners.push(t)},Ij.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},Ij);function Ij(){this.listeners=[]}var Sj=["1","true","t","yes","y","on"],kj=(Cj.prototype.asString=function(){return this._value},Cj.prototype.asBoolean=function(){return"static"!==this._source&&0<=Sj.indexOf(this._value.toLowerCase())},Cj.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)?0:t},Cj.prototype.getSource=function(){return this._source},Cj);function Cj(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var Nj=(Aj.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ca.DEBUG;break;case"silent":this._logger.logLevel=ca.SILENT;break;default:this._logger.logLevel=ca.ERROR}},Object.defineProperty(Aj.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(Aj.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),Aj.prototype.activate=function(){return Xi(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=n.sent(),t=e[0],e=e[1],t&&t.config&&t.eTag&&t.eTag!==e?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return n.sent(),[2,!0]}}))}))},Aj.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},Aj.prototype.fetch=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r=this;return Ji(this,(function(i){switch(i.label){case 0:t=new Tj,setTimeout((function(){return Xi(r,void 0,void 0,(function(){return Ji(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),a="fetch-throttle",n=(o=e)instanceof So&&-1!==o.code.indexOf(a)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o,a}))}))},Aj.prototype.fetchAndActivate=function(){return Xi(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},Aj.prototype.getAll=function(){var t=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys($i($i({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},Aj.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},Aj.prototype.getNumber=function(t){return this.getValue(t).asNumber()},Aj.prototype.getString=function(t){return this.getValue(t).asString()},Aj.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new kj("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new kj("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new kj("static"))},Aj);function Aj(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function Rj(t,e){return t=t.target.error||void 0,wj.create(e,{originalErrorMessage:t&&t.message})}var xj="app_namespace_store",Dj="firebase_remote_config",Oj=1,Pj=(Lj.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},Lj.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},Lj.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},Lj.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},Lj.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},Lj.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},Lj.prototype.getActiveConfig=function(){return this.get("active_config")},Lj.prototype.setActiveConfig=function(t){return this.set("active_config",t)},Lj.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},Lj.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},Lj.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},Lj.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},Lj.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},Lj.prototype.get=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([xj],"readonly").objectStore(xj),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(Rj(t,"storage-get"))},s.onsuccess=function(t){t=t.target.result,r(t?t.value:void 0)}}catch(o){i(wj.create("storage-get",{originalErrorMessage:o&&o.message}))}}))]}}))}))},Lj.prototype.set=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r=this;return Ji(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([xj],"readwrite").objectStore(xj),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(Rj(t,"storage-set"))},u.onsuccess=function(){i()}}catch(i){o(wj.create("storage-set",{originalErrorMessage:i&&i.message}))}}))]}}))}))},Lj.prototype.delete=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([xj],"readwrite").objectStore(xj),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(Rj(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(r){i(wj.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},Lj.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},Lj);function Lj(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open(Dj,Oj);n.onerror=function(t){e(Rj(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(xj,{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var Mj=(Fj.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},Fj.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},Fj.prototype.getActiveConfig=function(){return this.activeConfig},Fj.prototype.loadFromStorage=function(){return Xi(this,void 0,void 0,(function(){var t,e,n;return Ji(this,(function(r){switch(r.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(t=r.sent())&&(this.lastFetchStatus=t),[4,e];case 2:return(e=r.sent())&&(this.lastSuccessfulFetchTimestampMillis=e),[4,n];case 3:return(n=r.sent())&&(this.activeConfig=n),[2]}}))}))},Fj.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},Fj.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},Fj.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},Fj);function Fj(t){this.storage=t}var jj=(Uj.prototype.fetch=function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},Uj.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Xi(this,void 0,void 0,(function(){var e,i;return Ji(this,(function(o){switch(o.label){case 0:return[4,(a=t.signal,s=n,new Promise((function(t,e){var n=Math.max(s-Date.now(),0),r=setTimeout(t,n);a.addEventListener((function(){clearTimeout(r),e(wj.create("fetch-throttle",{throttleEndTimeMillis:s}))}))})))];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=o.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return o.sent(),[2,e];case 5:if(!function(t){if(t instanceof So&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(i=o.sent()))throw i;return i={throttleEndTimeMillis:Date.now()+ta(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(i)];case 6:return o.sent(),[2,this.attemptFetch(t,i)];case 7:return[2]}var a,s}))}))},Uj);function Uj(t,e){this.client=t,this.storage=e}var Vj,qj="@firebase/remote-config";(Vj=Oa).INTERNAL.registerComponent(new na("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw wj.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw wj.create("registration-project-id");if(!s)throw wj.create("registration-api-key");if(!u)throw wj.create("registration-app-id");return n=n||"firebase",e=new Pj(u,r.name,n),t=new Mj(e),(o=new ga(qj)).logLevel=ca.ERROR,u=new _j(i,Vj.SDK_VERSION,n,a,s,u),u=new jj(u,e),u=new mj(u,e,t,o),(o=new Nj(r,u,t,e,o)).ensureInitialized(),o}),"PUBLIC").setMultipleInstances(!0)),Vj.registerVersion(qj,"0.1.42"),(G={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",G["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",G["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",G["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",G["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",G["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",G["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",G["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",G["recaptcha-error"]="ReCAPTCHA error.";var Bj=new Co("appCheck","AppCheck",G=G),zj=new Map,Kj={activated:!1,tokenObservers:[]},Hj={enabled:!1};function Wj(t){return zj.get(t)||Kj}function Gj(t,e){zj.set(t,e)}function Qj(){return self.grecaptcha}function Yj(t){if(!Wj(t).activated)throw Bj.create("use-before-activation",{appName:t.name})}var $j="https://www.google.com/recaptcha/api.js";function Xj(t,e){var n=Wj(t),r=new lo;Gj(t,$i($i({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a=Qj();return a?a.ready((function(){Jj(t,e,a,i),r.resolve(a)})):(n=function(){var n=Qj();if(!n)throw new Error("no recaptcha");n.ready((function(){Jj(t,e,n,i),r.resolve(n)}))},(o=document.createElement("script")).src=""+$j,o.onload=n,document.head.appendChild(o)),r.promise}function Jj(t,e,n,r){r=n.render(r,{sitekey:e,size:"invisible"}),e=Wj(t),Gj(t,$i($i({},e),{reCAPTCHAState:$i($i({},e.reCAPTCHAState),{widgetId:r})}))}var Zj="https://content-firebaseappcheck.googleapis.com/v1beta",tU="exchangeRecaptchaToken",eU="exchangeDebugToken",nU={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},rU=(iU.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},iU.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},iU.prototype.isRunning=function(){return!!this.pending},iU.prototype.process=function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new lo,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new lo,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},iU.prototype.getNextRun=function(t){return t?(this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration()):(t=this.nextErrorWaitInterval,this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t)},iU);function iU(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,i<(this.nextErrorWaitInterval=r))throw new Error("Proactive refresh lower bound greater than upper bound!")}function oU(t,e){var n=t.url,r=t.body;return Xi(this,void 0,void 0,(function(){var t,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:i={"Content-Type":"application/json"},(t=e.getImmediate({optional:!0}))&&(i["X-Firebase-Client"]=t.getPlatformInfoString()),i={method:"POST",body:JSON.stringify(r),headers:i},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(n,i)];case 2:return s=u.sent(),[3,4];case 3:throw i=u.sent(),Bj.create("fetch-network-error",{originalErrorMessage:i.message});case 4:if(200!==s.status)throw Bj.create("fetch-status-error",{httpStatus:s.status});u.label=5;case 5:return u.trys.push([5,7,,8]),[4,s.json()];case 6:return o=u.sent(),[3,8];case 7:throw a=u.sent(),Bj.create("fetch-parse-error",{originalErrorMessage:a.message});case 8:if(!(s=o.ttl.match(/^([\d.]+)(s)$/))||!s[2]||isNaN(Number(s[1])))throw Bj.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+o.ttl});return a=1e3*Number(s[1]),s=Date.now(),[2,{token:o.attestationToken,expireTimeMillis:s+a,issuedAtTimeMillis:s}]}}))}))}function aU(t,e){var n=(r=t.options).projectId,r=(t=r.appId,r.apiKey);return{url:Zj+"/projects/"+n+"/apps/"+t+":"+eU+"?key="+r,body:{debug_token:e}}}var sU="firebase-app-check-database",uU=1,cU="firebase-app-check-store",lU="debug-token",hU=null;function fU(){return hU=hU||new Promise((function(t,e){try{var n=indexedDB.open(sU,uU);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){e(Bj.create("storage-open",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(cU,{keyPath:"compositeKey"})}}catch(n){e(Bj.create("storage-open",{originalErrorMessage:n.message}))}}))}function dU(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return[4,fU()];case 1:return r=o.sent(),n=r.transaction(cU,"readwrite"),r=n.objectStore(cU),i=r.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){i.onsuccess=function(e){t()},n.onerror=function(t){e(Bj.create("storage-set",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))}}))]}}))}))}function pU(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,fU()];case 1:return n=i.sent(),e=n.transaction(cU,"readonly"),n=e.objectStore(cU),r=n.get(t),[2,new Promise((function(t,n){r.onsuccess=function(e){e=e.target.result,t(e?e.value:void 0)},e.onerror=function(t){n(Bj.create("storage-get",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))}}))]}}))}))}function gU(t){return t.options.appId+"-"+t.name}var yU=new ga("@firebase/app-check");function vU(t){return Xi(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:if(!wo())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,pU(gU(t))];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),yU.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function mU(t,e){return wo()?dU(gU(t),e).catch((function(t){yU.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function bU(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:t=void 0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,pU(lU)];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),dU(lU,t).catch((function(t){return yU.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work")),[2,t]}}))}))}var wU={error:"UNKNOWN_ERROR"};function _U(t,e,n){return void 0===n&&(n=!1),Xi(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return Ji(this,(function(d){switch(d.label){case 0:return Yj(t),r=Wj(t),i=r.token,o=void 0,i?[3,2]:[4,vU(t)];case 1:(a=d.sent())&&SU(a)&&(i=a,Gj(t,$i($i({},r),{token:i})),IU(t,{token:i.token})),d.label=2;case 2:return!n&&i&&SU(i)?[2,{token:i.token}]:Hj.enabled?(s=oU,u=aU,c=[t],[4,function(){return Xi(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){if((t=Hj).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}()]):[3,6];case 3:return[4,s.apply(void 0,[u.apply(void 0,c.concat([d.sent()])),e])];case 4:return l=d.sent(),[4,mU(t,l)];case 5:return d.sent(),Gj(t,$i($i({},r),{token:l})),[2,{token:l.token}];case 6:return d.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return c=d.sent(),l=null!==(l=Oo(c.token))&&l<Date.now()&&0<l?1e3*l:Date.now(),i=$i($i({},c),{issuedAtTimeMillis:l}),[3,11];case 8:return[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return Yj(t),[4,Wj(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=Wj(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}(t).catch((function(t){throw Bj.create("recaptcha-error")}))];case 9:return h=d.sent(),[4,oU((p=t,g=(y=t.options).projectId,p=y.appId,y=y.apiKey,{url:Zj+"/projects/"+g+"/apps/"+p+":"+tU+"?key="+y,body:{recaptcha_token:h}}),e)];case 10:i=d.sent(),d.label=11;case 11:return[3,13];case 12:return h=d.sent(),yU.error(h),o=h,[3,13];case 13:return i?[3,14]:(y=o,f={token:function(t){return so.encodeString(JSON.stringify(t),!1)}(wU),error:y},[3,16]);case 14:return f={token:i.token},Gj(t,$i($i({},r),{token:i})),[4,mU(t,i)];case 15:d.sent(),d.label=16;case 16:return IU(t,f),[2,f]}var p,g,y}))}))}function EU(t,e,n,r,i){var o,a=Wj(t);n={next:r,error:i,type:n},(n=$i($i({},a),{tokenObservers:eo(eo([],a.tokenObservers),[n])})).tokenRefresher||(e=function(t,e){var n=this;return new rU((function(){return Xi(n,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return Wj(t).token?[3,2]:[4,_U(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,_U(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){if((n=Wj(t)).token){var e=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5,n=n.token.expireTimeMillis-3e5;return e=Math.min(e,n),Math.max(0,e-Date.now())}return 0}),nU.RETRIAL_MIN_WAIT,nU.RETRIAL_MAX_WAIT)}(t,e),n.tokenRefresher=e),!n.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&n.tokenRefresher.start(),a.token&&SU(a.token)&&(o=a.token,Promise.resolve().then((function(){return r({token:o.token})})).catch((function(){}))),Gj(t,n)}function TU(t,e){var n=Wj(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Gj(t,$i($i({},n),{tokenObservers:r}))}function IU(t,e){for(var n=0,r=Wj(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(t){}}}function SU(t){return 0<t.expireTimeMillis-Date.now()}function kU(t,e){return{app:t,activate:function(e,n){return function(t,e,n){var r=Wj(t);if(r.activated)throw Bj.create("already-activated",{appName:t.name});r=$i($i({},r),{activated:!0}),"string"==typeof e?r.siteKey=e:r.customProvider=e,r.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,Gj(t,r),r.siteKey&&Xj(t,r.siteKey).catch((function(){}))}(t,e,n)},setTokenAutoRefreshEnabled:function(e){return r=e,(e=Wj(n=t)).tokenRefresher&&(!0===r?e.tokenRefresher.start():e.tokenRefresher.stop()),void Gj(n,$i($i({},e),{isTokenAutoRefreshEnabled:r}));var n,r},getToken:function(n){return function(t,e,n){return Xi(this,void 0,void 0,(function(){var r;return Ji(this,(function(i){switch(i.label){case 0:return[4,_U(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return o=t,a=e,s=r,u=function(){},r=function(){},u=null!=(n=n).next?n.next.bind(n):n,null!=n.error?r=n.error.bind(n):s&&(r=s),EU(o,a,"EXTERNAL",u,r),function(){return TU(o,u)};var o,a,s,u},INTERNAL:{delete:function(){for(var e=0,n=Wj(t).tokenObservers;e<n.length;e++){var r=n[e];TU(t,r.next)}return Promise.resolve()}}}}var CU,NU,AU,RU,xU="app-check-internal";return(CU=Oa).INTERNAL.registerComponent(new na("appCheck",(function(t){return kU(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider(xU).initialize()}))),CU.INTERNAL.registerComponent(new na(xU,(function(t){var e,n,r=t.getProvider("app").getImmediate();return t=t.getProvider("platform-logger"),e=r,n=t,{getToken:function(t){return _U(e,n,t)},addTokenListener:function(t){return EU(e,n,"INTERNAL",t)},removeTokenListener:function(t){return TU(e,t)}}}),"PUBLIC").setInstantiationMode("EXPLICIT")),CU.registerVersion("@firebase/app-check","0.2.1"),"string"!=typeof(RU=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof e)return e;throw new Error("Unable to locate global object.")}()).FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==RU.FIREBASE_APPCHECK_DEBUG_TOKEN||((NU=Hj).enabled=!0,AU=new lo,NU.token=AU,"string"==typeof RU.FIREBASE_APPCHECK_DEBUG_TOKEN?AU.resolve(RU.FIREBASE_APPCHECK_DEBUG_TOKEN):AU.resolve(bU())),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Oa.registerVersion("firebase","8.8.1","cdn"),Oa}()}).call(this,n(12),n(21))},,function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(40)},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(18),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,u=60112;e.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),e.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}function v(){}function m(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var b=m.prototype=new v;b.constructor=m,r(b,y.prototype),b.isPureReactComponent=!0;var w={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)_.call(e,r)&&!E.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:w.current}}function I(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var S=/\/+/g;function k(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function C(t,e,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=t),t=""===r?"."+k(u,0):r,Array.isArray(a)?(n="",null!=t&&(n=t.replace(S,"$&/")+"/"),C(a,e,n,"",(function(t){return t}))):null!=a&&(I(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+t)),e.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=r+k(s=t[c],c);u+=C(s,e,n,l,a)}else if("function"===typeof(l=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t)))for(t=l.call(t),c=0;!(s=t.next()).done;)u+=C(s=s.value,e,n,l=r+k(s,c++),a);else if("object"===s)throw e=""+t,Error(d(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function N(t,e,n){if(null==t)return t;var r=[],i=0;return C(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function A(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var R={current:null};function x(){var t=R.current;if(null===t)throw Error(d(321));return t}var D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:N,forEach:function(t,e,n){N(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return N(t,(function(){e++})),e},toArray:function(t){return N(t,(function(t){return t}))||[]},only:function(t){if(!I(t))throw Error(d(143));return t}},e.Component=y,e.PureComponent=m,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(d(267,t));var o=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=w.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)_.call(e,l)&&!E.hasOwnProperty(l)&&(o[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:i,type:t.type,key:a,ref:s,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=I,e.lazy=function(t){return{$$typeof:l,_payload:{_status:-1,_result:t},_init:A}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return x().useCallback(t,e)},e.useContext=function(t,e){return x().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return x().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return x().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return x().useLayoutEffect(t,e)},e.useMemo=function(t,e){return x().useMemo(t,e)},e.useReducer=function(t,e,n){return x().useReducer(t,e,n)},e.useRef=function(t){return x().useRef(t)},e.useState=function(t){return x().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var r=n(2),i=n(18),o=n(41);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},g={};function y(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){v[t]=new y(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];v[e]=new y(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){v[t]=new y(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){v[t]=new y(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){v[t]=new y(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){v[t]=new y(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){v[t]=new y(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){v[t]=new y(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){v[t]=new y(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}function w(t,e,n,r){var i=v.hasOwnProperty(e)?v[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!d.call(g,t)||!d.call(p,t)&&(f.test(t)?g[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,b);v[e]=new y(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,b);v[e]=new y(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,b);v[e]=new y(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){v[t]=new y(t,1,!1,t.toLowerCase(),null,!1,!1)})),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){v[t]=new y(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,T=60106,I=60107,S=60108,k=60114,C=60109,N=60110,A=60112,R=60113,x=60120,D=60115,O=60116,P=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;E=U("react.element"),T=U("react.portal"),I=U("react.fragment"),S=U("react.strict_mode"),k=U("react.profiler"),C=U("react.provider"),N=U("react.context"),A=U("react.forward_ref"),R=U("react.suspense"),x=U("react.suspense_list"),D=U("react.memo"),O=U("react.lazy"),P=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function B(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=q&&t[q]||t["@@iterator"])?t:null}function z(t){if(void 0===V)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);V=e&&e[1]||""}return"\n"+V+t}var K=!1;function H(t,e){if(!t||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{K=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function W(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=H(t.type,!1);case 11:return t=H(t.type.render,!1);case 22:return t=H(t.type._render,!1);case 1:return t=H(t.type,!0);default:return""}}function G(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case I:return"Fragment";case T:return"Portal";case k:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case x:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case A:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case D:return G(t.type);case P:return G(t._render);case O:e=t._payload,t=t._init;try{return G(t(e))}catch(n){}}return null}function Q(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function $(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Z(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&w(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,Q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Q(n)}}function ct(t,e){var n=Q(e.value),r=Q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function lt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var gt,yt,vt=(yt=function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((gt=gt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return yt(t,e)}))}:yt);function mt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var bt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];function _t(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||bt.hasOwnProperty(t)&&bt[t]?(""+e).trim():e+"px"}function Et(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_t(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(bt).forEach((function(t){wt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bt[e]=bt[t]}))}));var Tt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function It(t,e){if(e){if(Tt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function St(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function kt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,Nt=null,At=null;function Rt(t){if(t=ti(t)){if("function"!==typeof Ct)throw Error(a(280));var e=t.stateNode;e&&(e=ni(e),Ct(t.stateNode,t.type,e))}}function xt(t){Nt?At?At.push(t):At=[t]:Nt=t}function Dt(){if(Nt){var t=Nt,e=At;if(At=Nt=null,Rt(t),e)for(t=0;t<e.length;t++)Rt(e[t])}}function Ot(t,e){return t(e)}function Pt(t,e,n,r,i){return t(e,n,r,i)}function Lt(){}var Mt=Ot,Ft=!1,jt=!1;function Ut(){null===Nt&&null===At||(Lt(),Dt())}function Vt(t,e){var n=t.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var qt=!1;if(h)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(yt){qt=!1}function zt(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var Kt=!1,Ht=null,Wt=!1,Gt=null,Qt={onError:function(t){Kt=!0,Ht=t}};function Yt(t,e,n,r,i,o,a,s,u){Kt=!1,Ht=null,zt.apply(Qt,arguments)}function $t(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Xt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if($t(t)!==t)throw Error(a(188))}function Zt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=$t(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Jt(i),t;if(o===r)return Jt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,re,ie,oe=!1,ae=[],se=null,ue=null,ce=null,le=new Map,he=new Map,fe=[],de="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ge(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":ue=null;break;case"mouseover":case"mouseout":ce=null;break;case"pointerover":case"pointerout":le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function ye(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=pe(e,n,r,i,o),null!==e&&(null!==(e=ti(e))&&ne(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ve(t){var e=Zr(t.target);if(null!==e){var n=$t(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Xt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){re(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function me(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ze(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=ti(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function be(t,e,n){me(t)&&n.delete(e)}function we(){for(oe=!1;0<ae.length;){var t=ae[0];if(null!==t.blockedOn){null!==(t=ti(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=Ze(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&ae.shift()}null!==se&&me(se)&&(se=null),null!==ue&&me(ue)&&(ue=null),null!==ce&&me(ce)&&(ce=null),le.forEach(be),he.forEach(be)}function _e(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,we)))}function Ee(t){function e(e){return _e(e,t)}if(0<ae.length){_e(ae[0],t);for(var n=1;n<ae.length;n++){var r=ae[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==se&&_e(se,t),null!==ue&&_e(ue,t),null!==ce&&_e(ce,t),le.forEach(e),he.forEach(e),n=0;n<fe.length;n++)(r=fe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<fe.length&&null===(n=fe[0]).blockedOn;)ve(n),null===n.blockedOn&&fe.shift()}function Te(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ie={animationend:Te("Animation","AnimationEnd"),animationiteration:Te("Animation","AnimationIteration"),animationstart:Te("Animation","AnimationStart"),transitionend:Te("Transition","TransitionEnd")},Se={},ke={};function Ce(t){if(Se[t])return Se[t];if(!Ie[t])return t;var e,n=Ie[t];for(e in n)if(n.hasOwnProperty(e)&&e in ke)return Se[t]=n[e];return t}h&&(ke=document.createElement("div").style,"AnimationEvent"in window||(delete Ie.animationend.animation,delete Ie.animationiteration.animation,delete Ie.animationstart.animation),"TransitionEvent"in window||delete Ie.transitionend.transition);var Ne=Ce("animationend"),Ae=Ce("animationiteration"),Re=Ce("animationstart"),xe=Ce("transitionend"),De=new Map,Oe=new Map,Pe=["abort","abort",Ne,"animationEnd",Ae,"animationIteration",Re,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xe,"transitionEnd","waiting","waiting"];function Le(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Oe.set(r,e),De.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Me=8;function Fe(t){if(0!==(1&t))return Me=15,1;if(0!==(2&t))return Me=14,2;if(0!==(4&t))return Me=13,4;var e=24&t;return 0!==e?(Me=12,e):0!==(32&t)?(Me=11,32):0!==(e=192&t)?(Me=10,e):0!==(256&t)?(Me=9,256):0!==(e=3584&t)?(Me=8,e):0!==(4096&t)?(Me=7,4096):0!==(e=4186112&t)?(Me=6,e):0!==(e=62914560&t)?(Me=5,e):67108864&t?(Me=4,67108864):0!==(134217728&t)?(Me=3,134217728):0!==(e=805306368&t)?(Me=2,e):0!==(1073741824&t)?(Me=1,1073741824):(Me=8,t)}function je(t,e){var n=t.pendingLanes;if(0===n)return Me=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=Me=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Fe(u),i=Me):0!==(s&=o)&&(r=Fe(s),i=Me)}else 0!==(o=n&~a)?(r=Fe(o),i=Me):0!==s&&(r=Fe(s),i=Me);if(0===r)return 0;if(r=n&((0>(r=31-Ke(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&a)){if(Fe(e),i<=Me)return e;Me=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-Ke(e)),r|=t[n],e&=~i;return r}function Ue(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ve(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=qe(24&~e))?Ve(10,e):t;case 10:return 0===(t=qe(192&~e))?Ve(8,e):t;case 8:return 0===(t=qe(3584&~e))&&(0===(t=qe(4186112&~e))&&(t=512)),t;case 2:return 0===(e=qe(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function qe(t){return t&-t}function Be(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ze(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-Ke(e)]=n}var Ke=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(He(t)/We|0)|0},He=Math.log,We=Math.LN2;var Ge=o.unstable_UserBlockingPriority,Qe=o.unstable_runWithPriority,Ye=!0;function $e(t,e,n,r){Ft||Lt();var i=Je,o=Ft;Ft=!0;try{Pt(i,t,e,n,r)}finally{(Ft=o)||Ut()}}function Xe(t,e,n,r){Qe(Ge,Je.bind(null,t,e,n,r))}function Je(t,e,n,r){var i;if(Ye)if((i=0===(4&e))&&0<ae.length&&-1<de.indexOf(t))t=pe(null,t,e,n,r),ae.push(t);else{var o=Ze(t,e,n,r);if(null===o)i&&ge(t,r);else{if(i){if(-1<de.indexOf(t))return t=pe(o,t,e,n,r),void ae.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return se=ye(se,t,e,n,r,i),!0;case"dragenter":return ue=ye(ue,t,e,n,r,i),!0;case"mouseover":return ce=ye(ce,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return le.set(o,ye(le.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,he.set(o,ye(he.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;ge(t,r)}Dr(t,e,r,null,n)}}}function Ze(t,e,n,r){var i=kt(r);if(null!==(i=Zr(i))){var o=$t(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Xt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Dr(t,e,r,i,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,r=n.length,i="value"in tn?tn.value:tn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return nn=i.slice(t,1<e?1-e:void 0)}function on(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function an(){return!0}function sn(){return!1}function un(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),e}var cn,ln,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),gn=un(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(cn=t.screenX-hn.screenX,ln=t.screenY-hn.screenY):ln=cn=0,hn=t),cn)},movementY:function(t){return"movementY"in t?t.movementY:ln}}),vn=un(yn),mn=un(i({},yn,{dataTransfer:0})),bn=un(i({},pn,{relatedTarget:0})),wn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=un(i({},fn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),En=un(i({},fn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Cn(){return kn}var Nn=un(i({},pn,{key:function(t){if(t.key){var e=Tn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=on(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?In[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?on(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?on(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),An=un(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),xn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=un(i({},yn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),On=[9,13,27,32],Pn=h&&"CompositionEvent"in window,Ln=null;h&&"documentMode"in document&&(Ln=document.documentMode);var Mn=h&&"TextEvent"in window&&!Ln,Fn=h&&(!Pn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(t,e){switch(t){case"keyup":return-1!==On.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!zn[t.type]:"textarea"===e}function Hn(t,e,n,r){xt(r),0<(e=Pr(e,"onChange")).length&&(n=new dn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Gn=null;function Qn(t){kr(t,0)}function Yn(t){if(X(ei(t)))return t}function $n(t,e){if("change"===t)return e}var Xn=!1;if(h){var Jn;if(h){var Zn="oninput"in document;if(!Zn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Zn="function"===typeof tr.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(t){if("value"===t.propertyName&&Yn(Gn)){var e=[];if(Hn(e,Gn,t,kt(t)),t=Qn,Ft)t(e);else{Ft=!0;try{Ot(t,e)}finally{Ft=!1,Ut()}}}}function rr(t,e,n){"focusin"===t?(er(),Gn=n,(Wn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Gn)}function or(t,e){if("click"===t)return Yn(e)}function ar(t,e){if("input"===t||"change"===t)return Yn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},ur=Object.prototype.hasOwnProperty;function cr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(e,n[r])||!sr(t[n[r]],e[n[r]]))return!1;return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hr(t,e){var n,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function fr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?fr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var gr=h&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,mr=null,br=!1;function wr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==yr||yr!==J(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&cr(mr,r)||(mr=r,0<(r=Pr(vr,"onSelect")).length&&(e=new dn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yr)))}Le("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Le("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Le(Pe,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<_r.length;Er++)Oe.set(_r[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Sr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,u,c){if(Yt.apply(this,arguments),Kt){if(!Kt)throw Error(a(198));var l=Ht;Kt=!1,Ht=null,Wt||(Wt=!0,Gt=l)}}(r,e,void 0,t),t.currentTarget=null}function kr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;Sr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;Sr(i,s,c),o=u}}}if(Wt)throw t=Gt,Wt=!1,Gt=null,t}function Cr(t,e){var n=ri(e),r=t+"__bubble";n.has(r)||(xr(e,t,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Ar(t){t[Nr]||(t[Nr]=!0,s.forEach((function(e){Ir.has(e)||Rr(e,!1,t,null),Rr(e,!0,t,null)})))}function Rr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&Ir.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=ri(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),xr(o,t,i,e),a.add(s))}function xr(t,e,n,r){var i=Oe.get(e);switch(void 0===i?2:i){case 0:i=$e;break;case 1:i=Xe;break;default:i=Je}n=i.bind(null,e,n,t),i=void 0,!qt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Zr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(jt)return t(e,n);jt=!0;try{Mt(t,e,n)}finally{jt=!1,Ut()}}((function(){var r=o,i=kt(n),a=[];t:{var s=De.get(t);if(void 0!==s){var u=dn,c=t;switch(t){case"keypress":if(0===on(n))break t;case"keydown":case"keyup":u=Nn;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Ne:case Ae:case Re:u=wn;break;case xe:u=xn;break;case"scroll":u=gn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!==(4&e),h=!l&&"scroll"===t,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var g=(d=p).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==f&&(null!=(g=Vt(p,f))&&l.push(Or(p,g,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(c=n.relatedTarget||n.fromElement)||!Zr(c)&&!c[Xr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Zr(c):null)&&(c!==(h=$t(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=vn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(l=An,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ei(u),d=null==c?s:ei(c),(s=new l(g,p+"leave",u,n,i)).target=h,s.relatedTarget=d,g=null,Zr(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,g=l),h=g,u&&c)t:{for(f=c,p=0,d=l=u;d;d=Lr(d))p++;for(d=0,g=f;g;g=Lr(g))d++;for(;0<p-d;)l=Lr(l),p--;for(;0<d-p;)f=Lr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break t;l=Lr(l),f=Lr(f)}l=null}else l=null;null!==u&&Mr(a,s,u,l,!1),null!==c&&null!==h&&Mr(a,h,c,l,!0)}if("select"===(u=(s=r?ei(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=$n;else if(Kn(s))if(Xn)y=ar;else{y=ir;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=or);switch(y&&(y=y(t,r))?Hn(a,y,n,i):(v&&v(t,s,r),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&it(s,"number",s.value)),v=r?ei(r):window,t){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(yr=v,vr=r,mr=null);break;case"focusout":mr=vr=yr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(a,n,i)}var m;if(Pn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Bn?Vn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(m=rn()):(en="value"in(tn=i)?tn.value:tn.textContent,Bn=!0)),0<(v=Pr(r,b)).length&&(b=new En(b,t,null,n,i),a.push({event:b,listeners:v}),m?b.data=m:null!==(m=qn(n))&&(b.data=m))),(m=Mn?function(t,e){switch(t){case"compositionend":return qn(e);case"keypress":return 32!==e.which?null:(Un=!0,jn);case"textInput":return(t=e.data)===jn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Bn)return"compositionend"===t||!Pn&&Vn(t,e)?(t=rn(),nn=en=tn=null,Bn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(r=Pr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}kr(a,e)}))}function Or(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Vt(t,n))&&r.unshift(Or(t,o,i)),null!=(o=Vt(t,e))&&r.push(Or(t,o,i))),t=t.return}return r}function Lr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Mr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Vt(n,o))&&a.unshift(Or(n,u,s)):i||null!=(u=Vt(n,o))&&a.push(Or(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Fr(){}var jr=null,Ur=null;function Vr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function qr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Br="function"===typeof setTimeout?setTimeout:void 0,zr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Hr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Wr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Gr=0;var Qr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Qr,$r="__reactProps$"+Qr,Xr="__reactContainer$"+Qr,Jr="__reactEvents$"+Qr;function Zr(t){var e=t[Yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xr]||n[Yr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Wr(t);null!==t;){if(n=t[Yr])return n;t=Wr(t)}return e}n=(t=n).parentNode}return null}function ti(t){return!(t=t[Yr]||t[Xr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ei(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function ni(t){return t[$r]||null}function ri(t){var e=t[Jr];return void 0===e&&(e=t[Jr]=new Set),e}var ii=[],oi=-1;function ai(t){return{current:t}}function si(t){0>oi||(t.current=ii[oi],ii[oi]=null,oi--)}function ui(t,e){oi++,ii[oi]=t.current,t.current=e}var ci={},li=ai(ci),hi=ai(!1),fi=ci;function di(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function pi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function gi(){si(hi),si(li)}function yi(t,e,n){if(li.current!==ci)throw Error(a(168));ui(li,e),ui(hi,n)}function vi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,G(e)||"Unknown",o));return i({},n,r)}function mi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,fi=li.current,ui(li,t),ui(hi,hi.current),!0}function bi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=vi(t,e,fi),r.__reactInternalMemoizedMergedChildContext=t,si(hi),si(li),ui(li,t)):si(hi),ui(hi,n)}var wi=null,_i=null,Ei=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Ii=o.unstable_cancelCallback,Si=o.unstable_shouldYield,ki=o.unstable_requestPaint,Ci=o.unstable_now,Ni=o.unstable_getCurrentPriorityLevel,Ai=o.unstable_ImmediatePriority,Ri=o.unstable_UserBlockingPriority,xi=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Oi=o.unstable_IdlePriority,Pi={},Li=void 0!==ki?ki:function(){},Mi=null,Fi=null,ji=!1,Ui=Ci(),Vi=1e4>Ui?Ci:function(){return Ci()-Ui};function qi(){switch(Ni()){case Ai:return 99;case Ri:return 98;case xi:return 97;case Di:return 96;case Oi:return 95;default:throw Error(a(332))}}function Bi(t){switch(t){case 99:return Ai;case 98:return Ri;case 97:return xi;case 96:return Di;case 95:return Oi;default:throw Error(a(332))}}function zi(t,e){return t=Bi(t),Ei(t,e)}function Ki(t,e,n){return t=Bi(t),Ti(t,e,n)}function Hi(){if(null!==Fi){var t=Fi;Fi=null,Ii(t)}Wi()}function Wi(){if(!ji&&null!==Mi){ji=!0;var t=0;try{var e=Mi;zi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(n){throw null!==Mi&&(Mi=Mi.slice(t+1)),Ti(Ai,Hi),n}finally{ji=!1}}}var Gi=_.ReactCurrentBatchConfig;function Qi(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Yi=ai(null),$i=null,Xi=null,Ji=null;function Zi(){Ji=Xi=$i=null}function to(t){var e=Yi.current;si(Yi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function no(t,e){$i=t,Ji=Xi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Pa=!0),t.firstContext=null)}function ro(t,e){if(Ji!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Ji=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Xi){if(null===$i)throw Error(a(308));Xi=e,$i.dependencies={lanes:0,firstContext:e,responders:null}}else Xi=Xi.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function so(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,h=l=c=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(u=e,d=n,g.tag){case 1:if("function"===typeof(p=g.payload)){f=p.call(d,f,u);break t}f=p;break t;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=g.payload)?p.call(d,f,u):p)||void 0===u)break t;f=i({},f,u);break t;case 2:io=!0}}null!==a.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=h,js|=s,t.lanes=s,t.memoizedState=f}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var fo=(new r.Component).refs;function po(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var go={isMounted:function(t){return!!(t=t._reactInternals)&&$t(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=cu(),i=lu(t),o=so(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),uo(t,o),hu(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=cu(),i=lu(t),o=so(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),uo(t,o),hu(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cu(),r=lu(t),i=so(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),uo(t,i),hu(t,r,n)}};function yo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function vo(t,e,n){var r=!1,i=ci,o=e.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=pi(e)?fi:li.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?di(t,i):ci),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=go,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function mo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&go.enqueueReplaceState(e,e.state,null)}function bo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=fo,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=pi(e)?fi:li.current,i.context=di(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(po(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&go.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var wo=Array.isArray;function _o(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===fo&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Eo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function To(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=zu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Gu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=_o(t,e,n),r.return=t,r):((r=Ku(n.type,n.key,n.props,null,t.mode,r)).ref=_o(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Qu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Hu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Gu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case E:return(n=Ku(e.type,e.key,e.props,null,t.mode,n)).ref=_o(t,null,e),n.return=t,n;case T:return(e=Qu(e,t.mode,n)).return=t,e}if(wo(e)||B(e))return(e=Hu(e,t.mode,n,null)).return=t,e;Eo(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===I?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case T:return n.key===i?l(t,e,n,r):null}if(wo(n)||B(n))return null!==i?null:h(t,e,n,r,null);Eo(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return t=t.get(null===r.key?n:r.key)||null,r.type===I?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case T:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||B(r))return h(e,t=t.get(n)||null,r,i,null);Eo(e,r)}return null}function g(i,a,s,u){for(var c=null,l=null,h=a,g=a=0,y=null;null!==h&&g<s.length;g++){h.index>g?(y=h,h=null):y=h.sibling;var v=d(i,h,s[g],u);if(null===v){null===h&&(h=y);break}t&&h&&null===v.alternate&&e(i,h),a=o(v,a,g),null===l?c=v:l.sibling=v,l=v,h=y}if(g===s.length)return n(i,h),c;if(null===h){for(;g<s.length;g++)null!==(h=f(i,s[g],u))&&(a=o(h,a,g),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);g<s.length;g++)null!==(y=p(h,i,g,s[g],u))&&(t&&null!==y.alternate&&h.delete(null===y.key?g:y.key),a=o(y,a,g),null===l?c=y:l.sibling=y,l=y);return t&&h.forEach((function(t){return e(i,t)})),c}function y(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,g=s,y=s=0,v=null,m=u.next();null!==g&&!m.done;y++,m=u.next()){g.index>y?(v=g,g=null):v=g.sibling;var b=d(i,g,m.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(i,g),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,g=v}if(m.done)return n(i,g),l;if(null===g){for(;!m.done;y++,m=u.next())null!==(m=f(i,m.value,c))&&(s=o(m,s,y),null===h?l=m:h.sibling=m,h=m);return l}for(g=r(i,g);!m.done;y++,m=u.next())null!==(m=p(g,i,y,m.value,c))&&(t&&null!==m.alternate&&g.delete(null===m.key?y:m.key),s=o(m,s,y),null===h?l=m:h.sibling=m,h=m);return t&&g.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===I&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case E:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===I){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=_o(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===I?((r=Hu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Ku(o.type,o.key,o.props,null,t.mode,u)).ref=_o(t,r,o),u.return=t,t=u)}return s(t);case T:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Qu(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Gu(o,t.mode,u)).return=t,t=r),s(t);if(wo(o))return g(t,r,o,u);if(B(o))return y(t,r,o,u);if(l&&Eo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,G(t.type)||"Component"))}return n(t,r)}}var Io=To(!0),So=To(!1),ko={},Co=ai(ko),No=ai(ko),Ao=ai(ko);function Ro(t){if(t===ko)throw Error(a(174));return t}function xo(t,e){switch(ui(Ao,e),ui(No,t),ui(Co,ko),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}si(Co),ui(Co,e)}function Do(){si(Co),si(No),si(Ao)}function Oo(t){Ro(Ao.current);var e=Ro(Co.current),n=pt(e,t.type);e!==n&&(ui(No,t),ui(Co,n))}function Po(t){No.current===t&&(si(Co),si(No))}var Lo=ai(0);function Mo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fo=null,jo=null,Uo=!1;function Vo(t,e){var n=qu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function qo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Bo(t){if(Uo){var e=jo;if(e){var n=e;if(!qo(t,e)){if(!(e=Hr(n.nextSibling))||!qo(t,e))return t.flags=-1025&t.flags|2,Uo=!1,void(Fo=t);Vo(Fo,n)}Fo=t,jo=Hr(e.firstChild)}else t.flags=-1025&t.flags|2,Uo=!1,Fo=t}}function zo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Fo=t}function Ko(t){if(t!==Fo)return!1;if(!Uo)return zo(t),Uo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!qr(e,t.memoizedProps))for(e=jo;e;)Vo(t,e),e=Hr(e.nextSibling);if(zo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){jo=Hr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}jo=null}}else jo=Fo?Hr(t.stateNode.nextSibling):null;return!0}function Ho(){jo=Fo=null,Uo=!1}var Wo=[];function Go(){for(var t=0;t<Wo.length;t++)Wo[t]._workInProgressVersionPrimary=null;Wo.length=0}var Qo=_.ReactCurrentDispatcher,Yo=_.ReactCurrentBatchConfig,$o=0,Xo=null,Jo=null,Zo=null,ta=!1,ea=!1;function na(){throw Error(a(321))}function ra(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ia(t,e,n,r,i,o){if($o=o,Xo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qo.current=null===t||null===t.memoizedState?Ra:xa,t=n(r,i),ea){o=0;do{if(ea=!1,!(25>o))throw Error(a(301));o+=1,Zo=Jo=null,e.updateQueue=null,Qo.current=Da,t=n(r,i)}while(ea)}if(Qo.current=Aa,e=null!==Jo&&null!==Jo.next,$o=0,Zo=Jo=Xo=null,ta=!1,e)throw Error(a(300));return t}function oa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zo?Xo.memoizedState=Zo=t:Zo=Zo.next=t,Zo}function aa(){if(null===Jo){var t=Xo.alternate;t=null!==t?t.memoizedState:null}else t=Jo.next;var e=null===Zo?Xo.memoizedState:Zo.next;if(null!==e)Zo=e,Jo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Jo=t).memoizedState,baseState:Jo.baseState,baseQueue:Jo.baseQueue,queue:Jo.queue,next:null},null===Zo?Xo.memoizedState=Zo=t:Zo=Zo.next=t}return Zo}function sa(t,e){return"function"===typeof e?e(t):e}function ua(t){var e=aa(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Jo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if(($o&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,Xo.lanes|=l,js|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,sr(r,e.memoizedState)||(Pa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function ca(t){var e=aa(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);sr(o,e.memoizedState)||(Pa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function la(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=($o&t)===t)&&(e._workInProgressVersionPrimary=r,Wo.push(e))),t)return n(e._source);throw Wo.push(e),Error(a(350))}function ha(t,e,n,r){var i=Rs;if(null===i)throw Error(a(349));var o=e._getVersion,s=o(e._source),u=Qo.current,c=u.useState((function(){return la(i,e,n)})),l=c[1],h=c[0];c=Zo;var f=t.memoizedState,d=f.refs,p=d.getSnapshot,g=f.source;f=f.subscribe;var y=Xo;return t.memoizedState={refs:d,source:e,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var t=o(e._source);if(!sr(s,t)){t=n(e._source),sr(h,t)||(l(t),t=lu(y),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,a=t;0<a;){var u=31-Ke(a),c=1<<u;r[u]|=t,a&=~c}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=d.getSnapshot,n=d.setSnapshot;try{n(t(e._source));var r=lu(y);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,r]),sr(p,n)&&sr(g,e)&&sr(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:h}).dispatch=l=Na.bind(null,Xo,t),c.queue=t,c.baseQueue=null,h=la(i,e,n),c.memoizedState=c.baseState=h),h}function fa(t,e,n){return ha(aa(),t,e,n)}function da(t){var e=oa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t}).dispatch=Na.bind(null,Xo,t),[e.memoizedState,t]}function pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Xo.updateQueue)?(e={lastEffect:null},Xo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ga(t){return t={current:t},oa().memoizedState=t}function ya(){return aa().memoizedState}function va(t,e,n,r){var i=oa();Xo.flags|=t,i.memoizedState=pa(1|e,n,void 0,void 0===r?null:r)}function ma(t,e,n,r){var i=aa();r=void 0===r?null:r;var o=void 0;if(null!==Jo){var a=Jo.memoizedState;if(o=a.destroy,null!==r&&ra(r,a.deps))return void pa(e,n,o,r)}Xo.flags|=t,i.memoizedState=pa(1|e,n,o,r)}function ba(t,e){return va(516,4,t,e)}function wa(t,e){return ma(516,4,t,e)}function _a(t,e){return ma(4,2,t,e)}function Ea(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ta(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ma(4,2,Ea.bind(null,e,t),n)}function Ia(){}function Sa(t,e){var n=aa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ra(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ka(t,e){var n=aa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ra(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ca(t,e){var n=qi();zi(98>n?98:n,(function(){t(!0)})),zi(97<n?97:n,(function(){var n=Yo.transition;Yo.transition=1;try{t(!1),e()}finally{Yo.transition=n}}))}function Na(t,e,n){var r=cu(),i=lu(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===Xo||null!==a&&a===Xo)ea=ta=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,sr(u,s))return}catch(c){}hu(t,i,r)}}var Aa={readContext:ro,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useOpaqueIdentifier:na,unstable_isNewReconciler:!1},Ra={readContext:ro,useCallback:function(t,e){return oa().memoizedState=[t,void 0===e?null:e],t},useContext:ro,useEffect:ba,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,va(4,2,Ea.bind(null,e,t),n)},useLayoutEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var n=oa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oa();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Na.bind(null,Xo,t),[r.memoizedState,t]},useRef:ga,useState:da,useDebugValue:Ia,useDeferredValue:function(t){var e=da(t),n=e[0],r=e[1];return ba((function(){var e=Yo.transition;Yo.transition=1;try{r(t)}finally{Yo.transition=e}}),[t]),n},useTransition:function(){var t=da(!1),e=t[0];return ga(t=Ca.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=oa();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},ha(r,t,e,n)},useOpaqueIdentifier:function(){if(Uo){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Gr++).toString(36))),Error(a(355))})),n=da(e)[1];return 0===(2&Xo.mode)&&(Xo.flags|=516,pa(5,(function(){n("r:"+(Gr++).toString(36))}),void 0,null)),e}return da(e="r:"+(Gr++).toString(36)),e},unstable_isNewReconciler:!1},xa={readContext:ro,useCallback:Sa,useContext:ro,useEffect:wa,useImperativeHandle:Ta,useLayoutEffect:_a,useMemo:ka,useReducer:ua,useRef:ya,useState:function(){return ua(sa)},useDebugValue:Ia,useDeferredValue:function(t){var e=ua(sa),n=e[0],r=e[1];return wa((function(){var e=Yo.transition;Yo.transition=1;try{r(t)}finally{Yo.transition=e}}),[t]),n},useTransition:function(){var t=ua(sa)[0];return[ya().current,t]},useMutableSource:fa,useOpaqueIdentifier:function(){return ua(sa)[0]},unstable_isNewReconciler:!1},Da={readContext:ro,useCallback:Sa,useContext:ro,useEffect:wa,useImperativeHandle:Ta,useLayoutEffect:_a,useMemo:ka,useReducer:ca,useRef:ya,useState:function(){return ca(sa)},useDebugValue:Ia,useDeferredValue:function(t){var e=ca(sa),n=e[0],r=e[1];return wa((function(){var e=Yo.transition;Yo.transition=1;try{r(t)}finally{Yo.transition=e}}),[t]),n},useTransition:function(){var t=ca(sa)[0];return[ya().current,t]},useMutableSource:fa,useOpaqueIdentifier:function(){return ca(sa)[0]},unstable_isNewReconciler:!1},Oa=_.ReactCurrentOwner,Pa=!1;function La(t,e,n,r){e.child=null===t?So(e,null,n,r):Io(e,t.child,n,r)}function Ma(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=ia(t,e,n,r,o,i),null===t||Pa?(e.flags|=1,La(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ns(t,e,i))}function Fa(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Bu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ku(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,ja(t,e,a,r,i,o))}return a=t.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:cr)(i,r)&&t.ref===e.ref)?ns(t,e,o):(e.flags|=1,(t=zu(a,r)).ref=e.ref,t.return=e,e.child=t)}function ja(t,e,n,r,i,o){if(null!==t&&cr(t.memoizedProps,r)&&t.ref===e.ref){if(Pa=!1,0===(o&i))return e.lanes=t.lanes,ns(t,e,o);0!==(16384&t.flags)&&(Pa=!0)}return qa(t,e,n,r,o)}function Ua(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},bu(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},bu(e,t),null;e.memoizedState={baseLanes:0},bu(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,bu(e,r);return La(t,e,i,n),e.child}function Va(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function qa(t,e,n,r,i){var o=pi(n)?fi:li.current;return o=di(e,o),no(e,i),n=ia(t,e,n,r,o,i),null===t||Pa?(e.flags|=1,La(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ns(t,e,i))}function Ba(t,e,n,r,i){if(pi(n)){var o=!0;mi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),vo(e,n,r),bo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=di(e,c=pi(n)?fi:li.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&mo(e,a,r,c),io=!1;var f=e.memoizedState;a.state=f,lo(e,r,a,i),u=e.memoizedState,s!==r||f!==u||hi.current||io?("function"===typeof l&&(po(e,n,l,r),u=e.memoizedState),(s=io||yo(e,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,ao(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Qi(e.type,s),a.props=c,h=e.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ro(u):u=di(e,u=pi(n)?fi:li.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&mo(e,a,r,u),io=!1,f=e.memoizedState,a.state=f,lo(e,r,a,i);var p=e.memoizedState;s!==h||f!==p||hi.current||io?("function"===typeof d&&(po(e,n,d,r),p=e.memoizedState),(c=io||yo(e,n,c,r,f,p,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return za(t,e,n,r,o,i)}function za(t,e,n,r,i,o){Va(t,e);var a=0!==(64&e.flags);if(!r&&!a)return i&&bi(e,n,!1),ns(t,e,o);r=e.stateNode,Oa.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Io(e,t.child,null,o),e.child=Io(e,null,s,o)):La(t,e,s,o),e.memoizedState=r.state,i&&bi(e,n,!0),e.child}function Ka(t){var e=t.stateNode;e.pendingContext?yi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&yi(0,e.context,!1),xo(t,e.containerInfo)}var Ha,Wa,Ga,Qa={dehydrated:null,retryLane:0};function Ya(t,e,n){var r,i=e.pendingProps,o=Lo.current,a=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ui(Lo,1&o),null===t?(void 0!==i.fallback&&Bo(e),t=i.children,o=i.fallback,a?(t=$a(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Qa,t):"number"===typeof i.unstable_expectedLoadTime?(t=$a(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Qa,e.lanes=33554432,t):((n=Wu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=Ja(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Qa,i):(n=Xa(t,e,i.children,n),e.memoizedState=null,n))}function $a(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Wu(e,i,0,null),n=Hu(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Xa(t,e,n,r){var i=t.child;return t=i.sibling,n=zu(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Ja(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=zu(a,s),null!==t?r=zu(t,r):(r=Hu(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function Za(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),eo(t.return,e)}function ts(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function es(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(La(t,e,r.children,n),0!==(2&(r=Lo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Za(t,n);else if(19===t.tag)Za(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ui(Lo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Mo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ts(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Mo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ts(e,!0,n,null,o,e.lastEffect);break;case"together":ts(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ns(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),js|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=zu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=zu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function rs(t,e){if(!Uo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function is(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pi(e.type)&&gi(),null;case 3:return Do(),si(hi),si(li),Go(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Ko(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Po(e);var o=Ro(Ao.current);if(n=e.type,null!==t&&null!=e.stateNode)Wa(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Ro(Co.current),Ko(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yr]=e,r[$r]=s,n){case"dialog":Cr("cancel",r),Cr("close",r);break;case"iframe":case"object":case"embed":Cr("load",r);break;case"video":case"audio":for(t=0;t<Tr.length;t++)Cr(Tr[t],r);break;case"source":Cr("error",r);break;case"img":case"image":case"link":Cr("error",r),Cr("load",r);break;case"details":Cr("toggle",r);break;case"input":tt(r,s),Cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cr("invalid",r);break;case"textarea":ut(r,s),Cr("invalid",r)}for(var c in It(n,s),t=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(t=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Cr("scroll",r));switch(n){case"input":$(r),rt(r,s,!0);break;case"textarea":$(r),lt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Fr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=dt(n)),t===ht?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),"select"===n&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Yr]=e,t[$r]=r,Ha(t,e),e.stateNode=t,c=St(n,r),n){case"dialog":Cr("cancel",t),Cr("close",t),o=r;break;case"iframe":case"object":case"embed":Cr("load",t),o=r;break;case"video":case"audio":for(o=0;o<Tr.length;o++)Cr(Tr[o],t);o=r;break;case"source":Cr("error",t),o=r;break;case"img":case"image":case"link":Cr("error",t),Cr("load",t),o=r;break;case"details":Cr("toggle",t),o=r;break;case"input":tt(t,r),o=Z(t,r),Cr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Cr("invalid",t);break;case"textarea":ut(t,r),o=st(t,r),Cr("invalid",t);break;default:o=r}It(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?Et(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&vt(t,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&mt(t,h):"number"===typeof h&&mt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Cr("scroll",t):null!=h&&w(t,s,h,c))}switch(n){case"input":$(t),rt(t,r,!1);break;case"textarea":$(t),lt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?at(t,!!r.multiple,s,!1):null!=r.defaultValue&&at(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Fr)}Vr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Ga(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Ro(Ao.current),Ro(Co.current),Ko(e)?(r=e.stateNode,n=e.memoizedProps,r[Yr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=e,e.stateNode=r)}return null;case 13:return si(Lo),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Ko(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Lo.current)?0===Ls&&(Ls=3):(0!==Ls&&3!==Ls||(Ls=4),null===Rs||0===(134217727&js)&&0===(134217727&Us)||gu(Rs,Ds))),(r||n)&&(e.flags|=4),null);case 4:return Do(),null===t&&Ar(e.stateNode.containerInfo),null;case 10:return to(e),null;case 17:return pi(e.type)&&gi(),null;case 19:if(si(Lo),null===(r=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(c=r.rendering))if(s)rs(r,!1);else{if(0!==Ls||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Mo(t))){for(e.flags|=64,rs(r,!1),null!==(s=c.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,t=c.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ui(Lo,1&Lo.current|2),e.child}t=t.sibling}null!==r.tail&&Vi()>zs&&(e.flags|=64,s=!0,rs(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Mo(c))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Uo)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Vi()-r.renderingStartTime>zs&&1073741824!==n&&(e.flags|=64,s=!0,rs(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=r.last)?n.sibling=c:e.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Vi(),n.sibling=null,e=Lo.current,ui(Lo,s?1&e|2:1&e),n):null;case 23:case 24:return wu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function os(t){switch(t.tag){case 1:pi(t.type)&&gi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Do(),si(hi),si(li),Go(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return Po(t),null;case 13:return si(Lo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return si(Lo),null;case 4:return Do(),null;case 10:return to(t),null;case 23:case 24:return wu(),null;default:return null}}function as(t,e){try{var n="",r=e;do{n+=W(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function ss(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Ha=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wa=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Ro(Co.current);var a,s=null;switch(n){case"input":o=Z(t,o),r=Z(t,r),s=[];break;case"option":o=ot(t,o),r=ot(t,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=st(t,o),r=st(t,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=Fr)}for(h in It(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Cr("scroll",t),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Ga=function(t,e,n,r){n!==r&&(e.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function cs(t,e,n){(n=so(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gs||(Gs=!0,Qs=r),ss(0,e)},n}function ls(t,e,n){(n=so(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ss(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ys?Ys=new Set([this]):Ys.add(this),ss(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function fs(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Fu(t,n)}else e.current=null}function ds(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Qi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Kr(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ps(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Pu(n,t),Ou(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Qi(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Vr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ee(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function gs(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_t("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ys(t,e){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(wi,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Pu(e,n);else{r=e;try{i()}catch(o){Fu(r,o)}}n=n.next}while(n!==t)}break;case 1:if(fs(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Fu(e,o)}break;case 5:fs(e);break;case 4:Es(t,e)}}function vs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ms(t){return 5===t.tag||3===t.tag||4===t.tag}function bs(t){t:{for(var e=t.return;null!==e;){if(ms(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(mt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ms(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?ws(t,n,e):_s(t,n,e)}function ws(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Fr));else if(4!==r&&null!==(t=t.child))for(ws(t,e,n),t=t.sibling;null!==t;)ws(t,e,n),t=t.sibling}function _s(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(_s(t,e,n),t=t.sibling;null!==t;)_s(t,e,n),t=t.sibling}function Es(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var s=t,u=i,c=u;;)if(ys(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break t;for(;null===c.sibling;){if(null===c.return||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ys(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[$r]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),St(t,i),e=St(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?Et(n,u):"dangerouslySetInnerHTML"===s?vt(n,u):"children"===s?mt(n,u):w(n,s,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":ct(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?at(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(n,!!r.multiple,r.defaultValue,!0):at(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,Ee(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Bs=Vi(),gs(e.child,!0)),void Is(e);case 19:return void Is(e);case 17:return;case 23:case 24:return void gs(e,null!==e.memoizedState)}throw Error(a(163))}function Is(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new hs),e.forEach((function(e){var r=Uu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Ss(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var ks=Math.ceil,Cs=_.ReactCurrentDispatcher,Ns=_.ReactCurrentOwner,As=0,Rs=null,xs=null,Ds=0,Os=0,Ps=ai(0),Ls=0,Ms=null,Fs=0,js=0,Us=0,Vs=0,qs=null,Bs=0,zs=1/0;function Ks(){zs=Vi()+500}var Hs,Ws=null,Gs=!1,Qs=null,Ys=null,$s=!1,Xs=null,Js=90,Zs=[],tu=[],eu=null,nu=0,ru=null,iu=-1,ou=0,au=0,su=null,uu=!1;function cu(){return 0!==(48&As)?Vi():-1!==iu?iu:iu=Vi()}function lu(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===qi()?1:2;if(0===ou&&(ou=Fs),0!==Gi.transition){0!==au&&(au=null!==qs?qs.pendingLanes:0),t=ou;var e=4186112&~au;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=qi(),0!==(4&As)&&98===t?t=Ve(12,ou):t=Ve(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ou),t}function hu(t,e,n){if(50<nu)throw nu=0,ru=null,Error(a(185));if(null===(t=fu(t,e)))return null;ze(t,e,n),t===Rs&&(Us|=e,4===Ls&&gu(t,Ds));var r=qi();1===e?0!==(8&As)&&0===(48&As)?yu(t):(du(t,n),0===As&&(Ks(),Hi())):(0===(4&As)||98!==r&&99!==r||(null===eu?eu=new Set([t]):eu.add(t)),du(t,n)),qs=t}function fu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function du(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-Ke(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=e,Fe(c);var h=Me;o[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=e&&(t.expiredLanes|=c);s&=~c}if(r=je(t,t===Rs?Ds:0),e=Me,0===r)null!==n&&(n!==Pi&&Ii(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Pi&&Ii(n)}15===e?(n=yu.bind(null,t),null===Mi?(Mi=[n],Fi=Ti(Ai,Wi)):Mi.push(n),n=Pi):14===e?n=Ki(99,yu.bind(null,t)):n=Ki(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),pu.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function pu(t){if(iu=-1,au=ou=0,0!==(48&As))throw Error(a(327));var e=t.callbackNode;if(Du()&&t.callbackNode!==e)return null;var n=je(t,t===Rs?Ds:0);if(0===n)return null;var r=n,i=As;As|=16;var o=Tu();for(Rs===t&&Ds===r||(Ks(),_u(t,r));;)try{ku();break}catch(u){Eu(t,u)}if(Zi(),Cs.current=o,As=i,null!==xs?r=0:(Rs=null,Ds=0,r=Ls),0!==(Fs&Us))_u(t,0);else if(0!==r){if(2===r&&(As|=64,t.hydrate&&(t.hydrate=!1,Kr(t.containerInfo)),0!==(n=Ue(t))&&(r=Iu(t,n))),1===r)throw e=Ms,_u(t,0),gu(t,n),du(t,Vi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Au(t);break;case 3:if(gu(t,n),(62914560&n)===n&&10<(r=Bs+500-Vi())){if(0!==je(t,0))break;if(((i=t.suspendedLanes)&n)!==n){cu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Br(Au.bind(null,t),r);break}Au(t);break;case 4:if(gu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-Ke(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Vi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ks(n/1960))-n)){t.timeoutHandle=Br(Au.bind(null,t),n);break}Au(t);break;case 5:Au(t);break;default:throw Error(a(329))}}return du(t,Vi()),t.callbackNode===e?pu.bind(null,t):null}function gu(t,e){for(e&=~Vs,e&=~Us,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ke(e),r=1<<n;t[n]=-1,e&=~r}}function yu(t){if(0!==(48&As))throw Error(a(327));if(Du(),t===Rs&&0!==(t.expiredLanes&Ds)){var e=Ds,n=Iu(t,e);0!==(Fs&Us)&&(n=Iu(t,e=je(t,e)))}else n=Iu(t,e=je(t,0));if(0!==t.tag&&2===n&&(As|=64,t.hydrate&&(t.hydrate=!1,Kr(t.containerInfo)),0!==(e=Ue(t))&&(n=Iu(t,e))),1===n)throw n=Ms,_u(t,0),gu(t,e),du(t,Vi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Au(t),du(t,Vi()),null}function vu(t,e){var n=As;As|=1;try{return t(e)}finally{0===(As=n)&&(Ks(),Hi())}}function mu(t,e){var n=As;As&=-2,As|=8;try{return t(e)}finally{0===(As=n)&&(Ks(),Hi())}}function bu(t,e){ui(Ps,Os),Os|=e,Fs|=e}function wu(){Os=Ps.current,si(Ps)}function _u(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,zr(n)),null!==xs)for(n=xs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Do(),si(hi),si(li),Go();break;case 5:Po(r);break;case 4:Do();break;case 13:case 19:si(Lo);break;case 10:to(r);break;case 23:case 24:wu()}n=n.return}Rs=t,xs=zu(t.current,null),Ds=Os=Fs=e,Ls=0,Ms=null,Vs=Us=js=0}function Eu(t,e){for(;;){var n=xs;try{if(Zi(),Qo.current=Aa,ta){for(var r=Xo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ta=!1}if($o=0,Zo=Jo=Xo=null,ea=!1,Ns.current=null,null===n||null===n.return){Ls=1,Ms=e,xs=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Ds,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Lo.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var g=f.memoizedProps;d=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(d){var y=f.updateQueue;if(null===y){var v=new Set;v.add(c),f.updateQueue=v}else y.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=so(-1,1);m.tag=2,uo(s,m)}s.lanes|=1;break t}u=void 0,s=e;var b=o.pingCache;if(null===b?(b=o.pingCache=new us,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var w=ju.bind(null,o,c,s);c.then(w,w)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ls&&(Ls=2),u=as(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,e&=-e,f.lanes|=e,co(f,cs(0,o,e));break t;case 1:o=u;var _=f.type,E=f.stateNode;if(0===(64&f.flags)&&("function"===typeof _.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===Ys||!Ys.has(E)))){f.flags|=4096,e&=-e,f.lanes|=e,co(f,ls(f,o,e));break t}}f=f.return}while(null!==f)}Nu(n)}catch(T){e=T,xs===n&&null!==n&&(xs=n=n.return);continue}break}}function Tu(){var t=Cs.current;return Cs.current=Aa,null===t?Aa:t}function Iu(t,e){var n=As;As|=16;var r=Tu();for(Rs===t&&Ds===e||_u(t,e);;)try{Su();break}catch(i){Eu(t,i)}if(Zi(),As=n,Cs.current=r,null!==xs)throw Error(a(261));return Rs=null,Ds=0,Ls}function Su(){for(;null!==xs;)Cu(xs)}function ku(){for(;null!==xs&&!Si();)Cu(xs)}function Cu(t){var e=Hs(t.alternate,t,Os);t.memoizedProps=t.pendingProps,null===e?Nu(t):xs=e,Ns.current=null}function Nu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=is(n,e,Os)))return void(xs=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Os)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=os(e)))return n.flags&=2047,void(xs=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(xs=e);xs=e=t}while(null!==e);0===Ls&&(Ls=5)}function Au(t){var e=qi();return zi(99,Ru.bind(null,t,e)),null}function Ru(t,e){do{Du()}while(null!==Xs);if(0!==(48&As))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<o;){var c=31-Ke(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==eu&&0===(24&r)&&eu.has(t)&&eu.delete(t),t===Rs&&(xs=Rs=null,Ds=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Ns.current=null,jr=Ye,pr(s=dr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(k){u=null;break t}var h=0,f=-1,d=-1,p=0,g=0,y=s,v=null;e:for(;;){for(var m;y!==u||0!==o&&3!==y.nodeType||(f=h+o),y!==c||0!==l&&3!==y.nodeType||(d=h+l),3===y.nodeType&&(h+=y.nodeValue.length),null!==(m=y.firstChild);)v=y,y=m;for(;;){if(y===s)break e;if(v===u&&++p===o&&(f=h),v===c&&++g===l&&(d=h),null!==(m=y.nextSibling))break;v=(y=v).parentNode}y=m}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Ur={focusedElem:s,selectionRange:u},Ye=!1,su=null,uu=!1,Ws=r;do{try{xu()}catch(k){if(null===Ws)throw Error(a(330));Fu(Ws,k),Ws=Ws.nextEffect}}while(null!==Ws);su=null,Ws=r;do{try{for(s=t;null!==Ws;){var b=Ws.flags;if(16&b&&mt(Ws.stateNode,""),128&b){var w=Ws.alternate;if(null!==w){var _=w.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&b){case 2:bs(Ws),Ws.flags&=-3;break;case 6:bs(Ws),Ws.flags&=-3,Ts(Ws.alternate,Ws);break;case 1024:Ws.flags&=-1025;break;case 1028:Ws.flags&=-1025,Ts(Ws.alternate,Ws);break;case 4:Ts(Ws.alternate,Ws);break;case 8:Es(s,u=Ws);var E=u.alternate;vs(u),null!==E&&vs(E)}Ws=Ws.nextEffect}}catch(k){if(null===Ws)throw Error(a(330));Fu(Ws,k),Ws=Ws.nextEffect}}while(null!==Ws);if(_=Ur,w=dr(),b=_.focusedElem,s=_.selectionRange,w!==b&&b&&b.ownerDocument&&fr(b.ownerDocument.documentElement,b)){null!==s&&pr(b)&&(w=s.start,void 0===(_=s.end)&&(_=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(_,b.value.length)):(_=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(_=_.getSelection(),u=b.textContent.length,E=Math.min(s.start,u),s=void 0===s.end?E:Math.min(s.end,u),!_.extend&&E>s&&(u=s,s=E,E=u),u=hr(b,E),o=hr(b,s),u&&o&&(1!==_.rangeCount||_.anchorNode!==u.node||_.anchorOffset!==u.offset||_.focusNode!==o.node||_.focusOffset!==o.offset)&&((w=w.createRange()).setStart(u.node,u.offset),_.removeAllRanges(),E>s?(_.addRange(w),_.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),_.addRange(w))))),w=[];for(_=b;_=_.parentNode;)1===_.nodeType&&w.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(_=w[b]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Ye=!!jr,Ur=jr=null,t.current=n,Ws=r;do{try{for(b=t;null!==Ws;){var T=Ws.flags;if(36&T&&ps(b,Ws.alternate,Ws),128&T){w=void 0;var I=Ws.ref;if(null!==I){var S=Ws.stateNode;switch(Ws.tag){case 5:w=S;break;default:w=S}"function"===typeof I?I(w):I.current=w}}Ws=Ws.nextEffect}}catch(k){if(null===Ws)throw Error(a(330));Fu(Ws,k),Ws=Ws.nextEffect}}while(null!==Ws);Ws=null,Li(),As=i}else t.current=n;if($s)$s=!1,Xs=t,Js=e;else for(Ws=r;null!==Ws;)e=Ws.nextEffect,Ws.nextEffect=null,8&Ws.flags&&((T=Ws).sibling=null,T.stateNode=null),Ws=e;if(0===(r=t.pendingLanes)&&(Ys=null),1===r?t===ru?nu++:(nu=0,ru=t):nu=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(wi,n,void 0,64===(64&n.current.flags))}catch(k){}if(du(t,Vi()),Gs)throw Gs=!1,t=Qs,Qs=null,t;return 0!==(8&As)||Hi(),null}function xu(){for(;null!==Ws;){var t=Ws.alternate;uu||null===su||(0!==(8&Ws.flags)?te(Ws,su)&&(uu=!0):13===Ws.tag&&Ss(t,Ws)&&te(Ws,su)&&(uu=!0));var e=Ws.flags;0!==(256&e)&&ds(t,Ws),0===(512&e)||$s||($s=!0,Ki(97,(function(){return Du(),null}))),Ws=Ws.nextEffect}}function Du(){if(90!==Js){var t=97<Js?97:Js;return Js=90,zi(t,Lu)}return!1}function Ou(t,e){Zs.push(e,t),$s||($s=!0,Ki(97,(function(){return Du(),null})))}function Pu(t,e){tu.push(e,t),$s||($s=!0,Ki(97,(function(){return Du(),null})))}function Lu(){if(null===Xs)return!1;var t=Xs;if(Xs=null,0!==(48&As))throw Error(a(331));var e=As;As|=32;var n=tu;tu=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));Fu(o,c)}}for(n=Zs,Zs=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));Fu(o,c)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return As=e,Hi(),!0}function Mu(t,e,n){uo(t,e=cs(0,e=as(n,e),1)),e=cu(),null!==(t=fu(t,1))&&(ze(t,1,e),du(t,e))}function Fu(t,e){if(3===t.tag)Mu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Mu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r))){var i=ls(n,t=as(e,t),1);if(uo(n,i),i=cu(),null!==(n=fu(n,1)))ze(n,1,i),du(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r)))try{r.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function ju(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=cu(),t.pingedLanes|=t.suspendedLanes&n,Rs===t&&(Ds&n)===n&&(4===Ls||3===Ls&&(62914560&Ds)===Ds&&500>Vi()-Bs?_u(t,0):Vs|=n),du(t,e)}function Uu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===qi()?1:2:(0===ou&&(ou=Fs),0===(e=qe(62914560&~ou))&&(e=4194304))),n=cu(),null!==(t=fu(t,e))&&(ze(t,e,n),du(t,n))}function Vu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qu(t,e,n,r){return new Vu(t,e,n,r)}function Bu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function zu(t,e){var n=t.alternate;return null===n?((n=qu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ku(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Bu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case I:return Hu(n.children,i,o,e);case M:s=8,i|=16;break;case S:s=8,i|=1;break;case k:return(t=qu(12,n,e,8|i)).elementType=k,t.type=k,t.lanes=o,t;case R:return(t=qu(13,n,e,i)).type=R,t.elementType=R,t.lanes=o,t;case x:return(t=qu(19,n,e,i)).elementType=x,t.lanes=o,t;case F:return Wu(n,i,o,e);case j:return(t=qu(24,n,e,i)).elementType=j,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:s=10;break t;case N:s=9;break t;case A:s=11;break t;case D:s=14;break t;case O:s=16,r=null;break t;case P:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=qu(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Hu(t,e,n,r){return(t=qu(7,t,r,e)).lanes=n,t}function Wu(t,e,n,r){return(t=qu(23,t,r,e)).elementType=F,t.lanes=n,t}function Gu(t,e,n){return(t=qu(6,t,null,e)).lanes=n,t}function Qu(t,e,n){return(e=qu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Be(0),this.expirationTimes=Be(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.mutableSourceEagerHydrationData=null}function $u(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Xu(t,e,n,r){var i=e.current,o=cu(),s=lu(i);t:if(n){e:{if($t(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(pi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(pi(c)){n=vi(n,c,u);break t}}n=u}else n=ci;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),hu(i,s,o),s}function Ju(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Zu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function tc(t,e){Zu(t,e),(t=t.alternate)&&Zu(t,e)}function ec(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yu(t,e,null!=n&&!0===n.hydrate),e=qu(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,oo(e),t[Xr]=n.current,Ar(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function nc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function rc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Ju(a);s.call(t)}}Xu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ec(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Ju(a);u.call(t)}}mu((function(){Xu(e,a,t,i)}))}return Ju(a)}function ic(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(e))throw Error(a(200));return $u(t,e,null,n)}Hs=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||hi.current)Pa=!0;else{if(0===(n&r)){switch(Pa=!1,e.tag){case 3:Ka(e),Ho();break;case 5:Oo(e);break;case 1:pi(e.type)&&mi(e);break;case 4:xo(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;ui(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Ya(t,e,n):(ui(Lo,1&Lo.current),null!==(e=ns(t,e,n))?e.sibling:null);ui(Lo,1&Lo.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return es(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Lo,Lo.current),r)break;return null;case 23:case 24:return e.lanes=0,Ua(t,e,n)}return ns(t,e,n)}Pa=0!==(16384&t.flags)}else Pa=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=di(e,li.current),no(e,n),i=ia(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,pi(r)){var o=!0;mi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&po(e,r,s,t),i.updater=go,e.stateNode=i,i._reactInternals=e,bo(e,r,t,n),e=za(null,e,r,!0,o,n)}else e.tag=0,La(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Bu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===A)return 11;if(t===D)return 14}return 2}(i),t=Qi(i,t),o){case 0:e=qa(null,e,i,t,n);break t;case 1:e=Ba(null,e,i,t,n);break t;case 11:e=Ma(null,e,i,t,n);break t;case 14:e=Fa(null,e,i,Qi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,qa(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ba(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 3:if(Ka(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)Ho(),e=ns(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(jo=Hr(e.stateNode.containerInfo.firstChild),Fo=e,o=Uo=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Wo.push(o);for(n=So(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else La(t,e,r,n),Ho();e=e.child}return e;case 5:return Oo(e),null===t&&Bo(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,qr(r,i)?s=null:null!==o&&qr(r,o)&&(e.flags|=16),Va(t,e),La(t,e,s,n),e.child;case 6:return null===t&&Bo(e),null;case 13:return Ya(t,e,n);case 4:return xo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Io(e,null,r,n):La(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ma(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 7:return La(t,e,e.pendingProps,n),e.child;case 8:case 12:return La(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ui(Yi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=sr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!hi.current){e=ns(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(-1,n&-n)).tag=2,uo(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),eo(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}La(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.flags|=1,La(t,e,r,n),e.child;case 14:return o=Qi(i=e.type,e.pendingProps),Fa(t,e,i,o=Qi(i.type,o),r,n);case 15:return ja(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pi(r)?(t=!0,mi(e)):t=!1,no(e,n),vo(e,r,i),bo(e,r,i,n),za(null,e,r,!0,t,n);case 19:return es(t,e,n);case 23:case 24:return Ua(t,e,n)}throw Error(a(156,e.tag))},ec.prototype.render=function(t){Xu(t,this._internalRoot,null,null)},ec.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Xu(null,t,null,(function(){e[Xr]=null}))},ee=function(t){13===t.tag&&(hu(t,4,cu()),tc(t,4))},ne=function(t){13===t.tag&&(hu(t,67108864,cu()),tc(t,67108864))},re=function(t){if(13===t.tag){var e=cu(),n=lu(t);hu(t,n,e),tc(t,n)}},ie=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ni(r);if(!i)throw Error(a(90));X(r),nt(r,i)}}}break;case"textarea":ct(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},Ot=vu,Pt=function(t,e,n,r,i){var o=As;As|=4;try{return zi(98,t.bind(null,e,n,r,i))}finally{0===(As=o)&&(Ks(),Hi())}},Lt=function(){0===(49&As)&&(function(){if(null!==eu){var t=eu;eu=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,du(t,Vi())}))}Hi()}(),Du())},Mt=function(t,e){var n=As;As|=2;try{return t(e)}finally{0===(As=n)&&(Ks(),Hi())}};var oc={Events:[ti,ei,ni,xt,Dt,Du,{current:!1}]},ac={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},sc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Zt(t))?null:t.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{wi=uc.inject(sc),_i=uc}catch(yt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,e.createPortal=ic,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=Zt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=As;if(0!==(48&n))return t(e);As|=1;try{if(t)return zi(99,t.bind(null,e))}finally{As=n,Hi()}},e.hydrate=function(t,e,n){if(!nc(e))throw Error(a(200));return rc(null,t,e,!0,n)},e.render=function(t,e,n){if(!nc(e))throw Error(a(200));return rc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!nc(t))throw Error(a(40));return!!t._reactRootContainer&&(mu((function(){rc(null,null,t,!1,(function(){t._reactRootContainer=null,t[Xr]=null}))})),!0)},e.unstable_batchedUpdates=vu,e.unstable_createPortal=function(t,e){return ic(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nc(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return rc(t,e,n,!1,r)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(42)},function(t,e,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,h=null,f=function t(){if(null!==l)try{var n=e.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(t,0),r}};r=function(t){null!==l?setTimeout(r,0,t):(l=t,setTimeout(f,0))},i=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,v=null,m=-1,b=5,w=0;e.unstable_shouldYield=function(){return e.unstable_now()>=w},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<t?Math.floor(1e3/t):5};var _=new MessageChannel,E=_.port2;_.port1.onmessage=function(){if(null!==v){var t=e.unstable_now();w=t+b;try{v(!0,t)?E.postMessage(null):(y=!1,v=null)}catch(n){throw E.postMessage(null),n}}else y=!1},r=function(t){v=t,y||(y=!0,E.postMessage(null))},i=function(t,n){m=d((function(){t(e.unstable_now())}),n)},o=function(){p(m),m=-1}}function T(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<k(i,e)))break t;t[r]=e,t[n]=i,n=r}}function I(t){return void 0===(t=t[0])?null:t}function S(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>k(a,n))void 0!==u&&0>k(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>k(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function k(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var C=[],N=[],A=1,R=null,x=3,D=!1,O=!1,P=!1;function L(t){for(var e=I(N);null!==e;){if(null===e.callback)S(N);else{if(!(e.startTime<=t))break;S(N),e.sortIndex=e.expirationTime,T(C,e)}e=I(N)}}function M(t){if(P=!1,L(t),!O)if(null!==I(C))O=!0,r(F);else{var e=I(N);null!==e&&i(M,e.startTime-t)}}function F(t,n){O=!1,P&&(P=!1,o()),D=!0;var r=x;try{for(L(n),R=I(C);null!==R&&(!(R.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=R.callback;if("function"===typeof a){R.callback=null,x=R.priorityLevel;var s=a(R.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?R.callback=s:R===I(C)&&S(C),L(n)}else S(C);R=I(C)}if(null!==R)var u=!0;else{var c=I(N);null!==c&&i(M,c.startTime-n),u=!1}return u}finally{R=null,x=r,D=!1}}var j=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){O||D||(O=!0,r(F))},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return I(C)},e.unstable_next=function(t){switch(x){case 1:case 2:case 3:var e=3;break;default:e=x}var n=x;x=e;try{return t()}finally{x=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=j,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=x;x=t;try{return e()}finally{x=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:A++,callback:n,priorityLevel:t,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(t.sortIndex=a,T(N,t),null===I(C)&&t===I(N)&&(P?o():P=!0,i(M,a-s))):(t.sortIndex=u,T(C,t),O||D||(O=!0,r(F))),t},e.unstable_wrapCallback=function(t){var e=x;return function(){var n=x;x=e;try{return t.apply(this,arguments)}finally{x=n}}}},,function(t,e,n){"use strict";n(18);var r=n(2),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),e.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(l=e.ref),e)s.call(e,r)&&!u.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:l,props:o,_owner:a.current}}e.jsx=c,e.jsxs=c},,,,,,,,function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(x){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),a=new N(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(x){return{type:"throw",arg:x}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",g={};function y(){}function v(){}function m(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(A([])));_&&_!==n&&r.call(_,o)&&(b=_);var E=m.prototype=y.prototype=Object.create(b);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function A(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:R}}function R(){return{value:e,done:!0}}return v.prototype=m,u(E,"constructor",m),u(m,"constructor",v),v.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},T(I.prototype),u(I.prototype,a,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new I(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},T(E),u(E,s,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},,function(t,e,n){(function(t,e){!function(n){"use strict";try{(function(){function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(n),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function c(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=(15&s)<<2|(l=u?t[i+2]:0)>>6,l=63&l;u||(l=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[l])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,a,s=t[n++];s<128?e[r++]=String.fromCharCode(s):191<s&&s<224?(o=t[n++],e[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],a=t[n++],e[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return!function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(r){return}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var p,g="FirebaseError",y=(a(v,p=Error),v);function v(t,e,n){return(e=p.call(this,e)||this).code=t,e.customData=n,e.name=g,Object.setPrototypeOf(e,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,m.prototype.create),e}var m=(b.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t;return t=(t=this.errors[t])?(r=i,t.replace(_,(function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}))):"Error",t=this.serviceName+": "+t+" ("+o+").",new y(o,t,i)},b);function b(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var w,_=/\{\$([^}]+)}/g;function E(t){return t&&t._delegate?t._delegate:t}function T(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=k[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,l(["["+i+"]  "+t.name+":"],n))}}(x=w=w||{})[x.DEBUG=0]="DEBUG",x[x.VERBOSE=1]="VERBOSE",x[x.INFO=2]="INFO",x[x.WARN=3]="WARN",x[x.ERROR=4]="ERROR",x[x.SILENT=5]="SILENT";var I={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},S=w.INFO,k=((Ie={})[w.DEBUG]="log",Ie[w.VERBOSE]="log",Ie[w.INFO]="info",Ie[w.WARN]="warn",Ie[w.ERROR]="error",Ie),C=(Object.defineProperty(N.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in w))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),N.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?I[t]:t},Object.defineProperty(N.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),N.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,w.DEBUG],t)),this._logHandler.apply(this,l([this,w.DEBUG],t))},N.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,w.VERBOSE],t)),this._logHandler.apply(this,l([this,w.VERBOSE],t))},N.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,w.INFO],t)),this._logHandler.apply(this,l([this,w.INFO],t))},N.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,w.WARN],t)),this._logHandler.apply(this,l([this,w.WARN],t))},N.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,w.ERROR],t)),this._logHandler.apply(this,l([this,w.ERROR],t))},N);function N(t){this.name=t,this._logLevel=S,this._logHandler=T,this._userLogHandler=null}var A=function(t,e){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function R(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var x,D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},O={},P=D||self;function L(){}function M(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function F(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var j="closure_uid_"+(1e9*Math.random()>>>0),U=0;function V(t,e,n){return t.call.apply(t.bind,arguments)}function q(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function B(t,e,n){return(B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V:q).apply(null,arguments)}function z(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function K(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,(t.prototype.constructor=t).Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function H(){this.s=this.s,this.o=this.o}var W={};H.prototype.s=!1,H.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,t=Object.prototype.hasOwnProperty.call(t,j)&&t[j]||(t[j]=++U),delete W[t])},H.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Y(){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function X(t){return/^[\s\xa0]*$/.test(t)}var J,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function tt(t,e){return-1!=t.indexOf(e)}function et(t,e){return t<e?-1:e<t?1:0}var nt=P.navigator;function rt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function it(t){var e,n={};for(e in t)n[e]=t[e];return n}J=nt&&(nt=nt.userAgent)?nt:"";var ot="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function at(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ot.length;i++)e=ot[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function st(t){return st[" "](t),t}st[" "]=L;var ut,ct=tt(J,"Opera"),lt=tt(J,"Trident")||tt(J,"MSIE"),ht=tt(J,"Edge"),ft=ht||lt,dt=tt(J,"Gecko")&&!(tt(J.toLowerCase(),"webkit")&&!tt(J,"Edge"))&&!(tt(J,"Trident")||tt(J,"MSIE"))&&!tt(J,"Edge"),pt=tt(J.toLowerCase(),"webkit")&&!tt(J,"Edge");function gt(){var t=P.document;return t?t.documentMode:void 0}var yt="",vt=(vt=J,dt?/rv:([^\);]+)(\)|;)/.exec(vt):ht?/Edge\/([\d\.]+)/.exec(vt):lt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(vt):pt?/WebKit\/(\S+)/.exec(vt):ct?/(?:Version)[ \/]?(\S+)/.exec(vt):void 0);vt&&(yt=vt?vt[1]:""),ut=lt&&null!=(vt=gt())&&vt>parseFloat(yt)?String(vt):yt;var mt={};function bt(){return t=function(){for(var t=0,e=Z(String(ut)).split("."),n=Z("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=et(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||et(0==o[2].length,0==a[2].length)||et(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t},e=mt,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9);var t,e}var wt=P.document&&lt&&(gt()||parseInt(ut,10))||void 0,_t=function(){if(!P.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{P.addEventListener("test",L,e),P.removeEventListener("test",L,e)}catch(t){}return t}();function Et(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Tt(t,e){if(Et.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(dt){t:{try{st(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:It[t.pointerType]||"",this.state=t.state,(this.i=t).defaultPrevented&&Tt.Z.h.call(this)}}Et.prototype.h=function(){this.defaultPrevented=!0},K(Tt,Et);var It={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),kt=0;function Ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++kt,this.ca=this.fa=!1}function Nt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function At(t){this.src=t,this.g={},this.h=0}function Rt(t,e){var n,r,i,o=e.type;o in t.g&&(n=t.g[o],(i=0<=(r=G(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Nt(e),0==t.g[o].length&&(delete t.g[o],t.h--)))}function xt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}At.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=xt(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new Ct(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Dt="closure_lm_"+(1e6*Math.random()|0),Ot={};function Pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=qt(r),e&&e[St]?e.O(n,r,F(i)?!!i.capture:!!i,o):Lt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pt(t,e[o],n,r,i);return null}return n=qt(n),t&&t[St]?t.N(e,n,F(r)?!!r.capture:!!r,i):Lt(t,e,n,!1,r,i)}function Lt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s=F(i)?!!i.capture:!!i,u=Ut(t);if(u||(t[Dt]=u=new At(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(a=jt,(n.proxy=r=function t(e){return a.call(t.src,t.listener,e)}).src=t,r.listener=n,t.addEventListener)void 0===(i=_t?i:s)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ft(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Mt(t){var e,n,r;"number"!=typeof t&&t&&!t.ca&&((e=t.src)&&e[St]?Rt(e.i,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ft(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ut(e))?(Rt(n,t),0==n.h&&(n.src=null,e[Dt]=null)):Nt(t)))}function Ft(t){return t in Ot?Ot[t]:Ot[t]="on"+t}function jt(t,e){var n,r;return!!t.ca||(e=new Tt(e,this),n=t.listener,r=t.ia||t.src,t.fa&&Mt(t),n.call(r,e))}function Ut(t){return(t=t[Dt])instanceof At?t:null}var Vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function qt(t){return"function"==typeof t?t:(t[Vt]||(t[Vt]=function(e){return t.handleEvent(e)}),t[Vt])}function Bt(){H.call(this),this.i=new At(this),(this.P=this).I=null}function zt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e?e=new Et(e,t):e instanceof Et?e.target=e.target||t:(a=e,at(e=new Et(r,t),a)),a=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.g=n[i],a=Kt(o,r,!0,e)&&a;if(a=Kt(o=e.g=t,r,!0,e)&&a,a=Kt(o,r,!1,e)&&a,n)for(i=0;i<n.length;i++)a=Kt(o=e.g=n[i],r,!1,e)&&a}function Kt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.ca&&u.capture==n&&(a=u.listener,s=u.ia||u.src,u.fa&&Rt(t.i,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}K(Bt,H),Bt.prototype[St]=!0,Bt.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=F(i)?!!i.capture:!!i,r=qt(r),e&&e[St]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=xt(a=e.g[n],r,i,o))&&(Nt(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.g[n],e.h--))):(e=e&&Ut(e))&&(n=e.g[n.toString()],(r=(e=-1)<(e=n?xt(n,r,i,o):e)?n[e]:null)&&Mt(r))}(this,t,e,n,r)},Bt.prototype.M=function(){if(Bt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Nt(n[r]);delete e.g[t],e.h--}}this.I=null},Bt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Bt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ht=P.JSON.stringify,Wt=(Gt.prototype.add=function(t,e){var n=Qt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},Gt);function Gt(){this.h=this.g=null}var Qt=(Yt.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},new Yt((function(){return new Xt}),(function(t){return t.reset()})));function Yt(t,e){this.i=t,this.j=e,this.h=0,this.g=null}var $t,Xt=(Jt.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},Jt.prototype.reset=function(){this.next=this.g=this.h=null},Jt);function Jt(){this.next=this.g=this.h=null}function Zt(t,e){var n;$t||(n=P.Promise.resolve(void 0),$t=function(){n.then(ne)}),te||($t(),te=!0),ee.add(t,e)}var te=!1,ee=new Wt;function ne(){for(var t;e=t=void 0,e=null,(t=ee).g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(t){!function(t){P.setTimeout((function(){throw t}),0)}(t)}var e=Qt;e.j(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}te=!1}function re(t,e){Bt.call(this),this.h=t||1,this.g=e||P,this.j=B(this.kb,this),this.l=Date.now()}function ie(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function oe(t,e,n){if("function"==typeof t)n&&(t=B(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=B(t.handleEvent,t)}return 2147483647<Number(e)?-1:P.setTimeout(t,e||0)}K(re,Bt),(x=re.prototype).da=!1,x.S=null,x.kb=function(){var t;this.da&&(0<(t=Date.now()-this.l)&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zt(this,"tick"),this.da&&(ie(this),this.start())))},x.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},x.M=function(){re.Z.M.call(this),ie(this),delete this.g};var ae,se=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(ue,ae=H),ue.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=oe((function(){e.g=null,e.i&&(e.i=!1,t(e))}),e.j);var n=e.h;e.h=null,e.m.apply(null,n)}(this)},ue.prototype.M=function(){ae.prototype.M.call(this),this.g&&(P.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},ue);function ue(t,e){var n=ae.call(this)||this;return n.m=t,n.j=e,n.h=null,n.i=!1,n.g=null,n}function ce(t){H.call(this),this.h=t,this.g={}}K(ce,H);var le=[];function he(t,e,n,r){Array.isArray(n)||(n&&(le[0]=n.toString()),n=le);for(var i=0;i<n.length;i++){var o=Pt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function fe(t){rt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Mt(t)}),t),t.g={}}function de(){this.g=!0}function pe(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ht(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ce.prototype.M=function(){ce.Z.M.call(this),fe(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},de.prototype.Aa=function(){this.g=!1},de.prototype.info=function(){};var ge={},ye=null;function ve(){return ye=ye||new Bt}function me(t){Et.call(this,ge.Ma,t)}function be(){var t=ve();zt(t,new me(t))}function we(t,e){Et.call(this,ge.STAT_EVENT,t),this.stat=e}function _e(t){var e=ve();zt(e,new we(e,t))}function Ee(t,e){Et.call(this,ge.Na,t),this.size=e}function Te(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return P.setTimeout((function(){t()}),e)}ge.Ma="serverreachability",K(me,Et),ge.STAT_EVENT="statevent",K(we,Et),ge.Na="timingevent",K(Ee,Et);var Ie={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9};function Se(){}function ke(t){return t.h||(t.h=t.i())}function Ce(){}function Ne(){Et.call(this,"d")}function Ae(){Et.call(this,"c")}function Re(){}function xe(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ce(this),this.P=Pe,this.W=new re(t=ft?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}D={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"},Se.prototype.h=null,Wt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"},K(Ne,Et),K(Ae,Et),K(Re,Se),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}};var Oe=new Re,Pe=45e3,Le={},Me={};function Fe(t,e,n){t.K=1,t.v=an(Ze(e)),t.s=n,t.U=!0,je(t,null)}function je(t,e){t.F=Date.now(),qe(t),t.A=Ze(t.v);var n,r,i,o,a,s,u=t.A,c=t.X;Array.isArray(c)||(c=[String(c)]),bn(u.h,"t",c),t.C=0,u=t.l.H,t.h=new De,t.g=wr(t.l,u?e:null,!t.s),0<t.O&&(t.L=new se(B(t.Ia,t,t.g),t.O)),he(t.V,t.g,"readystatechange",t.gb),e=t.H?it(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),be(),n=t.j,r=t.u,i=t.A,o=t.m,a=t.X,s=t.s,n.info((function(){if(n.g)if(s)for(var t="",e=s.split("&"),u=0;u<e.length;u++){var c,l,h=e[u].split("=");1<h.length&&(c=h[0],h=h[1],t=2<=(l=c.split("_")).length&&"type"==l[1]?t+(c+"=")+h+"&":t+(c+"=redacted&"))}else t=null;else t=s;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+r+"\n"+i+"\n"+t}))}function Ue(t){return t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Ve(t,e,n){for(var r,i,o,a,s,u=!0;!t.I&&t.C<n.length;){if(o=n,s=a=void 0,a=(i=t).C,(r=-1==(s=o.indexOf("\n",a))?Me:(a=Number(o.substring(a,s)),isNaN(a)?Le:(s+=1)+a>o.length?Me:(o=o.substr(s,a),i.C=s+a,o)))==Me){4==e&&(t.o=4,_e(14),u=!1),pe(t.j,t.m,null,"[Incomplete Response]");break}if(r==Le){t.o=4,_e(15),pe(t.j,t.m,n,"[Invalid Chunk]"),u=!1;break}pe(t.j,t.m,r,null),We(t,r)}Ue(t)&&r!=Me&&r!=Le&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,_e(16),u=!1),t.i=t.i&&u,u?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),fr(e),e.L=!0,_e(11))):(pe(t.j,t.m,n,"[Invalid Chunked Response]"),He(t),Ke(t))}function qe(t){t.Y=Date.now()+t.P,Be(t,t.P)}function Be(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Te(B(t.eb,t),e)}function ze(t){t.B&&(P.clearTimeout(t.B),t.B=null)}function Ke(t){0==t.l.G||t.I||gr(t.l,t)}function He(t){ze(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ie(t.W),fe(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function We(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Cn(n.i,t)))if(n.I=t.N,!t.J&&Cn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;pr(n),rr(n)}hr(n),_e(18)}}else n.ta=i[1],0<n.ta-n.U&&i[2]<37500&&n.N&&0==n.A&&!n.v&&(n.v=Te(B(n.ab,n),6e3));if(kn(n.i)<=1&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else vr(n,11)}else if(!t.J&&n.g!=t||pr(n),!X(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o,a,s,u,c,l,h,f,d,p,g=i[e];n.U=g[0],g=g[1],2==n.G?"c"==g[0]?(n.J=g[1],n.la=g[2],null!=(o=g[3])&&(n.ma=o,n.h.info("VER="+n.ma)),null!=(a=g[4])&&(n.za=a,n.h.info("SVER="+n.za)),null!=(s=g[5])&&"number"==typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n,(u=t.g)&&(!(c=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null)||!(l=r.i).g&&(tt(c,"spdy")||tt(c,"quic")||tt(c,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Nn(l,l.h),l.h=null)),!r.D||(h=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null)&&(r.sa=h,on(r.F,r.D,h))),n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),f=t,(r=n).oa=br(r,r.H?r.la:null,r.W),f.J?(An(r.i,f),d=f,(p=r.K)&&d.setTimeout(p),d.B&&(ze(d),qe(d)),r.g=f):lr(r),0<n.l.length&&ar(n)):"stop"!=g[0]&&"close"!=g[0]||vr(n,7):3==n.G&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?vr(n,7):nr(n):"noop"!=g[0]&&n.j&&n.j.wa(g),n.A=0)}be()}catch(g){}}function Ge(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(M(t)||"string"==typeof t)Q(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(M(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(M(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Qe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ye(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];$e(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)$e(i,r=t.g[e])||(i[t.g[n++]=r]=1),e++;t.g.length=n}}function $e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(x=xe.prototype).setTimeout=function(t){this.P=t},x.gb=function(t){t=t.target;var e=this.L;e&&3==Xn(t)?e.l():this.Ia(t)},x.Ia=function(t){try{if(t==this.g)t:{var e=Xn(this.g),n=this.g.Da();if(this.g.ba(),!(e<3)&&(3!=e||ft||this.g&&(this.h.h||this.g.ga()||Jn(this.g)))){this.I||4!=e||7==n||be(),ze(this);var r=this.g.ba();this.N=r;e:if(Ue(this)){var i=Jn(this.g);t="";var o=i.length,a=4==Xn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),Ke(this);var s="";break e}this.h.i=new P.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(i[n],{stream:a&&n==o-1});i.splice(0,o),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==r,h=this.j,f=this.u,d=this.A,p=this.m,g=this.X,y=e,v=r,h.info((function(){return"XMLHTTP RESP ("+p+") [ attempt "+g+"]: "+f+"\n"+d+"\n"+y+" "+v})),this.i){if(this.$&&!this.J){e:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(u)){var l=u;break e}}l=null}if(!(r=l)){this.i=!1,this.o=3,_e(12),He(this),Ke(this);break t}pe(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,We(this,r)}this.U?(Ve(this,e,s),ft&&this.i&&3==e&&(he(this.V,this.W,"tick",this.fb),this.W.start())):(pe(this.j,this.m,s,null),We(this,s)),4==e&&He(this),this.i&&!this.I&&(4==e?gr(this.l,this):(this.i=!1,qe(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,_e(12)):(this.o=0,_e(13)),He(this),Ke(this)}}}catch(e){}var h,f,d,p,g,y,v},x.fb=function(){var t,e;this.g&&(t=Xn(this.g),e=this.g.ga(),this.C<e.length&&(ze(this),Ve(this,t,e),this.i&&4!=t&&qe(this)))},x.cancel=function(){this.I=!0,He(this)},x.eb=function(){this.B=null;var t,e,n=Date.now();0<=n-this.Y?(t=this.j,e=this.A,t.info((function(){return"TIMEOUT: "+e})),2!=this.K&&(be(),_e(17)),He(this),this.o=2,Ke(this)):Be(this,this.Y-n)},(x=Qe.prototype).R=function(){Ye(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},x.T=function(){return Ye(this),this.g.concat()},x.get=function(t,e){return $e(this.h,t)?this.h[t]:e},x.set=function(t,e){$e(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},x.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Je(t,e){var n;this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Je?(this.g=void 0!==e?e:t.g,tn(this,t.j),this.s=t.s,en(this,t.i),nn(this,t.m),this.l=t.l,e=t.h,(n=new gn).i=e.i,e.g&&(n.g=new Qe(e.g),n.h=e.h),rn(this,n),this.o=t.o):t&&(n=String(t).match(Xe))?(this.g=!!e,tn(this,n[1]||"",!0),this.s=sn(n[2]||""),en(this,n[3]||"",!0),nn(this,n[4]),this.l=sn(n[5]||"",!0),rn(this,n[6]||"",!0),this.o=sn(n[7]||"")):(this.g=!!e,this.h=new gn(null,this.g))}function Ze(t){return new Je(t)}function tn(t,e,n){t.j=n?sn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function en(t,e,n){t.i=n?sn(e,!0):e}function nn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.m=e}else t.m=null}function rn(t,e,n){var r,i;e instanceof gn?(t.h=e,r=t.h,(i=t.g)&&!r.j&&(yn(r),r.i=null,r.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(vn(this,e),bn(this,n,t))}),r)),r.j=i):(n||(e=un(e,dn)),t.h=new gn(e,t.g))}function on(t,e,n){t.h.set(e,n)}function an(t){return on(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function sn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function un(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,cn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function cn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Je.prototype.toString=function(){var t=[],e=this.j;e&&t.push(un(e,ln,!0),":");var n=this.i;return!n&&"file"!=e||(t.push("//"),(e=this.s)&&t.push(un(e,ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(un(n,"/"==n.charAt(0)?fn:hn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",un(n,pn)),t.join("")};var ln=/[#\/\?@]/g,hn=/[#\?:]/g,fn=/[#\?]/g,dn=/[#\?@]/g,pn=/#/g;function gn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function yn(t){t.g||(t.g=new Qe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function vn(t,e){yn(t),e=wn(t,e),$e(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,$e((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ye(t)))}function mn(t,e){return yn(t),e=wn(t,e),$e(t.g.h,e)}function bn(t,e,n){vn(t,e),0<n.length&&(t.i=null,t.g.set(wn(t,e),$(n)),t.h+=n.length)}function wn(t,e){return e=String(e),t.j?e.toLowerCase():e}(x=gn.prototype).add=function(t,e){yn(this),this.i=null,t=wn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},x.forEach=function(t,e){yn(this),this.g.forEach((function(n,r){Q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},x.T=function(){yn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},x.R=function(t){yn(this);var e=[];if("string"==typeof t)mn(this,t)&&(e=Y(e,this.g.get(wn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},x.set=function(t,e){return yn(this),this.i=null,mn(this,t=wn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},x.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},x.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.R(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.i=t.join("&")};var _n=function(t,e){this.h=t,this.g=e};function En(t){this.l=t||In,t=P.PerformanceNavigationTiming?0<(t=P.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(P.g&&P.g.Ea&&P.g.Ea()&&P.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Tn,In=10;function Sn(t){return t.h||t.g&&t.g.size>=t.j}function kn(t){return t.h?1:t.g?t.g.size:0}function Cn(t,e){return t.h?t.h==e:t.g&&t.g.has(e)}function Nn(t,e){t.g?t.g.add(e):t.h=e}function An(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Rn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null==t.g||0===t.g.size)return $(t.i);var r=t.i;try{for(var i=R(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function xn(){}function Dn(){this.g=new xn}function On(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Pn(t){this.l=t.$b||null,this.j=t.ib||!1}function Ln(t,e){Bt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Mn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}En.prototype.cancel=function(){var t,e;if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=R(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},xn.prototype.stringify=function(t){return P.JSON.stringify(t,void 0)},xn.prototype.parse=function(t){return P.JSON.parse(t,void 0)},K(Pn,Se),Pn.prototype.g=function(){return new Ln(this.l,this.j)},Pn.prototype.i=(Tn={},function(){return Tn}),K(Ln,Bt);var Mn=0;function Fn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function jn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Un(t)}function Un(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(x=Ln.prototype).open=function(t,e){if(this.readyState!=Mn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Un(this)},x.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||P).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},x.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jn(this)),this.readyState=Mn},x.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==P.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},x.Sa=function(t){var e;this.g&&(this.u&&t.value?this.response.push(t.value):this.u||(e=t.value||new Uint8Array(0),(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)),(t.done?jn:Un)(this),3==this.readyState&&Fn(this))},x.Ua=function(t){this.g&&(this.response=this.responseText=t,jn(this))},x.Ta=function(t){this.g&&(this.response=t,jn(this))},x.ha=function(){this.g&&jn(this)},x.setRequestHeader=function(t,e){this.v.append(t,e)},x.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},x.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ln.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Vn=P.JSON.parse;function qn(t){Bt.call(this),this.headers=new Qe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bn,this.K=this.L=!1}K(qn,Bt);var Bn="",zn=/^https?$/i,Kn=["POST","PUT"];function Hn(t){return"content-type"==t.toLowerCase()}function Wn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Gn(t),Yn(t)}function Gn(t){t.D||(t.D=!0,zt(t,"complete"),zt(t,"error"))}function Qn(t){if(t.h&&void 0!==O&&(!t.C[1]||4!=Xn(t)||2!=t.ba()))if(t.v&&4==Xn(t))oe(t.Fa,0,t);else if(zt(t,"readystatechange"),4==Xn(t)){t.h=!1;try{var e,n,r,i,o=t.ba();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}if((e=a)||((n=0===o)&&(!(i=String(t.H).match(Xe)[1]||null)&&P.self&&P.self.location&&(i=(r=P.self.location.protocol).substr(0,r.length-1)),n=!zn.test(i?i.toLowerCase():"")),e=n),e)zt(t,"complete"),zt(t,"success");else{t.m=6;try{var s=2<Xn(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",Gn(t)}}finally{Yn(t)}}}function Yn(t,e){if(t.g){$n(t);var n=t.g,r=t.C[0]?L:null;t.g=null,t.C=null,e||zt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function $n(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(P.clearTimeout(t.A),t.A=null)}function Xn(t){return t.g?t.g.readyState:0}function Jn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Bn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Zn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",rt(n,(function(t,e){i+=e,i+=":",i+=t,i+="\r\n"})),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):on(t,e,n))}function tr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function er(t){this.za=0,this.l=[],this.h=new de,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tr("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tr("baseRetryDelayMs",5e3,t),this.$a=tr("retryDelaySeedMs",1e4,t),this.Ya=tr("forwardChannelMaxRetries",2,t),this.ra=tr("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new En(t&&t.concurrentRequestLimit),this.Ca=new Dn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function nr(t){var e,n;ir(t),3==t.G&&(e=t.V++,on(n=Ze(t.F),"SID",t.J),on(n,"RID",e),on(n,"TYPE","terminate"),ur(t,n),(e=new xe(t,t.h,e,void 0)).K=2,e.v=an(Ze(n)),n=!1,!(n=P.navigator&&P.navigator.sendBeacon?P.navigator.sendBeacon(e.v.toString(),""):n)&&P.Image&&((new Image).src=e.v,n=!0),n||(e.g=wr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),qe(e)),mr(t)}function rr(t){t.g&&(fr(t),t.g.cancel(),t.g=null)}function ir(t){rr(t),t.u&&(P.clearTimeout(t.u),t.u=null),pr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&P.clearTimeout(t.m),t.m=null)}function or(t,e){t.l.push(new _n(t.Za++,e)),3==t.G&&ar(t)}function ar(t){Sn(t.i)||t.m||(t.m=!0,Zt(t.Ha,t),t.C=0)}function sr(t,e){var n=e?e.m:t.V++,r=Ze(t.F);on(r,"SID",t.J),on(r,"RID",n),on(r,"AID",t.U),ur(t,r),t.o&&t.s&&Zn(r,t.o,t.s),n=new xe(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=cr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Nn(t.i,n),Fe(n,r,e)}function ur(t,e){t.j&&Ge({},(function(t,n){on(e,n,t)}))}function cr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?B(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if((c-=o)<0)o=Math.max(0,i[u].h-100),s=!1;else try{!function(t,e,n){var r=n||"";try{Ge(t,(function(t,n){var i=t;F(t)&&(i=Ht(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function lr(t){t.g||t.u||(t.Y=1,Zt(t.Ga,t),t.A=0)}function hr(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Te(B(t.Ga,t),yr(t,t.A)),t.A++,1)}function fr(t){null!=t.B&&(P.clearTimeout(t.B),t.B=null)}function dr(t){t.g=new xe(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ze(t.oa);on(e,"RID","rpc"),on(e,"SID",t.J),on(e,"CI",t.N?"0":"1"),on(e,"AID",t.U),ur(t,e),on(e,"TYPE","xmlhttp"),t.o&&t.s&&Zn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=an(Ze(e)),n.s=null,n.U=!0,je(n,t)}function pr(t){null!=t.v&&(P.clearTimeout(t.v),t.v=null)}function gr(t,e){var n,r,i,o=null;if(t.g==e){pr(t),fr(t),t.g=null;var a=2}else{if(!Cn(t.i,e))return;o=e.D,An(t.i,e),a=1}if(t.I=e.N,0!=t.G)if(e.i)1==a?(o=e.s?e.s.length:0,e=Date.now()-e.F,n=t.C,zt(a=ve(),new Ee(a,o)),ar(t)):lr(t);else if(3==(n=e.o)||0==n&&0<t.I||(1!=a||(i=e,kn((r=t).i)>=r.i.j-(r.m?1:0)||(r.m?(r.l=i.D.concat(r.l),0):1==r.G||2==r.G||r.C>=(r.Xa?0:r.Ya)||(r.m=Te(B(r.Ha,r,i),yr(r,r.C)),r.C++,0))))&&(2!=a||!hr(t)))switch(o&&0<o.length&&(e=t.i,e.i=e.i.concat(o)),n){case 1:vr(t,5);break;case 4:vr(t,10);break;case 3:vr(t,6);break;default:vr(t,2)}}function yr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function vr(t,e){var n,r,i,o;t.h.info("Error code "+e),2==e?(r=null,t.j&&(r=null),o=B(t.jb,t),r||(r=new Je("//www.google.com/images/cleardot.gif"),P.location&&"http"==P.location.protocol||tn(r,"https"),an(r)),n=r.toString(),r=o,o=new de,P.Image?((i=new Image).onload=z(On,o,i,"TestLoadImage: loaded",!0,r),i.onerror=z(On,o,i,"TestLoadImage: error",!1,r),i.onabort=z(On,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=z(On,o,i,"TestLoadImage: timeout",!1,r),P.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=n):r(!1)):_e(2),t.G=0,t.j&&t.j.va(e),mr(t),ir(t)}function mr(t){t.G=0,t.I=-1,t.j&&(0==Rn(t.i).length&&0==t.l.length||(t.i.i.length=0,$(t.l),t.l.length=0),t.j.ua())}function br(t,e,n){var r,i,o,a,s,u=(a=n)instanceof Je?Ze(a):new Je(a,void 0);return""!=u.i?(e&&en(u,e+"."+u.i),nn(u,u.m)):(r=(s=P.location).protocol,i=e?e+"."+s.hostname:s.hostname,o=+s.port,a=n,s=new Je(null,void 0),r&&tn(s,r),i&&en(s,i),o&&nn(s,o),a&&(s.l=a),u=s),t.aa&&rt(t.aa,(function(t,e){on(u,e,t)})),e=t.D,n=t.sa,e&&n&&on(u,e,n),on(u,"VER",t.ma),ur(t,u),u}function wr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new qn(new Pn({ib:!0})):new qn(t.qa)).L=t.H,e}function _r(){}function Er(){if(lt&&!(10<=Number(wt)))throw Error("Environmental error: no available transport.")}function Tr(t,e){Bt.call(this),this.g=new er(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!X(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!X(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new kr(this)}function Ir(t){Ne.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Sr(){Ae.call(this),this.status=1}function kr(t){this.g=t}(x=qn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=(this.u||Oe).g(),this.C=this.u?ke(this.u):ke(Oe),this.g.onreadystatechange=B(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Wn(this,t)}t=n||"";var i,o=new Qe(this.headers);r&&Ge(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=Hn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.T()),n=P.FormData&&t instanceof P.FormData,0<=G(Kn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$n(this),0<this.B&&((this.K=(i=this.g,lt&&bt()&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=B(this.pa,this)):this.A=oe(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Wn(this,t)}},x.pa=function(){void 0!==O&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))},x.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,zt(this,"complete"),zt(this,"abort"),Yn(this))},x.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yn(this,!0)),qn.Z.M.call(this)},x.Fa=function(){this.s||(this.F||this.v||this.l?Qn(this):this.cb())},x.cb=function(){Qn(this)},x.ba=function(){try{return 2<Xn(this)?this.g.status:-1}catch(r){return-1}},x.ga=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},x.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Vn(e)}},x.Da=function(){return this.m},x.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(x=er.prototype).ma=8,x.G=1,x.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},x.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new xe(this,this.h,t,void 0),n=this.s;if(this.P&&(n?at(n=it(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=cr(this,e,r),on(i=Ze(this.F),"RID",t),on(i,"CVER",22),this.D&&on(i,"X-HTTP-Session-Id",this.D),ur(this,i),this.o&&n&&Zn(i,this.o,n),Nn(this.i,e),this.Ra&&on(i,"TYPE","init"),this.ja?(on(i,"$req",r),on(i,"SID","null"),e.$=!0,Fe(e,i,null)):Fe(e,i,r),this.G=2}}else 3==this.G&&(t?sr(this,t):0==this.l.length||Sn(this.i)||sr(this))},x.Ga=function(){var t;this.u=null,dr(this),this.$&&!(this.L||null==this.g||this.O<=0)&&(t=2*this.O,this.h.info("BP detection timer enabled: "+t),this.B=Te(B(this.bb,this),t))},x.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_e(10),rr(this),dr(this))},x.ab=function(){null!=this.v&&(this.v=null,rr(this),hr(this),_e(19))},x.jb=function(t){t?(this.h.info("Successfully pinged google.com"),_e(2)):(this.h.info("Failed to ping google.com"),_e(1))},(x=_r.prototype).xa=function(){},x.wa=function(){},x.va=function(){},x.ua=function(){},x.Oa=function(){},Er.prototype.g=function(t,e){return new Tr(t,e)},K(Tr,Bt),Tr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Zt(B(t.hb,t,e))),_e(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=br(t,null,t.W),ar(t)},Tr.prototype.close=function(){nr(this.g)},Tr.prototype.u=function(t){var e;"string"==typeof t?((e={}).__data__=t,or(this.g,e)):this.v?((e={}).__data__=Ht(t),or(this.g,e)):or(this.g,t)},Tr.prototype.M=function(){this.g.j=null,delete this.j,nr(this.g),delete this.g,Tr.Z.M.call(this)},K(Ir,Ne),K(Sr,Ae),K(kr,_r),kr.prototype.xa=function(){zt(this.g,"a")},kr.prototype.wa=function(t){zt(this.g,new Ir(t))},kr.prototype.va=function(t){zt(this.g,new Sr)},kr.prototype.ua=function(){zt(this.g,"b")},Er.prototype.createWebChannel=Er.prototype.g,Tr.prototype.send=Tr.prototype.u,Tr.prototype.open=Tr.prototype.m,Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,D.COMPLETE="complete",(Ce.EventType=Wt).OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",Bt.prototype.listen=Bt.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var Cr=ve,Nr=Ie,Ar=D,Rr=ge,xr=10,Dr=11,Or=Pn,Pr=Ce,Lr=qn,Mr=(Fr.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Fr.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},Fr);function Fr(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}Mr.o=-1;var jr,Ur={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vr=(a(Br,jr=Error),Br),qr=new C("@firebase/firestore");function Br(t,e){var n=this;return(n=jr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function zr(){return qr.logLevel}function Kr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];qr.logLevel<=w.DEBUG&&(e=n.map(Gr),qr.debug.apply(qr,l(["Firestore (8.8.1): "+t],e)))}function Hr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];qr.logLevel<=w.ERROR&&(e=n.map(Gr),qr.error.apply(qr,l(["Firestore (8.8.1): "+t],e)))}function Wr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];qr.logLevel<=w.WARN&&(e=n.map(Gr),qr.warn.apply(qr,l(["Firestore (8.8.1): "+t],e)))}function Gr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(r){return t}}function Qr(t){throw Hr(t="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t)),new Error(t)}function Yr(t){t||Qr()}var $r=(Xr.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Xr);function Xr(){}function Jr(t,e){return t<e?-1:e<t?1:0}function Zr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ti(t){return t+"\0"}var ei=(ii.now=function(){return ii.fromMillis(Date.now())},ii.fromDate=function(t){return ii.fromMillis(t.getTime())},ii.fromMillis=function(t){var e=Math.floor(t/1e3);return new ii(e,Math.floor(1e6*(t-1e3*e)))},ii.prototype.toDate=function(){return new Date(this.toMillis())},ii.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},ii.prototype._compareTo=function(t){return this.seconds===t.seconds?Jr(this.nanoseconds,t.nanoseconds):Jr(this.seconds,t.seconds)},ii.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},ii.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},ii.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},ii.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},ii),ni=(ri.fromTimestamp=function(t){return new ri(t)},ri.min=function(){return new ri(new ei(0,0))},ri.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},ri.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},ri.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},ri.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},ri.prototype.toTimestamp=function(){return this.timestamp},ri);function ri(t){this.timestamp=t}function ii(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Vr(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Vr(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vr(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Vr(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function oi(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function ai(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function si(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}Object.defineProperty(bi.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),bi.prototype.isEqual=function(t){return 0===bi.comparator(this,t)},bi.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof bi?t.forEach((function(t){e.push(t)})):e.push(t),this.construct(e)},bi.prototype.limit=function(){return this.offset+this.length},bi.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},bi.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},bi.prototype.firstSegment=function(){return this.segments[this.offset]},bi.prototype.lastSegment=function(){return this.get(this.length-1)},bi.prototype.get=function(t){return this.segments[this.offset+t]},bi.prototype.isEmpty=function(){return 0===this.length},bi.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},bi.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},bi.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},bi.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},bi.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0};var ui,ci,li=(a(mi,ci=D=bi),mi.prototype.construct=function(t,e,n){return new mi(t,e,n)},mi.prototype.canonicalString=function(){return this.toArray().join("/")},mi.prototype.toString=function(){return this.canonicalString()},mi.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter((function(t){return 0<t.length})))}return new mi(n)},mi.emptyPath=function(){return new mi([])},mi),hi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fi=(a(vi,ui=D),vi.prototype.construct=function(t,e,n){return new vi(t,e,n)},vi.isValidIdentifier=function(t){return hi.test(t)},vi.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(t)?t:"`"+t+"`"})).join(".")},vi.prototype.toString=function(){return this.canonicalString()},vi.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},vi.keyField=function(){return new vi(["__name__"])},vi.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new Vr(Ur.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Vr(Ur.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new Vr(Ur.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new vi(e)},vi.emptyPath=function(){return new vi([])},vi),di=(yi.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},yi.prototype.isEqual=function(t){return Zr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},yi),pi=(gi.fromBase64String=function(t){return new gi(atob(t))},gi.fromUint8Array=function(t){return new gi(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},gi.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},gi.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},gi.prototype.approximateByteSize=function(){return 2*this.binaryString.length},gi.prototype.compareTo=function(t){return Jr(this.binaryString,t.binaryString)},gi.prototype.isEqual=function(t){return this.binaryString===t.binaryString},gi);function gi(t){this.binaryString=t}function yi(t){(this.fields=t).sort(fi.comparator)}function vi(){return null!==ui&&ui.apply(this,arguments)||this}function mi(){return null!==ci&&ci.apply(this,arguments)||this}function bi(t,e,n){void 0===e?e=0:e>t.length&&Qr(),void 0===n?n=t.length-e:n>t.length-e&&Qr(),this.segments=t,this.offset=e,this.len=n}pi.EMPTY_BYTE_STRING=new pi("");var wi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(t){if(Yr(!!t),"string"!=typeof t)return{seconds:Ei(t.seconds),nanos:Ei(t.nanos)};var e=0,n=wi.exec(t);return Yr(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Ei(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ti(t){return"string"==typeof t?pi.fromBase64String(t):pi.fromUint8Array(t)}function Ii(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Si(t){return t=_i(t.mapValue.fields.__local_write_time__.timestampValue),new ei(t.seconds,t.nanos)}function ki(t){return null==t}function Ci(t){return 0===t&&1/t==-1/0}function Ni(t){return"number"==typeof t&&Number.isInteger(t)&&!Ci(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ai=(Ri.fromPath=function(t){return new Ri(li.fromString(t))},Ri.fromName=function(t){return new Ri(li.fromString(t).popFirst(5))},Ri.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ri.prototype.isEqual=function(t){return null!==t&&0===li.comparator(this.path,t.path)},Ri.prototype.toString=function(){return this.path.toString()},Ri.comparator=function(t,e){return li.comparator(t.path,e.path)},Ri.isDocumentKey=function(t){return t.length%2==0},Ri.fromSegments=function(t){return new Ri(new li(t.slice()))},Ri);function Ri(t){this.path=t}function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ii(t)?4:10:Qr()}function Di(t,e){var n,r,i=xi(t);if(i!==xi(e))return!1;switch(i){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Si(t).isEqual(Si(e));case 3:return function(e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=_i(t.timestampValue);return e=_i(e.timestampValue),n.seconds===e.seconds&&n.nanos===e.nanos}(e);case 5:return t.stringValue===e.stringValue;case 6:return r=e,Ti(t.bytesValue).isEqual(Ti(r.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return n=e,Ei((r=t).geoPointValue.latitude)===Ei(n.geoPointValue.latitude)&&Ei(r.geoPointValue.longitude)===Ei(n.geoPointValue.longitude);case 2:return function(t,e){return"integerValue"in t&&"integerValue"in e?Ei(t.integerValue)===Ei(e.integerValue):"doubleValue"in t&&"doubleValue"in e&&((t=Ei(t.doubleValue))===(e=Ei(e.doubleValue))?Ci(t)===Ci(e):isNaN(t)&&isNaN(e))}(t,e);case 9:return Zr(t.arrayValue.values||[],e.arrayValue.values||[],Di);case 10:return function(){var n,r=t.mapValue.fields||{},i=e.mapValue.fields||{};if(oi(r)!==oi(i))return!1;for(n in r)if(r.hasOwnProperty(n)&&(void 0===i[n]||!Di(r[n],i[n])))return!1;return!0}();default:return Qr()}}function Oi(t,e){return void 0!==(t.values||[]).find((function(t){return Di(t,e)}))}function Pi(t,e){var n,r,i,o=xi(t),a=xi(e);if(o!==a)return Jr(o,a);switch(o){case 0:return 0;case 1:return Jr(t.booleanValue,e.booleanValue);case 2:return r=e,(i=Ei(t.integerValue||t.doubleValue))<(r=Ei(r.integerValue||r.doubleValue))?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return Li(t.timestampValue,e.timestampValue);case 4:return Li(Si(t),Si(e));case 5:return Jr(t.stringValue,e.stringValue);case 6:return function(t,e){return t=Ti(t),e=Ti(e),t.compareTo(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Jr(n[i],r[i]);if(0!==o)return o}return Jr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=Jr(Ei(n.latitude),Ei(i.latitude)))?r:Jr(Ei(n.longitude),Ei(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Pi(n[i],r[i]);if(o)return o}return Jr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Jr(r[a],o[a]);if(0!==s)return s;if(0!==(s=Pi(n[r[a]],i[o[a]])))return s}return Jr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Qr()}}function Li(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Jr(t,e);var n=_i(t);return t=_i(e),0!==(e=Jr(n.seconds,t.seconds))?e:Jr(n.nanos,t.nanos)}function Mi(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){return"time("+(t=_i(t)).seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ti(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ai.fromName(n).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Qr();var n}(t)}function Fi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ji(t){return t&&"integerValue"in t}function Ui(t){return!!t&&"arrayValue"in t}function Vi(t){return t&&"nullValue"in t}function qi(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bi(t){return t&&"mapValue"in t}function zi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return ai(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=zi(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=zi(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ki=(Hi.empty=function(){return new Hi({mapValue:{}})},Hi.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Bi(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},Hi.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=zi(e)},Hi.prototype.setAll=function(t){var e=this,n=fi.emptyPath(),r={},i=[];t.forEach((function(t,o){var a;n.isImmediateParentOf(o)||(a=e.getFieldsMap(n),e.applyChanges(a,r,i),r={},i=[],n=o.popLast()),t?r[o.lastSegment()]=zi(t):i.push(o.lastSegment())})),t=this.getFieldsMap(n),this.applyChanges(t,r,i)},Hi.prototype.delete=function(t){var e=this.field(t.popLast());Bi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},Hi.prototype.isEqual=function(t){return Di(this.value,t.value)},Hi.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Bi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},Hi.prototype.applyChanges=function(t,e,n){ai(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},Hi.prototype.clone=function(){return new Hi(zi(this.value))},Hi);function Hi(t){this.value=t}var Wi=(Qi.newInvalidDocument=function(t){return new Qi(t,0,ni.min(),Ki.empty(),0)},Qi.newFoundDocument=function(t,e,n){return new Qi(t,1,e,n,0)},Qi.newNoDocument=function(t,e){return new Qi(t,2,e,Ki.empty(),0)},Qi.newUnknownDocument=function(t,e){return new Qi(t,3,e,Ki.empty(),2)},Qi.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},Qi.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this},Qi.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this},Qi.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},Qi.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(Qi.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Qi.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Qi.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Qi.prototype.isValidDocument=function(){return 0!==this.documentType},Qi.prototype.isFoundDocument=function(){return 1===this.documentType},Qi.prototype.isNoDocument=function(){return 2===this.documentType},Qi.prototype.isUnknownDocument=function(){return 3===this.documentType},Qi.prototype.isEqual=function(t){return t instanceof Qi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},Qi.prototype.clone=function(){return new Qi(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},Qi.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},Qi),Gi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Qi(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}function Yi(t,e,n,r,i,o,a){return new Gi(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,a=void 0===a?null:a)}function $i(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((function(t){return(t=t).field.canonicalString()+t.op.toString()+Mi(t.value)})).join(","),t+="|ob:",t+=e.orderBy.map((function(t){return(t=t).field.canonicalString()+t.dir})).join(","),ki(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ko(e.startAt)),e.endAt&&(t+="|ub:",t+=ko(e.endAt)),e.h=t),e.h}function Xi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,a,s=0;s<t.filters.length;s++)if(o=t.filters[s],a=e.filters[s],o.op!==a.op||!o.field.isEqual(a.field)||!Di(o.value,a.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ao(t.startAt,e.startAt)&&Ao(t.endAt,e.endAt)}function Ji(t){return Ai.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Zi,to=(a(eo,Zi=function(){}),eo.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new oo(t,e,n):"array-contains"===e?new vo(t,n):"in"===e?new mo(t,n):"not-in"===e?new bo(t,n):"array-contains-any"===e?new wo(t,n):new eo(t,e,n)},eo.l=function(t,e,n){return new("in"===e?ao:so)(t,n)},eo.prototype.matches=function(t){return t=t.data.field(this.field),"!="===this.op?null!==t&&this.m(Pi(t,this.value)):null!==t&&xi(this.value)===xi(t)&&this.m(Pi(t,this.value))},eo.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Qr()}},eo.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},eo);function eo(t,e,n){var r=this;return(r=Zi.call(this)||this).field=t,r.op=e,r.value=n,r}var no,ro,io,oo=(a(lo,io=to),lo.prototype.matches=function(t){return t=Ai.comparator(t.key,this.key),this.m(t)},lo),ao=(a(co,ro=to),co.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},co),so=(a(uo,no=to),uo.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},uo);function uo(t,e){var n=this;return(n=no.call(this,t,"not-in",e)||this).keys=ho(0,e),n}function co(t,e){var n=this;return(n=ro.call(this,t,"in",e)||this).keys=ho(0,e),n}function lo(t,e,n){var r=this;return(r=io.call(this,t,e,n)||this).key=Ai.fromName(n.referenceValue),r}function ho(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map((function(t){return Ai.fromName(t.referenceValue)}))}var fo,po,go,yo,vo=(a(So,yo=to),So.prototype.matches=function(t){return Ui(t=t.data.field(this.field))&&Oi(t.arrayValue,this.value)},So),mo=(a(Io,go=to),Io.prototype.matches=function(t){return null!==(t=t.data.field(this.field))&&Oi(this.value.arrayValue,t)},Io),bo=(a(To,po=to),To.prototype.matches=function(t){return!Oi(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&null!==(t=t.data.field(this.field))&&!Oi(this.value.arrayValue,t)},To),wo=(a(Eo,fo=to),Eo.prototype.matches=function(t){var e=this;return!(!Ui(t=t.data.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some((function(t){return Oi(e.value.arrayValue,t)}))},Eo),_o=function(t,e){this.position=t,this.before=e};function Eo(t,e){return fo.call(this,t,"array-contains-any",e)||this}function To(t,e){return po.call(this,t,"not-in",e)||this}function Io(t,e){return go.call(this,t,"in",e)||this}function So(t,e){return yo.call(this,t,"array-contains",e)||this}function ko(t){return(t.before?"b":"a")+":"+t.position.map(Mi).join(",")}var Co=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function No(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Ai.comparator(Ai.fromName(a.referenceValue),n.key):Pi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ao(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Di(t.position[n],e.position[n]))return!1;return!0}var Ro=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function xo(t,e,n,r,i,o,a,s){return new Ro(t,e,n,r,i,o,a,s)}function Do(t){return new Ro(t)}function Oo(t){return!ki(t.limit)&&"F"===t.limitType}function Po(t){return!ki(t.limit)&&"L"===t.limitType}function Lo(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function Mo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Fo(t){return null!==t.collectionGroup}function jo(t){var e=t;if(null===e.p){e.p=[];var n=Mo(e);if(t=Lo(e),null!==n&&null===t)n.isKeyField()||e.p.push(new Co(n)),e.p.push(new Co(fi.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new Co(fi.keyField(),n)))}}return e.p}function Uo(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=Yi(e.path,e.collectionGroup,jo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=jo(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Co(o.field,a))}var s=e.endAt?new _o(e.endAt.position,!e.endAt.before):null;t=e.startAt?new _o(e.startAt.position,!e.startAt.before):null,e.T=Yi(e.path,e.collectionGroup,n,e.filters,e.limit,s,t)}return e.T}function Vo(t,e,n){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qo(t,e){return Xi(Uo(t),Uo(e))&&t.limitType===e.limitType}function Bo(t){return $i(Uo(t))+"|lt:"+t.limitType}function zo(t){return"Query(target="+(n=(e=Uo(t)).path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map((function(t){return(t=t).field.canonicalString()+" "+t.op+" "+Mi(t.value)})).join(", ")+"]"),ki(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(t=t).field.canonicalString()+" ("+t.dir+")"})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+ko(e.startAt)),e.endAt&&(n+=", endAt: "+ko(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Ko(t,e){return e.isFoundDocument()&&(n=t,r=e.key.path,null!==n.collectionGroup?e.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Ai.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r))&&function(e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return}return 1}(e)&&function(e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return;return 1}(e)&&(r=e,(!(e=t).startAt||No(e.startAt,jo(e),r))&&(!e.endAt||!No(e.endAt,jo(e),r)));var n,r}function Ho(t){return function(e,n){for(var r=!1,i=0,o=jo(t);i<o.length;i++){var a=o[i],s=function(t,e,n){var r=t.field.isKeyField()?Ai.comparator(e.key,n.key):function(t,n){var r=e.data.field(t);return t=n.data.field(t),null!==r&&null!==t?Pi(r,t):Qr()}(t.field,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Qr()}}(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Wo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ci(e)?"-0":e}}function Go(t){return{integerValue:""+t}}function Qo(t,e){return Ni(e)?Go(e):Wo(t,e)}function Yo(t,e){return t instanceof ua?ji(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var $o,Xo,Jo=(a(ea,Xo=C=function(){this._=void 0}),ea),Zo=(a(ta,$o=C),ta);function ta(t){var e=this;return(e=$o.call(this)||this).elements=t,e}function ea(){return null!==Xo&&Xo.apply(this,arguments)||this}function na(t,e){for(var n=ha(e),r=0,i=t.elements;r<i.length;r++)!function(t){n.some((function(e){return Di(e,t)}))||n.push(t)}(i[r]);return{arrayValue:{values:n}}}var ra,ia=(a(oa,ra=C),oa);function oa(t){var e=this;return(e=ra.call(this)||this).elements=t,e}function aa(t,e){for(var n=ha(e),r=0,i=t.elements;r<i.length;r++)!function(t){n=n.filter((function(e){return!Di(e,t)}))}(i[r]);return{arrayValue:{values:n}}}var sa,ua=(a(ca,sa=C),ca);function ca(t,e){var n=this;return(n=sa.call(this)||this).R=t,n.A=e,n}function la(t){return Ei(t.integerValue||t.doubleValue)}function ha(t){return Ui(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fa(t,e){this.version=t,this.transformResults=e}var da=function(t,e){this.field=t,this.transform=e},pa=(ga.none=function(){return new ga},ga.exists=function(t){return new ga(void 0,t)},ga.updateTime=function(t){return new ga(t)},Object.defineProperty(ga.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),ga.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},ga);function ga(t,e){this.updateTime=t,this.exists=e}function ya(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}function va(t,e,n){var r,i,o,a;t instanceof Ea?(i=e,o=n,ya((r=t).precondition,i)&&(a=r.value.clone(),o=Na(r.fieldTransforms,o,i),a.setAll(o),i.convertToFoundDocument(ba(i),a).setHasLocalMutations())):t instanceof Ta?(o=e,i=n,ya((a=t).precondition,o)&&(n=Na(a.fieldTransforms,i,o),(i=o.data).setAll(ka(a)),i.setAll(n),o.convertToFoundDocument(ba(o),i).setHasLocalMutations())):(e=e,ya(t.precondition,e)&&e.convertToNoDocument(ni.min()))}function ma(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Zr(n,r,(function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Zo&&e instanceof Zo||t instanceof ia&&e instanceof ia?Zr(t.elements,e.elements,Di):t instanceof ua&&e instanceof ua?Di(t.A,e.A):t instanceof Jo&&e instanceof Jo)}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function ba(t){return t.isFoundDocument()?t.version:ni.min()}var wa,_a,Ea=(a(Sa,_a=D=function(){}),Sa),Ta=(a(Ia,wa=D),Ia);function Ia(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=wa.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function Sa(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=_a.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function ka(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){var r;n.isEmpty()||(r=t.data.field(n),e.set(n,r))})),e}function Ca(t,e,n){var r=new Map;Yr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,(o=a,a=s,s=n[i],o instanceof Zo?na(o,a):o instanceof ia?aa(o,a):s))}return r}function Na(t,e,n){for(var r,i=new Map,o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=n.data.field(s.field);i.set(s.field,(r=c,s=e,c=void 0,(u=u)instanceof Jo?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof Zo?na(u,r):u instanceof ia?aa(u,r):(r=la(u=Yo(c=u,r))+la(c.A),ji(u)&&ji(c.A)?Go(r):Wo(c.R,r))))}return i}function Aa(t){this.count=t}var Ra,xa,Da,Oa=(a(Ma,Da=D),Ma),Pa=(a(La,xa=D),La);function La(t,e){var n=this;return(n=xa.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function Ma(t,e){var n=this;return(n=Da.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function Fa(t){switch(t){case Ur.OK:return Qr(),0;case Ur.CANCELLED:case Ur.UNKNOWN:case Ur.DEADLINE_EXCEEDED:case Ur.RESOURCE_EXHAUSTED:case Ur.INTERNAL:case Ur.UNAVAILABLE:case Ur.UNAUTHENTICATED:return;case Ur.INVALID_ARGUMENT:case Ur.NOT_FOUND:case Ur.ALREADY_EXISTS:case Ur.PERMISSION_DENIED:case Ur.FAILED_PRECONDITION:case Ur.ABORTED:case Ur.OUT_OF_RANGE:case Ur.UNIMPLEMENTED:case Ur.DATA_LOSS:return 1;default:return Qr(),0}}function ja(t){if(void 0===t)return Hr("GRPC error has no .code"),Ur.UNKNOWN;switch(t){case Ra.OK:return Ur.OK;case Ra.CANCELLED:return Ur.CANCELLED;case Ra.UNKNOWN:return Ur.UNKNOWN;case Ra.DEADLINE_EXCEEDED:return Ur.DEADLINE_EXCEEDED;case Ra.RESOURCE_EXHAUSTED:return Ur.RESOURCE_EXHAUSTED;case Ra.INTERNAL:return Ur.INTERNAL;case Ra.UNAVAILABLE:return Ur.UNAVAILABLE;case Ra.UNAUTHENTICATED:return Ur.UNAUTHENTICATED;case Ra.INVALID_ARGUMENT:return Ur.INVALID_ARGUMENT;case Ra.NOT_FOUND:return Ur.NOT_FOUND;case Ra.ALREADY_EXISTS:return Ur.ALREADY_EXISTS;case Ra.PERMISSION_DENIED:return Ur.PERMISSION_DENIED;case Ra.FAILED_PRECONDITION:return Ur.FAILED_PRECONDITION;case Ra.ABORTED:return Ur.ABORTED;case Ra.OUT_OF_RANGE:return Ur.OUT_OF_RANGE;case Ra.UNIMPLEMENTED:return Ur.UNIMPLEMENTED;case Ra.DATA_LOSS:return Ur.DATA_LOSS;default:return Qr()}}(C=Ra=Ra||{})[C.OK=0]="OK",C[C.CANCELLED=1]="CANCELLED",C[C.UNKNOWN=2]="UNKNOWN",C[C.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",C[C.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",C[C.NOT_FOUND=5]="NOT_FOUND",C[C.ALREADY_EXISTS=6]="ALREADY_EXISTS",C[C.PERMISSION_DENIED=7]="PERMISSION_DENIED",C[C.UNAUTHENTICATED=16]="UNAUTHENTICATED",C[C.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",C[C.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",C[C.ABORTED=10]="ABORTED",C[C.OUT_OF_RANGE=11]="OUT_OF_RANGE",C[C.UNIMPLEMENTED=12]="UNIMPLEMENTED",C[C.INTERNAL=13]="INTERNAL",C[C.UNAVAILABLE=14]="UNAVAILABLE",C[C.DATA_LOSS=15]="DATA_LOSS";var Ua=(Ka.prototype.insert=function(t,e){return new Ka(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,qa.BLACK,null,null))},Ka.prototype.remove=function(t){return new Ka(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qa.BLACK,null,null))},Ka.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Ka.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Ka.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(Ka.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Ka.prototype.minKey=function(){return this.root.minKey()},Ka.prototype.maxKey=function(){return this.root.maxKey()},Ka.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},Ka.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},Ka.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},Ka.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},Ka.prototype.getIterator=function(){return new Va(this.root,null,this.comparator,!1)},Ka.prototype.getIteratorFrom=function(t){return new Va(this.root,t,this.comparator,!1)},Ka.prototype.getReverseIterator=function(){return new Va(this.root,null,this.comparator,!0)},Ka.prototype.getReverseIteratorFrom=function(t){return new Va(this.root,t,this.comparator,!0)},Ka),Va=(za.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},za.prototype.hasNext=function(){return 0<this.nodeStack.length},za.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},za),qa=(Ba.prototype.copy=function(t,e,n,r,i){return new Ba(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Ba.prototype.isEmpty=function(){return!1},Ba.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},Ba.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Ba.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},Ba.prototype.minKey=function(){return this.min().key},Ba.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Ba.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},Ba.prototype.removeMin=function(){if(this.left.isEmpty())return Ba.EMPTY;var t=this;return(t=(t=t.left.isRed()||t.left.left.isRed()?t:t.moveRedLeft()).copy(null,null,null,t.left.removeMin(),null)).fixUp()},Ba.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()?r:r.moveRedLeft()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed()?r:r.moveRedRight()).key)){if(r.right.isEmpty())return Ba.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},Ba.prototype.isRed=function(){return this.color},Ba.prototype.fixUp=function(){var t=this;return(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},Ba.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},Ba.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},Ba.prototype.rotateLeft=function(){var t=this.copy(null,null,Ba.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Ba.prototype.rotateRight=function(){var t=this.copy(null,null,Ba.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Ba.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Ba.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},Ba.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Qr();if(this.right.isRed())throw Qr();var t=this.left.check();if(t!==this.right.check())throw Qr();return t+(this.isRed()?0:1)},Ba);function Ba(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ba.RED,this.left=null!=r?r:Ba.EMPTY,this.right=null!=i?i:Ba.EMPTY,this.size=this.left.size+1+this.right.size}function za(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function Ka(t,e){this.comparator=t,this.root=e||qa.EMPTY}function Ha(){this.size=0}qa.EMPTY=null,qa.RED=!0,qa.BLACK=!1,qa.EMPTY=(Object.defineProperty(Ha.prototype,"key",{get:function(){throw Qr()},enumerable:!1,configurable:!0}),Object.defineProperty(Ha.prototype,"value",{get:function(){throw Qr()},enumerable:!1,configurable:!0}),Object.defineProperty(Ha.prototype,"color",{get:function(){throw Qr()},enumerable:!1,configurable:!0}),Object.defineProperty(Ha.prototype,"left",{get:function(){throw Qr()},enumerable:!1,configurable:!0}),Object.defineProperty(Ha.prototype,"right",{get:function(){throw Qr()},enumerable:!1,configurable:!0}),Ha.prototype.copy=function(t,e,n,r,i){return this},Ha.prototype.insert=function(t,e,n){return new qa(t,e)},Ha.prototype.remove=function(t,e){return this},Ha.prototype.isEmpty=function(){return!0},Ha.prototype.inorderTraversal=function(t){return!1},Ha.prototype.reverseTraversal=function(t){return!1},Ha.prototype.minKey=function(){return null},Ha.prototype.maxKey=function(){return null},Ha.prototype.isRed=function(){return!1},Ha.prototype.checkMaxDepth=function(){return!0},Ha.prototype.check=function(){return 0},new Ha);var Wa=($a.prototype.has=function(t){return null!==this.data.get(t)},$a.prototype.first=function(){return this.data.minKey()},$a.prototype.last=function(){return this.data.maxKey()},Object.defineProperty($a.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),$a.prototype.indexOf=function(t){return this.data.indexOf(t)},$a.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},$a.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},$a.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},$a.prototype.firstAfterOrEqual=function(t){return(t=this.data.getIteratorFrom(t)).hasNext()?t.getNext().key:null},$a.prototype.getIterator=function(){return new Ga(this.data.getIterator())},$a.prototype.getIteratorFrom=function(t){return new Ga(this.data.getIteratorFrom(t))},$a.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},$a.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},$a.prototype.isEmpty=function(){return this.data.isEmpty()},$a.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},$a.prototype.isEqual=function(t){if(!(t instanceof $a))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},$a.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},$a.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},$a.prototype.copy=function(t){var e=new $a(this.comparator);return e.data=t,e},$a),Ga=(Ya.prototype.getNext=function(){return this.iter.getNext().key},Ya.prototype.hasNext=function(){return this.iter.hasNext()},Ya),Qa=new Ua(Ai.comparator);function Ya(t){this.iter=t}function $a(t){this.comparator=t,this.data=new Ua(this.comparator)}var Xa=new Ua(Ai.comparator),Ja=new Ua(Ai.comparator),Za=new Wa(Ai.comparator);function ts(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Za,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var es=new Wa(Jr),ns=(fs.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,rs.createSynthesizedTargetChangeForCurrentChange(t,e)),new fs(ni.min(),n,es,Qa,ts())},fs),rs=(hs.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new hs(pi.EMPTY_BYTE_STRING,e,ts(),ts(),ts())},hs),is=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},os=function(t,e){this.targetId=t,this.V=e},as=function(t,e,n,r){void 0===n&&(n=pi.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ss=(Object.defineProperty(ls.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(ls.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(ls.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(ls.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),ls.prototype.O=function(t){0<t.approximateByteSize()&&(this.F=!0,this.C=t)},ls.prototype.M=function(){var t=ts(),e=ts(),n=ts();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Qr()}})),new rs(this.C,this.N,t,e,n)},ls.prototype.L=function(){this.F=!1,this.D=ps()},ls.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},ls.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},ls.prototype.U=function(){this.S+=1},ls.prototype.K=function(){--this.S},ls.prototype.j=function(){this.F=!0,this.N=!0},ls),us=(cs.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},cs.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Qr()}}))},cs.prototype.forEachTarget=function(t,e){var n=this;0<t.targetIds.length?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},cs.prototype.rt=function(t){var e=t.targetId,n=t.V.count;(t=this.ot(e))&&(Ji(t=t.target)?0===n?(t=new Ai(t.path),this.tt(e,t,Wi.newNoDocument(t,ni.min()))):Yr(1===n):this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e)))},cs.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);o&&(r.current&&Ji(o.target)&&(o=new Ai(o.target.path),null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Wi.newNoDocument(o,t))),r.$&&(n.set(i,r.M()),r.L()))}));var r=ts();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){return!(t=e.ot(t))||2===t.purpose||(i=!1)})),i&&(r=r.add(t))}));var i=new ns(t,n,this.Y,this.H,r);return this.H=Qa,this.J=ds(),this.Y=new Wa(Jr),i},cs.prototype.Z=function(t,e){var n;this.st(t)&&(n=this.at(t,e.key)?2:0,this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t)))},cs.prototype.tt=function(t,e,n){var r;this.st(t)&&(r=this.nt(t),this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n)))},cs.prototype.removeTarget=function(t){this.G.delete(t)},cs.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},cs.prototype.U=function(t){this.nt(t).U()},cs.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ss,this.G.set(t,e)),e},cs.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Wa(Jr),this.J=this.J.insert(t,e)),e},cs.prototype.st=function(t){var e=null!==this.ot(t);return e||Kr("WatchChangeAggregator","Detected inactive target",t),e},cs.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},cs.prototype.it=function(t){var e=this;this.G.set(t,new ss),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},cs.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},cs);function cs(t){this.W=t,this.G=new Map,this.H=Qa,this.J=ds(),this.Y=new Wa(Jr)}function ls(){this.S=0,this.D=ps(),this.C=pi.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}function hs(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function fs(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function ds(){return new Ua(Ai.comparator)}function ps(){return new Ua(Ai.comparator)}var gs={asc:"ASCENDING",desc:"DESCENDING"},ys={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vs=function(t,e){this.databaseId=t,this.I=e};function ms(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function bs(t,e){return t.I?e.toBase64():e.toUint8Array()}function ws(t){return Yr(!!t),ni.fromTimestamp((t=_i(t),new ei(t.seconds,t.nanos)))}function _s(t,e){return new li(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function Es(t){return Yr(Bs(t=li.fromString(t))),t}function Ts(t,e){return _s(t.databaseId,e.path)}function Is(t,e){if((e=Es(e)).get(1)!==t.databaseId.projectId)throw new Vr(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new Vr(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new Ai(Ns(e))}function Ss(t,e){return _s(t.databaseId,e)}function ks(t){return 4===(t=Es(t)).length?li.emptyPath():Ns(t)}function Cs(t){return new li(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ns(t){return Yr(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function As(t,e,n){return{name:Ts(t,e),fields:n.value.mapValue.fields}}function Rs(t,e,n){var r=Is(t,e.name);return t=ws(e.updateTime),e=new Ki({mapValue:{fields:e.fields}}),e=Wi.newFoundDocument(r,t,e),n&&e.setHasCommittedMutations(),n?e.setHasCommittedMutations():e}function xs(t,e){var n,r,i;if(e instanceof Ea)n={update:As(t,e.key,e.value)};else if(e instanceof Oa)n={delete:Ts(t,e.key)};else if(e instanceof Ta)n={update:As(t,e.key,e.data),updateMask:(r=e.fieldMask,i=[],r.fields.forEach((function(t){return i.push(t.canonicalString())})),{fieldPaths:i})};else{if(!(e instanceof Pa))return Qr();n={verify:Ts(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map((function(t){var e=t.transform;if(e instanceof Jo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof Zo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof ia)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof ua)return{fieldPath:t.field.canonicalString(),increment:e.A};throw Qr()}))),e.precondition.isNone||(n.currentDocument=void 0!==(e=e.precondition).updateTime?{updateTime:ms(t,e.updateTime.toTimestamp())}:void 0!==e.exists?{exists:e.exists}:Qr()),n}function Ds(t,e){var n=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?pa.updateTime(ws(a.updateTime)):void 0!==a.exists?pa.exists(a.exists):pa.none():pa.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n,r=null;return"setToServerValue"in e?(Yr("REQUEST_TIME"===e.setToServerValue),r=new Jo):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new Zo(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new ia(n)):"increment"in e?r=new ua(t,e.increment):Qr(),e=fi.fromServerFormat(e.fieldPath),new da(e,r)}(t,e)})):[];if(e.update){e.update.name;var i=Is(t,e.update.name),o=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=(a=e.updateMask.fieldPaths||[],new di(a.map((function(t){return fi.fromServerFormat(t)}))));return new Ta(i,o,a,n,r)}return new Ea(i,o,n,r)}return e.delete?(r=Is(t,e.delete),new Oa(r,n)):e.verify?(e=Is(t,e.verify),new Pa(e,n)):Qr()}function Os(t,e){return{documents:[Ss(t,e.path)]}}function Ps(t,e){var n={structuredQuery:{}},r=e.path;return null!==e.collectionGroup?(n.parent=Ss(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ss(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),(r=function(t){if(0!==t.length)return 1===(t=t.map((function(t){if("=="===t.op){if(qi(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NAN"}};if(Vi(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qi(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NOT_NAN"}};if(Vi(t.value))return{unaryFilter:{field:js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:js(t.field),op:(e=t.op,ys[e]),value:t.value}};var e}))).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(e.filters))&&(n.structuredQuery.where=r),(r=function(t){if(0!==t.length)return t.map((function(t){return{field:js((t=t).field),direction:(t=t.dir,gs[t])}}))}(e.orderBy))&&(n.structuredQuery.orderBy=r),r=e.limit,null!==(r=t.I||ki(r)?r:{value:r})&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=Ms(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ms(e.endAt)),n}function Ls(t){var e=ks(t.parent),n=t.structuredQuery,r=null;0<(a=n.from?n.from.length:0)&&(Yr(1===a),(s=n.from[0]).allDescendants?r=s.collectionId:e=e.child(s.collectionId));var i=[];n.where&&(i=function t(e){return e?void 0!==e.unaryFilter?[qs(e)]:void 0!==e.fieldFilter?[Vs(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Qr():[]}(n.where));var o=[],a=(t=null,null),s=null;return xo(e,r,o=n.orderBy?n.orderBy.map((function(t){return new Co(Us((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})):o,i,t=n.limit?ki(i="object"==typeof(i=n.limit)?i.value:i)?null:i:t,"F",a=n.startAt?Fs(n.startAt):a,s=n.endAt?Fs(n.endAt):s)}function Ms(t){return{before:t.before,values:t.position}}function Fs(t){var e=!!t.before;return t=t.values||[],new _o(t,e)}function js(t){return{fieldPath:t.canonicalString()}}function Us(t){return fi.fromServerFormat(t.fieldPath)}function Vs(t){return to.create(Us(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Qr()}}(),t.fieldFilter.value)}function qs(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Us(t.unaryFilter.field);return to.create(e,"==",{doubleValue:NaN});case"IS_NULL":return e=Us(t.unaryFilter.field),to.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=Us(t.unaryFilter.field);return to.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return n=Us(t.unaryFilter.field),to.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Qr()}}function Bs(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function zs(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=Ks(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(t.get(n),e);return Ks(e)}function Ks(t){return t+"\x01\x01"}function Hs(t){var e=t.length;if(Yr(2<=e),2===e)return Yr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),li.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||n<a)&&Qr(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Qr()}o=a+2}return new li(r)}function Ws(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var Gs=function(t,e){this.seconds=t,this.nanoseconds=e};function Qs(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}function Ys(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}Ws.store="owner",Ws.key="owner",Qs.store="mutationQueues",Qs.keyPath="userId",Ys.store="mutations",Ys.keyPath="batchId",Ys.userMutationsIndex="userMutationsIndex",Ys.userMutationsKeyPath=["userId","batchId"];var $s=(Xs.prefixForUser=function(t){return[t]},Xs.prefixForPath=function(t,e){return[t,zs(e)]},Xs.key=function(t,e,n){return[t,zs(e),n]},Xs);function Xs(){}function Js(t,e){this.path=t,this.readTime=e}function Zs(t,e){this.path=t,this.version=e}$s.store="documentMutations",$s.PLACEHOLDER=new $s;var tu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};function eu(t){this.byteSize=t}function nu(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}tu.store="remoteDocuments",tu.readTimeIndex="readTimeIndex",tu.readTimeIndexPath="readTime",tu.collectionReadTimeIndex="collectionReadTimeIndex",tu.collectionReadTimeIndexPath=["parentPath","readTime"],eu.store="remoteDocumentGlobal",eu.key="remoteDocumentGlobalKey",nu.store="targets",nu.keyPath="targetId",nu.queryTargetsIndexName="queryTargetsIndex",nu.queryTargetsKeyPath=["canonicalId","targetId"];var ru=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};function iu(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function ou(t,e){this.collectionId=t,this.parent=e}function au(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}function su(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}function uu(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}ru.store="targetDocuments",ru.keyPath=["targetId","path"],ru.documentTargetsIndex="documentTargetsIndex",ru.documentTargetsKeyPath=["path","targetId"],iu.key="targetGlobalKey",iu.store="targetGlobal",ou.store="collectionParents",ou.keyPath=["collectionId","parent"],au.store="clientMetadata",au.keyPath="clientId",su.store="bundles",su.keyPath="bundleId",uu.store="namedQueries",uu.keyPath="name";var cu,lu=l(l([],l(l([],l(l([],l(l([],[Qs.store,Ys.store,$s.store,tu.store,nu.store,Ws.store,iu.store,ru.store]),[au.store])),[eu.store])),[ou.store])),[su.store,uu.store]),hu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fu=(Tu.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},Tu.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},D=Tu,function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}),du=(Eu.prototype.catch=function(t){return this.next(void 0,t)},Eu.prototype.next=function(t,e){var n=this;return this.callbackAttached&&Qr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Eu((function(r,i){n.nextCallback=function(e){n.wrapSuccess(t,e).next(r,i)},n.catchCallback=function(t){n.wrapFailure(e,t).next(r,i)}}))},Eu.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},Eu.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof Eu?e:Eu.resolve(e)}catch(t){return Eu.reject(t)}},Eu.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):Eu.resolve(e)},Eu.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):Eu.reject(e)},Eu.resolve=function(t){return new Eu((function(e,n){e(t)}))},Eu.reject=function(t){return new Eu((function(e,n){n(t)}))},Eu.waitFor=function(t){return new Eu((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},Eu.or=function(t){for(var e=Eu.resolve(!1),n=0,r=t;n<r.length;n++)!function(t){e=e.next((function(e){return e?Eu.resolve(e):t()}))}(r[n]);return e},Eu.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},Eu),pu=(_u.open=function(t,e,n,r){try{return new _u(e,t.transaction(r,n))}catch(t){throw new vu(e,t)}},Object.defineProperty(_u.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),_u.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Kr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},_u.prototype.store=function(t){return t=this.transaction.objectStore(t),new Su(t)},_u),gu=(wu.delete=function(t){return Kr("SimpleDb","Removing database:",t),Cu(window.indexedDB.deleteDatabase(t)).toPromise()},wu.yt=function(){if("undefined"==typeof indexedDB)return!1;if(wu.gt())return!0;var t=f(),e=0<(n=wu._t(t))&&n<10,n=0<(n=wu.Et(t))&&n<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n)},wu.gt=function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/gestalt-laws-game-deploy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===t?void 0:t.Tt)},wu.It=function(t,e){return t.store(e)},wu._t=function(t){return t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1",Number(t)},wu.Et=function(t){return t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1",Number(t)},wu.prototype.At=function(t){return u(this,void 0,void 0,(function(){var e,n=this;return c(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Kr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){t=t.target.result,e(t)},i.onblocked=function(){r(new vu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){"VersionError"===(e=e.target.error).name?r(new Vr(Ur.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new vu(t,e))},i.onupgradeneeded=function(t){Kr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Kr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},wu.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},wu.prototype.runTransaction=function(t,e,n,r){return u(this,void 0,void 0,(function(){var i,o,a,s;return c(this,(function(u){switch(u.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u;return c(this,(function(c){switch(c.label){case 0:++o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=c.sent(),e=pu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),du.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(c.sent(),s),u)];case 4:return s=c.sent(),u="FirebaseError"!==s.name&&o<3,Kr("SimpleDb","Transaction failed with error:",s.message,"Retrying:",u),a.close(),u?[3,5]:[2,{value:Promise.reject(s)}];case 5:return[2]}}))},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(s=u.sent()))return[2,s.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},wu.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},wu),yu=(Object.defineProperty(bu.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(bu.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(bu.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),bu.prototype.done=function(){this.Vt=!0},bu.prototype.Ct=function(t){this.St=t},bu.prototype.delete=function(){return Cu(this.Pt.delete())},bu),vu=(a(mu,cu=Vr),mu);function mu(t,e){var n=this;return(n=cu.call(this,Ur.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function bu(t){this.Pt=t,this.Vt=!1,this.St=null}function wu(t,e,n){this.name=t,this.version=e,this.wt=n,12.2===wu._t(f())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function _u(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new fu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new vu(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){e=Au(e.target.error),n.ft.reject(new vu(t,e))}}function Eu(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}function Tu(){this.onCommittedListeners=[]}function Iu(t){return"IndexedDbTransactionError"===t.name}var Su=(ku.prototype.put=function(t,e){return Cu(t=void 0!==e?(Kr("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Kr("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},ku.prototype.add=function(t){return Kr("SimpleDb","ADD",this.store.name,t,t),Cu(this.store.add(t))},ku.prototype.get=function(t){var e=this;return Cu(this.store.get(t)).next((function(n){return Kr("SimpleDb","GET",e.store.name,t,n=void 0===n?null:n),n}))},ku.prototype.delete=function(t){return Kr("SimpleDb","DELETE",this.store.name,t),Cu(this.store.delete(t))},ku.prototype.count=function(){return Kr("SimpleDb","COUNT",this.store.name),Cu(this.store.count())},ku.prototype.Nt=function(t,e){e=this.cursor(this.options(t,e));var n=[];return this.xt(e,(function(t,e){n.push(e)})).next((function(){return n}))},ku.prototype.Ft=function(t,e){return Kr("SimpleDb","DELETE ALL",this.store.name),(e=this.options(t,e)).kt=!1,e=this.cursor(e),this.xt(e,(function(t,e,n){return n.delete()}))},ku.prototype.$t=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.xt(n,e)},ku.prototype.Ot=function(t){var e=this.cursor({});return new du((function(n,r){e.onerror=function(t){t=Au(t.target.error),r(t)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},ku.prototype.xt=function(t,e){var n=[];return new du((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i,o=t.target.result;o?(i=new yu(o),(t=e(o.primaryKey,o.value,i))instanceof du&&(t=t.catch((function(t){return i.done(),du.reject(t)})),n.push(t)),i.isDone?r():null===i.Dt?o.continue():o.continue(i.Dt)):r()}})).next((function(){return du.waitFor(n)}))},ku.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},ku.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},ku);function ku(t){this.store=t}function Cu(t){return new du((function(e,n){t.onsuccess=function(t){t=t.target.result,e(t)},t.onerror=function(t){t=Au(t.target.error),n(t)}}))}var Nu=!1;function Au(t){var e=gu._t(f());if(12.2<=e&&e<13&&(e="An internal error was encountered in the Indexed Database server",0<=t.message.indexOf(e))){var n=new Vr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Nu||(Nu=!0,setTimeout((function(){throw n}),0)),n}return t}var Ru,xu=(a(Du,Ru=D),Du);function Du(t,e){var n=this;return(n=Ru.call(this)||this).Mt=t,n.currentSequenceNumber=e,n}function Ou(t,e){return gu.It(t.Mt,e)}var Pu=(Vu.prototype.applyToRemoteDocument=function(t,e){for(var n,r,i,o,a,s,u=e.mutationResults,c=0;c<this.mutations.length;c++){var l=this.mutations[c];l.key.isEqual(t.key)&&(n=l,r=t,i=u[c],l=s=a=o=void 0,n instanceof Ea?(a=r,s=i,l=(o=n).value.clone(),o=Ca(o.fieldTransforms,a,s.transformResults),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()):n instanceof Ta?(o=r,a=i,ya((s=n).precondition,o)?(l=Ca(s.fieldTransforms,o,a.transformResults),(n=o.data).setAll(ka(s)),n.setAll(l),o.convertToFoundDocument(a.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(a.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},Vu.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(r=n[e]).key.isEqual(t.key)&&va(r,t,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(t.key)&&va(r,t,this.localWriteTime)},Vu.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key);n=r,e.applyToLocalView(n),r.isValidDocument()||n.convertToNoDocument(ni.min())}))},Vu.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ts())},Vu.prototype.isEqual=function(t){return this.batchId===t.batchId&&Zr(this.mutations,t.mutations,ma)&&Zr(this.baseMutations,t.baseMutations,ma)},Vu),Lu=(Uu.from=function(t,e,n){Yr(t.mutations.length===n.length);for(var r=Ja,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Uu(t,e,n,r)},Uu),Mu=(ju.prototype.withSequenceNumber=function(t){return new ju(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},ju.prototype.withResumeToken=function(t,e){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},ju.prototype.withLastLimboFreeSnapshotVersion=function(t){return new ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},ju),Fu=function(t){this.Lt=t};function ju(t,e,n,r,i,o,a){void 0===i&&(i=ni.min()),void 0===o&&(o=ni.min()),void 0===a&&(a=pi.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}function Uu(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function Vu(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function qu(t,e){if(e.document)return Rs(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ai.fromSegments(e.noDocument.path),r=Wu(e.noDocument.readTime);return n=Wi.newNoDocument(n,r),e.hasCommittedMutations?n.setHasCommittedMutations():n}return e.unknownDocument?(n=Ai.fromSegments(e.unknownDocument.path),r=Wu(e.unknownDocument.version),Wi.newUnknownDocument(n,r)):Qr()}function Bu(t,e,n){var r=zu(n);if(n=e.key.path.popLast().toArray(),e.isFoundDocument()){var i={name:Ts(o=t.Lt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:ms(o,a.version.toTimestamp())},o=e.hasCommittedMutations;return new tu(null,null,i,o,r,n)}if(e.isNoDocument()){var a=e.key.path.toArray();return i=Hu(e.version),o=e.hasCommittedMutations,new tu(null,new Js(a,i),null,o,r,n)}return e.isUnknownDocument()?(o=e.key.path.toArray(),e=Hu(e.version),new tu(new Zs(o,e),null,null,!0,r,n)):Qr()}function zu(t){return[(t=t.toTimestamp()).seconds,t.nanoseconds]}function Ku(t){return t=new ei(t[0],t[1]),ni.fromTimestamp(t)}function Hu(t){return t=t.toTimestamp(),new Gs(t.seconds,t.nanoseconds)}function Wu(t){return t=new ei(t.seconds,t.nanoseconds),ni.fromTimestamp(t)}function Gu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Ds(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i,o=e.mutations[r];r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(i=e.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r+1,1),++r)}var a=e.mutations.map((function(e){return Ds(t.Lt,e)})),s=ei.fromMillis(e.localWriteTimeMs);return new Pu(e.batchId,s,n,a)}function Qu(t){var e=Wu(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Wu(t.lastLimboFreeSnapshotVersion):ni.min(),r=void 0!==t.query.documents?(Yr(1===(r=t.query).documents.length),Uo(Do(ks(r.documents[0])))):Uo(Ls(t.query));return new Mu(r,t.targetId,0,t.lastListenSequenceNumber,e,n,pi.fromBase64String(t.resumeToken))}function Yu(t,e){var n=Hu(e.snapshotVersion),r=Hu(e.lastLimboFreeSnapshotVersion),i=(Ji(e.target)?Os:Ps)(t.Lt,e.target);return t=e.resumeToken.toBase64(),new nu(e.targetId,$i(e.target),n,t,e.sequenceNumber,r,i)}function $u(t){var e=Ls({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Vo(e,e.limit,"L"):e}var Xu=(Ju.prototype.getBundleMetadata=function(t,e){return Zu(t).get(e).next((function(t){if(t)return{id:(t=t).bundleId,createTime:Wu(t.createTime),version:t.version}}))},Ju.prototype.saveBundleMetadata=function(t,e){return Zu(t).put({bundleId:(e=e).id,createTime:Hu(ws(e.createTime)),version:e.version})},Ju.prototype.getNamedQuery=function(t,e){return tc(t).get(e).next((function(t){if(t)return{name:(t=t).name,query:$u(t.bundledQuery),readTime:Wu(t.readTime)}}))},Ju.prototype.saveNamedQuery=function(t,e){return tc(t).put({name:(e=e).name,readTime:Hu(ws(e.readTime)),bundledQuery:e.bundledQuery})},Ju);function Ju(){}function Zu(t){return Ou(t,su.store)}function tc(t){return Ou(t,uu.store)}var ec=(ac.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),du.resolve()},ac.prototype.getCollectionParents=function(t,e){return du.resolve(this.Bt.getEntries(e))},ac),nc=(oc.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Wa(li.comparator);return t=!r.has(n),this.index[e]=r.add(n),t},oc.prototype.has=function(t){var e=t.lastSegment();return t=t.popLast(),(e=this.index[e])&&e.has(t)},oc.prototype.getEntries=function(t){return(this.index[t]||new Wa(li.comparator)).toArray()},oc),rc=(ic.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.qt.has(e))return du.resolve();var r=e.lastSegment(),i=e.popLast();return t.addOnCommittedListener((function(){n.qt.add(e)})),i={collectionId:r,parent:zs(i)},sc(t).put(i)},ic.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ti(e),""],!1,!0);return sc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Hs(o.parent))}return n}))},ic);function ic(){this.qt=new nc}function oc(){this.index={}}function ac(){this.Bt=new nc}function sc(t){return Ou(t,ou.store)}var uc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cc=(lc.withCacheSize=function(t){return new lc(t,lc.DEFAULT_COLLECTION_PERCENTILE,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},lc);function lc(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function hc(t,e,n){var r=t.store(Ys.store),i=t.store($s.store),o=[],a=(t=IDBKeyRange.only(n.batchId),0);t=r.$t({range:t},(function(t,e,n){return a++,n.delete()})),o.push(t.next((function(){Yr(1===a)})));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var l=c[u],h=$s.key(e,l.key.path,n.batchId);o.push(i.delete(h)),s.push(l.key)}return du.waitFor(o).next((function(){return s}))}function fc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Qr();e=t.noDocument}return JSON.stringify(e).length}cc.DEFAULT_COLLECTION_PERCENTILE=10,cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cc.DEFAULT=new cc(41943040,cc.DEFAULT_COLLECTION_PERCENTILE,cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cc.DISABLED=new cc(-1,0,0);var dc=(pc.Qt=function(t,e,n,r){return Yr(""!==t.uid),new pc(t.isAuthenticated()?t.uid:"",e,n,r)},pc.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yc(t).$t({index:Ys.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},pc.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=vc(t),a=yc(t);return a.add({}).next((function(s){Yr("number"==typeof s);for(var u,c,l,h,f,d=new Pu(s,e,n,r),p=(u=i.R,c=i.userId,h=(l=d).baseMutations.map((function(t){return xs(u.Lt,t)})),f=l.mutations.map((function(t){return xs(u.Lt,t)})),new Ys(c,l.batchId,l.localWriteTime.toMillis(),h,f)),g=[],y=new Wa((function(t,e){return Jr(t.canonicalString(),e.canonicalString())})),v=0,m=r;v<m.length;v++){var b=m[v],w=$s.key(i.userId,b.key.path,s);y=y.add(b.key.path.popLast()),g.push(a.put(p)),g.push(o.put(w,$s.PLACEHOLDER))}return y.forEach((function(e){g.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=d.keys()})),du.waitFor(g).next((function(){return d}))}))},pc.prototype.lookupMutationBatch=function(t,e){var n=this;return yc(t).get(e).next((function(t){return t?(Yr(t.userId===n.userId),Gu(n.R,t)):null}))},pc.prototype.jt=function(t,e){var n=this;return this.Kt[e]?du.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){return t?(t=t.keys(),n.Kt[e]=t):null}))},pc.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=(e=IDBKeyRange.lowerBound([this.userId,r]),null);return yc(t).$t({index:Ys.userMutationsIndex,range:e},(function(t,e,o){e.userId===n.userId&&(Yr(e.batchId>=r),i=Gu(n.R,e)),o.done()})).next((function(){return i}))},pc.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yc(t).$t({index:Ys.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},pc.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yc(t).Nt(Ys.userMutationsIndex,n).next((function(t){return t.map((function(t){return Gu(e.R,t)}))}))},pc.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=$s.prefixForPath(this.userId,e.path),i=(r=IDBKeyRange.lowerBound(r),[]);return vc(t).$t({range:r},(function(r,o,a){var s=r[0],u=r[1];if(r=r[2],u=Hs(u),s===n.userId&&e.path.isEqual(u))return yc(t).get(r).next((function(t){if(!t)throw Qr();Yr(t.userId===n.userId),i.push(Gu(n.R,t))}));a.done()})).next((function(){return i}))},pc.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wa(Jr),i=[];return e.forEach((function(e){var o=$s.prefixForPath(n.userId,e.path);o=IDBKeyRange.lowerBound(o),o=vc(t).$t({range:o},(function(t,i,o){var a=t[0],s=t[1];t=t[2],s=Hs(s),a===n.userId&&e.path.isEqual(s)?r=r.add(t):o.done()})),i.push(o)})),du.waitFor(i).next((function(){return n.Wt(t,r)}))},pc.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=(e=$s.prefixForPath(this.userId,r),e=IDBKeyRange.lowerBound(e),new Wa(Jr));return vc(t).$t({range:e},(function(t,e,a){var s=t[0],u=t[1];t=t[2],u=Hs(u),s===n.userId&&r.isPrefixOf(u)?u.length===i&&(o=o.add(t)):a.done()})).next((function(){return n.Wt(t,o)}))},pc.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(yc(t).get(e).next((function(t){if(null===t)throw Qr();Yr(t.userId===n.userId),r.push(Gu(n.R,t))})))})),du.waitFor(i).next((function(){return r}))},pc.prototype.removeMutationBatch=function(t,e){var n=this;return hc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),du.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},pc.prototype.Gt=function(t){delete this.Kt[t]},pc.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return du.resolve();n=IDBKeyRange.lowerBound($s.prefixForUser(e.userId));var r=[];return vc(t).$t({range:n},(function(t,n,i){t[0]===e.userId?(t=Hs(t[1]),r.push(t)):i.done()})).next((function(){Yr(0===r.length)}))}))},pc.prototype.containsKey=function(t,e){return gc(t,this.userId,e)},pc.prototype.zt=function(t){var e=this;return mc(t).get(this.userId).next((function(t){return t||new Qs(e.userId,-1,"")}))},pc);function pc(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}function gc(t,e,n){var r=(n=$s.prefixForPath(e,n.path))[1],i=(n=IDBKeyRange.lowerBound(n),!1);return vc(t).$t({range:n,kt:!0},(function(t,n,o){var a=t[0],s=t[1];t[2],a===e&&s===r&&(i=!0),o.done()})).next((function(){return i}))}function yc(t){return Ou(t,Ys.store)}function vc(t){return Ou(t,$s.store)}function mc(t){return Ou(t,Qs.store)}var bc=(Ec.prototype.next=function(){return this.Ht+=2,this.Ht},Ec.Jt=function(){return new Ec(0)},Ec.Yt=function(){return new Ec(-1)},Ec),wc=(_c.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new bc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},_c.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return ni.fromTimestamp(new ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},_c.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},_c.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},_c.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},_c.prototype.updateTargetData=function(t,e){return this.te(t,e)},_c.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Tc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Yr(0<e.targetCount),--e.targetCount,n.Zt(t,e)}))},_c.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Tc(t).$t((function(a,s){(s=Qu(s)).sequenceNumber<=e&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(t,s)))})).next((function(){return du.waitFor(o)})).next((function(){return i}))},_c.prototype.forEachTarget=function(t,e){return Tc(t).$t((function(t,n){n=Qu(n),e(n)}))},_c.prototype.Xt=function(t){return Ic(t).get(iu.key).next((function(t){return Yr(null!==t),t}))},_c.prototype.Zt=function(t,e){return Ic(t).put(iu.key,e)},_c.prototype.te=function(t,e){return Tc(t).put(Yu(this.R,e))},_c.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},_c.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},_c.prototype.getTargetData=function(t,e){var n=$i(e),r=(n=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),null);return Tc(t).$t({range:n,index:nu.queryTargetsIndexName},(function(t,n,i){n=Qu(n),Xi(e,n.target)&&(r=n,i.done())})).next((function(){return r}))},_c.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Sc(t);return e.forEach((function(e){var a=zs(e.path);i.push(o.put(new ru(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),du.waitFor(i)},_c.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Sc(t);return du.forEach(e,(function(e){var o=zs(e.path);return du.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},_c.prototype.removeMatchingKeysForTargetId=function(t,e){return t=Sc(t),e=IDBKeyRange.bound([e],[e+1],!1,!0),t.delete(e)},_c.prototype.getMatchingKeysForTargetId=function(t,e){e=IDBKeyRange.bound([e],[e+1],!1,!0),t=Sc(t);var n=ts();return t.$t({range:e,kt:!0},(function(t,e,r){t=Hs(t[1]),t=new Ai(t),n=n.add(t)})).next((function(){return n}))},_c.prototype.containsKey=function(t,e){e=zs(e.path),e=IDBKeyRange.bound([e],[ti(e)],!1,!0);var n=0;return Sc(t).$t({index:ru.documentTargetsIndex,kt:!0,range:e},(function(t,e,r){var i=t[0];t[1],0!==i&&(n++,r.done())})).next((function(){return 0<n}))},_c.prototype.lt=function(t,e){return Tc(t).get(e).next((function(t){return t?Qu(t):null}))},_c);function _c(t,e){this.referenceDelegate=t,this.R=e}function Ec(t){this.Ht=t}function Tc(t){return Ou(t,nu.store)}function Ic(t){return Ou(t,iu.store)}function Sc(t){return Ou(t,ru.store)}function kc(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){if(t.code!==Ur.FAILED_PRECONDITION||t.message!==hu)throw t;return Kr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Cc(t,e){var n=t[0],r=t[1];return t=e[0],e=e[1],0===(t=Jr(n,t))?Jr(r,e):t}var Nc=(Lc.prototype.ie=function(){return++this.se},Lc.prototype.re=function(t){var e=[t,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(e):Cc(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(Lc.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),Lc),Ac=(Pc.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},Pc.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(Pc.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),Pc.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Kr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return u(e,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Iu(e=n.sent())?(Kr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,kc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},Pc),Rc=(Oc.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},Oc.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return du.resolve(Mr.o);var r=new Nc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},Oc.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},Oc.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},Oc.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Kr("LruGarbageCollector","Garbage collection skipped; disabled"),du.resolve(uc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Kr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),uc):n.fe(t,e)}))},Oc.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},Oc.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return r=e>c.params.maximumSequenceNumbersToCollect?(Kr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),c.params.maximumSequenceNumbersToCollect):e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),zr()<=w.DEBUG&&Kr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),du.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},Oc),xc=(Dc.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},Dc.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},Dc.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},Dc.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},Dc.prototype.addReference=function(t,e,n){return Mc(t,n)},Dc.prototype.removeReference=function(t,e,n){return Mc(t,n)},Dc.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},Dc.prototype.markPotentiallyOrphaned=Mc,Dc.prototype._e=function(t,e){return r=e,i=!1,mc(n=t).Ot((function(t){return gc(n,t,r).next((function(t){return t&&(i=!0),du.resolve(!t)}))})).next((function(){return i}));var n,r,i},Dc.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){s<=e&&(s=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Sc(t).delete([0,zs(a.path)])}))})),i.push(s))})).next((function(){return du.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},Dc.prototype.removeTarget=function(t,e){return e=e.withSequenceNumber(t.currentSequenceNumber),this.db.getTargetCache().updateTargetData(t,e)},Dc.prototype.updateLimboDocument=Mc,Dc.prototype.we=function(t,e){t=Sc(t);var n,r=Mr.o;return t.$t({index:ru.documentTargetsIndex},(function(t,i){var o=t[0];t[1],t=i.path,i=i.sequenceNumber,0===o?(r!==Mr.o&&e(new Ai(Hs(n)),r),r=i,n=t):r=Mr.o})).next((function(){r!==Mr.o&&e(new Ai(Hs(n)),r)}))},Dc.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},Dc);function Dc(t,e){this.db=t,this.garbageCollector=new Rc(this,e)}function Oc(t,e){this.ae=t,this.params=e}function Pc(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}function Lc(t){this.ne=t,this.buffer=new Wa(Cc),this.se=0}function Mc(t,e){return Sc(t).put((t=t.currentSequenceNumber,new ru(0,zs(e.path),t)))}var Fc,jc=(Kc.prototype.get=function(t){var e=this.mapKeyFn(t);if(void 0!==(e=this.inner[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.equalsFn(i,t))return o}},Kc.prototype.has=function(t){return void 0!==this.get(t)},Kc.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},Kc.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},Kc.prototype.forEach=function(t){ai(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=(a=i[r])[0],a=a[1];t(o,a)}}))},Kc.prototype.isEmpty=function(){return si(this.inner)},Kc),Uc=(zc.prototype.getReadTime=function(t){return(t=this.changes.get(t))?t.readTime:ni.min()},zc.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},zc.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Wi.newInvalidDocument(t),readTime:e})},zc.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?du.resolve(n.document):this.getFromCache(t,e)},zc.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},zc.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},zc.prototype.assertNotApplied=function(){},C=zc,Bc.prototype.addEntry=function(t,e,n){return Wc(t).put(Gc(e),n)},Bc.prototype.removeEntry=function(t,e){return t=Wc(t),e=Gc(e),t.delete(e)},Bc.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},Bc.prototype.getEntry=function(t,e){var n=this;return Wc(t).get(Gc(e)).next((function(t){return n.ye(e,t)}))},Bc.prototype.ge=function(t,e){var n=this;return Wc(t).get(Gc(e)).next((function(t){return{document:n.ye(e,t),size:fc(t)}}))},Bc.prototype.getEntries=function(t,e){var n=this,r=Qa;return this.pe(t,e,(function(t,e){e=n.ye(t,e),r=r.insert(t,e)})).next((function(){return r}))},Bc.prototype.Ee=function(t,e){var n=this,r=Qa,i=new Ua(Ai.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,fc(e))})).next((function(){return{documents:r,Te:i}}))},Bc.prototype.pe=function(t,e,n){if(e.isEmpty())return du.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Wc(t).$t({range:r},(function(t,e,r){for(var a=Ai.fromSegments(t);o&&Ai.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},Bc.prototype.getDocumentsMatchingQuery=function(t,e,n){var r,i=this,o=Qa,a=e.path.length+1,s={};return n.isEqual(ni.min())?(r=e.path.toArray(),s.range=IDBKeyRange.lowerBound(r)):(r=e.path.toArray(),n=zu(n),s.range=IDBKeyRange.lowerBound([r,n],!0),s.index=tu.collectionReadTimeIndex),Wc(t).$t(s,(function(t,n,r){t.length===a&&(n=qu(i.R,n),e.path.isPrefixOf(n.key.path)?Ko(e,n)&&(o=o.insert(n.key,n)):r.done())})).next((function(){return o}))},Bc.prototype.newChangeBuffer=function(t){return new Vc(this,!!t&&t.trackRemovals)},Bc.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},Bc.prototype.getMetadata=function(t){return Hc(t).get(eu.key).next((function(t){return Yr(!!t),t}))},Bc.prototype.me=function(t,e){return Hc(t).put(eu.key,e)},Bc.prototype.ye=function(t,e){return!e||(e=qu(this.R,e)).isNoDocument()&&e.version.isEqual(ni.min())?Wi.newInvalidDocument(t):e},Bc),Vc=(a(qc,Fc=C),qc.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Wa((function(t,e){return Jr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s,u=e.Ae.get(o);a.document.isValidDocument()?(s=Bu(e.Ie.R,a.document,e.getReadTime(o)),i=i.add(o.path.popLast()),a=fc(s),r+=a-u,n.push(e.Ie.addEntry(t,o,s))):(r-=u,e.trackRemovals?(u=Bu(e.Ie.R,Wi.newNoDocument(o,ni.min()),e.getReadTime(o)),n.push(e.Ie.addEntry(t,o,u))):n.push(e.Ie.removeEntry(t,o)))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),du.waitFor(n)},qc.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},qc.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},qc);function qc(t,e){var n=this;return(n=Fc.call(this)||this).Ie=t,n.trackRemovals=e,n.Ae=new jc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),n}function Bc(t,e){this.R=t,this.Ut=e}function zc(){this.changes=new jc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}function Kc(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function Hc(t){return Ou(t,eu.store)}function Wc(t){return Ou(t,tu.store)}function Gc(t){return t.path.toArray()}var Qc=(Yc.prototype.Rt=function(t,e,n,r){var i=this;Yr(n<r&&0<=n&&r<=11);var o=new pu("createOrUpgrade",e);n<1&&1<=r&&(t.createObjectStore(Ws.store),(a=t).createObjectStore(Qs.store,{keyPath:Qs.keyPath}),a.createObjectStore(Ys.store,{keyPath:Ys.keyPath,autoIncrement:!0}).createIndex(Ys.userMutationsIndex,Ys.userMutationsKeyPath,{unique:!0}),a.createObjectStore($s.store),$c(t),t.createObjectStore(tu.store));var a,s=du.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(ru.store),a.deleteObjectStore(nu.store),a.deleteObjectStore(iu.store),$c(t)),s=s.next((function(){return t=o.store(iu.store),e=new iu(0,0,ni.min().toTimestamp(),0),t.put(iu.key,e);var t,e}))),n<4&&4<=r&&(s=(s=0!==n?s.next((function(){return e=t,(n=o).store(Ys.store).Nt().next((function(t){e.deleteObjectStore(Ys.store),e.createObjectStore(Ys.store,{keyPath:Ys.keyPath,autoIncrement:!0}).createIndex(Ys.userMutationsIndex,Ys.userMutationsKeyPath,{unique:!0});var r=n.store(Ys.store);return t=t.map((function(t){return r.put(t)})),du.waitFor(t)}));var e,n})):s).next((function(){t.createObjectStore(au.store,{keyPath:au.keyPath})}))),n<5&&5<=r&&(s=s.next((function(){return i.Re(o)}))),n<6&&6<=r&&(s=s.next((function(){return t.createObjectStore(eu.store),i.be(o)}))),n<7&&7<=r&&(s=s.next((function(){return i.ve(o)}))),n<8&&8<=r&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&9<=r&&(s=s.next((function(){var n;(n=t).objectStoreNames.contains("remoteDocumentChanges")&&n.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(tu.store)).createIndex(tu.readTimeIndex,tu.readTimeIndexPath,{unique:!1}),n.createIndex(tu.collectionReadTimeIndex,tu.collectionReadTimeIndexPath,{unique:!1})}))),n<10&&10<=r&&(s=s.next((function(){return i.Ve(o)}))),n<11&&11<=r?s.next((function(){t.createObjectStore(su.store,{keyPath:su.keyPath}),t.createObjectStore(uu.store,{keyPath:uu.keyPath})})):s},Yc.prototype.be=function(t){var e=0;return t.store(tu.store).$t((function(t,n){e+=fc(n)})).next((function(){var n=new eu(e);return t.store(eu.store).put(eu.key,n)}))},Yc.prototype.Re=function(t){var e=this,n=t.store(Qs.store),r=t.store(Ys.store);return n.Nt().next((function(n){return du.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ys.userMutationsIndex,i).next((function(r){return du.forEach(r,(function(r){return Yr(r.userId===n.userId),r=Gu(e.R,r),hc(t,n.userId,r).next((function(){}))}))}))}))}))},Yc.prototype.ve=function(t){var e=t.store(ru.store),n=t.store(tu.store);return t.store(iu.store).get(iu.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new li(n);n=[0,zs(o)],r.push(e.get(n).next((function(n){return n?du.resolve():e.put(new ru(0,zs(o),t.highestListenSequenceNumber))})))})).next((function(){return du.waitFor(r)}))}))},Yc.prototype.Pe=function(t,e){function n(t){if(i.add(t)){var e=t.lastSegment();return t=t.popLast(),r.put({collectionId:e,parent:zs(t)})}}t.createObjectStore(ou.store,{keyPath:ou.keyPath});var r=e.store(ou.store),i=new nc;return e.store(tu.store).$t({kt:!0},(function(t,e){return n((t=new li(t)).popLast())})).next((function(){return e.store($s.store).$t({kt:!0},(function(t,e){t[0];var r=t[1];return t[2],n((r=Hs(r)).popLast())}))}))},Yc.prototype.Ve=function(t){var e=this,n=t.store(nu.store);return n.$t((function(t,r){return r=Qu(r),r=Yu(e.R,r),n.put(r)}))},Yc);function Yc(t){this.R=t}function $c(t){t.createObjectStore(ru.store,{keyPath:ru.keyPath}).createIndex(ru.documentTargetsIndex,ru.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(nu.store,{keyPath:nu.keyPath}).createIndex(nu.queryTargetsIndexName,nu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(iu.store)}var Xc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jc=(Zc.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Vr(Ur.FAILED_PRECONDITION,Xc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Mr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},Zc.prototype.He=function(t){var e=this;return this.Me=function(n){return u(e,void 0,void 0,(function(){return c(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},Zc.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return u(e,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},Zc.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return u(e,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},Zc.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return el(e).put(new au(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Iu(e))return Kr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Kr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},Zc.prototype.Je=function(t){var e=this;return tl(t).get(Ws.key).next((function(t){return du.resolve(e.tn(t))}))},Zc.prototype.en=function(t){return el(t).delete(this.clientId)},Zc.prototype.nn=function(){return u(this,void 0,void 0,(function(){var t,e,n,r,i=this;return c(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ou(t,au.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return du.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},Zc.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},Zc.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},Zc.prototype.Ye=function(t){var e=this;return this.Ce?du.resolve(!0):tl(t).get(Ws.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Vr(Ur.FAILED_PRECONDITION,Xc);return!1}}return!(!e.networkEnabled||!e.inForeground)||el(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground;if(t=e.networkEnabled===t.networkEnabled,n||r&&t)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Kr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},Zc.prototype.shutdown=function(){return u(this,void 0,void 0,(function(){var t=this;return c(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ws.store,au.store],(function(e){var n=new xu(e,Mr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},Zc.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},Zc.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return el(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(Zc.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),Zc.prototype.getMutationQueue=function(t){return dc.Qt(t,this.R,this.Ut,this.referenceDelegate)},Zc.prototype.getTargetCache=function(){return this.qe},Zc.prototype.getRemoteDocumentCache=function(){return this.Ue},Zc.prototype.getIndexManager=function(){return this.Ut},Zc.prototype.getBundleCache=function(){return this.Ke},Zc.prototype.runTransaction=function(t,e,n){var r,i=this;return Kr("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",lu,(function(o){return r=new xu(o,i.Ne?i.Ne.next():Mr.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Hr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new Vr(Ur.FAILED_PRECONDITION,hu);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},Zc.prototype.dn=function(t){var e=this;return tl(t).get(Ws.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Vr(Ur.FAILED_PRECONDITION,Xc)}))},Zc.prototype.Ze=function(t){var e=new Ws(this.clientId,this.allowTabSynchronization,Date.now());return tl(t).put(Ws.key,e)},Zc.yt=function(){return gu.yt()},Zc.prototype.Xe=function(t){var e=this,n=tl(t);return n.get(Ws.key).next((function(t){return e.tn(t)?(Kr("IndexedDbPersistence","Releasing primary lease."),n.delete(Ws.key)):du.resolve()}))},Zc.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Hr("Detected an update time that is in the future: "+t+" > "+n),1))},Zc.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},Zc.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},Zc.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),d()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},Zc.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},Zc.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Kr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Hr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},Zc.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(r){Hr("Failed to set zombie client id.",r)}},Zc.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(r){}},Zc.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},Zc);function Zc(t,e,n,r,i,o,a,s,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Se=i,this.window=o,this.document=a,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!Zc.yt())throw new Vr(Ur.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xc(this,r),this.Le=e+"main",this.R=new Fu(s),this.Be=new gu(this.Le,11,new Qc(this.R)),this.qe=new wc(this.referenceDelegate,this.R),this.Ut=new rc,this.Ue=(e=this.R,s=this.Ut,new Uc(e,s)),this.Ke=new Xu,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===c&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function tl(t){return Ou(t,Ws.store)}function el(t){return Ou(t,au.store)}function nl(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function rl(t,e){this.progress=t,this.wn=e}var il=(hl.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},hl.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},hl.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},hl.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},hl.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},hl.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Ai.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):Fo(e)?this.In(t,e,n):this.An(t,e,n);var r},hl.prototype.Tn=function(t,e){return this.mn(t,new Ai(e)).next((function(t){var e=Xa;return t.isFoundDocument()?e.insert(t.key,t):e}))},hl.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Xa;return this.Ut.getCollectionParents(t,i).next((function(a){return du.forEach(a,(function(a){var s=(s=e,a=a.child(i),new Ro(a,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},hl.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Wi.newInvalidDocument(c),r=r.insert(c,l)),va(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Ko(e,n)||(r=r.remove(t))})),r}))},hl.prototype.Rn=function(t,e,n){for(var r=ts(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Ta&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},hl),ol=(ll.Pn=function(t,e){for(var n=ts(),r=ts(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new ll(t,e.fromCache,n,r)},ll),al=(cl.prototype.Vn=function(t){this.Sn=t},cl.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())||n.isEqual(ni.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Oo(e)||Po(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(zr()<=w.DEBUG&&Kr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},cl.prototype.Cn=function(t,e){var n=new Wa(Ho(t));return e.forEach((function(e,r){Ko(t,r)&&(n=n.add(r))})),n},cl.prototype.Nn=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.compareTo(r))},cl.prototype.Dn=function(t,e){return zr()<=w.DEBUG&&Kr("QueryEngine","Using full collection scan to execute query:",zo(e)),this.Sn.getDocumentsMatchingQuery(t,e,ni.min())},cl),sl=(ul.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},ul);function ul(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ua(Jr),this.kn=new jc($i,Xi),this.$n=ni.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new il(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}function cl(){}function ll(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}function hl(t,e,n){this.Ue=t,this._n=e,this.Ut=n}function fl(t,e,n,r){return new sl(t,e,n,r)}function dl(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o;return c(this,(function(a){switch(a.label){case 0:return r=(n=t)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new il(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=ts(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var g=p[d];r.push(g.batchId);for(var y=0,v=g.mutations;y<v.length;y++){var m=v[y];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function pl(t,e){var n=t;return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,a,s,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return r=n,i=t,a=h,u=(s=(o=e).batch).keys(),c=du.resolve(),u.forEach((function(t){c=c.next((function(){return a.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);Yr(null!==n),e.version.compareTo(n)<0&&(s.applyToRemoteDocument(e,o),e.isValidDocument()&&a.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,s)})).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function gl(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function yl(t,e){var n=t,r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s,u,c,l=i.get(o);l&&(a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}))),0<(c=e.resumeToken).approximateByteSize()&&(s=l.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber),i=i.insert(o,s),u=l,c=e,Yr(0<(l=s).resumeToken.approximateByteSize()),(0===u.resumeToken.approximateByteSize()||3e8<=l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()||0<c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size)&&a.push(n.qe.updateTargetData(t,s))))}));var s,u=Qa;return e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(vl(t,o,e.documentUpdates,r,void 0).next((function(t){u=t}))),r.isEqual(ni.min())||(s=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)})),a.push(s)),du.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,u)})).next((function(){return u}))})).then((function(t){return n.Fn=i,t}))}function vl(t,e,n,r,i){var o=ts();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Qa;return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(ni.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||0<a.version.compareTo(s.version)||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Kr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function ml(t,e){var n=t;return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,du.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Mu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||0<t.snapshotVersion.compareTo(r.snapshotVersion))&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function bl(t,e,n){return u(this,void 0,void 0,(function(){var r,i,o;return c(this,(function(a){switch(a.label){case 0:i=(r=t).Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Iu(o=a.sent()))throw o;return Kr("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function wl(t,e,n){var r=t,i=ni.min(),o=ts();return r.persistence.runTransaction("Execute query","readonly",(function(t){return a=r,s=t,u=Uo(e),(void 0!==(a=(c=a).kn.get(u))?du.resolve(c.Fn.get(a)):c.qe.getTargetData(s,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ni.min(),n?o:ts())})).next((function(t){return{documents:t,Bn:o}}));var a,s,u,c}))}function _l(t,e){var n=t,r=n.qe;return(t=n.Fn.get(e))?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function El(t){var e=t;return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,t=e.$n,i=n,o=Qa,a=zu(t),t=Wc(r),r=IDBKeyRange.lowerBound(a,!0),t.$t({index:tu.readTimeIndex,range:r},(function(t,e){var n=qu(i.R,e);o=o.insert(n.key,n),a=e.readTime})).next((function(){return{wn:o,readTime:Ku(a)}}));var n,r,i,o,a})).then((function(t){var n=t.wn;return t=t.readTime,e.$n=t,n}))}function Tl(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(n){return[2,(e=t).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return t=Wc(t),e=ni.min(),t.$t({index:tu.readTimeIndex,reverse:!0},(function(t,n,r){n.readTime&&(e=Ku(n.readTime)),r.done()})).next((function(){return e}));var e})).then((function(t){e.$n=t}))]}))}))}var Il,Sl,kl=(Gl.prototype.getBundleMetadata=function(t,e){return du.resolve(this.Qn.get(e))},Gl.prototype.saveBundleMetadata=function(t,e){return this.Qn.set(e.id,{id:e.id,version:e.version,createTime:ws(e.createTime)}),du.resolve()},Gl.prototype.getNamedQuery=function(t,e){return du.resolve(this.jn.get(e))},Gl.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(e=e).name,query:$u(e.bundledQuery),readTime:ws(e.readTime)}),du.resolve()},Gl),Cl=(Wl.prototype.isEmpty=function(){return this.Wn.isEmpty()},Wl.prototype.addReference=function(t,e){e=new Nl(t,e),this.Wn=this.Wn.add(e),this.zn=this.zn.add(e)},Wl.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},Wl.prototype.removeReference=function(t,e){this.Yn(new Nl(t,e))},Wl.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},Wl.prototype.Zn=function(t){var e=this,n=new Ai(new li([])),r=new Nl(n,t),i=(t=new Nl(n,t+1),[]);return this.zn.forEachInRange([r,t],(function(t){e.Yn(t),i.push(t.key)})),i},Wl.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},Wl.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},Wl.prototype.es=function(t){var e=new Ai(new li([])),n=new Nl(e,t),r=(t=new Nl(e,t+1),ts());return this.zn.forEachInRange([n,t],(function(t){r=r.add(t.key)})),r},Wl.prototype.containsKey=function(t){var e=new Nl(t,0);return null!==(e=this.Wn.firstAfterOrEqual(e))&&t.isEqual(e.key)},Wl),Nl=(Hl.Gn=function(t,e){return Ai.comparator(t.key,e.key)||Jr(t.ns,e.ns)},Hl.Hn=function(t,e){return Jr(t.ns,e.ns)||Ai.comparator(t.key,e.key)},Hl),Al=(Kl.prototype.checkEmpty=function(t){return du.resolve(0===this._n.length)},Kl.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1],n=new Pu(i,e,n,r),this._n.push(n);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.rs=this.rs.add(new Nl(s.key,i)),this.Ut.addToCollectionParentIndex(t,s.key.path.popLast())}return du.resolve(n)},Kl.prototype.lookupMutationBatch=function(t,e){return du.resolve(this.os(e))},Kl.prototype.getNextMutationBatchAfterBatchId=function(t,e){return e=(e=this.cs(e+1))<0?0:e,du.resolve(this._n.length>e?this._n[e]:null)},Kl.prototype.getHighestUnacknowledgedBatchId=function(){return du.resolve(0===this._n.length?-1:this.ss-1)},Kl.prototype.getAllMutationBatches=function(t){return du.resolve(this._n.slice())},Kl.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Nl(e,0),i=(e=new Nl(e,Number.POSITIVE_INFINITY),[]);return this.rs.forEachInRange([r,e],(function(t){t=n.os(t.ns),i.push(t)})),du.resolve(i)},Kl.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wa(Jr);return e.forEach((function(t){var e=new Nl(t,0);t=new Nl(t,Number.POSITIVE_INFINITY),n.rs.forEachInRange([e,t],(function(t){r=r.add(t.ns)}))})),du.resolve(this.us(r))},Kl.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1;e=n,Ai.isDocumentKey(e)||(e=e.child("")),e=new Nl(new Ai(e),0);var i=new Wa(Jr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.ns)),!0)}),e),du.resolve(this.us(i))},Kl.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){null!==(t=e.os(t))&&n.push(t)})),n},Kl.prototype.removeMutationBatch=function(t,e){var n=this;Yr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return du.forEach(e.mutations,(function(i){var o=new Nl(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},Kl.prototype.Gt=function(t){},Kl.prototype.containsKey=function(t,e){var n=new Nl(e,0);return n=this.rs.firstAfterOrEqual(n),du.resolve(e.isEqual(n&&n.key))},Kl.prototype.performConsistencyCheck=function(t){return this._n.length,du.resolve()},Kl.prototype.hs=function(t,e){return this.cs(t)},Kl.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},Kl.prototype.os=function(t){return(t=this.cs(t))<0||t>=this._n.length?null:this._n[t]},Kl),Rl=(zl.prototype.addEntry=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-i,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},zl.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},zl.prototype.getEntry=function(t,e){var n=this.docs.get(e);return du.resolve(n?n.document.clone():Wi.newInvalidDocument(e))},zl.prototype.getEntries=function(t,e){var n=this,r=Qa;return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Wi.newInvalidDocument(t))})),du.resolve(r)},zl.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Qa,i=new Ai(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=(s=o.getNext()).key,s=(u=s.value).document,u=u.readTime;if(!e.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||Ko(e,s)&&(r=r.insert(s.key,s.clone()))}return du.resolve(r)},zl.prototype.fs=function(t,e){return du.forEach(this.docs,(function(t){return e(t)}))},zl.prototype.newChangeBuffer=function(t){return new xl(this)},zl.prototype.getSize=function(t){return du.resolve(this.size)},zl),xl=(a(Bl,Sl=C),Bl.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),du.waitFor(n)},Bl.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},Bl.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},Bl),Dl=(ql.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),du.resolve()},ql.prototype.getLastRemoteSnapshotVersion=function(t){return du.resolve(this.lastRemoteSnapshotVersion)},ql.prototype.getHighestSequenceNumber=function(t){return du.resolve(this.ws)},ql.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),du.resolve(this.highestTargetId)},ql.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),du.resolve()},ql.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new bc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},ql.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,du.resolve()},ql.prototype.updateTargetData=function(t,e){return this.te(e),du.resolve()},ql.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),--this.targetCount,du.resolve()},ql.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),du.waitFor(o).next((function(){return i}))},ql.prototype.getTargetCount=function(t){return du.resolve(this.targetCount)},ql.prototype.getTargetData=function(t,e){return e=this.ds.get(e)||null,du.resolve(e)},ql.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),du.resolve()},ql.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),du.waitFor(i)},ql.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),du.resolve()},ql.prototype.getMatchingKeysForTargetId=function(t,e){return e=this._s.es(e),du.resolve(e)},ql.prototype.containsKey=function(t,e){return du.resolve(this._s.containsKey(e))},ql),Ol=(Vl.prototype.start=function(){return Promise.resolve()},Vl.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(Vl.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),Vl.prototype.setDatabaseDeletedListener=function(){},Vl.prototype.setNetworkEnabled=function(){},Vl.prototype.getIndexManager=function(){return this.Ut},Vl.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Al(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},Vl.prototype.getTargetCache=function(){return this.qe},Vl.prototype.getRemoteDocumentCache=function(){return this.Ue},Vl.prototype.getBundleCache=function(){return this.Ke},Vl.prototype.runTransaction=function(t,e,n){var r=this;Kr("MemoryPersistence","Starting transaction:",t);var i=new Pl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},Vl.prototype.Is=function(t,e){return du.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},Vl),Pl=(a(Ul,Il=D),Ul),Ll=(jl.bs=function(t){return new jl(t)},Object.defineProperty(jl.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Qr()},enumerable:!1,configurable:!0}),jl.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),du.resolve()},jl.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),du.resolve()},jl.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),du.resolve()},jl.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},jl.prototype.Es=function(){this.Rs=new Set},jl.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return du.forEach(this.vs,(function(r){var i=Ai.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},jl.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},jl.prototype.ps=function(t){return 0},jl.prototype.Ps=function(t,e){var n=this;return du.or([function(){return du.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},jl),Ml=(Fl.prototype.isAuthenticated=function(){return null!=this.uid},Fl.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},Fl.prototype.isEqual=function(t){return t.uid===this.uid},Fl);function Fl(t){this.uid=t}function jl(t){this.persistence=t,this.As=new Cl,this.Rs=null}function Ul(t){var e=this;return(e=Il.call(this)||this).currentSequenceNumber=t,e}function Vl(t,e){var n=this;this.gs={},this.Ne=new Mr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Dl(this),this.Ut=new ec,this.Ue=(t=this.Ut,new Rl(t,(function(t){return n.referenceDelegate.ps(t)}))),this.R=new Fu(e),this.Ke=new kl(this.R)}function ql(t){this.persistence=t,this.ds=new jc($i,Xi),this.lastRemoteSnapshotVersion=ni.min(),this.highestTargetId=0,this.ws=0,this._s=new Cl,this.targetCount=0,this.ys=bc.Jt()}function Bl(t){var e=this;return(e=Sl.call(this)||this).Ie=t,e}function zl(t,e){this.Ut=t,this.ls=e,this.docs=new Ua(Ai.comparator),this.size=0}function Kl(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Wa(Nl.Gn)}function Hl(t,e){this.key=t,this.ns=e}function Wl(){this.Wn=new Wa(Nl.Gn),this.zn=new Wa(Nl.Hn)}function Gl(t){this.R=t,this.Qn=new Map,this.jn=new Map}function Ql(t,e){return"firestore_clients_"+t+"_"+e}function Yl(t,e,n){return n="firestore_mutations_"+t+"_"+n,e.isAuthenticated()&&(n+="_"+e.uid),n}function $l(t,e){return"firestore_targets_"+t+"_"+e}Ml.UNAUTHENTICATED=new Ml(null),Ml.GOOGLE_CREDENTIALS=new Ml("google-credentials-uid"),Ml.FIRST_PARTY=new Ml("first-party-uid");var Xl,Jl=(_h.Vs=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vr(i.error.code,i.error.message)),o?new _h(t,e,i.state,r):(Hr("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},_h.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},_h),Zl=(wh.Vs=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new Vr(r.error.code,r.error.message)),i?new wh(t,r.state,n):(Hr("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},wh.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},wh),th=(bh.Vs=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=es,o=0;r&&o<n.activeTargetIds.length;++o)r=Ni(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new bh(t,i):(Hr("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},bh),eh=(mh.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new mh(e.clientId,e.onlineState):(Hr("SharedClientState","Failed to parse online state: "+t),null)},mh),nh=(vh.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},vh.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},vh.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},vh),rh=(yh.yt=function(t){return!(!t||!t.localStorage)},yh.prototype.start=function(){return u(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,l,h=this;return c(this,(function(c){switch(c.label){case 0:return[4,this.syncEngine.fn()];case 1:for(o=c.sent(),t=0,e=o;t<e.length;t++)(n=e[t])!==this.Ns&&(r=this.getItem(Ql(this.persistenceKey,n)))&&(i=th.Vs(n,r))&&(this.ks=this.ks.insert(i.clientId,i));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),s=0,u=this.$s;s<u.length;s++)l=u[s],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},yh.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},yh.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},yh.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},yh.prototype.addPendingMutation=function(t){this.zs(t,"pending")},yh.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},yh.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem($l(this.persistenceKey,t)))||(e=Zl.Vs(t,e))&&(n=e.state)),this.Js.Ds(t),this.Qs(),n},yh.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},yh.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},yh.prototype.clearQueryState=function(t){this.removeItem($l(this.persistenceKey,t))},yh.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},yh.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},yh.prototype.setOnlineState=function(t){this.Xs(t)},yh.prototype.notifyBundleLoaded=function(){this.Zs()},yh.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},yh.prototype.getItem=function(t){var e=this.storage.getItem(t);return Kr("SharedClientState","READ",t,e),e},yh.prototype.setItem=function(t,e){Kr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},yh.prototype.removeItem=function(t){Kr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},yh.prototype.Fs=function(t){var e=this,n=t;n.storageArea===this.storage&&(Kr("SharedClientState","EVENT",n.key,n.newValue),n.key!==this.Os?this.Se.enqueueRetryable((function(){return u(e,void 0,void 0,(function(){var t,e,r,i;return c(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(e=this.si(n.key,n.newValue)))return[2,this.ii(e)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(r=this.ri(n.key,n.newValue)))return[2,this.oi(r)]}else if(n.key===this.Us){if(null!==n.newValue&&(i=this.js(n.newValue)))return[2,this.Ws(i)]}else if(n.key===this.Ms)(i=function(t){var e=Mr.o;if(null!=t)try{var n=JSON.parse(t);Yr("number"==typeof n),e=n}catch(t){Hr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Mr.o&&this.sequenceNumberHandler(i);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))})):Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(yh.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),yh.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},yh.prototype.zs=function(t,e,n){n=new Jl(this.currentUser,t,e,n),t=Yl(this.persistenceKey,this.currentUser,t),this.setItem(t,n.Ss())},yh.prototype.Hs=function(t){t=Yl(this.persistenceKey,this.currentUser,t),this.removeItem(t)},yh.prototype.Xs=function(t){t={clientId:this.Ns,onlineState:t},this.storage.setItem(this.Us,JSON.stringify(t))},yh.prototype.Ys=function(t,e,n){var r=$l(this.persistenceKey,t);n=new Zl(t,e,n),this.setItem(r,n.Ss())},yh.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},yh.prototype.ti=function(t){return(t=this.Ls.exec(t))?t[1]:null},yh.prototype.ni=function(t,e){return t=this.ti(t),th.Vs(t,e)},yh.prototype.si=function(t,e){var n=this.Bs.exec(t);return t=Number(n[1]),n=void 0!==n[2]?n[2]:null,Jl.Vs(new Ml(n),t,e)},yh.prototype.ri=function(t,e){return t=this.qs.exec(t),t=Number(t[1]),Zl.Vs(t,e)},yh.prototype.js=function(t){return eh.Vs(t)},yh.prototype.ii=function(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Kr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},yh.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},yh.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},yh.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},yh.prototype.Gs=function(t){var e=es;return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},yh),ih=(gh.prototype.addPendingMutation=function(t){},gh.prototype.updateMutationState=function(t,e,n){},gh.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},gh.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},gh.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},gh.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},gh.prototype.clearQueryState=function(t){delete this.fi[t]},gh.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},gh.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},gh.prototype.start=function(){return this.li=new nh,Promise.resolve()},gh.prototype.handleUserChange=function(t,e,n){},gh.prototype.setOnlineState=function(t){},gh.prototype.shutdown=function(){},gh.prototype.writeSequenceNumber=function(t){},gh.prototype.notifyBundleLoaded=function(){},gh),oh=(ph.prototype.di=function(t){},ph.prototype.shutdown=function(){},ph),ah=(dh.prototype.di=function(t){this.gi.push(t)},dh.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},dh.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},dh.prototype._i=function(){Kr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},dh.prototype.yi=function(){Kr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},dh.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},dh),sh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},uh=(fh.prototype.Ii=function(t){this.Ai=t},fh.prototype.Ri=function(t){this.bi=t},fh.prototype.onMessage=function(t){this.vi=t},fh.prototype.close=function(){this.Ti()},fh.prototype.send=function(t){this.Ei(t)},fh.prototype.Pi=function(){this.Ai()},fh.prototype.Vi=function(t){this.bi(t)},fh.prototype.Si=function(t){this.vi(t)},fh),ch=(hh.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);return Kr("RestConnection","Sending: ",i,n),e={},this.Fi(e,r),this.ki(t,i,e,n).then((function(t){return Kr("RestConnection","Received: ",t),t}),(function(e){throw Wr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},hh.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},hh.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},hh.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+sh[t]},a(lh,Xl=hh),lh.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new Lr;a.listenOnce(Ar.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Nr.NO_ERROR:var e=a.getResponseJson();Kr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Nr.TIMEOUT:Kr("Connection",'RPC "'+t+'" timed out'),o(new Vr(Ur.DEADLINE_EXCEEDED,"Request time out"));break;case Nr.HTTP_ERROR:var n,r,s=a.getStatus();Kr("Connection",'RPC "'+t+'" failed with status:',s,"response text:",a.getResponseText()),0<s?(n=a.getResponseJson().error)&&n.status&&n.message?(u=n.status.toLowerCase().replace(/_/g,"-"),r=0<=Object.values(Ur).indexOf(u)?u:Ur.UNKNOWN,o(new Vr(r,n.message))):o(new Vr(Ur.UNKNOWN,"Server responded with status "+a.getStatus())):o(new Vr(Ur.UNAVAILABLE,"Connection failed."));break;default:Qr()}}finally{Kr("Connection",'RPC "'+t+'" completed.')}var u}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},lh.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Er,o=Cr();t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},this.useFetchStreams&&(t.xmlHttpFactory=new Or({})),this.Fi(t.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=f().indexOf("Electron/")||0<=(n=f()).indexOf("MSIE ")||0<=n.indexOf("Trident/")||0<=f().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(t.httpHeadersOverwriteParam="$httpHeaders"),Kr("Connection","Creating WebChannel: "+(r=r.join("")),t);var a=i.createWebChannel(r,t),s=!1,u=!1,c=new uh({Ei:function(t){u?Kr("Connection","Not sending because WebChannel is closed:",t):(s||(Kr("Connection","Opening WebChannel transport."),a.open(),s=!0),Kr("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}});return(t=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))})(a,Pr.EventType.OPEN,(function(){u||Kr("Connection","WebChannel transport opened.")})),t(a,Pr.EventType.CLOSE,(function(){u||(u=!0,Kr("Connection","WebChannel transport closed"),c.Vi())})),t(a,Pr.EventType.ERROR,(function(t){u||(u=!0,Wr("Connection","WebChannel transport errored:",t),c.Vi(new Vr(Ur.UNAVAILABLE,"The operation could not be completed")))})),t(a,Pr.EventType.MESSAGE,(function(t){var e,n,r,i;u||(Yr(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Kr("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Ra[r];if(void 0!==t)return ja(t)}(),i=n.message,void 0===t&&(t=Ur.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),u=!0,c.Vi(new Vr(t,i)),a.close()):(Kr("Connection","WebChannel received:",e),c.Si(e)))})),t(o,Rr.STAT_EVENT,(function(t){t.stat===xr?Kr("Connection","Detected buffering proxy"):t.stat===Dr&&Kr("Connection","Detected no buffering proxy")})),setTimeout((function(){c.Pi()}),0),c},lh);function lh(t){var e=this;return(e=Xl.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e.useFetchStreams=t.useFetchStreams,e}function hh(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function fh(t){this.Ei=t.Ei,this.Ti=t.Ti}function dh(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}function ph(){}function gh(){this.li=new nh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function yh(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ua(Jr),this.started=!1,this.$s=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.Os=Ql(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new nh),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function vh(){this.activeTargetIds=es}function mh(t,e){this.clientId=t,this.onlineState=e}function bh(t,e){this.clientId=t,this.activeTargetIds=e}function wh(t,e,n){this.targetId=t,this.state=e,this.error=n}function _h(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function Eh(){return"undefined"!=typeof window?window:null}function Th(){return"undefined"!=typeof document?document:null}function Ih(t){return new vs(t,!0)}function Sh(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return u(o,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return Qh(this)?(Kr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return(e=t).Or.add(4),[4,qh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Vh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Oh(n,r)}var kh,Ch,Nh,Ah=(Uh.prototype.reset=function(){this.qi=0},Uh.prototype.Qi=function(){this.qi=this.Bi},Uh.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);0<i&&Kr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},Uh.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},Uh.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},Uh.prototype.Wi=function(){return(Math.random()-.5)*this.qi},Uh),Rh=(jh.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},jh.prototype.er=function(){return 2===this.state},jh.prototype.start=function(){3!==this.state?this.auth():this.nr()},jh.prototype.stop=function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},jh.prototype.sr=function(){this.state=0,this.Zi.reset()},jh.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},jh.prototype.cr=function(t){this.ur(),this.stream.send(t)},jh.prototype.rr=function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},jh.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},jh.prototype.close=function(t,e){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ur.RESOURCE_EXHAUSTED?(Hr(e.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Ur.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},jh.prototype.ar=function(){},jh.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Vr(Ur.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},jh.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},jh.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return u(t,void 0,void 0,(function(){return c(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},jh.prototype.dr=function(t){return Kr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},jh.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Kr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},a(Fh,Nh=C=jh),Fh.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},Fh.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Qr(),r=e.targetChange.targetIds||[],i=(a=e.targetChange.resumeToken,t.I?(Yr(void 0===a||"string"==typeof a),pi.fromBase64String(a||"")):(Yr(void 0===a||a instanceof Uint8Array),pi.fromUint8Array(a||new Uint8Array))),o=(s=e.targetChange.cause)&&(u=void 0===(c=s).code?Ur.UNKNOWN:ja(c.code),new Vr(u,c.message||"")),a=new as(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=Is(t,n.document.name),i=ws(n.document.updateTime);var s=new Ki({mapValue:{fields:n.document.fields}}),u=(o=Wi.newFoundDocument(r,i,s),n.targetIds||[]),c=n.removedTargetIds||[];a=new is(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=Is(t,n.document),i=n.readTime?ws(n.readTime):ni.min(),s=Wi.newNoDocument(r,i),o=n.removedTargetIds||[],a=new is([],o,s.key,s);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=Is(t,n.document),i=n.removedTargetIds||[],a=new is([],i,r,null);else{if(!("filter"in e))return Qr();e.filter,(e=e.filter).targetId,r=new Aa(n=e.count||0),i=e.targetId,a=new os(i,r)}return a}(this.R,t);return t=function(t){return"targetChange"in t?(t=t.targetChange).targetIds&&t.targetIds.length||!t.readTime?ni.min():ws(t.readTime):ni.min()}(t),this.listener._r(e,t)},Fh.prototype.mr=function(t){var e,n,r,i,o={};o.database=Cs(this.R),o.addTarget=(e=this.R,(r=Ji(r=(n=t).target)?{documents:Os(e,r)}:{query:Ps(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=bs(e,n.resumeToken):0<n.snapshotVersion.compareTo(ni.min())&&(r.readTime=ms(e,n.snapshotVersion.toTimestamp())),r),this.R,i=t,(t=null==(t=function(){switch(i.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qr()}}())?null:{"goog-listen-tags":t})&&(o.labels=t),this.cr(o)},Fh.prototype.yr=function(t){var e={};e.database=Cs(this.R),e.removeTarget=t,this.cr(e)},Fh),xh=(a(Mh,Ch=C),Object.defineProperty(Mh.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),Mh.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,Ch.prototype.start.call(this)},Mh.prototype.ar=function(){this.gr&&this.Er([])},Mh.prototype.wr=function(t){return this.Hi.Oi("Write",t)},Mh.prototype.onMessage=function(t){if(Yr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Yr(void 0!==r),n.map((function(t){return n=r,(t=(e=t).updateTime?ws(e.updateTime):ws(n)).isEqual(ni.min())&&(t=ws(n)),new fa(t,e.transformResults||[]);var e,n}))):[]),n=ws(t.commitTime);return this.listener.Tr(n,e)}var r;return Yr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},Mh.prototype.Ar=function(){var t={};t.database=Cs(this.R),this.cr(t)},Mh.prototype.Er=function(t){var e=this;t={streamToken:this.lastStreamToken,writes:t.map((function(t){return xs(e.R,t)}))},this.cr(t)},Mh),Dh=(a(Lh,kh=function(){}),Lh.prototype.br=function(){if(this.Rr)throw new Vr(Ur.FAILED_PRECONDITION,"The client has already been terminated.")},Lh.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ur.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vr(Ur.UNKNOWN,t.toString())}))},Lh.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Ur.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vr(Ur.UNKNOWN,t.toString())}))},Lh.prototype.terminate=function(){this.Rr=!0},Lh),Oh=(Ph.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},Ph.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},Ph.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},Ph.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},Ph.prototype.Cr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Vr?(Hr(t),this.Vr=!1):Kr("OnlineStateTracker",t)},Ph.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},Ph);function Ph(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function Lh(t,e,n){var r=this;return(r=kh.call(this)||this).credentials=t,r.Hi=e,r.R=n,r.Rr=!1,r}function Mh(t,e,n,r,i){var o=this;return(o=Ch.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).R=r,o.gr=!1,o}function Fh(t,e,n,r,i){var o=this;return(o=Nh.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).R=r,o}function jh(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ah(t,e)}function Uh(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}function Vh(t){return u(this,void 0,void 0,(function(){var e,n;return c(this,(function(r){switch(r.label){case 0:if(!Qh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function qh(t){return u(this,void 0,void 0,(function(){var e,n;return c(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Bh(t,e){t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),Gh(t)?Wh(t):rf(t).er()&&Kh(t,e))}function zh(t,e){var n=t;t=rf(n),n.$r.delete(e),t.er()&&Hh(n,e),0===n.$r.size&&(t.er()?t.ir():Qh(n)&&n.Br.set("Unknown"))}function Kh(t,e){t.qr.U(e.targetId),rf(t).mr(e)}function Hh(t,e){t.qr.U(e),rf(t).yr(e)}function Wh(t){t.qr=new us({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),rf(t).start(),t.Br.Sr()}function Gh(t){return Qh(t)&&!rf(t).tr()&&0<t.$r.size}function Qh(t){return 0===t.Or.size}function Yh(t){t.qr=void 0}function $h(t,e,n){return u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof as&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o;return c(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),Kr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Xh(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof is?t.qr.X(e):e instanceof os?t.qr.rt(e):t.qr.et(e),n.isEqual(ni.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,gl(t.localStore)];case 8:return i=o.sent(),0<=n.compareTo(i)?[4,(s=n,(l=(a=t).qr.ut(s)).targetChanges.forEach((function(t,e){var n;0<t.resumeToken.approximateByteSize()&&(n=a.$r.get(e))&&a.$r.set(e,n.withResumeToken(t.resumeToken,s))})),l.targetMismatches.forEach((function(t){var e=a.$r.get(t);e&&(a.$r.set(t,e.withResumeToken(pi.EMPTY_BYTE_STRING,e.snapshotVersion)),Hh(a,t),e=new Mu(e.target,t,1,e.sequenceNumber),Kh(a,e))})),a.remoteSyncer.applyRemoteEvent(l))]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Kr("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,Xh(t,i)];case 12:return o.sent(),[3,13];case 13:return[2]}var a,s,l}))}))}function Xh(t,e,n){return u(this,void 0,void 0,(function(){var r=this;return c(this,(function(i){switch(i.label){case 0:if(!Iu(e))throw e;return t.Or.add(1),[4,qh(t)];case 1:return i.sent(),t.Br.set("Offline"),n=n||function(){return gl(t.localStore)},t.asyncQueue.enqueueRetryable((function(){return u(r,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return Kr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Vh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Jh(t,e){return e().catch((function(n){return Xh(t,n,e)}))}function Zh(t){return u(this,void 0,void 0,(function(){var e,n,r,i;return c(this,(function(o){switch(o.label){case 0:n=of(e=t),r=0<e.kr.length?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!(Qh(e)&&e.kr.length<10))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,(a=e.localStore,s=r,(u=a).persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===s&&(s=-1),u._n.getNextMutationBatchAfterBatchId(t,s)})))];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e),(t=of(t)).er()&&t.pr&&t.Er(e.mutations)}(e,i),[3,6]);case 4:return i=o.sent(),[4,Xh(e,i)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return tf(e)&&ef(e),[2]}var a,s,u}))}))}function tf(t){return Qh(t)&&!of(t).tr()&&0<t.kr.length}function ef(t){of(t).start()}function nf(t,e){return u(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return n=t,e?(n.Or.delete(2),[4,Vh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,qh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function rf(t){var e,n,r,i=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){return t.$r.forEach((function(e,n){Kh(t,e)})),[2]}))}))}.bind(null,t),Ri:function(t,e){return u(this,void 0,void 0,(function(){return c(this,(function(n){return Yh(t),Gh(t)?(t.Br.Nr(e),Wh(t)):t.Br.set("Unknown"),[2]}))}))}.bind(null,t),_r:$h.bind(null,t)},e.br(),new Rh(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return u(i,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),Gh(t)?Wh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),Yh(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function of(t){var e,n,r,i=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){return of(t).Ar(),[2]}))}))}.bind(null,t),Ri:function(t,e){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return e&&of(t).pr?[4,function(t,e){return u(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:return Fa(r=e.code)&&r!==Ur.ABORTED?(n=t.kr.shift(),of(t).sr(),[4,Jh(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Zh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return tf(t)&&ef(t),[2]}}))}))}.bind(null,t),Ir:function(t){return u(this,void 0,void 0,(function(){var e,n,r,i;return c(this,(function(o){for(e=of(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}.bind(null,t),Tr:function(t,e,n){return u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Lu.from(r,e,n),[4,Jh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Zh(t)];case 2:return o.sent(),[2]}}))}))}.bind(null,t)},e.br(),new xh(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return u(i,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,Zh(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),0<t.kr.length&&(Kr("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var af=(sf.createAndSchedule=function(t,e,n,r,i){return(i=new sf(t,e,Date.now()+n,r,i)).start(n),i},sf.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},sf.prototype.skipDelay=function(){return this.handleDelayElapsed()},sf.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vr(Ur.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},sf.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},sf.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},sf);function sf(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new fu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}function uf(t,e){if(Hr("AsyncQueue",e+": "+t),Iu(t))return new Vr(Ur.UNAVAILABLE,e+": "+t);throw t}function cf(){this.queries=new jc(Bo,qo),this.onlineState="Unknown",this.Gr=new Set}var lf=(yf.emptySet=function(t){return new yf(t.comparator)},yf.prototype.has=function(t){return null!=this.keyedMap.get(t)},yf.prototype.get=function(t){return this.keyedMap.get(t)},yf.prototype.first=function(){return this.sortedSet.minKey()},yf.prototype.last=function(){return this.sortedSet.maxKey()},yf.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},yf.prototype.indexOf=function(t){return(t=this.keyedMap.get(t))?this.sortedSet.indexOf(t):-1},Object.defineProperty(yf.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),yf.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},yf.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},yf.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},yf.prototype.isEqual=function(t){if(!(t instanceof yf))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},yf.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},yf.prototype.copy=function(t,e){var n=new yf;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},yf),hf=(gf.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);!n||0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Qr()},gf.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},gf),ff=(pf.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:0,doc:t})})),new pf(t,e,lf.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(pf.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),pf.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},pf),df=function(){this.Wr=void 0,this.listeners=[]};function pf(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function gf(){this.Qr=new Ua(Ai.comparator)}function yf(t){this.comparator=t?function(e,n){return t(e,n)||Ai.comparator(e.key,n.key)}:function(t,e){return Ai.comparator(t.key,e.key)},this.keyedMap=Xa,this.sortedSet=new Ua(this.comparator)}function vf(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o,a;return c(this,(function(s){switch(s.label){case 0:if(n=t,r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new df),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return a=uf(a=s.sent(),"Initialization of query '"+zo(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&bf(n),[2]}}))}))}function mf(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o,a;return c(this,(function(s){return n=t,r=e.query,i=!1,(o=n.queries.get(r))&&0<=(a=o.listeners.indexOf(e))&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function bf(t){t.Gr.forEach((function(t){t.next()}))}var wf=(Cf.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ff(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},Cf.prototype.onError=function(t){this.Jr.error(t)},Cf.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},Cf.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},Cf.prototype.Zr=function(t){if(0<t.docChanges.length)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},Cf.prototype.no=function(t){t=ff.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},Cf),_f=(kf.prototype.io=function(){return"metadata"in this.payload},kf),Ef=(Sf.prototype.qn=function(t){return Is(this.R,t)},Sf.prototype.Un=function(t){return t.metadata.exists?Rs(this.R,t.document,!1):Wi.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},Sf.prototype.Kn=ws,Sf),Tf=(If.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},If.prototype.co=function(t){for(var e=new Map,n=new Ef(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||ts()).add(a);e.set(c,l)}}return e},If.prototype.complete=function(){return u(this,void 0,void 0,(function(){var t,e,n,r;return c(this,(function(i){switch(i.label){case 0:return[4,function(t,e,n,r){return u(this,void 0,void 0,(function(){var i,o,a,s,u,l,h,f,d,p;return c(this,(function(c){switch(c.label){case 0:for(i=t,o=ts(),a=Qa,s=Ja,u=0,l=n;u<l.length;u++)h=l[u],f=e.qn(h.metadata.name),h.document&&(o=o.add(f)),a=a.insert(f,e.Un(h)),s=s.insert(f,e.Kn(h.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,ml(i,Uo(Do(li.fromString("__bundle__/docs/"+r))))];case 1:return p=c.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return vl(t,d,a,ni.min(),s).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}(this.localStore,new Ef(this.R),this.documents,this.ro.id)];case 1:t=i.sent(),e=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(r=r[n],[4,function(t,e,n){return void 0===n&&(n=ts()),u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:return[4,ml(t,Uo($u(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=t).persistence.runTransaction("Save named query","readwrite",(function(t){var o=ws(e.readTime);return 0<=r.snapshotVersion.compareTo(o)?i.Ke.saveNamedQuery(t,e):(o=r.withResumeToken(pi.EMPTY_BYTE_STRING,o),i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)})))}))]}}))}))}(this.localStore,r,e.get(r.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new rl(Object.assign({},this.progress),t))]}}))}))},If);function If(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Nf(t)}function Sf(t){this.R=t}function kf(t,e){this.payload=t,this.byteLength=e}function Cf(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function Nf(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Af=function(t){this.key=t},Rf=function(t){this.key=t},xf=(Object.defineProperty(Mf.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),Mf.prototype._o=function(t,e){var n=this,r=e?e.mo:new hf,i=(e||this).fo,o=(e||this).mutatedKeys,a=i,s=!1,u=Oo(this.query)&&i.size===this.query.limit?i.last():null,c=Po(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Ko(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations);e=!1,l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),e=!0):n.yo(l,h)||(r.track({type:2,doc:h}),e=!0,(u&&0<n.lo(h,u)||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),e=!0):l&&!h&&(r.track({type:1,doc:l}),e=!0,(u||c)&&(s=!0)),e&&(o=h?(a=a.add(h),d?o.add(t):o.delete(t)):(a=a.delete(t),o.delete(t)))})),Oo(this.query)||Po(this.query))for(;a.size>this.query.limit;){var l=Oo(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},Mf.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},Mf.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return i=t.type,o=e.type,n(i)-n(o)||r.lo(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qr()}}var i,o})),this.po(n);var a=e?this.Eo():[];return e=(n=0===this.ho.size&&this.current?1:0)!==this.ao,this.ao=n,0!==o.length||e?{snapshot:new ff(this.query,t.fo,i,o,t.mutatedKeys,0==n,e,!1),To:a}:{To:a}},Mf.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hf,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},Mf.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},Mf.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},Mf.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ts(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Rf(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Af(t))})),n},Mf.prototype.Ao=function(t){return this.uo=t.Bn,this.ho=ts(),t=this._o(t.documents),this.applyChanges(t,!0)},Mf.prototype.Ro=function(){return ff.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},Mf),Df=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Of=function(t){this.key=t,this.bo=!1},Pf=(Object.defineProperty(Lf.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),Lf);function Lf(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new jc(Bo,qo),this.Vo=new Map,this.So=new Set,this.Do=new Ua(Ai.comparator),this.Co=new Map,this.No=new Cl,this.xo={},this.Fo=new Map,this.ko=bc.Yt(),this.onlineState="Unknown",this.$o=void 0}function Mf(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ts(),this.mutatedKeys=ts(),this.lo=Ho(t),this.fo=new lf(this.lo)}function Ff(t,e,n,r){return u(this,void 0,void 0,(function(){var i,o,a;return c(this,(function(s){switch(s.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return u(this,void 0,void 0,(function(){var i,o;return c(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,wl(t.localStore,e.query,!1).then((function(t){return t=t.documents,e.view._o(t,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Gf(t,e.targetId,o.To),o.snapshot)]}}))}))}(t,e,n,r)},[4,wl(t.localStore,e,!0)];case 1:return o=s.sent(),a=new xf(e,o.Bn),i=a._o(o.documents),o=rs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),o=a.applyChanges(i,t.isPrimaryClient,o),Gf(t,n,o.To),a=new Df(e,n,a),[2,(t.Po.set(e,a),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),o.snapshot)]}}))}))}function jf(t,e,n){return u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:i=nd(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,(c=i.localStore,l=e,f=c,d=ei.now(),p=l.reduce((function(t,e){return t.add(e.key)}),ts()),f.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return f.Mn.pn(t,p).next((function(e){h=e;for(var n=[],r=0,i=l;r<i.length;r++){var o=i[r],a=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field);null!=(a=Yo(o.transform,a||null))&&(n=null==n?Ki.empty():n).set(o.field,a)}return n||null}(o,h.get(o.key));null!=a&&n.push(new Ta(o.key,a,function t(e){var n=[];return ai(e.fields,(function(e,r){var i=new fi([e]);if(Bi(r))if(0===(r=t(r.mapValue).fields).length)n.push(i);else for(var o=0,a=r;o<a.length;o++){var s=a[o];n.push(i.child(s))}else n.push(i)})),new di(n)}(a.value.mapValue),pa.exists(!0)))}return f._n.addMutationBatch(t,d,n,l)}))})).then((function(t){return t.applyToLocalDocumentSet(h),{batchId:t.batchId,changes:h}})))];case 2:return r=o.sent(),i.sharedClientState.addPendingMutation(r.batchId),a=i,s=r.batchId,u=n,c=(c=(c=a.xo[a.currentUser.toKey()])||new Ua(Jr)).insert(s,u),a.xo[a.currentUser.toKey()]=c,[4,Yf(i,r.changes)];case 3:return o.sent(),[4,Zh(i.remoteStore)];case 4:return o.sent(),[3,6];case 5:return i=uf(i=o.sent(),"Failed to persist write"),n.reject(i),[3,6];case 6:return[2]}var a,s,u,c,l,h,f,d,p}))}))}function Uf(t,e){return u(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:n=t,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,yl(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){(e=n.Co.get(e))&&(Yr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.bo=!0:0<t.modifiedDocuments.size?Yr(e.bo):0<t.removedDocuments.size&&(Yr(e.bo),e.bo=!1))})),[4,Yf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,kc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Vf(t,e,n){var r;((t=t).isPrimaryClient&&0===n||!t.isPrimaryClient&&1===n)&&(r=[],t.Po.forEach((function(t,n){(n=n.view.zr(e)).snapshot&&r.push(n.snapshot)})),function(t,e){t.onlineState=e;var n=!1;t.queries.forEach((function(t,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].zr(e)&&(n=!0)})),n&&bf(t)}(t.eventManager,e),r.length&&t.vo._r(r),t.onlineState=e,t.isPrimaryClient&&t.sharedClientState.setOnlineState(e))}function qf(t,e,n){return u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:r=t,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=e,(u=a).persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,s).next((function(n){return Yr(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),Kf(r,e,n),zf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Yf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,kc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function Bf(t,e){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:Qh((n=t).remoteStore)||Kr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(a=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return a._n.getHighestUnacknowledgedBatchId(t)}))];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return i=uf(i=o.sent(),"Initialization of waitForPendingWrites() operation failed"),e.reject(i),[3,4];case 4:return[2]}var a}))}))}function zf(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Kf(t,e,n){var r=t,i=r.xo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i)}function Hf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Wf(t,e)}))}function Wf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(zh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Qf(t))}function Gf(t,e,n){for(var r,i,o,a=0,s=n;a<s.length;a++){var u=s[a];u instanceof Af?(t.No.addReference(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(Kr("SyncEngine","New document in limbo: "+o),r.So.add(i),Qf(r))):u instanceof Rf?(Kr("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||Wf(t,u.key)):Qr()}}function Qf(t){for(;0<t.So.size&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ai(li.fromString(e));e=t.ko.next(),t.Co.set(e,new Of(n)),t.Do=t.Do.insert(n,e),Bh(t.remoteStore,new Mu(Uo(Do(n.path)),e,2,Mr.o))}}function Yf(t,e,n){return u(this,void 0,void 0,(function(){var r,i,o,a;return c(this,(function(s){switch(s.label){case 0:return i=[],o=[],a=[],(r=t).Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){t&&(r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t),t=ol.Pn(s.targetId,t),o.push(t))})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return c(this,(function(c){switch(c.label){case 0:n=t,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return du.forEach(e,(function(e){return du.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return du.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return c.sent(),[3,4];case 3:if(!Iu(r=c.sent()))throw r;return Kr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=o[i],a=u.targetId,u.fromCache||(s=n.Fn.get(a),u=s.snapshotVersion,u=s.withLastLimboFreeSnapshotVersion(u),n.Fn=n.Fn.insert(a,u));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function $f(t,e){return u(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:return(n=t).currentUser.isEqual(e)?[3,3]:(Kr("SyncEngine","User change. New user:",e.toKey()),[4,dl(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new Vr(Ur.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Yf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function Xf(t,e,n,r){return u(this,void 0,void 0,(function(){var i,o;return c(this,(function(a){switch(a.label){case 0:return[4,(s=(i=t).localStore,u=e,l=(c=s)._n,c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):du.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Zh(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Kf(i,e,r||null),zf(i,e),i.localStore._n.Gt(e)):Qr(),a.label=4;case 4:return[4,Yf(i,o)];case 5:return a.sent(),[3,7];case 6:Kr("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}var s,u,c,l}))}))}function Jf(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l;return c(this,(function(c){switch(c.label){case 0:return ed(n=t),nd(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Zf(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,nf(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)s=a[o],Bh(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):l=l.then((function(){return Hf(n,e),bl(n.localStore,e,!0)})),zh(n.remoteStore,e)})),[4,l]);case 4:return c.sent(),[4,Zf(n,u)];case 5:return c.sent(),(h=n).Co.forEach((function(t,e){zh(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new Ua(Ai.comparator),n.$o=!1,[4,nf(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}var h}))}))}function Zf(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,h,f,d,p,g;return c(this,(function(y){switch(y.label){case 0:n=t,r=[],i=[],o=0,a=e,y.label=1;case 1:return o<a.length?(s=a[o],l=void 0,(h=n.Vo.get(s))&&0!==h.length?[4,ml(n.localStore,Uo(h[0]))]:[3,7]):[3,13];case 2:l=y.sent(),f=0,d=h,y.label=3;case 3:return f<d.length?(p=d[f],p=n.Po.get(p),[4,function(t,e){return u(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:return[4,wl((n=t).localStore,e.query,!0)];case 1:return r=i.sent(),r=e.view.Ao(r),[2,(n.isPrimaryClient&&Gf(n,e.targetId,r.To),r)]}}))}))}(n,p)]):[3,6];case 4:(p=y.sent()).snapshot&&i.push(p.snapshot),y.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,_l(n.localStore,s)];case 8:return g=y.sent(),[4,ml(n.localStore,g)];case 9:return l=y.sent(),[4,Ff(n,td(g),s,!1)];case 10:y.sent(),y.label=11;case 11:r.push(l),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function td(t){return xo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ed(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=Uf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.Co.get(e))&&t.bo)return ts().add(t.key);var r=ts();if(!(e=n.Vo.get(e)))return r;for(var i=0,o=e;i<o.length;i++){var a=o[i];a=n.Po.get(a),r=r.unionWith(a.view.wo)}return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(t,e,n){return u(this,void 0,void 0,(function(){var r,i,o,a;return c(this,(function(s){switch(s.label){case 0:return(r=t).sharedClientState.updateQueryState(e,"rejected",n),a=r.Co.get(e),(i=a&&a.key)?(o=(o=new Ua(Ai.comparator)).insert(i,Wi.newNoDocument(i,ni.min())),a=ts().add(i),a=new ns(ni.min(),new Map,new Wa(Jr),o,a),[4,Uf(r,a)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(i),r.Co.delete(e),Qf(r),[3,4];case 2:return[4,bl(r.localStore,e,!1).then((function(){return Hf(r,e,n)})).catch(kc)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}.bind(null,t),t.vo._r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query;if(s=n.queries.get(s)){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&bf(n)}.bind(null,t.eventManager),t.vo.Mo=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function nd(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(t,e){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:n=t,r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,pl(n.localStore,e)];case 2:return i=o.sent(),Kf(n,r,null),zf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Yf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,kc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qf.bind(null,t),t}function rd(t,e,n){var r=t;(function(t,e,n){return u(this,void 0,void 0,(function(){var r,i,o,a,s;return c(this,(function(u){switch(u.label){case 0:return u.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=u.sent(),[4,(h=t.localStore,d=h,p=ws((f=r).createTime),d.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return d.Ke.getBundleMetadata(t,f.id)})).then((function(t){return!!t&&0<=t.createTime.compareTo(p)})))];case 2:return u.sent()?[4,e.close()]:[3,4];case 3:return[2,(u.sent(),void n._completeWith({taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}))];case 4:return n._updateProgress(Nf(r)),i=new Tf(r,t.localStore,e.R),[4,e.Lo()];case 5:o=u.sent(),u.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=u.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=u.sent(),u.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=u.sent(),[4,Yf(t,s.wn,void 0)];case 12:return u.sent(),[4,(h=t.localStore,c=r,(l=h).persistence.runTransaction("Save bundle","readwrite",(function(t){return l.Ke.saveBundleMetadata(t,c)})))];case 13:return u.sent(),n._completeWith(s.progress),[3,15];case 14:return Wr("SyncEngine","Loading bundle failed with "+(s=u.sent())),n._failWith(s),[3,15];case 15:return[2]}var c,l,h,f,d,p}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var id,od,ad=(dd.prototype.initialize=function(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.R=Ih(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},dd.prototype.Uo=function(t){return null},dd.prototype.Ko=function(t){return fl(this.persistence,new al,t.initialUser,this.R)},dd.prototype.qo=function(t){return new Ol(Ll.bs,this.R)},dd.prototype.Bo=function(t){return new ih},dd.prototype.terminate=function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},dd),sd=(a(fd,od=ad),fd.prototype.initialize=function(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,od.prototype.initialize.call(this,t)];case 1:return e.sent(),[4,Tl(this.localStore)];case 2:return e.sent(),[4,this.Qo.initialize(this,t)];case 3:return e.sent(),[4,nd(this.Qo.syncEngine)];case 4:return e.sent(),[4,Zh(this.Qo.remoteStore)];case 5:return e.sent(),[2]}}))}))},fd.prototype.Ko=function(t){return fl(this.persistence,new al,t.initialUser,this.R)},fd.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Ac(e,t.asyncQueue)},fd.prototype.qo=function(t){var e=nl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?cc.withCacheSize(this.cacheSizeBytes):cc.DEFAULT;return new Jc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Eh(),Th(),this.R,this.sharedClientState,!!this.forceOwnership)},fd.prototype.Bo=function(t){return new ih},fd),ud=(a(hd,id=sd),hd.prototype.initialize=function(t){return u(this,void 0,void 0,(function(){var e,n=this;return c(this,(function(r){switch(r.label){case 0:return[4,id.prototype.initialize.call(this,t)];case 1:return r.sent(),e=this.Qo.syncEngine,this.sharedClientState instanceof rh?(this.sharedClientState.syncEngine={ui:Xf.bind(null,e),ai:function(t,e,n,r){return u(this,void 0,void 0,(function(){var i,o,a;return c(this,(function(s){switch(s.label){case 0:return(i=t).$o?(Kr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,El(i.localStore)];case 3:return o=s.sent(),a=ns.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Yf(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,bl(i.localStore,e,!0)];case 6:return s.sent(),Hf(i,e,r),[3,8];case 7:Qr(),s.label=8;case 8:return[2]}}))}))}.bind(null,e),hi:function(t,e,n){return u(this,void 0,void 0,(function(){var r,i,o,a,s,u,l,h;return c(this,(function(f){switch(f.label){case 0:if(!(r=ed(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?(o=o[i],r.Vo.has(o)?(Kr("SyncEngine","Adding an already active target "+o),[3,5]):[4,_l(r.localStore,o)]):[3,6];case 2:return a=f.sent(),[4,ml(r.localStore,a)];case 3:return s=f.sent(),[4,Ff(r,td(a),s.targetId,!1)];case 4:f.sent(),Bh(r.remoteStore,s),f.label=5;case 5:return i++,[3,1];case 6:u=function(t){return c(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,bl(r.localStore,t,!1).then((function(){zh(r.remoteStore,t),Hf(r,t)})).catch(kc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?(h=h[l],[5,u(h)]):[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}.bind(null,e),fn:function(t){return t.localStore.persistence.fn()}.bind(null,e),ci:function(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(n){return[2,El((e=t).localStore).then((function(t){return Yf(e,t)}))]}))}))}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[4,this.persistence.He((function(t){return u(n,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,Jf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return r.sent(),[2]}}))}))},hd.prototype.Bo=function(t){var e=Eh();if(!rh.yt(e))throw new Vr(Ur.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=nl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new rh(e,t.asyncQueue,n,t.clientId,t.initialUser)},hd),cd=(ld.prototype.initialize=function(t,e){return u(this,void 0,void 0,(function(){var n=this;return c(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Vf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=$f.bind(null,this.syncEngine),[4,nf(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},ld.prototype.createEventManager=function(t){return new cf},ld.prototype.createDatastore=function(t){var e=Ih(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new ch(n));return t=t.credentials,new Dh(t,n,e)},ld.prototype.createRemoteStore=function(t){var e=this;return new Sh(this.localStore,this.datastore,t.asyncQueue,(function(t){return Vf(e.syncEngine,t,0)}),t=new(ah.yt()?ah:oh))},ld.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){return o=new Pf(t,e,n,r,i,o),a&&(o.$o=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},ld.prototype.terminate=function(){return function(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return e=t,Kr("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,qh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},ld);function ld(){}function hd(t,e){var n=this;return(n=id.call(this,t,e,!1)||this).Qo=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function fd(t,e,n){var r=this;return(r=od.call(this)||this).Qo=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function dd(){this.synchronizeTabs=!1}function pd(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return u(this,void 0,void 0,(function(){var r;return c(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var gd=(Id.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},Id.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Id.prototype.Wo=function(){this.muted=!0},Id.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},Id),yd=(Td.prototype.close=function(){return this.Go.cancel()},Td.prototype.getMetadata=function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.metadata.promise]}))}))},Td.prototype.Lo=function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},Td.prototype.Ho=function(){return u(this,void 0,void 0,(function(){var t,e,n;return c(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(n=this.zo.decode(t),e=Number(n),isNaN(e)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(e)]);case 2:return n=r.sent(),[2,new _f(JSON.parse(n),t.length+e)]}}))}))},Td.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},Td.prototype.Jo=function(){return u(this,void 0,void 0,(function(){var t,e;return c(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},Td.prototype.Xo=function(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},Td.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},Td.prototype.tc=function(){return u(this,void 0,void 0,(function(){var t,e;return c(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},Td),vd=(Ed.prototype.lookup=function(t){return u(this,void 0,void 0,(function(){var e,n=this;return c(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Vr(Ur.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o,a;return c(this,(function(s){switch(s.label){case 0:return r=Cs((n=t).R)+"/documents",i={documents:e.map((function(t){return Ts(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return i=s.sent(),o=new Map,i.forEach((function(t){var e;e=n.R,t="found"in(t=t)?function(t,e){Yr(!!e.found),e.found.name,e.found.updateTime;var n=Is(t,e.found.name);return t=ws(e.found.updateTime),e=new Ki({mapValue:{fields:e.found.fields}}),Wi.newFoundDocument(n,t,e)}(e,t):"missing"in t?function(t,e){return Yr(!!e.missing),Yr(!!e.readTime),t=Is(t,e.missing),e=ws(e.readTime),Wi.newNoDocument(t,e)}(e,t):Qr(),o.set(t.key.toString(),t)})),a=[],[2,(e.forEach((function(t){Yr(!!(t=o.get(t.toString()))),a.push(t)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},Ed.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},Ed.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},Ed.prototype.delete=function(t){this.write(new Oa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},Ed.prototype.commit=function(){return u(this,void 0,void 0,(function(){var t,e=this;return c(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){n=Ai.fromPath(n),e.mutations.push(new Pa(n,e.precondition(n)))})),[4,function(t,e){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:return r=Cs((n=t).R)+"/documents",i={writes:e.map((function(t){return xs(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},Ed.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Qr();e=ni.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Vr(Ur.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},Ed.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?pa.updateTime(e):pa.none()},Ed.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return pa.exists(!0);if(e.isEqual(ni.min()))throw new Vr(Ur.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pa.updateTime(e)},Ed.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},Ed.prototype.ensureCommitNotCalled=function(){},Ed),md=(_d.prototype.run=function(){--this.ec,this.nc()},_d.prototype.nc=function(){var t=this;this.Zi.ji((function(){return u(t,void 0,void 0,(function(){var t,e,n=this;return c(this,(function(r){return t=new vd(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},_d.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ki(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},_d.prototype.ic=function(t){var e=this;0<this.ec&&this.rc(t)?(--this.ec,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},_d.prototype.rc=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!Fa(t))},_d),bd=(wd.prototype.getConfiguration=function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},wd.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},wd.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vr(Ur.FAILED_PRECONDITION,"The client has already been terminated.")},wd.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new fu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return u(t,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=uf(t=n.sent(),"Failed to shutdown persistence"),e.reject(t),[3,6];case 6:return[2]}}))}))})),e.promise},wd);function wd(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ml.UNAUTHENTICATED,this.clientId=$r.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return u(r,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return Kr("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}function _d(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ah(this.asyncQueue,"transaction_retry")}function Ed(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function Td(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new fu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}function Id(t){this.observer=t,this.muted=!1}function Sd(t,e){return u(this,void 0,void 0,(function(){var n,r,i=this;return c(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Kr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return u(i,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,dl(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function kd(t,e){return u(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Cd(t)];case 1:return n=i.sent(),Kr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return u(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:return(n=t).asyncQueue.verifyOperationInProgress(),Kr("RemoteStore","RemoteStore received new credentials"),r=Qh(n),n.Or.add(3),[4,qh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Vh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Cd(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Kr("FirestoreClient","Using default OfflineComponentProvider"),[4,Sd(t,new ad)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Nd(t){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Kr("FirestoreClient","Using default OnlineComponentProvider"),[4,kd(t,new cd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Ad(t){return Cd(t).then((function(t){return t.persistence}))}function Rd(t){return Cd(t).then((function(t){return t.localStore}))}function xd(t){return Nd(t).then((function(t){return t.remoteStore}))}function Dd(t){return Nd(t).then((function(t){return t.syncEngine}))}function Od(t){return u(this,void 0,void 0,(function(){var e,n;return c(this,(function(r){switch(r.label){case 0:return[4,Nd(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=function(t,e){return u(this,void 0,void 0,(function(){var n,r,i,o,a;return c(this,(function(s){switch(s.label){case 0:return n=ed(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,ml(n.localStore,Uo(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.targetId,[4,Ff(n,e,r,"current"===a)];case 3:i=s.sent(),n.isPrimaryClient&&Bh(n.remoteStore,o),s.label=4;case 4:return[2,i]}}))}))}.bind(null,e.syncEngine),n.onUnlisten=function(t,e){return u(this,void 0,void 0,(function(){var n,r,i;return c(this,(function(o){switch(o.label){case 0:return r=(n=t).Po.get(e),1<(i=n.Vo.get(r.targetId)).length?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!qo(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,bl(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),zh(n.remoteStore,r.targetId),Hf(n,r.targetId)})).catch(kc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Hf(n,r.targetId),[4,bl(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}.bind(null,e.syncEngine),n)]}}))}))}function Pd(t,e,n){var r=this;void 0===n&&(n={});var i=new fu;return t.asyncQueue.enqueueAndForget((function(){return u(r,void 0,void 0,(function(){var r;return c(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gd({next:function(o){e.enqueueAndForget((function(){return mf(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Vr(Ur.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Vr(Ur.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new wf(Do(n.path),o,{includeMetadataChanges:!0,so:!0});return vf(t,a)},[4,Od(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Ld(t,e,n){var r=this;void 0===n&&(n={});var i=new fu;return t.asyncQueue.enqueueAndForget((function(){return u(r,void 0,void 0,(function(){var r;return c(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gd({next:function(n){e.enqueueAndForget((function(){return mf(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Vr(Ur.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new wf(n,o,{includeMetadataChanges:!0,so:!0});return vf(t,a)},[4,Od(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Md(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var Fd=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},jd=(Object.defineProperty($d.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),$d.prototype.isEqual=function(t){return t instanceof $d&&t.projectId===this.projectId&&t.database===this.database},$d),Ud=new Map,Vd=(Yd.prototype.getToken=function(){return Promise.resolve(null)},Yd.prototype.invalidateToken=function(){},Yd.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Ml.UNAUTHENTICATED)}))},Yd.prototype.removeChangeListener=function(){this.changeListener=null},Yd),qd=(Qd.prototype.getToken=function(){return Promise.resolve(this.token)},Qd.prototype.invalidateToken=function(){},Qd.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},Qd.prototype.removeChangeListener=function(){this.changeListener=null},Qd),Bd=(Gd.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Kr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Yr("string"==typeof n.accessToken),new Md(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},Gd.prototype.invalidateToken=function(){this.forceRefresh=!0},Gd.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return u(n,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},Gd.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},Gd.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Yr(null===t||"string"==typeof t),new Ml(t)},Gd),zd=(Object.defineProperty(Wd.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),Wd),Kd=(Hd.prototype.getToken=function(){return Promise.resolve(new zd(this.hc,this.lc,this.fc))},Hd.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Ml.FIRST_PARTY)}))},Hd.prototype.removeChangeListener=function(){},Hd.prototype.invalidateToken=function(){},Hd);function Hd(t,e,n){this.hc=t,this.lc=e,this.fc=n}function Wd(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Ml.FIRST_PARTY}function Gd(t){var e=this;function n(t){Kr("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)}this.currentUser=Ml.UNAUTHENTICATED,this.oc=new fu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))},t.onInit(n),setTimeout((function(){var r;e.auth||((r=t.getImmediate({optional:!0}))?n(r):(Kr("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve()))}),0)}function Qd(t){this.token=t,this.changeListener=null}function Yd(){this.changeListener=null}function $d(t,e){this.projectId=t,this.database=e||"(default)"}function Xd(t,e,n){if(!n)throw new Vr(Ur.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Jd(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zd(t,e,n,r){if(!0===e&&!0===r)throw new Vr(Ur.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function tp(t){if(!Ai.isDocumentKey(t))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ep(t){if(Ai.isDocumentKey(t))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function np(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Qr();if(t instanceof Array)return"an array";var e=function(){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}();return e?"a custom "+e+" object":"an object"}function rp(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new Vr(Ur.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=np(t),new Vr(Ur.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function ip(t,e){if(e<=0)throw new Vr(Ur.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var op,ap=(gp.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},gp),sp=(Object.defineProperty(pp.prototype,"app",{get:function(){if(!this._app)throw new Vr(Ur.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(pp.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(pp.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),pp.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Vr(Ur.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ap(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Vd;switch(t.type){case"gapi":var e=t.client;return Yr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Kd(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Vr(Ur.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},pp.prototype._getSettings=function(){return this._settings},pp.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},pp.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},pp.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},pp.prototype._terminate=function(){return(t=Ud.get(this))&&(Kr("ComponentProvider","Removing Datastore"),Ud.delete(this),t.terminate()),Promise.resolve();var t},pp),up=(Object.defineProperty(dp.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(dp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(dp.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(dp.prototype,"parent",{get:function(){return new lp(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),dp.prototype.withConverter=function(t){return new dp(this.firestore,t,this._key)},dp),cp=(fp.prototype.withConverter=function(t){return new fp(this.firestore,t,this._query)},fp),lp=(a(hp,op=cp),Object.defineProperty(hp.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(hp.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(hp.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new up(this.firestore,null,new Ai(t))},enumerable:!1,configurable:!0}),hp.prototype.withConverter=function(t){return new hp(this.firestore,t,this._path)},hp);function hp(t,e,n){var r=this;return(r=op.call(this,t,e,Do(n))||this)._path=n,r.type="collection",r}function fp(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}function dp(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}function pp(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ap({}),this._settingsFrozen=!1,t instanceof jd?(this._databaseId=t,this._credentials=new Vd):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Vr(Ur.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jd(t.options.projectId)}(t),this._credentials=new Bd(e))}function gp(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Vr(Ur.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vr(Ur.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Zd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function yp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=E(t),Xd("collection","path",e),t instanceof sp)return ep(n=li.fromString.apply(li,l([e],r))),new lp(t,null,n);if(!(t instanceof up||t instanceof lp))throw new Vr(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ep(n=li.fromString.apply(li,l([t.path],r)).child(li.fromString(e))),new lp(t.firestore,null,n)}function vp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=E(t),Xd("doc","path",e=1===arguments.length?$r.u():e),t instanceof sp)return tp(n=li.fromString.apply(li,l([e],r))),new up(t,null,new Ai(n));if(!(t instanceof up||t instanceof lp))throw new Vr(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tp(n=t._path.child(li.fromString.apply(li,l([e],r)))),new up(t.firestore,t instanceof lp?t.converter:null,new Ai(n))}function mp(t,e){return t=E(t),e=E(e),(t instanceof up||t instanceof lp)&&(e instanceof up||e instanceof lp)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function bp(t,e){return t=E(t),e=E(e),t instanceof cp&&e instanceof cp&&t.firestore===e.firestore&&qo(t._query,e._query)&&t.converter===e.converter}var wp=(Object.defineProperty(_p.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),_p.prototype.enqueueAndForget=function(t){this.enqueue(t)},_p.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},_p.prototype.enterRestrictedMode=function(t){this._c||(this._c=!0,this.Ec=t||!1,(t=Th())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic))},_p.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new fu;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},_p.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},_p.prototype.bc=function(){return u(this,void 0,void 0,(function(){var t,e=this;return c(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Iu(t=n.sent()))throw t;return Kr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:0<this.wc.length&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},_p.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Hr("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",r=n.stack?n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack:r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n},_p.prototype.enqueueAfterDelay=function(t,e,n){var r=this;return this.Ac(),-1<this.Tc.indexOf(t)&&(e=0),n=af.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)})),this.mc.push(n),n},_p.prototype.Ac=function(){this.yc&&Qr()},_p.prototype.verifyOperationInProgress=function(){},_p.prototype.Pc=function(){return u(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},_p.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},_p.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},_p.prototype.Dc=function(t){this.Tc.push(t)},_p.prototype.vc=function(t){t=this.mc.indexOf(t),this.mc.splice(t,1)},_p);function _p(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ah(this,"async_queue_retry"),this.Ic=function(){var e=Th();e&&Kr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Th();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}function Ep(t){return function(){if("object"==typeof t&&null!==t)for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}}()}var Tp,Ip=(Cp.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},Cp.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},Cp.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},Cp.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},Cp.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},Cp.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},Cp),Sp=(a(kp,Tp=sp),kp.prototype._terminate=function(){return this._firestoreClient||Ap(this),this._firestoreClient.terminate()},kp);function kp(t,e){var n=this;return(n=Tp.call(this,t,e)||this).type="firestore",n._queue=new wp,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function Cp(){this._progressObserver={},this._taskCompletionResolver=new fu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function Np(t){return t._firestoreClient||Ap(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ap(t){var e,n,r,i=t._freezeSettings();e=t._databaseId,n=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",r=t._persistenceKey,i=new Fd(e,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams),t._firestoreClient=new bd(t._credentials,t._queue,i)}function Rp(t,e,n){var r=this,i=new fu;return t.asyncQueue.enqueue((function(){return u(r,void 0,void 0,(function(){var r;return c(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Sd(t,n)];case 1:return o.sent(),[4,kd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(r=o.sent()).name?r.code===Ur.FAILED_PRECONDITION||r.code===Ur.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function xp(t){if(t._initialized||t._terminated)throw new Vr(Ur.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Dp=(zp.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},zp),Op=(Bp.fromBase64String=function(t){try{return new Bp(pi.fromBase64String(t))}catch(t){throw new Vr(Ur.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},Bp.fromUint8Array=function(t){return new Bp(pi.fromUint8Array(t))},Bp.prototype.toBase64=function(){return this._byteString.toBase64()},Bp.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},Bp.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Bp.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},Bp),Pp=function(t){this._methodName=t},Lp=(Object.defineProperty(qp.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(qp.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),qp.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},qp.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},qp.prototype._compareTo=function(t){return Jr(this._lat,t._lat)||Jr(this._long,t._long)},qp),Mp=/^__.*__$/,Fp=(Vp.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ta(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ea(t,this.data,e,this.fieldTransforms)},Vp),jp=(Up.prototype.toMutation=function(t,e){return new Ta(t,this.data,this.fieldMask,e,this.fieldTransforms)},Up);function Up(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function Vp(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function qp(t,e){if(!isFinite(t)||t<-90||90<t)throw new Vr(Ur.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Vr(Ur.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function Bp(t){this._byteString=t}function zp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(t)}function Kp(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Qr()}}var Hp=(Object.defineProperty(Qp.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(Qp.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),Qp.prototype.xc=function(t){return new Qp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},Qp.prototype.Fc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.xc({path:e,kc:!1})).$c(t),e},Qp.prototype.Oc=function(t){var e;return t=null===(e=this.path)||void 0===e?void 0:e.child(t),(t=this.xc({path:t,kc:!1})).Cc(),t},Qp.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},Qp.prototype.Lc=function(t){return Tg(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},Qp.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},Qp.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},Qp.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Kp(this.Nc)&&Mp.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},Qp),Wp=(Gp.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Hp({Nc:t,methodName:e,qc:n,path:fi.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},Gp);function Gp(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ih(t)}function Qp(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function Yp(t){var e=t._freezeSettings(),n=Ih(t._databaseId);return new Wp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $p(t,e,n,r,i,o){var a,s,u=t.Uc((o=void 0===o?{}:o).merge||o.mergeFields?2:0,e,n,i);if(bg("Data must be an object, but it was:",u,r),r=vg(r,u),o.merge)a=new di(u.fieldMask),s=u.fieldTransforms;else if(o.mergeFields){for(var c=[],l=0,h=o.mergeFields;l<h.length;l++){var f=wg(e,h[l],n);if(!u.contains(f))throw new Vr(Ur.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Ig(c,f)||c.push(f)}a=new di(c),s=u.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,s=u.fieldTransforms;return new Fp(new Ki(r),a,s)}var Xp,Jp=(a(Zp,Xp=Pp),Zp.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},Zp.prototype.isEqual=function(t){return t instanceof Zp},Zp);function Zp(){return null!==Xp&&Xp.apply(this,arguments)||this}function tg(t,e,n){return new Hp({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var eg,ng,rg,ig,og=(a(fg,ig=Pp),fg.prototype._toFieldTransform=function(t){return new da(t.path,new Jo)},fg.prototype.isEqual=function(t){return t instanceof fg},fg),ag=(a(hg,rg=Pp),hg.prototype._toFieldTransform=function(t){var e=tg(this,t,!0),n=this.Kc.map((function(t){return yg(t,e)}));return n=new Zo(n),new da(t.path,n)},hg.prototype.isEqual=function(t){return this===t},hg),sg=(a(lg,ng=Pp),lg.prototype._toFieldTransform=function(t){var e=tg(this,t,!0),n=this.Kc.map((function(t){return yg(t,e)}));return n=new ia(n),new da(t.path,n)},lg.prototype.isEqual=function(t){return this===t},lg),ug=(a(cg,eg=Pp),cg.prototype._toFieldTransform=function(t){var e=new ua(t.R,Qo(t.R,this.Qc));return new da(t.path,e)},cg.prototype.isEqual=function(t){return this===t},cg);function cg(t,e){var n=this;return(n=eg.call(this,t)||this).Qc=e,n}function lg(t,e){var n=this;return(n=ng.call(this,t)||this).Kc=e,n}function hg(t,e){var n=this;return(n=rg.call(this,t)||this).Kc=e,n}function fg(){return null!==ig&&ig.apply(this,arguments)||this}function dg(t,e,n,r){var i=t.Uc(1,e,n);bg("Data must be an object, but it was:",i,r);var o=[],a=Ki.empty();return ai(r,(function(t,r){var s=Eg(e,t,n);r=E(r),t=i.Oc(s),r instanceof Jp?o.push(s):null!=(t=yg(r,t))&&(o.push(s),a.set(s,t))})),r=new di(o),new jp(a,r,i.fieldTransforms)}function pg(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[wg(e,r,n)],u=[i];if(o.length%2!=0)throw new Vr(Ur.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(wg(e,o[c])),u.push(o[c+1]);for(var l,h,f,d=[],p=Ki.empty(),g=s.length-1;0<=g;--g)Ig(d,s[g])||(l=s[g],h=E(h=u[g]),f=a.Oc(l),h instanceof Jp?d.push(l):null!=(f=yg(h,f))&&(d.push(l),p.set(l,f)));return i=new di(d),new jp(p,i,a.fieldTransforms)}function gg(t,e,n,r){return yg(n,t.Uc((r=void 0!==r&&r)?4:3,e))}function yg(t,e){if(mg(t=E(t)))return bg("Unsupported field value:",e,t),vg(t,e);if(t instanceof Pp)return function(t,e){if(!Kp(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");(t=t._toFieldTransform(e))&&e.fieldTransforms.push(t)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=yg(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e)}return function(e,n){if(null===(e=E(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qo(n.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var r=ei.fromDate(e);return{timestampValue:ms(n.R,r)}}if(e instanceof ei)return r=new ei(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:ms(n.R,r)};if(e instanceof Lp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Op)return{bytesValue:bs(n.R,e._byteString)};if(e instanceof up){r=n.databaseId;var i=e.firestore._databaseId;if(!i.isEqual(r))throw n.Lc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+r.projectId+"/"+r.database);return{referenceValue:_s(e.firestore._databaseId||n.databaseId,e._key.path)}}throw n.Lc("Unsupported field value: "+np(e))}(0,e)}function vg(t,e){var n={};return si(t)?e.path&&0<e.path.length&&e.fieldMask.push(e.path):ai(t,(function(t,r){null!=(r=yg(r,e.Fc(t)))&&(n[t]=r)})),{mapValue:{fields:n}}}function mg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ei||t instanceof Lp||t instanceof Op||t instanceof up||t instanceof Pp)}function bg(t,e,n){if(!mg(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=np(n))?e.Lc(t+" a custom object"):e.Lc(t+" "+n);var r}function wg(t,e,n){if((e=E(e))instanceof Dp)return e._internalPath;if("string"==typeof e)return Eg(t,e);throw Tg("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var _g=new RegExp("[~\\*/\\[\\]]");function Eg(t,e,n){if(0<=e.search(_g))throw Tg("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Dp.bind.apply(Dp,l([void 0],e.split(".")))))._internalPath}catch(r){throw Tg("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Tg(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i;return e="Function "+e+"() called with invalid data",n&&(e+=" (via `toFirestore()`)"),n="",(o||a)&&(n+=" (found",o&&(n+=" in field "+r),a&&(n+=" in document "+i),n+=")"),new Vr(Ur.INVALID_ARGUMENT,(e+=". ")+t+n)}function Ig(t,e){return t.some((function(t){return t.isEqual(e)}))}var Sg,kg=(Object.defineProperty(Ag.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(Ag.prototype,"ref",{get:function(){return new up(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),Ag.prototype.exists=function(){return null!==this._document},Ag.prototype.data=function(){if(this._document){if(this._converter){var t=new Cg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},Ag.prototype.get=function(t){if(this._document&&null!==(t=this._document.data.field(Rg("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t)},Ag),Cg=(a(Ng,Sg=kg),Ng.prototype.data=function(){return Sg.prototype.data.call(this)},Ng);function Ng(){return null!==Sg&&Sg.apply(this,arguments)||this}function Ag(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function Rg(t,e){return"string"==typeof e?Eg(t,e):(e instanceof Dp?e:e._delegate)._internalPath}var xg,Dg,Og=(Vg.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Vg),Pg=(a(Ug,Dg=kg),Ug.prototype.exists=function(){return Dg.prototype.exists.call(this)},Ug.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Lg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},Ug.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document&&null!==(t=this._document.data.field(Rg("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t,e.serverTimestamps)},Ug),Lg=(a(jg,xg=Pg),jg.prototype.data=function(t){return xg.prototype.data.call(this,t=void 0===t?{}:t)},jg),Mg=(Object.defineProperty(Fg.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(Fg.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(Fg.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),Fg.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Lg(n._firestore,n._userDataWriter,r.key,r,new Og(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},Fg.prototype.docChanges=function(t){if((t=!!(t=void 0===t?{}:t).includeMetadataChanges)&&this._snapshot.excludesMetadataChanges)throw new Vr(Ur.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Lg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Og(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Lg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Og(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qr()}}(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},Fg);function Fg(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Og(r.hasPendingWrites,r.fromCache),this.query=n}function jg(){return null!==xg&&xg.apply(this,arguments)||this}function Ug(t,e,n,r,i,o){var a=this;return(a=Dg.call(this,t,e,n,r,o)||this)._firestore=t,a._firestoreImpl=t,a.metadata=i,a}function Vg(t,e){this.hasPendingWrites=t,this.fromCache=e}function qg(t,e){return t instanceof Pg&&e instanceof Pg?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mg&&e instanceof Mg&&t._firestore===e._firestore&&bp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Bg(t){if(Po(t)&&0===t.explicitOrderBy.length)throw new Vr(Ur.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function zg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var Kg,Hg,Wg,Gg,Qg,Yg=(a(iy,Qg=D=function(){}),iy.prototype._apply=function(t){var e=Yp(t.firestore);return e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){sy(o,i);for(var a=[],s=0,u=o;s<u.length;s++){var c=u[s];a.push(ay(n,t,c))}l={arrayValue:{values:a}}}else l=ay(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||sy(o,i),l=gg(e,"where",o,"in"===i||"not-in"===i);var l=to.create(r,i,l);return function(t,e){if(e.g()){var n=Mo(t);if(null!==n&&!n.isEqual(e.field))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=Lo(t))&&uy(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new Vr(Ur.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Vr(Ur.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,l),l}(t._query,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc),new cp(t.firestore,t.converter,(e=(t=t._query).filters.concat([e]),new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},iy),$g=(a(ry,Gg=D),ry.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Co(e,n);return e=r,null!==Lo(n=t)||null!==(t=Mo(n))&&uy(0,t,e.field),r}(t._query,this.jc,this.zc);return new cp(t.firestore,t.converter,(e=(t=t._query).explicitOrderBy.concat([e]),new Ro(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},ry),Xg=(a(ny,Wg=D),ny.prototype._apply=function(t){return new cp(t.firestore,t.converter,Vo(t._query,this.Hc,this.Jc))},ny),Jg=(a(ey,Hg=D),ey.prototype._apply=function(t){var e=oy(t,this.type,this.Yc,this.Xc);return new cp(t.firestore,t.converter,(t=t._query,e=e,new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},ey),Zg=(a(ty,Kg=D),ty.prototype._apply=function(t){var e=oy(t,this.type,this.Yc,this.Xc);return new cp(t.firestore,t.converter,(t=t._query,e=e,new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},ty);function ty(t,e,n){var r=this;return(r=Kg.call(this)||this).type=t,r.Yc=e,r.Xc=n,r}function ey(t,e,n){var r=this;return(r=Hg.call(this)||this).type=t,r.Yc=e,r.Xc=n,r}function ny(t,e,n){var r=this;return(r=Wg.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function ry(t,e){var n=this;return(n=Gg.call(this)||this).jc=t,n.zc=e,n.type="orderBy",n}function iy(t,e,n){var r=this;return(r=Qg.call(this)||this).jc=t,r.Wc=e,r.Gc=n,r.type="where",r}function oy(t,e,n,r){if(n[0]=E(n[0]),n[0]instanceof kg)return function(t,n,r,i){if(!r)throw new Vr(Ur.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");for(var o=[],a=0,s=jo(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Fi(n,r.key));else{var c=r.data.field(u.field);if(Ii(c))throw new Vr(Ur.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c)throw u=u.field.canonicalString(),new Vr(Ur.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.");o.push(c)}}return new _o(o,i)}(t._query,t.firestore._databaseId,n[0]._document,r);var i=Yp(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Vr(Ur.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Fo(t)&&-1!==c.indexOf("/"))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(li.fromString(c));if(!Ai.isDocumentKey(l))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");l=new Ai(l),s.push(Fi(e,l))}else c=gg(n,r,c),s.push(c)}return new _o(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ay(t,e,n){if("string"==typeof(n=E(n))){if(""===n)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fo(e)&&-1!==n.indexOf("/"))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(li.fromString(n)),!Ai.isDocumentKey(e))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Fi(t,new Ai(e))}if(n instanceof up)return Fi(t,n._key);throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+np(n)+".")}function sy(t,e){if(!Array.isArray(t)||0===t.length)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function uy(t,e,n){if(!n.isEqual(e))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function cy(){}function ly(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}cy.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),xi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ei(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ti(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Qr()}},cy.prototype.convertObject=function(t,e){var n=this,r={};return ai(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},cy.prototype.convertGeoPoint=function(t){return new Lp(Ei(t.latitude),Ei(t.longitude))},cy.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},cy.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){return Ii(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Si(t));default:return null}},cy.prototype.convertTimestamp=function(t){return t=_i(t),new ei(t.seconds,t.nanos)},cy.prototype.convertDocumentKey=function(t,e){var n=li.fromString(t);return Yr(Bs(n)),t=new jd(n.get(1),n.get(3)),n=new Ai(n.popFirst(5)),t.isEqual(e)||Hr("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n};var hy,fy=(a(gy,hy=C=cy),gy.prototype.convertBytes=function(t){return new Op(t)},gy.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new up(this.firestore,null,t)},gy),dy=(py.prototype.set=function(t,e,n){return this._verifyNotCommitted(),e=ly((t=yy(t,this._firestore)).converter,e,n),n=$p(this._dataReader,"WriteBatch.set",t._key,e,null!==t.converter,n),this._mutations.push(n.toMutation(t._key,pa.none())),this},py.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this._verifyNotCommitted(),t=yy(t,this._firestore),e="string"==typeof(e=E(e))||e instanceof Dp?pg(this._dataReader,"WriteBatch.update",t._key,e,n,r):dg(this._dataReader,"WriteBatch.update",t._key,e),this._mutations.push(e.toMutation(t._key,pa.exists(!0))),this},py.prototype.delete=function(t){return this._verifyNotCommitted(),t=yy(t,this._firestore),this._mutations=this._mutations.concat(new Oa(t._key,pa.none())),this},py.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},py.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vr(Ur.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},py);function py(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Yp(t)}function gy(t){var e=this;return(e=hy.call(this)||this).firestore=t,e}function yy(t,e){if((t=E(t)).firestore!==e)throw new Vr(Ur.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var vy,my=(a(by,vy=C),by.prototype.convertBytes=function(t){return new Op(t)},by.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new up(this.firestore,null,t)},by);function by(t){var e=this;return(e=vy.call(this)||this).firestore=t,e}function wy(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=rp(t,up);var o=rp(t.firestore,Sp),a=Yp(o);return Ey(o,[("string"==typeof(e=E(e))||e instanceof Dp?pg(a,"updateDoc",t._key,e,n,r):dg(a,"updateDoc",t._key,e)).toMutation(t._key,pa.exists(!0))])}function _y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=E(t);var r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||Ep(e[i])||(r=e[i],i++);var o,a,s,l,h,f,d={includeMetadataChanges:r.includeMetadataChanges};return Ep(e[i])&&(o=e[i],e[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),e[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),e[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),t instanceof up?(s=rp(t.firestore,Sp),l=Do(t._key.path),f={next:function(n){e[i]&&e[i](Ty(s,t,n))},error:e[i+1],complete:e[i+2]}):(a=rp(t,cp),s=rp(a.firestore,Sp),l=a._query,h=new my(s),f={next:function(t){e[i]&&e[i](new Mg(s,h,a,t))},error:e[i+1],complete:e[i+2]},Bg(t._query)),function(t,e,n){var r=this,i=new gd(f),o=new wf(e,i,n);return t.asyncQueue.enqueueAndForget((function(){return u(r,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return e=vf,[4,Od(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))})),function(){i.Wo(),t.asyncQueue.enqueueAndForget((function(){return u(r,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return e=mf,[4,Od(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))}))}}(Np(s),l,d)}function Ey(t,e){return function(t,e){var n=this,r=new fu;return t.asyncQueue.enqueueAndForget((function(){return u(n,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return n=jf,[4,Dd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Np(t),e)}function Ty(t,e,n){var r=n.docs.get(e._key),i=new my(t);return new Pg(t,i,e._key,r,new Og(n.hasPendingWrites,n.fromCache),e.converter)}var Iy,Sy=(Cy.prototype.get=function(t){var e=this,n=yy(t,this._firestore),r=new fy(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Qr();if((t=t[0]).isFoundDocument())return new kg(e._firestore,r,t.key,t,n.converter);if(t.isNoDocument())return new kg(e._firestore,r,n._key,null,n.converter);throw Qr()}))},Cy.prototype.set=function(t,e,n){return e=ly((t=yy(t,this._firestore)).converter,e,n),n=$p(this._dataReader,"Transaction.set",t._key,e,null!==t.converter,n),this._transaction.set(t._key,n),this},Cy.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=yy(t,this._firestore),e="string"==typeof(e=E(e))||e instanceof Dp?pg(this._dataReader,"Transaction.update",t._key,e,n,r):dg(this._dataReader,"Transaction.update",t._key,e),this._transaction.update(t._key,e),this},Cy.prototype.delete=function(t){return t=yy(t,this._firestore),this._transaction.delete(t._key),this},a(ky,Iy=Cy),ky.prototype.get=function(t){var e=this,n=yy(t,this._firestore),r=new my(this._firestore);return Iy.prototype.get.call(this,t).then((function(t){return new Pg(e._firestore,r,n._key,t._document,new Og(!1,!1),n.converter)}))},ky);function ky(t,e){var n=this;return(n=Iy.call(this,t,e)||this)._firestore=t,n}function Cy(t,e){this._firestore=t,this._transaction=e,this._dataReader=Yp(t)}function Ny(){if("undefined"==typeof Uint8Array)throw new Vr(Ur.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ay(){if("undefined"==typeof atob)throw new Vr(Ur.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ry,xy=(jy.fromBase64String=function(t){return Ay(),new jy(Op.fromBase64String(t))},jy.fromUint8Array=function(t){return Ny(),new jy(Op.fromUint8Array(t))},jy.prototype.toBase64=function(){return Ay(),this._delegate.toBase64()},jy.prototype.toUint8Array=function(){return Ny(),this._delegate.toUint8Array()},jy.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},jy.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},jy),Dy=(Fy.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){xp(t=rp(t,Sp));var n=Np(t),r=t._freezeSettings();return Rp(n,t=new cd,new sd(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},Fy.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){xp(t=rp(t,Sp));var e=Np(t),n=t._freezeSettings();return Rp(e,t=new cd,new ud(t,n.cacheSizeBytes))}(t._delegate)},Fy.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Vr(Ur.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new fu;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return u(e,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return gu.yt()?(e=t+"main",[4,gu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(nl(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},Fy),Oy=(Object.defineProperty(My.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),My.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Wr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},My.prototype.useEmulator=function(t,e,n){!function(t,e,n,r){void 0===r&&(r={});var i=(t=rp(t,sp))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Wr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){if(n=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0;if(!(e=t.sub||t.user_id))throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");return t=s({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:e,user_id:e,firebase:{sign_in_provider:"custom",identities:{}}},t),[h.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),h.encodeString(JSON.stringify(t),!1),""].join(".")}(r.mockUserToken),!(r=r.mockUserToken.sub||r.mockUserToken.user_id))throw new Vr(Ur.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new qd(new Md(n,new Ml(r)))}}(this._delegate,t,e,n=void 0===n?{}:n)},My.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return u(e,void 0,void 0,(function(){var e,n;return c(this,(function(r){switch(r.label){case 0:return[4,Ad(t)];case 1:return e=r.sent(),[4,xd(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),(i=n).Or.delete(0),Vh(i))]}var i}))}))}))}(Np(rp(this._delegate,Sp)))},My.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return u(e,void 0,void 0,(function(){var e,n;return c(this,(function(r){switch(r.label){case 0:return[4,Ad(t)];case 1:return e=r.sent(),[4,xd(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return u(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return(e=t).Or.add(0),[4,qh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Np(rp(this._delegate,Sp)))},My.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Zd("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},My.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},My.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},My.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new fu;return t.asyncQueue.enqueueAndForget((function(){return u(e,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:return e=Bf,[4,Dd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Np(rp(this._delegate,Sp)))},My.prototype.onSnapshotsInSync=function(t){return t=t,function(t,e){var n=this,r=new gd(e);return t.asyncQueue.enqueueAndForget((function(){return u(n,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,Od(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return u(n,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,Od(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Np(rp(this._delegate,Sp)),Ep(t)?t:{next:t})},Object.defineProperty(My.prototype,"app",{get:function(){if(!this.tu)throw new Vr(Ur.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),My.prototype.collection=function(t){try{return new rv(this,yp(this._delegate,t))}catch(t){throw Gy(t,"collection()","Firestore.collection()")}},My.prototype.doc=function(t){try{return new Hy(this,vp(this._delegate,t))}catch(t){throw Gy(t,"doc()","Firestore.doc()")}},My.prototype.collectionGroup=function(t){try{return new tv(this,function(t,e){if(t=rp(t,sp),Xd("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new Vr(Ur.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new cp(t,null,(e=e,new Ro(li.emptyPath(),e)))}(this._delegate,t))}catch(t){throw Gy(t,"collectionGroup()","Firestore.collectionGroup()")}},My.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new fu;return t.asyncQueue.enqueueAndForget((function(){return u(n,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return[4,Nd(t).then((function(t){return t.datastore}))];case 1:return n=i.sent(),new md(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Np(e=this._delegate),(function(r){return r=new Sy(e,r),t(new Uy(n,r))}))},My.prototype.batch=function(){var t=this;return Np(this._delegate),new Vy(new dy(this._delegate,(function(e){return Ey(t._delegate,e)})))},My.prototype.loadBundle=function(t){throw new Vr(Ur.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},My.prototype.namedQuery=function(t){throw new Vr(Ur.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},My),Py=(a(Ly,Ry=C),Ly.prototype.convertBytes=function(t){return new xy(new Op(t))},Ly.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),Hy.eu(t,this.firestore,null)},Ly);function Ly(t){var e=this;return(e=Ry.call(this)||this).firestore=t,e}function My(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof jd||(this.tu=t)}function Fy(){}function jy(t){this._delegate=t}var Uy=(Ky.prototype.get=function(t){var e=this,n=lv(t);return this._delegate.get(n).then((function(t){return new Jy(e._firestore,new Pg(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},Ky.prototype.set=function(t,e,n){return t=lv(t),n?(Jd("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},Ky.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=lv(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,l([o,e,n],r)),this},Ky.prototype.delete=function(t){return t=lv(t),this._delegate.delete(t),this},Ky),Vy=(zy.prototype.set=function(t,e,n){return t=lv(t),n?(Jd("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},zy.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=lv(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,l([o,e,n],r)),this},zy.prototype.delete=function(t){return t=lv(t),this._delegate.delete(t),this},zy.prototype.commit=function(){return this._delegate.commit()},zy),qy=(By.prototype.fromFirestore=function(t,e){return t=new Lg(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null),this._delegate.fromFirestore(new Zy(this._firestore,t),null!=e?e:{})},By.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},By.nu=function(t,e){var n=By.su,r=n.get(t);return r||(r=new WeakMap,n.set(t,r)),(n=r.get(e))||(n=new By(t,new Py(t),e),r.set(e,n)),n},By);function By(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}function zy(t){this._delegate=t}function Ky(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Py(t)}qy.su=new WeakMap;var Hy=(Wy.iu=function(t,e,n){if(t.length%2!=0)throw new Vr(Ur.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new Wy(e,new up(e._delegate,n,new Ai(t)))},Wy.eu=function(t,e,n){return new Wy(e,new up(e._delegate,n,t))},Object.defineProperty(Wy.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(Wy.prototype,"parent",{get:function(){return new rv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(Wy.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Wy.prototype.collection=function(t){try{return new rv(this.firestore,yp(this._delegate,t))}catch(t){throw Gy(t,"collection()","DocumentReference.collection()")}},Wy.prototype.isEqual=function(t){return(t=E(t))instanceof up&&mp(this._delegate,t)},Wy.prototype.set=function(t,e){e=Jd("DocumentReference.set",e);try{return function(t,e,n){t=rp(t,up);var r=rp(t.firestore,Sp);return e=ly(t.converter,e,n),Ey(r,[$p(Yp(r),"setDoc",t._key,e,null!==t.converter,n).toMutation(t._key,pa.none())])}(this._delegate,t,e)}catch(t){throw Gy(t,"setDoc()","DocumentReference.set()")}},Wy.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?wy(this._delegate,t):wy.apply(void 0,l([this._delegate,t,e],n))}catch(t){throw Gy(t,"updateDoc()","DocumentReference.update()")}},Wy.prototype.delete=function(){return Ey(rp((t=this._delegate).firestore,Sp),[new Oa(t._key,pa.none())]);var t},Wy.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qy(e),i=Yy(e,(function(e){return new Jy(t.firestore,new Pg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return _y(this._delegate,r,i)},Wy.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rp(t,up);var e=rp(t.firestore,Sp),n=Np(e),r=new my(e);return function(t,e){var n=this,r=new fu;return t.asyncQueue.enqueueAndForget((function(){return u(n,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=e,(s=t).persistence.runTransaction("read document","readonly",(function(t){return s.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Vr(Ur.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=uf(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s}))}))},[4,Rd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Pg(e,r,t._key,n,new Og(null!==n&&n.hasLocalMutations,!0),t.converter)}))}:"server"===(null==t?void 0:t.source)?function(t){t=rp(t,up);var e=rp(t.firestore,Sp);return Pd(Np(e),t._key,{source:"server"}).then((function(n){return Ty(e,t,n)}))}:function(t){t=rp(t,up);var e=rp(t.firestore,Sp);return Pd(Np(e),t._key).then((function(n){return Ty(e,t,n)}))})(this._delegate).then((function(t){return new Jy(e.firestore,new Pg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},Wy.prototype.withConverter=function(t){return new Wy(this.firestore,t?this._delegate.withConverter(qy.nu(this.firestore,t)):this._delegate.withConverter(null))},Wy);function Wy(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Py(t)}function Gy(t,e,n){return t.message=t.message.replace(e,n),t}function Qy(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ep(r))return r}return{}}function Yy(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=Ep(t[0])?t[0]:Ep(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var $y,Xy,Jy=(Object.defineProperty(cv.prototype,"ref",{get:function(){return new Hy(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(cv.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(cv.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(cv.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),cv.prototype.data=function(t){return this._delegate.data(t)},cv.prototype.get=function(t,e){return this._delegate.get(t,e)},cv.prototype.isEqual=function(t){return qg(this._delegate,t._delegate)},cv),Zy=(a(uv,Xy=Jy),uv.prototype.data=function(t){return this._delegate.data(t)},uv),tv=(sv.prototype.where=function(t,e,n){try{return new sv(this.firestore,zg(this._delegate,(r=n,i=e,o=Rg("where",t),new Yg(o,i,r))))}catch(t){throw Gy(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},sv.prototype.orderBy=function(t,e){try{return new sv(this.firestore,zg(this._delegate,(n=void 0===e?"asc":e,r=Rg("orderBy",t),new $g(r,n))))}catch(t){throw Gy(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},sv.prototype.limit=function(t){try{return new sv(this.firestore,zg(this._delegate,(ip("limit",e=t),new Xg("limit",e,"F"))))}catch(t){throw Gy(t,"limit()","Query.limit()")}var e},sv.prototype.limitToLast=function(t){try{return new sv(this.firestore,zg(this._delegate,(ip("limitToLast",e=t),new Xg("limitToLast",e,"L"))))}catch(t){throw Gy(t,"limitToLast()","Query.limitToLast()")}var e},sv.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new sv(this.firestore,zg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jg("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Gy(t,"startAt()","Query.startAt()")}},sv.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new sv(this.firestore,zg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jg("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Gy(t,"startAfter()","Query.startAfter()")}},sv.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new sv(this.firestore,zg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zg("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Gy(t,"endBefore()","Query.endBefore()")}},sv.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new sv(this.firestore,zg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zg("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Gy(t,"endAt()","Query.endAt()")}},sv.prototype.isEqual=function(t){return bp(this._delegate,t._delegate)},sv.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rp(t,cp);var e=rp(t.firestore,Sp),n=Np(e),r=new my(e);return function(t,e){var n=this,r=new fu;return t.asyncQueue.enqueueAndForget((function(){return u(n,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return u(this,void 0,void 0,(function(){var r,i,o;return c(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,wl(t,e,!0)];case 1:return o=a.sent(),r=new xf(e,o.Bn),i=r._o(o.documents),i=r.applyChanges(i,!1),n.resolve(i.snapshot),[3,3];case 2:return i=a.sent(),o=uf(i,"Failed to execute query '"+e+" against cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,Rd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Mg(e,r,t,n)}))}:"server"===(null==t?void 0:t.source)?function(t){t=rp(t,cp);var e=rp(t.firestore,Sp),n=Np(e),r=new my(e);return Ld(n,t._query,{source:"server"}).then((function(n){return new Mg(e,r,t,n)}))}:function(t){t=rp(t,cp);var e=rp(t.firestore,Sp),n=Np(e),r=new my(e);return Bg(t._query),Ld(n,t._query).then((function(n){return new Mg(e,r,t,n)}))})(this._delegate).then((function(t){return new nv(e.firestore,new Mg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},sv.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Qy(e),i=Yy(e,(function(e){return new nv(t.firestore,new Mg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return _y(this._delegate,r,i)},sv.prototype.withConverter=function(t){return new sv(this.firestore,t?this._delegate.withConverter(qy.nu(this.firestore,t)):this._delegate.withConverter(null))},sv),ev=(Object.defineProperty(av.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(av.prototype,"doc",{get:function(){return new Zy(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(av.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(av.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),av),nv=(Object.defineProperty(ov.prototype,"query",{get:function(){return new tv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(ov.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(ov.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(ov.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(ov.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Zy(t._firestore,e)}))},enumerable:!1,configurable:!0}),ov.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new ev(e._firestore,t)}))},ov.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Zy(n._firestore,r))}))},ov.prototype.isEqual=function(t){return qg(this._delegate,t._delegate)},ov),rv=(a(iv,$y=tv),Object.defineProperty(iv.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(iv.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(iv.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Hy(this.firestore,t):null},enumerable:!1,configurable:!0}),iv.prototype.doc=function(t){try{return new Hy(this.firestore,void 0===t?vp(this._delegate):vp(this._delegate,t))}catch(t){throw Gy(t,"doc()","CollectionReference.doc()")}},iv.prototype.add=function(t){var e,n,r,i=this;return n=t,t=rp((e=this._delegate).firestore,Sp),r=vp(e),n=ly(e.converter,n),Ey(t,[$p(Yp(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,pa.exists(!1))]).then((function(){return r})).then((function(t){return new Hy(i.firestore,t)}))},iv.prototype.isEqual=function(t){return mp(this._delegate,t._delegate)},iv.prototype.withConverter=function(t){return new iv(this.firestore,t?this._delegate.withConverter(qy.nu(this.firestore,t)):this._delegate.withConverter(null))},iv);function iv(t,e){var n=this;return(n=$y.call(this,t,e)||this).firestore=t,n._delegate=e,n}function ov(t,e){this._firestore=t,this._delegate=e}function av(t,e){this._firestore=t,this._delegate=e}function sv(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Py(t)}function uv(){return null!==Xy&&Xy.apply(this,arguments)||this}function cv(t,e){this._firestore=t,this._delegate=e}function lv(t){return rp(t,up)}function hv(t){this._delegate=t}function fv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Dp.bind.apply(Dp,l([void 0],t)))}function dv(t){return e=this._delegate,n=t,r=Np(e=rp(e,Sp)),t=new Ip,function(t,e,r){var i,o=this,a=(i=n,e=Ih(e),i=function(t){if(t instanceof Uint8Array)return pd(t,void 0);if(t instanceof ArrayBuffer)return pd(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new yd(i,e));t.asyncQueue.enqueueAndForget((function(){return u(o,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return e=rd,[4,Dd(t)];case 1:return e.apply(void 0,[n.sent(),a,r]),[2]}}))}))}))}(r,e._databaseId,t),t;var e,n,r}function pv(t){var e=this,n=this._delegate;return t=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return u(n,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,Rd(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Np(n=rp(n,Sp)),t).then((function(t){return t?new cp(n,null,t.query):null})).then((function(t){return t?new tv(e,t):null}))}fv.documentId=function(){return new fv(fi.keyField().canonicalString())},fv.prototype.isEqual=function(t){return(t=E(t))instanceof Dp&&this._delegate._internalPath.isEqual(t._internalPath)},D=fv,hv.serverTimestamp=function(){var t=new og("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new hv(t)},hv.delete=function(){var t=new Jp("deleteField");return t._methodName="FieldValue.delete",new hv(t)},hv.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ag("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new hv(n)},hv.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sg("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new hv(n)},hv.increment=function(t){return(t=new ug("increment",t))._methodName="FieldValue.increment",new hv(t)},hv.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},C=hv;var gv=(yv.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},yv.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},yv.prototype.setServiceProps=function(t){return this.serviceProps=t,this},yv.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},yv);function yv(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var vv,mv,bv={Firestore:Oy,GeoPoint:Lp,Timestamp:ei,Blob:xy,Transaction:Uy,WriteBatch:Vy,DocumentReference:Hy,DocumentSnapshot:Jy,Query:tv,QueryDocumentSnapshot:Zy,QuerySnapshot:nv,CollectionReference:rv,FieldPath:D,FieldValue:C,setLogLevel:function(t){qr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(vv=i.default).INTERNAL.registerComponent(new gv("firestore",(function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new Oy(e,new Sp(e,t),new Dy)}),"PUBLIC").setServiceProps(Object.assign({},bv))),vv.registerVersion("@firebase/firestore","2.3.10"),(mv=Oy).prototype.loadBundle=dv,mv.prototype.namedQuery=pv}).apply(this,arguments)}catch(r){throw console.error(r),new Error("Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.")}}(n(58))}).call(this,n(12),n(21))},,,,function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",(function(){return L}));var r=n(3),i=n(8),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var u=Object(r.g)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=Object(r.e)(c.value,2),h=l[0],f=l[1];a===this.normalizeInstanceIdentifier(h)&&f.resolve(s)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var a=Object(r.g)(o),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=a),this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var u,c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var h,f=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(h||(h={}));var d,p={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},g=h.INFO,y=((u={})[h.DEBUG]="log",u[h.VERBOSE]="log",u[h.INFO]="info",u[h.WARN]="warn",u[h.ERROR]="error",u),v=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=y[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,l(["["+i+"]  "+t.name+":"],n))}},m=function(){function t(t){this.name=t,this._logLevel=g,this._logHandler=v,this._userLogHandler=null,f.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in h))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?p[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,h.DEBUG],t)),this._logHandler.apply(this,l([this,h.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,h.VERBOSE],t)),this._logHandler.apply(this,l([this,h.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,h.INFO],t)),this._logHandler.apply(this,l([this,h.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,h.WARN],t)),this._logHandler.apply(this,l([this,h.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,l([this,h.ERROR],t)),this._logHandler.apply(this,l([this,h.ERROR],t))},t}();function b(t){f.forEach((function(e){e.setLogLevel(t)}))}var w,_=((d={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",d["bad-app-name"]="Illegal App name: '{$appName}",d["duplicate-app"]="Firebase App named '{$appName}' already exists",d["app-deleted"]="Firebase App named '{$appName}' already deleted",d["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",d["invalid-log-argument"]="First argument to `onLog` must be null or a function.",d),E=new i.b("app","Firebase",_),T="@firebase/app",I="[DEFAULT]",S=((w={})[T]="fire-core",w["@firebase/analytics"]="fire-analytics",w["@firebase/app-check"]="fire-app-check",w["@firebase/auth"]="fire-auth",w["@firebase/database"]="fire-rtdb",w["@firebase/functions"]="fire-fn",w["@firebase/installations"]="fire-iid",w["@firebase/messaging"]="fire-fcm",w["@firebase/performance"]="fire-perf",w["@firebase/remote-config"]="fire-rc",w["@firebase/storage"]="fire-gcs",w["@firebase/firestore"]="fire-fst",w["fire-js"]="fire-js",w["firebase-wrapper"]="fire-js-all",w),k=new m("@firebase/app"),C=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(i.e)(t),this.container=new c(e.name),this._addComponent(new o("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=I),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=I),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){k.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw E.create("app-deleted",{appName:this.name_})},t}();C.prototype.name&&C.prototype.options||C.prototype.delete||console.log("dc");function N(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,o){void 0===o&&(o={});if("object"!==typeof o||null===o){o={name:o}}var a=o;void 0===a.name&&(a.name=I);var s=a.name;if("string"!==typeof s||!s)throw E.create("bad-app-name",{appName:String(s)});if(Object(i.c)(e,s))throw E.create("duplicate-app",{appName:s});var u=new t(n,a,r);return e[s]=u,u},app:a,registerVersion:function(t,e,n){var r,i=null!==(r=S[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void k.warn(c.join(" "))}s(new o(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:b,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw E.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=p[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:h[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=f;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function a(t){if(t=t||I,!Object(i.c)(e,t))throw E.create("no-app",{appName:t});return e[t]}function s(o){var s=o.name;if(n.has(s))return k.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=a()),"function"!==typeof t[s])throw E.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Object(i.f)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var h=l[c];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),a.App=t,r}var A=function t(){var e=N(C);return e.INTERNAL=Object(r.a)(Object(r.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(i.f)(e,t)},createSubscribe:i.d,ErrorFactory:i.b,deepExtend:i.f}),e}(),R=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(i.g)()&&void 0!==self.firebase){k.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var x=self.firebase.SDK_VERSION;x&&x.indexOf("LITE")>=0&&k.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var D=A.initializeApp;A.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(i.h)()&&k.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),D.apply(void 0,t)};var O,P,L=A;(O=L).INTERNAL.registerComponent(new o("platform-logger",(function(t){return new R(t)}),"PRIVATE")),O.registerVersion(T,"0.6.29",P),O.registerVersion("fire-js","");e.default=L}]]);
//# sourceMappingURL=2.2600eea9.chunk.js.map